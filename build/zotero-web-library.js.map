{"version":3,"sources":["libzoterojs.js","/source/es6-promise.js","/source/spark-md5.js","/source/Base.js","/source/Ajax.js","/source/ApiObject.js","/source/ApiResponse.js","/source/Net.js","/source/Library.js","/source/Container.js","/source/Collections.js","/source/Items.js","/source/Tags.js","/source/Groups.js","/source/Searches.js","/source/Deleted.js","/source/Collection.js","/source/Item.js","/source/ItemMaps.js","/source/Tag.js","/source/Search.js","/source/Group.js","/source/User.js","/source/Utils.js","/source/Url.js","/source/File.js","/source/Idb.js","/source/CollectionFunctions.js","/source/ItemFunctions.js","/source/TagFunctions.js","/source/LibraryCache.js","/source/Preferences.js","_zoterowwwInit.js","State.js","Delay.js","eventful.js","format.js","init.js","misc.js","readstate.js","render.js","updatestate.js","bootstrapdialogs.js","jquery.floatThead.js","addToCollectionDialog.js","breadcrumbs.js","browseLibrary.js","chooseSortingDialog.js","citeItemDialog.js","collections.js","controlpanel.js","createCollectionDialog.js","createItemDialog.js","deleteCollectionDialog.js","exportItems.js","feedLink.js","filterGuide.js","inviteToGroup.js","item.js","items.js","library.js","librarySettingsDialog.js","loadingError.js","loadingSpinner.js","profileGroupsList.js","recentItems.js","searchbox.js","sendToLibraryDialog.js","tags.js","updateCollectionDialog.js","uploadDialog.js","userGroupInfo.js","_zoteroLibraryUrl.js","zoteroPages.js"],"names":[],"mappings":"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","file":"zotero-web-library.js","sourcesContent":["'use strict';\n\nfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\n/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE\n * @version   3.0.2\n */\n\n(function () {\n  \"use strict\";\n\n  function lib$es6$promise$utils$$objectOrFunction(x) {\n    return typeof x === 'function' || (typeof x === 'undefined' ? 'undefined' : _typeof(x)) === 'object' && x !== null;\n  }\n\n  function lib$es6$promise$utils$$isFunction(x) {\n    return typeof x === 'function';\n  }\n\n  function lib$es6$promise$utils$$isMaybeThenable(x) {\n    return (typeof x === 'undefined' ? 'undefined' : _typeof(x)) === 'object' && x !== null;\n  }\n\n  var lib$es6$promise$utils$$_isArray;\n  if (!Array.isArray) {\n    lib$es6$promise$utils$$_isArray = function lib$es6$promise$utils$$_isArray(x) {\n      return Object.prototype.toString.call(x) === '[object Array]';\n    };\n  } else {\n    lib$es6$promise$utils$$_isArray = Array.isArray;\n  }\n\n  var lib$es6$promise$utils$$isArray = lib$es6$promise$utils$$_isArray;\n  var lib$es6$promise$asap$$len = 0;\n  var lib$es6$promise$asap$$toString = ({}).toString;\n  var lib$es6$promise$asap$$vertxNext;\n  var lib$es6$promise$asap$$customSchedulerFn;\n\n  var lib$es6$promise$asap$$asap = function asap(callback, arg) {\n    lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len] = callback;\n    lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len + 1] = arg;\n    lib$es6$promise$asap$$len += 2;\n    if (lib$es6$promise$asap$$len === 2) {\n      // If len is 2, that means that we need to schedule an async flush.\n      // If additional callbacks are queued before the queue is flushed, they\n      // will be processed by this flush that we are scheduling.\n      if (lib$es6$promise$asap$$customSchedulerFn) {\n        lib$es6$promise$asap$$customSchedulerFn(lib$es6$promise$asap$$flush);\n      } else {\n        lib$es6$promise$asap$$scheduleFlush();\n      }\n    }\n  };\n\n  function lib$es6$promise$asap$$setScheduler(scheduleFn) {\n    lib$es6$promise$asap$$customSchedulerFn = scheduleFn;\n  }\n\n  function lib$es6$promise$asap$$setAsap(asapFn) {\n    lib$es6$promise$asap$$asap = asapFn;\n  }\n\n  var lib$es6$promise$asap$$browserWindow = typeof window !== 'undefined' ? window : undefined;\n  var lib$es6$promise$asap$$browserGlobal = lib$es6$promise$asap$$browserWindow || {};\n  var lib$es6$promise$asap$$BrowserMutationObserver = lib$es6$promise$asap$$browserGlobal.MutationObserver || lib$es6$promise$asap$$browserGlobal.WebKitMutationObserver;\n  var lib$es6$promise$asap$$isNode = typeof process !== 'undefined' && ({}).toString.call(process) === '[object process]';\n\n  // test for web worker but not in IE10\n  var lib$es6$promise$asap$$isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\n\n  // node\n  function lib$es6$promise$asap$$useNextTick() {\n    // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n    // see https://github.com/cujojs/when/issues/410 for details\n    return function () {\n      process.nextTick(lib$es6$promise$asap$$flush);\n    };\n  }\n\n  // vertx\n  function lib$es6$promise$asap$$useVertxTimer() {\n    return function () {\n      lib$es6$promise$asap$$vertxNext(lib$es6$promise$asap$$flush);\n    };\n  }\n\n  function lib$es6$promise$asap$$useMutationObserver() {\n    var iterations = 0;\n    var observer = new lib$es6$promise$asap$$BrowserMutationObserver(lib$es6$promise$asap$$flush);\n    var node = document.createTextNode('');\n    observer.observe(node, { characterData: true });\n\n    return function () {\n      node.data = iterations = ++iterations % 2;\n    };\n  }\n\n  // web worker\n  function lib$es6$promise$asap$$useMessageChannel() {\n    var channel = new MessageChannel();\n    channel.port1.onmessage = lib$es6$promise$asap$$flush;\n    return function () {\n      channel.port2.postMessage(0);\n    };\n  }\n\n  function lib$es6$promise$asap$$useSetTimeout() {\n    return function () {\n      setTimeout(lib$es6$promise$asap$$flush, 1);\n    };\n  }\n\n  var lib$es6$promise$asap$$queue = new Array(1000);\n  function lib$es6$promise$asap$$flush() {\n    for (var i = 0; i < lib$es6$promise$asap$$len; i += 2) {\n      var callback = lib$es6$promise$asap$$queue[i];\n      var arg = lib$es6$promise$asap$$queue[i + 1];\n\n      callback(arg);\n\n      lib$es6$promise$asap$$queue[i] = undefined;\n      lib$es6$promise$asap$$queue[i + 1] = undefined;\n    }\n\n    lib$es6$promise$asap$$len = 0;\n  }\n\n  function lib$es6$promise$asap$$attemptVertx() {\n    try {\n      var r = require;\n      var vertx = r('vertx');\n      lib$es6$promise$asap$$vertxNext = vertx.runOnLoop || vertx.runOnContext;\n      return lib$es6$promise$asap$$useVertxTimer();\n    } catch (e) {\n      return lib$es6$promise$asap$$useSetTimeout();\n    }\n  }\n\n  var lib$es6$promise$asap$$scheduleFlush;\n  // Decide what async method to use to triggering processing of queued callbacks:\n  if (lib$es6$promise$asap$$isNode) {\n    lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useNextTick();\n  } else if (lib$es6$promise$asap$$BrowserMutationObserver) {\n    lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMutationObserver();\n  } else if (lib$es6$promise$asap$$isWorker) {\n    lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMessageChannel();\n  } else if (lib$es6$promise$asap$$browserWindow === undefined && typeof require === 'function') {\n    lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$attemptVertx();\n  } else {\n    lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useSetTimeout();\n  }\n\n  function lib$es6$promise$$internal$$noop() {}\n\n  var lib$es6$promise$$internal$$PENDING = void 0;\n  var lib$es6$promise$$internal$$FULFILLED = 1;\n  var lib$es6$promise$$internal$$REJECTED = 2;\n\n  var lib$es6$promise$$internal$$GET_THEN_ERROR = new lib$es6$promise$$internal$$ErrorObject();\n\n  function lib$es6$promise$$internal$$selfFulfillment() {\n    return new TypeError(\"You cannot resolve a promise with itself\");\n  }\n\n  function lib$es6$promise$$internal$$cannotReturnOwn() {\n    return new TypeError('A promises callback cannot return that same promise.');\n  }\n\n  function lib$es6$promise$$internal$$getThen(promise) {\n    try {\n      return promise.then;\n    } catch (error) {\n      lib$es6$promise$$internal$$GET_THEN_ERROR.error = error;\n      return lib$es6$promise$$internal$$GET_THEN_ERROR;\n    }\n  }\n\n  function lib$es6$promise$$internal$$tryThen(then, value, fulfillmentHandler, rejectionHandler) {\n    try {\n      then.call(value, fulfillmentHandler, rejectionHandler);\n    } catch (e) {\n      return e;\n    }\n  }\n\n  function lib$es6$promise$$internal$$handleForeignThenable(promise, thenable, then) {\n    lib$es6$promise$asap$$asap(function (promise) {\n      var sealed = false;\n      var error = lib$es6$promise$$internal$$tryThen(then, thenable, function (value) {\n        if (sealed) {\n          return;\n        }\n        sealed = true;\n        if (thenable !== value) {\n          lib$es6$promise$$internal$$resolve(promise, value);\n        } else {\n          lib$es6$promise$$internal$$fulfill(promise, value);\n        }\n      }, function (reason) {\n        if (sealed) {\n          return;\n        }\n        sealed = true;\n\n        lib$es6$promise$$internal$$reject(promise, reason);\n      }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n      if (!sealed && error) {\n        sealed = true;\n        lib$es6$promise$$internal$$reject(promise, error);\n      }\n    }, promise);\n  }\n\n  function lib$es6$promise$$internal$$handleOwnThenable(promise, thenable) {\n    if (thenable._state === lib$es6$promise$$internal$$FULFILLED) {\n      lib$es6$promise$$internal$$fulfill(promise, thenable._result);\n    } else if (thenable._state === lib$es6$promise$$internal$$REJECTED) {\n      lib$es6$promise$$internal$$reject(promise, thenable._result);\n    } else {\n      lib$es6$promise$$internal$$subscribe(thenable, undefined, function (value) {\n        lib$es6$promise$$internal$$resolve(promise, value);\n      }, function (reason) {\n        lib$es6$promise$$internal$$reject(promise, reason);\n      });\n    }\n  }\n\n  function lib$es6$promise$$internal$$handleMaybeThenable(promise, maybeThenable) {\n    if (maybeThenable.constructor === promise.constructor) {\n      lib$es6$promise$$internal$$handleOwnThenable(promise, maybeThenable);\n    } else {\n      var then = lib$es6$promise$$internal$$getThen(maybeThenable);\n\n      if (then === lib$es6$promise$$internal$$GET_THEN_ERROR) {\n        lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$GET_THEN_ERROR.error);\n      } else if (then === undefined) {\n        lib$es6$promise$$internal$$fulfill(promise, maybeThenable);\n      } else if (lib$es6$promise$utils$$isFunction(then)) {\n        lib$es6$promise$$internal$$handleForeignThenable(promise, maybeThenable, then);\n      } else {\n        lib$es6$promise$$internal$$fulfill(promise, maybeThenable);\n      }\n    }\n  }\n\n  function lib$es6$promise$$internal$$resolve(promise, value) {\n    if (promise === value) {\n      lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$selfFulfillment());\n    } else if (lib$es6$promise$utils$$objectOrFunction(value)) {\n      lib$es6$promise$$internal$$handleMaybeThenable(promise, value);\n    } else {\n      lib$es6$promise$$internal$$fulfill(promise, value);\n    }\n  }\n\n  function lib$es6$promise$$internal$$publishRejection(promise) {\n    if (promise._onerror) {\n      promise._onerror(promise._result);\n    }\n\n    lib$es6$promise$$internal$$publish(promise);\n  }\n\n  function lib$es6$promise$$internal$$fulfill(promise, value) {\n    if (promise._state !== lib$es6$promise$$internal$$PENDING) {\n      return;\n    }\n\n    promise._result = value;\n    promise._state = lib$es6$promise$$internal$$FULFILLED;\n\n    if (promise._subscribers.length !== 0) {\n      lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish, promise);\n    }\n  }\n\n  function lib$es6$promise$$internal$$reject(promise, reason) {\n    if (promise._state !== lib$es6$promise$$internal$$PENDING) {\n      return;\n    }\n    promise._state = lib$es6$promise$$internal$$REJECTED;\n    promise._result = reason;\n\n    lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publishRejection, promise);\n  }\n\n  function lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection) {\n    var subscribers = parent._subscribers;\n    var length = subscribers.length;\n\n    parent._onerror = null;\n\n    subscribers[length] = child;\n    subscribers[length + lib$es6$promise$$internal$$FULFILLED] = onFulfillment;\n    subscribers[length + lib$es6$promise$$internal$$REJECTED] = onRejection;\n\n    if (length === 0 && parent._state) {\n      lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish, parent);\n    }\n  }\n\n  function lib$es6$promise$$internal$$publish(promise) {\n    var subscribers = promise._subscribers;\n    var settled = promise._state;\n\n    if (subscribers.length === 0) {\n      return;\n    }\n\n    var child,\n        callback,\n        detail = promise._result;\n\n    for (var i = 0; i < subscribers.length; i += 3) {\n      child = subscribers[i];\n      callback = subscribers[i + settled];\n\n      if (child) {\n        lib$es6$promise$$internal$$invokeCallback(settled, child, callback, detail);\n      } else {\n        callback(detail);\n      }\n    }\n\n    promise._subscribers.length = 0;\n  }\n\n  function lib$es6$promise$$internal$$ErrorObject() {\n    this.error = null;\n  }\n\n  var lib$es6$promise$$internal$$TRY_CATCH_ERROR = new lib$es6$promise$$internal$$ErrorObject();\n\n  function lib$es6$promise$$internal$$tryCatch(callback, detail) {\n    try {\n      return callback(detail);\n    } catch (e) {\n      lib$es6$promise$$internal$$TRY_CATCH_ERROR.error = e;\n      return lib$es6$promise$$internal$$TRY_CATCH_ERROR;\n    }\n  }\n\n  function lib$es6$promise$$internal$$invokeCallback(settled, promise, callback, detail) {\n    var hasCallback = lib$es6$promise$utils$$isFunction(callback),\n        value,\n        error,\n        succeeded,\n        failed;\n\n    if (hasCallback) {\n      value = lib$es6$promise$$internal$$tryCatch(callback, detail);\n\n      if (value === lib$es6$promise$$internal$$TRY_CATCH_ERROR) {\n        failed = true;\n        error = value.error;\n        value = null;\n      } else {\n        succeeded = true;\n      }\n\n      if (promise === value) {\n        lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$cannotReturnOwn());\n        return;\n      }\n    } else {\n      value = detail;\n      succeeded = true;\n    }\n\n    if (promise._state !== lib$es6$promise$$internal$$PENDING) {\n      // noop\n    } else if (hasCallback && succeeded) {\n        lib$es6$promise$$internal$$resolve(promise, value);\n      } else if (failed) {\n        lib$es6$promise$$internal$$reject(promise, error);\n      } else if (settled === lib$es6$promise$$internal$$FULFILLED) {\n        lib$es6$promise$$internal$$fulfill(promise, value);\n      } else if (settled === lib$es6$promise$$internal$$REJECTED) {\n        lib$es6$promise$$internal$$reject(promise, value);\n      }\n  }\n\n  function lib$es6$promise$$internal$$initializePromise(promise, resolver) {\n    try {\n      resolver(function resolvePromise(value) {\n        lib$es6$promise$$internal$$resolve(promise, value);\n      }, function rejectPromise(reason) {\n        lib$es6$promise$$internal$$reject(promise, reason);\n      });\n    } catch (e) {\n      lib$es6$promise$$internal$$reject(promise, e);\n    }\n  }\n\n  function lib$es6$promise$enumerator$$Enumerator(Constructor, input) {\n    var enumerator = this;\n\n    enumerator._instanceConstructor = Constructor;\n    enumerator.promise = new Constructor(lib$es6$promise$$internal$$noop);\n\n    if (enumerator._validateInput(input)) {\n      enumerator._input = input;\n      enumerator.length = input.length;\n      enumerator._remaining = input.length;\n\n      enumerator._init();\n\n      if (enumerator.length === 0) {\n        lib$es6$promise$$internal$$fulfill(enumerator.promise, enumerator._result);\n      } else {\n        enumerator.length = enumerator.length || 0;\n        enumerator._enumerate();\n        if (enumerator._remaining === 0) {\n          lib$es6$promise$$internal$$fulfill(enumerator.promise, enumerator._result);\n        }\n      }\n    } else {\n      lib$es6$promise$$internal$$reject(enumerator.promise, enumerator._validationError());\n    }\n  }\n\n  lib$es6$promise$enumerator$$Enumerator.prototype._validateInput = function (input) {\n    return lib$es6$promise$utils$$isArray(input);\n  };\n\n  lib$es6$promise$enumerator$$Enumerator.prototype._validationError = function () {\n    return new Error('Array Methods must be provided an Array');\n  };\n\n  lib$es6$promise$enumerator$$Enumerator.prototype._init = function () {\n    this._result = new Array(this.length);\n  };\n\n  var lib$es6$promise$enumerator$$default = lib$es6$promise$enumerator$$Enumerator;\n\n  lib$es6$promise$enumerator$$Enumerator.prototype._enumerate = function () {\n    var enumerator = this;\n\n    var length = enumerator.length;\n    var promise = enumerator.promise;\n    var input = enumerator._input;\n\n    for (var i = 0; promise._state === lib$es6$promise$$internal$$PENDING && i < length; i++) {\n      enumerator._eachEntry(input[i], i);\n    }\n  };\n\n  lib$es6$promise$enumerator$$Enumerator.prototype._eachEntry = function (entry, i) {\n    var enumerator = this;\n    var c = enumerator._instanceConstructor;\n\n    if (lib$es6$promise$utils$$isMaybeThenable(entry)) {\n      if (entry.constructor === c && entry._state !== lib$es6$promise$$internal$$PENDING) {\n        entry._onerror = null;\n        enumerator._settledAt(entry._state, i, entry._result);\n      } else {\n        enumerator._willSettleAt(c.resolve(entry), i);\n      }\n    } else {\n      enumerator._remaining--;\n      enumerator._result[i] = entry;\n    }\n  };\n\n  lib$es6$promise$enumerator$$Enumerator.prototype._settledAt = function (state, i, value) {\n    var enumerator = this;\n    var promise = enumerator.promise;\n\n    if (promise._state === lib$es6$promise$$internal$$PENDING) {\n      enumerator._remaining--;\n\n      if (state === lib$es6$promise$$internal$$REJECTED) {\n        lib$es6$promise$$internal$$reject(promise, value);\n      } else {\n        enumerator._result[i] = value;\n      }\n    }\n\n    if (enumerator._remaining === 0) {\n      lib$es6$promise$$internal$$fulfill(promise, enumerator._result);\n    }\n  };\n\n  lib$es6$promise$enumerator$$Enumerator.prototype._willSettleAt = function (promise, i) {\n    var enumerator = this;\n\n    lib$es6$promise$$internal$$subscribe(promise, undefined, function (value) {\n      enumerator._settledAt(lib$es6$promise$$internal$$FULFILLED, i, value);\n    }, function (reason) {\n      enumerator._settledAt(lib$es6$promise$$internal$$REJECTED, i, reason);\n    });\n  };\n  function lib$es6$promise$promise$all$$all(entries) {\n    return new lib$es6$promise$enumerator$$default(this, entries).promise;\n  }\n  var lib$es6$promise$promise$all$$default = lib$es6$promise$promise$all$$all;\n  function lib$es6$promise$promise$race$$race(entries) {\n    /*jshint validthis:true */\n    var Constructor = this;\n\n    var promise = new Constructor(lib$es6$promise$$internal$$noop);\n\n    if (!lib$es6$promise$utils$$isArray(entries)) {\n      lib$es6$promise$$internal$$reject(promise, new TypeError('You must pass an array to race.'));\n      return promise;\n    }\n\n    var length = entries.length;\n\n    function onFulfillment(value) {\n      lib$es6$promise$$internal$$resolve(promise, value);\n    }\n\n    function onRejection(reason) {\n      lib$es6$promise$$internal$$reject(promise, reason);\n    }\n\n    for (var i = 0; promise._state === lib$es6$promise$$internal$$PENDING && i < length; i++) {\n      lib$es6$promise$$internal$$subscribe(Constructor.resolve(entries[i]), undefined, onFulfillment, onRejection);\n    }\n\n    return promise;\n  }\n  var lib$es6$promise$promise$race$$default = lib$es6$promise$promise$race$$race;\n  function lib$es6$promise$promise$resolve$$resolve(object) {\n    /*jshint validthis:true */\n    var Constructor = this;\n\n    if (object && (typeof object === 'undefined' ? 'undefined' : _typeof(object)) === 'object' && object.constructor === Constructor) {\n      return object;\n    }\n\n    var promise = new Constructor(lib$es6$promise$$internal$$noop);\n    lib$es6$promise$$internal$$resolve(promise, object);\n    return promise;\n  }\n  var lib$es6$promise$promise$resolve$$default = lib$es6$promise$promise$resolve$$resolve;\n  function lib$es6$promise$promise$reject$$reject(reason) {\n    /*jshint validthis:true */\n    var Constructor = this;\n    var promise = new Constructor(lib$es6$promise$$internal$$noop);\n    lib$es6$promise$$internal$$reject(promise, reason);\n    return promise;\n  }\n  var lib$es6$promise$promise$reject$$default = lib$es6$promise$promise$reject$$reject;\n\n  var lib$es6$promise$promise$$counter = 0;\n\n  function lib$es6$promise$promise$$needsResolver() {\n    throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n  }\n\n  function lib$es6$promise$promise$$needsNew() {\n    throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n  }\n\n  var lib$es6$promise$promise$$default = lib$es6$promise$promise$$Promise;\n  /**\n    Promise objects represent the eventual result of an asynchronous operation. The\n    primary way of interacting with a promise is through its `then` method, which\n    registers callbacks to receive either a promise's eventual value or the reason\n    why the promise cannot be fulfilled.\n     Terminology\n    -----------\n     - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n    - `thenable` is an object or function that defines a `then` method.\n    - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n    - `exception` is a value that is thrown using the throw statement.\n    - `reason` is a value that indicates why a promise was rejected.\n    - `settled` the final resting state of a promise, fulfilled or rejected.\n     A promise can be in one of three states: pending, fulfilled, or rejected.\n     Promises that are fulfilled have a fulfillment value and are in the fulfilled\n    state.  Promises that are rejected have a rejection reason and are in the\n    rejected state.  A fulfillment value is never a thenable.\n     Promises can also be said to *resolve* a value.  If this value is also a\n    promise, then the original promise's settled state will match the value's\n    settled state.  So a promise that *resolves* a promise that rejects will\n    itself reject, and a promise that *resolves* a promise that fulfills will\n    itself fulfill.\n      Basic Usage:\n    ------------\n     ```js\n    var promise = new Promise(function(resolve, reject) {\n      // on success\n      resolve(value);\n       // on failure\n      reject(reason);\n    });\n     promise.then(function(value) {\n      // on fulfillment\n    }, function(reason) {\n      // on rejection\n    });\n    ```\n     Advanced Usage:\n    ---------------\n     Promises shine when abstracting away asynchronous interactions such as\n    `XMLHttpRequest`s.\n     ```js\n    function getJSON(url) {\n      return new Promise(function(resolve, reject){\n        var xhr = new XMLHttpRequest();\n         xhr.open('GET', url);\n        xhr.onreadystatechange = handler;\n        xhr.responseType = 'json';\n        xhr.setRequestHeader('Accept', 'application/json');\n        xhr.send();\n         function handler() {\n          if (this.readyState === this.DONE) {\n            if (this.status === 200) {\n              resolve(this.response);\n            } else {\n              reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n            }\n          }\n        };\n      });\n    }\n     getJSON('/posts.json').then(function(json) {\n      // on fulfillment\n    }, function(reason) {\n      // on rejection\n    });\n    ```\n     Unlike callbacks, promises are great composable primitives.\n     ```js\n    Promise.all([\n      getJSON('/posts'),\n      getJSON('/comments')\n    ]).then(function(values){\n      values[0] // => postsJSON\n      values[1] // => commentsJSON\n       return values;\n    });\n    ```\n     @class Promise\n    @param {function} resolver\n    Useful for tooling.\n    @constructor\n  */\n  function lib$es6$promise$promise$$Promise(resolver) {\n    this._id = lib$es6$promise$promise$$counter++;\n    this._state = undefined;\n    this._result = undefined;\n    this._subscribers = [];\n\n    if (lib$es6$promise$$internal$$noop !== resolver) {\n      if (!lib$es6$promise$utils$$isFunction(resolver)) {\n        lib$es6$promise$promise$$needsResolver();\n      }\n\n      if (!(this instanceof lib$es6$promise$promise$$Promise)) {\n        lib$es6$promise$promise$$needsNew();\n      }\n\n      lib$es6$promise$$internal$$initializePromise(this, resolver);\n    }\n  }\n\n  lib$es6$promise$promise$$Promise.all = lib$es6$promise$promise$all$$default;\n  lib$es6$promise$promise$$Promise.race = lib$es6$promise$promise$race$$default;\n  lib$es6$promise$promise$$Promise.resolve = lib$es6$promise$promise$resolve$$default;\n  lib$es6$promise$promise$$Promise.reject = lib$es6$promise$promise$reject$$default;\n  lib$es6$promise$promise$$Promise._setScheduler = lib$es6$promise$asap$$setScheduler;\n  lib$es6$promise$promise$$Promise._setAsap = lib$es6$promise$asap$$setAsap;\n  lib$es6$promise$promise$$Promise._asap = lib$es6$promise$asap$$asap;\n\n  lib$es6$promise$promise$$Promise.prototype = {\n    constructor: lib$es6$promise$promise$$Promise,\n\n    /**\n      The primary way of interacting with a promise is through its `then` method,\n      which registers callbacks to receive either a promise's eventual value or the\n      reason why the promise cannot be fulfilled.\n       ```js\n      findUser().then(function(user){\n        // user is available\n      }, function(reason){\n        // user is unavailable, and you are given the reason why\n      });\n      ```\n       Chaining\n      --------\n       The return value of `then` is itself a promise.  This second, 'downstream'\n      promise is resolved with the return value of the first promise's fulfillment\n      or rejection handler, or rejected if the handler throws an exception.\n       ```js\n      findUser().then(function (user) {\n        return user.name;\n      }, function (reason) {\n        return 'default name';\n      }).then(function (userName) {\n        // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n        // will be `'default name'`\n      });\n       findUser().then(function (user) {\n        throw new Error('Found user, but still unhappy');\n      }, function (reason) {\n        throw new Error('`findUser` rejected and we're unhappy');\n      }).then(function (value) {\n        // never reached\n      }, function (reason) {\n        // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n        // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n      });\n      ```\n      If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n       ```js\n      findUser().then(function (user) {\n        throw new PedagogicalException('Upstream error');\n      }).then(function (value) {\n        // never reached\n      }).then(function (value) {\n        // never reached\n      }, function (reason) {\n        // The `PedgagocialException` is propagated all the way down to here\n      });\n      ```\n       Assimilation\n      ------------\n       Sometimes the value you want to propagate to a downstream promise can only be\n      retrieved asynchronously. This can be achieved by returning a promise in the\n      fulfillment or rejection handler. The downstream promise will then be pending\n      until the returned promise is settled. This is called *assimilation*.\n       ```js\n      findUser().then(function (user) {\n        return findCommentsByAuthor(user);\n      }).then(function (comments) {\n        // The user's comments are now available\n      });\n      ```\n       If the assimliated promise rejects, then the downstream promise will also reject.\n       ```js\n      findUser().then(function (user) {\n        return findCommentsByAuthor(user);\n      }).then(function (comments) {\n        // If `findCommentsByAuthor` fulfills, we'll have the value here\n      }, function (reason) {\n        // If `findCommentsByAuthor` rejects, we'll have the reason here\n      });\n      ```\n       Simple Example\n      --------------\n       Synchronous Example\n       ```javascript\n      var result;\n       try {\n        result = findResult();\n        // success\n      } catch(reason) {\n        // failure\n      }\n      ```\n       Errback Example\n       ```js\n      findResult(function(result, err){\n        if (err) {\n          // failure\n        } else {\n          // success\n        }\n      });\n      ```\n       Promise Example;\n       ```javascript\n      findResult().then(function(result){\n        // success\n      }, function(reason){\n        // failure\n      });\n      ```\n       Advanced Example\n      --------------\n       Synchronous Example\n       ```javascript\n      var author, books;\n       try {\n        author = findAuthor();\n        books  = findBooksByAuthor(author);\n        // success\n      } catch(reason) {\n        // failure\n      }\n      ```\n       Errback Example\n       ```js\n       function foundBooks(books) {\n       }\n       function failure(reason) {\n       }\n       findAuthor(function(author, err){\n        if (err) {\n          failure(err);\n          // failure\n        } else {\n          try {\n            findBoooksByAuthor(author, function(books, err) {\n              if (err) {\n                failure(err);\n              } else {\n                try {\n                  foundBooks(books);\n                } catch(reason) {\n                  failure(reason);\n                }\n              }\n            });\n          } catch(error) {\n            failure(err);\n          }\n          // success\n        }\n      });\n      ```\n       Promise Example;\n       ```javascript\n      findAuthor().\n        then(findBooksByAuthor).\n        then(function(books){\n          // found books\n      }).catch(function(reason){\n        // something went wrong\n      });\n      ```\n       @method then\n      @param {Function} onFulfilled\n      @param {Function} onRejected\n      Useful for tooling.\n      @return {Promise}\n    */\n    then: function then(onFulfillment, onRejection) {\n      var parent = this;\n      var state = parent._state;\n\n      if (state === lib$es6$promise$$internal$$FULFILLED && !onFulfillment || state === lib$es6$promise$$internal$$REJECTED && !onRejection) {\n        return this;\n      }\n\n      var child = new this.constructor(lib$es6$promise$$internal$$noop);\n      var result = parent._result;\n\n      if (state) {\n        var callback = arguments[state - 1];\n        lib$es6$promise$asap$$asap(function () {\n          lib$es6$promise$$internal$$invokeCallback(state, child, callback, result);\n        });\n      } else {\n        lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection);\n      }\n\n      return child;\n    },\n\n    /**\n      `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n      as the catch block of a try/catch statement.\n       ```js\n      function findAuthor(){\n        throw new Error('couldn't find that author');\n      }\n       // synchronous\n      try {\n        findAuthor();\n      } catch(reason) {\n        // something went wrong\n      }\n       // async with promises\n      findAuthor().catch(function(reason){\n        // something went wrong\n      });\n      ```\n       @method catch\n      @param {Function} onRejection\n      Useful for tooling.\n      @return {Promise}\n    */\n    'catch': function _catch(onRejection) {\n      return this.then(null, onRejection);\n    }\n  };\n  function lib$es6$promise$polyfill$$polyfill() {\n    var local;\n\n    if (typeof global !== 'undefined') {\n      local = global;\n    } else if (typeof self !== 'undefined') {\n      local = self;\n    } else {\n      try {\n        local = Function('return this')();\n      } catch (e) {\n        throw new Error('polyfill failed because global object is unavailable in this environment');\n      }\n    }\n\n    var P = local.Promise;\n\n    if (P && Object.prototype.toString.call(P.resolve()) === '[object Promise]' && !P.cast) {\n      return;\n    }\n\n    local.Promise = lib$es6$promise$promise$$default;\n  }\n  var lib$es6$promise$polyfill$$default = lib$es6$promise$polyfill$$polyfill;\n\n  var lib$es6$promise$umd$$ES6Promise = {\n    'Promise': lib$es6$promise$promise$$default,\n    'polyfill': lib$es6$promise$polyfill$$default\n  };\n\n  /* global define:true module:true window: true */\n  if (typeof define === 'function' && define['amd']) {\n    define(function () {\n      return lib$es6$promise$umd$$ES6Promise;\n    });\n  } else if (typeof module !== 'undefined' && module['exports']) {\n    module['exports'] = lib$es6$promise$umd$$ES6Promise;\n  } else if (typeof this !== 'undefined') {\n    this['ES6Promise'] = lib$es6$promise$umd$$ES6Promise;\n  }\n\n  lib$es6$promise$polyfill$$default();\n}).call(undefined);\n'use strict';\n\nfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\n(function (factory) {\n    if ((typeof exports === 'undefined' ? 'undefined' : _typeof(exports)) === 'object') {\n        // Node/CommonJS\n        module.exports = factory();\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD\n        define(factory);\n    } else {\n        // Browser globals (with support for web workers)\n        var glob;\n\n        try {\n            glob = window;\n        } catch (e) {\n            glob = self;\n        }\n\n        glob.SparkMD5 = factory();\n    }\n})(function (undefined) {\n    'use strict'\n\n    /*\n     * Fastest md5 implementation around (JKM md5).\n     * Credits: Joseph Myers\n     *\n     * @see http://www.myersdaily.org/joseph/javascript/md5-text.html\n     * @see http://jsperf.com/md5-shootout/7\n     */\n\n    /* this function is much faster,\n      so if possible we use it. Some IEs\n      are the only ones I know of that\n      need the idiotic second function,\n      generated by an if clause.  */\n    ;\n    var add32 = function add32(a, b) {\n        return a + b & 0xFFFFFFFF;\n    },\n        hex_chr = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\n\n    function cmn(q, a, b, x, s, t) {\n        a = add32(add32(a, q), add32(x, t));\n        return add32(a << s | a >>> 32 - s, b);\n    }\n\n    function ff(a, b, c, d, x, s, t) {\n        return cmn(b & c | ~b & d, a, b, x, s, t);\n    }\n\n    function gg(a, b, c, d, x, s, t) {\n        return cmn(b & d | c & ~d, a, b, x, s, t);\n    }\n\n    function hh(a, b, c, d, x, s, t) {\n        return cmn(b ^ c ^ d, a, b, x, s, t);\n    }\n\n    function ii(a, b, c, d, x, s, t) {\n        return cmn(c ^ (b | ~d), a, b, x, s, t);\n    }\n\n    function md5cycle(x, k) {\n        var a = x[0],\n            b = x[1],\n            c = x[2],\n            d = x[3];\n\n        a = ff(a, b, c, d, k[0], 7, -680876936);\n        d = ff(d, a, b, c, k[1], 12, -389564586);\n        c = ff(c, d, a, b, k[2], 17, 606105819);\n        b = ff(b, c, d, a, k[3], 22, -1044525330);\n        a = ff(a, b, c, d, k[4], 7, -176418897);\n        d = ff(d, a, b, c, k[5], 12, 1200080426);\n        c = ff(c, d, a, b, k[6], 17, -1473231341);\n        b = ff(b, c, d, a, k[7], 22, -45705983);\n        a = ff(a, b, c, d, k[8], 7, 1770035416);\n        d = ff(d, a, b, c, k[9], 12, -1958414417);\n        c = ff(c, d, a, b, k[10], 17, -42063);\n        b = ff(b, c, d, a, k[11], 22, -1990404162);\n        a = ff(a, b, c, d, k[12], 7, 1804603682);\n        d = ff(d, a, b, c, k[13], 12, -40341101);\n        c = ff(c, d, a, b, k[14], 17, -1502002290);\n        b = ff(b, c, d, a, k[15], 22, 1236535329);\n\n        a = gg(a, b, c, d, k[1], 5, -165796510);\n        d = gg(d, a, b, c, k[6], 9, -1069501632);\n        c = gg(c, d, a, b, k[11], 14, 643717713);\n        b = gg(b, c, d, a, k[0], 20, -373897302);\n        a = gg(a, b, c, d, k[5], 5, -701558691);\n        d = gg(d, a, b, c, k[10], 9, 38016083);\n        c = gg(c, d, a, b, k[15], 14, -660478335);\n        b = gg(b, c, d, a, k[4], 20, -405537848);\n        a = gg(a, b, c, d, k[9], 5, 568446438);\n        d = gg(d, a, b, c, k[14], 9, -1019803690);\n        c = gg(c, d, a, b, k[3], 14, -187363961);\n        b = gg(b, c, d, a, k[8], 20, 1163531501);\n        a = gg(a, b, c, d, k[13], 5, -1444681467);\n        d = gg(d, a, b, c, k[2], 9, -51403784);\n        c = gg(c, d, a, b, k[7], 14, 1735328473);\n        b = gg(b, c, d, a, k[12], 20, -1926607734);\n\n        a = hh(a, b, c, d, k[5], 4, -378558);\n        d = hh(d, a, b, c, k[8], 11, -2022574463);\n        c = hh(c, d, a, b, k[11], 16, 1839030562);\n        b = hh(b, c, d, a, k[14], 23, -35309556);\n        a = hh(a, b, c, d, k[1], 4, -1530992060);\n        d = hh(d, a, b, c, k[4], 11, 1272893353);\n        c = hh(c, d, a, b, k[7], 16, -155497632);\n        b = hh(b, c, d, a, k[10], 23, -1094730640);\n        a = hh(a, b, c, d, k[13], 4, 681279174);\n        d = hh(d, a, b, c, k[0], 11, -358537222);\n        c = hh(c, d, a, b, k[3], 16, -722521979);\n        b = hh(b, c, d, a, k[6], 23, 76029189);\n        a = hh(a, b, c, d, k[9], 4, -640364487);\n        d = hh(d, a, b, c, k[12], 11, -421815835);\n        c = hh(c, d, a, b, k[15], 16, 530742520);\n        b = hh(b, c, d, a, k[2], 23, -995338651);\n\n        a = ii(a, b, c, d, k[0], 6, -198630844);\n        d = ii(d, a, b, c, k[7], 10, 1126891415);\n        c = ii(c, d, a, b, k[14], 15, -1416354905);\n        b = ii(b, c, d, a, k[5], 21, -57434055);\n        a = ii(a, b, c, d, k[12], 6, 1700485571);\n        d = ii(d, a, b, c, k[3], 10, -1894986606);\n        c = ii(c, d, a, b, k[10], 15, -1051523);\n        b = ii(b, c, d, a, k[1], 21, -2054922799);\n        a = ii(a, b, c, d, k[8], 6, 1873313359);\n        d = ii(d, a, b, c, k[15], 10, -30611744);\n        c = ii(c, d, a, b, k[6], 15, -1560198380);\n        b = ii(b, c, d, a, k[13], 21, 1309151649);\n        a = ii(a, b, c, d, k[4], 6, -145523070);\n        d = ii(d, a, b, c, k[11], 10, -1120210379);\n        c = ii(c, d, a, b, k[2], 15, 718787259);\n        b = ii(b, c, d, a, k[9], 21, -343485551);\n\n        x[0] = add32(a, x[0]);\n        x[1] = add32(b, x[1]);\n        x[2] = add32(c, x[2]);\n        x[3] = add32(d, x[3]);\n    }\n\n    function md5blk(s) {\n        var md5blks = [],\n            i; /* Andy King said do it this way. */\n\n        for (i = 0; i < 64; i += 4) {\n            md5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24);\n        }\n        return md5blks;\n    }\n\n    function md5blk_array(a) {\n        var md5blks = [],\n            i; /* Andy King said do it this way. */\n\n        for (i = 0; i < 64; i += 4) {\n            md5blks[i >> 2] = a[i] + (a[i + 1] << 8) + (a[i + 2] << 16) + (a[i + 3] << 24);\n        }\n        return md5blks;\n    }\n\n    function md51(s) {\n        var n = s.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n            md5cycle(state, md5blk(s.substring(i - 64, i)));\n        }\n        s = s.substring(i - 64);\n        length = s.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= s.charCodeAt(i) << (i % 4 << 3);\n        }\n        tail[i >> 2] |= 0x80 << (i % 4 << 3);\n        if (i > 55) {\n            md5cycle(state, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Beware that the final length might not fit in 32 bits so we take care of that\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n\n        md5cycle(state, tail);\n        return state;\n    }\n\n    function md51_array(a) {\n        var n = a.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n            md5cycle(state, md5blk_array(a.subarray(i - 64, i)));\n        }\n\n        // Not sure if it is a bug, however IE10 will always produce a sub array of length 1\n        // containing the last element of the parent array if the sub array specified starts\n        // beyond the length of the parent array - weird.\n        // https://connect.microsoft.com/IE/feedback/details/771452/typed-array-subarray-issue\n        a = i - 64 < n ? a.subarray(i - 64) : new Uint8Array(0);\n\n        length = a.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= a[i] << (i % 4 << 3);\n        }\n\n        tail[i >> 2] |= 0x80 << (i % 4 << 3);\n        if (i > 55) {\n            md5cycle(state, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Beware that the final length might not fit in 32 bits so we take care of that\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n\n        md5cycle(state, tail);\n\n        return state;\n    }\n\n    function rhex(n) {\n        var s = '',\n            j;\n        for (j = 0; j < 4; j += 1) {\n            s += hex_chr[n >> j * 8 + 4 & 0x0F] + hex_chr[n >> j * 8 & 0x0F];\n        }\n        return s;\n    }\n\n    function hex(x) {\n        var i;\n        for (i = 0; i < x.length; i += 1) {\n            x[i] = rhex(x[i]);\n        }\n        return x.join('');\n    }\n\n    // In some cases the fast add32 function cannot be used..\n    if (hex(md51('hello')) !== '5d41402abc4b2a76b9719d911017c592') {\n        add32 = function add32(x, y) {\n            var lsw = (x & 0xFFFF) + (y & 0xFFFF),\n                msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n            return msw << 16 | lsw & 0xFFFF;\n        };\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * ArrayBuffer slice polyfill.\n     *\n     * @see https://github.com/ttaubert/node-arraybuffer-slice\n     */\n\n    if (typeof ArrayBuffer !== 'undefined' && !ArrayBuffer.prototype.slice) {\n        (function () {\n            function clamp(val, length) {\n                val = val | 0 || 0;\n\n                if (val < 0) {\n                    return Math.max(val + length, 0);\n                }\n\n                return Math.min(val, length);\n            }\n\n            ArrayBuffer.prototype.slice = function (from, to) {\n                var length = this.byteLength,\n                    begin = clamp(from, length),\n                    end = length,\n                    num,\n                    target,\n                    targetArray,\n                    sourceArray;\n\n                if (to !== undefined) {\n                    end = clamp(to, length);\n                }\n\n                if (begin > end) {\n                    return new ArrayBuffer(0);\n                }\n\n                num = end - begin;\n                target = new ArrayBuffer(num);\n                targetArray = new Uint8Array(target);\n\n                sourceArray = new Uint8Array(this, begin, num);\n                targetArray.set(sourceArray);\n\n                return target;\n            };\n        })();\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * Helpers.\n     */\n\n    function toUtf8(str) {\n        if (/[\\u0080-\\uFFFF]/.test(str)) {\n            str = unescape(encodeURIComponent(str));\n        }\n\n        return str;\n    }\n\n    function utf8Str2ArrayBuffer(str, returnUInt8Array) {\n        var length = str.length,\n            buff = new ArrayBuffer(length),\n            arr = new Uint8Array(buff),\n            i;\n\n        for (i = 0; i < length; i += 1) {\n            arr[i] = str.charCodeAt(i);\n        }\n\n        return returnUInt8Array ? arr : buff;\n    }\n\n    function arrayBuffer2Utf8Str(buff) {\n        return String.fromCharCode.apply(null, new Uint8Array(buff));\n    }\n\n    function concatenateArrayBuffers(first, second, returnUInt8Array) {\n        var result = new Uint8Array(first.byteLength + second.byteLength);\n\n        result.set(new Uint8Array(first));\n        result.set(new Uint8Array(second), first.byteLength);\n\n        return returnUInt8Array ? result : result.buffer;\n    }\n\n    function hexToBinaryString(hex) {\n        var bytes = [],\n            length = hex.length,\n            x;\n\n        for (x = 0; x < length - 1; x += 2) {\n            bytes.push(parseInt(hex.substr(x, 2), 16));\n        }\n\n        return String.fromCharCode.apply(String, bytes);\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * SparkMD5 OOP implementation.\n     *\n     * Use this class to perform an incremental md5, otherwise use the\n     * static methods instead.\n     */\n\n    function SparkMD5() {\n        // call reset to init the instance\n        this.reset();\n    }\n\n    /**\n     * Appends a string.\n     * A conversion will be applied if an utf8 string is detected.\n     *\n     * @param {String} str The string to be appended\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.append = function (str) {\n        // Converts the string to utf8 bytes if necessary\n        // Then append as binary\n        this.appendBinary(toUtf8(str));\n\n        return this;\n    };\n\n    /**\n     * Appends a binary string.\n     *\n     * @param {String} contents The binary string to be appended\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.appendBinary = function (contents) {\n        this._buff += contents;\n        this._length += contents.length;\n\n        var length = this._buff.length,\n            i;\n\n        for (i = 64; i <= length; i += 64) {\n            md5cycle(this._hash, md5blk(this._buff.substring(i - 64, i)));\n        }\n\n        this._buff = this._buff.substring(i - 64);\n\n        return this;\n    };\n\n    /**\n     * Finishes the incremental computation, reseting the internal state and\n     * returning the result.\n     *\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            i,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= buff.charCodeAt(i) << (i % 4 << 3);\n        }\n\n        this._finish(tail, length);\n        ret = hex(this._hash);\n\n        if (raw) {\n            ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n\n        return ret;\n    };\n\n    /**\n     * Resets the internal state of the computation.\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.reset = function () {\n        this._buff = '';\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n\n        return this;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @return {Object} The state\n     */\n    SparkMD5.prototype.getState = function () {\n        return {\n            buff: this._buff,\n            length: this._length,\n            hash: this._hash\n        };\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @param {Object} state The state\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.setState = function (state) {\n        this._buff = state.buff;\n        this._length = state.length;\n        this._hash = state.hash;\n\n        return this;\n    };\n\n    /**\n     * Releases memory used by the incremental buffer and other additional\n     * resources. If you plan to use the instance again, use reset instead.\n     */\n    SparkMD5.prototype.destroy = function () {\n        delete this._hash;\n        delete this._buff;\n        delete this._length;\n    };\n\n    /**\n     * Finish the final calculation based on the tail.\n     *\n     * @param {Array}  tail   The tail (will be modified)\n     * @param {Number} length The length of the remaining buffer\n     */\n    SparkMD5.prototype._finish = function (tail, length) {\n        var i = length,\n            tmp,\n            lo,\n            hi;\n\n        tail[i >> 2] |= 0x80 << (i % 4 << 3);\n        if (i > 55) {\n            md5cycle(this._hash, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Do the final computation based on the tail and length\n        // Beware that the final length may not fit in 32 bits so we take care of that\n        tmp = this._length * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n        md5cycle(this._hash, tail);\n    };\n\n    /**\n     * Performs the md5 hash on a string.\n     * A conversion will be applied if utf8 string is detected.\n     *\n     * @param {String}  str The string\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.hash = function (str, raw) {\n        // Converts the string to utf8 bytes if necessary\n        // Then compute it using the binary function\n        return SparkMD5.hashBinary(toUtf8(str), raw);\n    };\n\n    /**\n     * Performs the md5 hash on a binary string.\n     *\n     * @param {String}  content The binary string\n     * @param {Boolean} raw     True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.hashBinary = function (content, raw) {\n        var hash = md51(content),\n            ret = hex(hash);\n\n        return raw ? hexToBinaryString(ret) : ret;\n    };\n\n    // ---------------------------------------------------\n\n    /**\n     * SparkMD5 OOP implementation for array buffers.\n     *\n     * Use this class to perform an incremental md5 ONLY for array buffers.\n     */\n    SparkMD5.ArrayBuffer = function () {\n        // call reset to init the instance\n        this.reset();\n    };\n\n    /**\n     * Appends an array buffer.\n     *\n     * @param {ArrayBuffer} arr The array to be appended\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.append = function (arr) {\n        var buff = concatenateArrayBuffers(this._buff.buffer, arr, true),\n            length = buff.length,\n            i;\n\n        this._length += arr.byteLength;\n\n        for (i = 64; i <= length; i += 64) {\n            md5cycle(this._hash, md5blk_array(buff.subarray(i - 64, i)));\n        }\n\n        this._buff = i - 64 < length ? new Uint8Array(buff.buffer.slice(i - 64)) : new Uint8Array(0);\n\n        return this;\n    };\n\n    /**\n     * Finishes the incremental computation, reseting the internal state and\n     * returning the result.\n     *\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.ArrayBuffer.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            i,\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= buff[i] << (i % 4 << 3);\n        }\n\n        this._finish(tail, length);\n        ret = hex(this._hash);\n\n        if (raw) {\n            ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n\n        return ret;\n    };\n\n    /**\n     * Resets the internal state of the computation.\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.reset = function () {\n        this._buff = new Uint8Array(0);\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n\n        return this;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @return {Object} The state\n     */\n    SparkMD5.ArrayBuffer.prototype.getState = function () {\n        var state = SparkMD5.prototype.getState.call(this);\n\n        // Convert buffer to a string\n        state.buff = arrayBuffer2Utf8Str(state.buff);\n\n        return state;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @param {Object} state The state\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.setState = function (state) {\n        // Convert string to buffer\n        state.buff = utf8Str2ArrayBuffer(state.buff, true);\n\n        return SparkMD5.prototype.setState.call(this, state);\n    };\n\n    SparkMD5.ArrayBuffer.prototype.destroy = SparkMD5.prototype.destroy;\n\n    SparkMD5.ArrayBuffer.prototype._finish = SparkMD5.prototype._finish;\n\n    /**\n     * Performs the md5 hash on an array buffer.\n     *\n     * @param {ArrayBuffer} arr The array buffer\n     * @param {Boolean}     raw True to get the raw string, false to get the hex one\n     *\n     * @return {String} The result\n     */\n    SparkMD5.ArrayBuffer.hash = function (arr, raw) {\n        var hash = md51_array(new Uint8Array(arr)),\n            ret = hex(hash);\n\n        return raw ? hexToBinaryString(ret) : ret;\n    };\n\n    return SparkMD5;\n});\n'use strict';\n\n//'use strict';\nvar J = jQuery.noConflict();\n\nvar Zotero = {\n\tajax: {},\n\tcallbacks: {},\n\tui: {\n\t\tcallbacks: {},\n\t\tkeyCode: {\n\t\t\tBACKSPACE: 8,\n\t\t\tCOMMA: 188,\n\t\t\tDELETE: 46,\n\t\t\tDOWN: 40,\n\t\t\tEND: 35,\n\t\t\tENTER: 13,\n\t\t\tESCAPE: 27,\n\t\t\tHOME: 36,\n\t\t\tLEFT: 37,\n\t\t\tPAGE_DOWN: 34,\n\t\t\tPAGE_UP: 33,\n\t\t\tPERIOD: 190,\n\t\t\tRIGHT: 39,\n\t\t\tSPACE: 32,\n\t\t\tTAB: 9,\n\t\t\tUP: 38\n\t\t}\n\t},\n\turl: {},\n\tutils: {},\n\toffline: {},\n\ttemp: {},\n\tlocalizations: {},\n\n\tconfig: { librarySettings: {},\n\t\tbaseApiUrl: 'https://api.zotero.org',\n\t\tbaseWebsiteUrl: 'https://zotero.org',\n\t\tbaseFeedUrl: 'https://api.zotero.org',\n\t\tbaseZoteroWebsiteUrl: 'https://www.zotero.org',\n\t\tbaseDownloadUrl: 'https://www.zotero.org',\n\t\tnonparsedBaseUrl: \"\",\n\t\tdebugLogEndpoint: '',\n\t\tstoreDebug: true,\n\t\tdirectDownloads: true,\n\t\tproxyPath: '/proxyrequest',\n\t\tignoreLoggedInStatus: false,\n\t\tstorePrefsRemote: true,\n\t\tpreferUrlItem: true,\n\t\tsessionAuth: false,\n\t\tproxy: false,\n\t\tapiKey: '',\n\t\tapiVersion: 3,\n\t\tlocale: 'en-US',\n\t\tcacheStoreType: 'localStorage',\n\t\tpreloadCachedLibrary: true,\n\t\tsortOrdering: {\n\t\t\t'dateAdded': 'desc',\n\t\t\t'dateModified': 'desc',\n\t\t\t'date': 'desc',\n\t\t\t'year': 'desc',\n\t\t\t'accessDate': 'desc',\n\t\t\t'title': 'asc',\n\t\t\t'creator': 'asc'\n\t\t},\n\t\tdefaultSortColumn: 'title',\n\t\tdefaultSortOrder: 'asc',\n\t\tlargeFields: {\n\t\t\t'title': 1,\n\t\t\t'abstractNote': 1,\n\t\t\t'extra': 1\n\t\t},\n\t\trichTextFields: {\n\t\t\t'note': 1\n\t\t},\n\t\tmaxFieldSummaryLength: { title: 60 },\n\t\texportFormats: ['bibtex', 'bookmarks', 'mods', 'refer', 'rdf_bibliontology', 'rdf_dc', 'rdf_zotero', 'ris', 'wikipedia'],\n\t\texportFormatsMap: {\n\t\t\t'bibtex': 'BibTeX',\n\t\t\t'bookmarks': 'Bookmarks',\n\t\t\t'mods': 'MODS',\n\t\t\t'refer': 'Refer/BibIX',\n\t\t\t'rdf_bibliontology': 'Bibliontology RDF',\n\t\t\t'rdf_dc': 'Unqualified Dublin Core RDF',\n\t\t\t'rdf_zotero': 'Zotero RDF',\n\t\t\t'ris': 'RIS',\n\t\t\t'wikipedia': 'Wikipedia Citation Templates'\n\t\t},\n\t\tdefaultApiArgs: {\n\t\t\t'order': 'title',\n\t\t\t'sort': 'asc',\n\t\t\t'limit': 50,\n\t\t\t'start': 0\n\t\t}\n\t},\n\n\tdebug: function debug(debugstring, level) {\n\t\tvar prefLevel = 3;\n\t\tif (Zotero.config.storeDebug) {\n\t\t\tif (level <= prefLevel) {\n\t\t\t\tZotero.debugstring += \"DEBUG:\" + debugstring + \"\\n\";\n\t\t\t}\n\t\t}\n\t\tif (typeof console == 'undefined') {\n\t\t\treturn;\n\t\t}\n\t\tif (typeof level !== \"number\") {\n\t\t\tlevel = 1;\n\t\t}\n\t\tif (Zotero.preferences !== undefined) {\n\t\t\tprefLevel = Zotero.preferences.getPref('debug_level');\n\t\t}\n\t\tif (level <= prefLevel) {\n\t\t\tconsole.log(debugstring);\n\t\t}\n\t},\n\n\twarn: function warn(warnstring) {\n\t\tif (Zotero.config.storeDebug) {\n\t\t\tZotero.debugstring += \"WARN:\" + warnstring + \"\\n\";\n\t\t}\n\t\tif (typeof console == 'undefined' || typeof console.warn == 'undefined') {\n\t\t\tthis.debug(warnstring);\n\t\t} else {\n\t\t\tconsole.warn(warnstring);\n\t\t}\n\t},\n\n\terror: function error(errorstring) {\n\t\tif (Zotero.config.storeDebug) {\n\t\t\tZotero.debugstring += \"ERROR:\" + errorstring + \"\\n\";\n\t\t}\n\t\tif (typeof console == 'undefined' || typeof console.error == 'undefined') {\n\t\t\tthis.debug(errorstring);\n\t\t} else {\n\t\t\tconsole.error(errorstring);\n\t\t}\n\t},\n\n\tsubmitDebugLog: function submitDebugLog() {\n\t\tZotero.net.ajax({\n\t\t\turl: Zotero.config.debugLogEndpoint,\n\t\t\tdata: { 'debug_string': Zotero.debugstring }\n\t\t}).then(function (xhr) {\n\t\t\tvar data = JSON.parse(xhr.responseText);\n\t\t\tif (data.logID) {\n\t\t\t\talert(\"ZoteroWWW debug logID:\" + data.logID);\n\t\t\t} else if (data.error) {\n\t\t\t\talert(\"Error submitting ZoteroWWW debug log:\" + data.error);\n\t\t\t}\n\t\t});\n\t},\n\n\tcatchPromiseError: function catchPromiseError(err) {\n\t\tZotero.error(err);\n\t},\n\n\tlibraries: {},\n\n\tvalidator: {\n\t\tpatterns: {\n\t\t\t//'itemKey': /^([A-Z0-9]{8,},?)+$/,\n\t\t\t'itemKey': /^.+$/,\n\t\t\t'collectionKey': /^([A-Z0-9]{8,})|trash$/,\n\t\t\t//'tag': /^[^#]*$/,\n\t\t\t'libraryID': /^[0-9]+$/,\n\t\t\t'libraryType': /^(user|group|)$/,\n\t\t\t'target': /^(items?|collections?|tags|children|deleted|userGroups|key|settings|publications)$/,\n\t\t\t'targetModifier': /^(top|file|file\\/view)$/,\n\n\t\t\t//get params\n\t\t\t'sort': /^(asc|desc)$/,\n\t\t\t'start': /^[0-9]*$/,\n\t\t\t'limit': /^[0-9]*$/,\n\t\t\t'order': /^\\S*$/,\n\t\t\t'content': /^((html|json|data|bib|none|bibtex|bookmarks|coins|csljson|mods|refer|rdf_bibliontology|rdf_dc|ris|tei|wikipedia),?)+$/,\n\t\t\t'include': /^((html|json|data|bib|none|bibtex|bookmarks|coins|csljson|mods|refer|rdf_bibliontology|rdf_dc|ris|tei|wikipedia),?)+$/,\n\t\t\t'q': /^.*$/,\n\t\t\t'fq': /^\\S*$/,\n\t\t\t'itemType': /^\\S*$/,\n\t\t\t'locale': /^\\S*$/,\n\t\t\t'tag': /^.*$/,\n\t\t\t'tagType': /^(0|1)$/,\n\t\t\t'key': /^\\S*/,\n\t\t\t'format': /^(json|atom|bib|keys|versions|bibtex|bookmarks|mods|refer|rdf_bibliontology|rdf_dc|rdf_zotero|ris|wikipedia)$/,\n\t\t\t'style': /^\\S*$/,\n\t\t\t'linkwrap': /^(0|1)*$/\n\t\t},\n\n\t\tvalidate: function validate(arg, type) {\n\t\t\tZ.debug(\"Zotero.validate\", 4);\n\t\t\tif (arg === '') {\n\t\t\t\treturn null;\n\t\t\t} else if (arg === null) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tZ.debug(arg + \" \" + type, 4);\n\t\t\tvar patterns = this.patterns;\n\n\t\t\tif (patterns.hasOwnProperty(type)) {\n\t\t\t\treturn patterns[type].test(arg);\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t},\n\n\t_logEnabled: 0,\n\tenableLogging: function enableLogging() {\n\t\tZotero._logEnabled++;\n\t\tif (Zotero._logEnabled > 0) {\n\t\t\t//TODO: enable debug_log?\n\t\t}\n\t},\n\n\tdisableLogging: function disableLogging() {\n\t\tZotero._logEnabled--;\n\t\tif (Zotero._logEnabled <= 0) {\n\t\t\tZotero._logEnabled = 0;\n\t\t\t//TODO: disable debug_log?\n\t\t}\n\t},\n\n\tinit: function init() {\n\t\tvar store;\n\t\tif (Zotero.config.cacheStoreType == 'localStorage' && typeof localStorage != 'undefined') {\n\t\t\tstore = localStorage;\n\t\t} else if (Zotero.config.cacheStoreType == 'sessionStorage' && typeof sessionStorage != 'undefined') {\n\t\t\tstore = sessionStorage;\n\t\t} else {\n\t\t\tstore = {};\n\t\t}\n\t\tZotero.store = store;\n\n\t\tZotero.cache = new Zotero.Cache(store);\n\n\t\t//initialize global preferences object\n\t\tZotero.preferences = new Zotero.Preferences(Zotero.store, 'global');\n\n\t\t//get localized item constants if not stored in localstorage\n\t\tvar locale = 'en-US';\n\t\tif (Zotero.config.locale) {\n\t\t\tlocale = Zotero.config.locale;\n\t\t}\n\t\tlocale = 'en-US';\n\t}\n};\n\nZotero.Cache = function (store) {\n\tthis.store = store;\n\tvar registry = this.store._registry;\n\tif (registry === null || typeof registry == 'undefined') {\n\t\tregistry = {};\n\t\tthis.store._registry = JSON.stringify(registry);\n\t}\n};\n\n//build a consistent string from an object to use as a cache key\n//put object key/value pairs into array, sort array, and concatenate\n//array with '/'\nZotero.Cache.prototype.objectCacheString = function (params) {\n\tvar paramVarsArray = [];\n\tObject.keys(params).forEach(function (index) {\n\t\tvar value = params[index];\n\t\tif (!value) {\n\t\t\treturn;\n\t\t} else if (Array.isArray(value)) {\n\t\t\tvalue.forEach(function (v) {\n\t\t\t\tparamVarsArray.push(index + '/' + encodeURIComponent(v));\n\t\t\t});\n\t\t} else {\n\t\t\tparamVarsArray.push(index + '/' + encodeURIComponent(value));\n\t\t}\n\t});\n\tparamVarsArray.sort();\n\tZ.debug(paramVarsArray, 4);\n\tvar objectCacheString = paramVarsArray.join('/');\n\treturn objectCacheString;\n};\n\n//should use setItem and getItem if I extend that to the case where no Storage object is available in the browser\nZotero.Cache.prototype.save = function (params, object, cachetags) {\n\t//cachetags for expiring entries\n\tif (!Array.isArray(cachetags)) {\n\t\tcachetags = [];\n\t}\n\t//get registry object from storage\n\tvar registry = JSON.parse(this.store._registry);\n\tif (!registry) {\n\t\tregistry = {};\n\t}\n\tvar objectCacheString = this.objectCacheString(params);\n\t//save object in storage\n\tthis.store[objectCacheString] = JSON.stringify(object);\n\t//make registry entry for object\n\tvar registryEntry = { 'id': objectCacheString, saved: Date.now(), cachetags: cachetags };\n\tregistry[objectCacheString] = registryEntry;\n\t//save registry back to storage\n\tthis.store._registry = JSON.stringify(registry);\n};\n\nZotero.Cache.prototype.load = function (params) {\n\tZ.debug(\"Zotero.Cache.load\", 3);\n\tvar objectCacheString = this.objectCacheString(params);\n\tZ.debug(objectCacheString, 4);\n\ttry {\n\t\tvar s = this.store[objectCacheString];\n\t\tif (!s) {\n\t\t\tZ.warn(\"No value found in cache store - \" + objectCacheString, 3);\n\t\t\treturn null;\n\t\t} else {\n\t\t\treturn JSON.parse(s);\n\t\t}\n\t} catch (e) {\n\t\tZ.error('Error parsing retrieved cache data: ' + objectCacheString + ' : ' + s);\n\t\treturn null;\n\t}\n};\n\nZotero.Cache.prototype.expireCacheTag = function (tag) {\n\tZ.debug(\"Zotero.Cache.expireCacheTag\", 3);\n\tvar registry = JSON.parse(this.store._registry);\n\tvar store = this.store;\n\tObject.keys(registry).forEach(function (index) {\n\t\tvar value = registry[index];\n\t\tif (value.cachetags.indexOf(tag) != -1) {\n\t\t\tZ.debug('tag ' + tag + ' found for item ' + value['id'] + ' : expiring', 4);\n\t\t\tdelete store[value['id']];\n\t\t\tdelete registry[value['id']];\n\t\t}\n\t});\n};\n\nZotero.Cache.prototype.clear = function () {\n\tif (typeof this.store.clear == 'function') {\n\t\tthis.store.clear();\n\t} else {\n\t\tthis.store = {};\n\t}\n};\n\nZotero.ajaxRequest = function (url, type, options) {\n\tZ.debug(\"Zotero.ajaxRequest ==== \" + url, 3);\n\tif (!type) {\n\t\ttype = 'GET';\n\t}\n\tif (!options) {\n\t\toptions = {};\n\t}\n\tvar requestObject = {\n\t\turl: url,\n\t\ttype: type\n\t};\n\trequestObject = Z.extend({}, requestObject, options);\n\tZ.debug(requestObject, 3);\n\treturn Zotero.net.queueRequest(requestObject);\n};\n\n//non-DOM (jquery) event management\nZotero.eventmanager = {\n\tcallbacks: {}\n};\n\nZotero.trigger = function (eventType) {\n\tvar data = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\tvar filter = arguments.length <= 2 || arguments[2] === undefined ? false : arguments[2];\n\n\tif (filter) {\n\t\tZ.debug(\"filter is not false\", 3);\n\t\teventType += \"_\" + filter;\n\t}\n\tZotero.debug(\"Triggering eventful \" + eventType, 3);\n\tZ.debug(data);\n\n\tdata.zeventful = true;\n\tif (data.triggeringElement === null || data.triggeringElement === undefined) {\n\t\tdata.triggeringElement = J(\"#eventful\");\n\t}\n\n\ttry {\n\t\tif (Zotero.eventmanager.callbacks.hasOwnProperty(eventType)) {\n\t\t\tvar callbacks = Zotero.eventmanager.callbacks[eventType];\n\t\t\tcallbacks.forEach(function (callback) {\n\t\t\t\tvar cdata = Z.extend({}, data, callback.data);\n\t\t\t\tvar e = {\n\t\t\t\t\tdata: cdata\n\t\t\t\t};\n\t\t\t\tcallback.f(e);\n\t\t\t});\n\t\t}\n\t} catch (e) {\n\t\tZ.error(\"failed triggering:\" + eventType);\n\t\tZ.error(e);\n\t}\n};\n\nZotero.listen = function (events, handler, data, filter) {\n\tZ.debug(\"Zotero.listen: \" + events);\n\t//append filter to event strings if it's specified\n\tvar eventsArray = events.split(\" \");\n\tif (eventsArray.length > 0 && filter) {\n\t\tfor (var i = 0; i < eventsArray.length; i++) {\n\t\t\teventsArray[i] += \"_\" + filter;\n\t\t}\n\t}\n\teventsArray.forEach(function (ev) {\n\t\tif (Zotero.eventmanager.callbacks.hasOwnProperty(ev)) {\n\t\t\tZotero.eventmanager.callbacks[ev].push({\n\t\t\t\tdata: data,\n\t\t\t\tf: handler\n\t\t\t});\n\t\t} else {\n\t\t\tZotero.eventmanager.callbacks[ev] = [{\n\t\t\t\tdata: data,\n\t\t\t\tf: handler\n\t\t\t}];\n\t\t}\n\t});\n};\n\nvar Z = Zotero;\n'use strict';\n\n/*\nZotero.ajax.error = function(event, request, settings, exception){\n\t//Zotero.ui.jsNotificationMessage(\"Error requesting \" + settings.url, 'error');\n\t//J(\"#js-message-list\").append(\"<li>Error requesting \" + settings.url + \"</li>\");\n\tZ.debug(\"Exception: \" + exception);\n\t//Z.exception = exception;\n};\n*/\n/*\nZotero.ajax.errorCallback = function(jqxhr, textStatus, errorThrown){\n\tZ.debug(\"ajax error callback\", 2);\n\tZ.debug('textStatus: ' + textStatus, 2);\n\tZ.debug('errorThrown: ', 2);\n\tZ.debug(errorThrown, 2);\n\tZ.debug(jqxhr, 2);\n};\n*/\nZotero.ajax.errorCallback = function (response) {\n\tZ.error(response);\n\tZ.debug('ajax error callback', 2);\n\tZ.debug('textStatus: ' + response.textStatus, 2);\n\tZ.debug('errorThrown: ', 2);\n\tZ.debug(response.errorThrown, 2);\n\tZ.debug(response.jqxhr, 2);\n};\n\nZotero.ajax.error = Zotero.ajax.errorCallback;\nZotero.ajax.activeRequests = [];\n\n/*\n * Requires {target:items|collections|tags, libraryType:user|group, libraryID:<>}\n */\nZotero.ajax.apiRequestUrl = function (params) {\n\tZ.debug('Zotero.ajax.apiRequestUrl', 4);\n\tZ.debug(params, 4);\n\tObject.keys(params).forEach(function (key) {\n\t\tvar val = params[key];\n\t\t//should probably figure out exactly why I'm doing this, is it just to make sure no hashes snuck in?\n\t\t//if so the new validation below takes care of that instead\n\t\tif (typeof val == 'string') {\n\t\t\tval = val.split('#', 1);\n\t\t\tparams[key] = val[0];\n\t\t}\n\n\t\t//validate params based on patterns in Zotero.validate\n\t\tif (Zotero.validator.validate(val, key) === false) {\n\t\t\t//warn on invalid parameter and drop from params that will be used\n\t\t\tZotero.warn('API argument failed validation: ' + key + ' cannot be ' + val);\n\t\t\tZotero.warn(params);\n\t\t\tdelete params[key];\n\t\t}\n\t});\n\n\tif (!params.target) throw new Error('No target defined for api request');\n\tif (!(params.libraryType == 'user' || params.libraryType == 'group' || params.libraryType === '')) {\n\t\tthrow new Error('Unexpected libraryType for api request ' + JSON.stringify(params));\n\t}\n\tif (params.libraryType && !params.libraryID) {\n\t\tthrow new Error('No libraryID defined for api request');\n\t}\n\tif (params.target == 'publications' && params.libraryType != 'user') {\n\t\tthrow new Error('publications is only valid for user libraries');\n\t}\n\n\tvar base = Zotero.config.baseApiUrl;\n\tvar url;\n\n\tif (params.libraryType !== '') {\n\t\turl = base + '/' + params.libraryType + 's/' + params.libraryID;\n\t\tif (params.collectionKey) {\n\t\t\tif (params.collectionKey == 'trash') {\n\t\t\t\turl += '/items/trash';\n\t\t\t\treturn url;\n\t\t\t} else if (params.collectionKey.indexOf(',') !== -1) {} else if (params.target != 'collections') {\n\t\t\t\turl += '/collections/' + params.collectionKey;\n\t\t\t}\n\t\t}\n\t} else {\n\t\turl = base;\n\t}\n\n\tswitch (params.target) {\n\t\tcase 'items':\n\t\t\turl += '/items';\n\t\t\tbreak;\n\t\tcase 'item':\n\t\t\tif (params.itemKey) {\n\t\t\t\turl += '/items/' + params.itemKey;\n\t\t\t} else {\n\t\t\t\turl += '/items';\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'collections':\n\t\t\turl += '/collections';\n\t\t\tbreak;\n\t\tcase 'childCollections':\n\t\t\turl += '/collections';\n\t\t\tbreak;\n\t\tcase 'collection':\n\t\t\tbreak;\n\t\tcase 'tags':\n\t\t\turl += '/tags';\n\t\t\tbreak;\n\t\tcase 'children':\n\t\t\turl += '/items/' + params.itemKey + '/children';\n\t\t\tbreak;\n\t\tcase 'key':\n\t\t\turl = base + '/users/' + params.libraryID + '/keys/' + params.apiKey;\n\t\t\tbreak;\n\t\tcase 'deleted':\n\t\t\turl += '/deleted';\n\t\t\tbreak;\n\t\tcase 'userGroups':\n\t\t\turl = base + '/users/' + params.libraryID + '/groups';\n\t\t\tbreak;\n\t\tcase 'settings':\n\t\t\turl += '/settings/' + (params.settingsKey || '');\n\t\t\tbreak;\n\t\tcase 'publications':\n\t\t\turl += '/publications/items';\n\t\t\tbreak;\n\t\tdefault:\n\t\t\treturn false;\n\t}\n\tswitch (params.targetModifier) {\n\t\tcase 'top':\n\t\t\turl += '/top';\n\t\t\tbreak;\n\t\tcase 'file':\n\t\t\turl += '/file';\n\t\t\tbreak;\n\t\tcase 'viewsnapshot':\n\t\t\turl += '/file/view';\n\t\t\tbreak;\n\t}\n\t//Z.debug(\"returning apiRequestUrl: \" + url, 3);\n\treturn url;\n};\n\nZotero.ajax.apiQueryString = function (passedParams, useConfigKey) {\n\tZ.debug(\"Zotero.ajax.apiQueryString\", 4);\n\tZ.debug(passedParams, 4);\n\tif (useConfigKey === null || typeof useConfigKey === 'undefined') {\n\t\tuseConfigKey = true;\n\t}\n\n\tObject.keys(passedParams).forEach(function (key) {\n\t\tvar val = passedParams[key];\n\t\tif (typeof val == 'string') {\n\t\t\tval = val.split('#', 1);\n\t\t\tpassedParams[key] = val[0];\n\t\t}\n\t});\n\tif (passedParams.hasOwnProperty('order') && passedParams['order'] == 'creatorSummary') {\n\t\tpassedParams['order'] = 'creator';\n\t}\n\tif (passedParams.hasOwnProperty('order') && passedParams['order'] == 'year') {\n\t\tpassedParams['order'] = 'date';\n\t}\n\tif (useConfigKey && Zotero.config.sessionAuth) {\n\t\tvar sessionKey = Zotero.utils.readCookie(Zotero.config.sessionCookieName);\n\t\tpassedParams['session'] = sessionKey;\n\t} else if (useConfigKey && Zotero.config.apiKey) {\n\t\tpassedParams['key'] = Zotero.config.apiKey;\n\t}\n\n\t//Z.debug()\n\tif (passedParams.hasOwnProperty('sort') && passedParams['sort'] == 'undefined') {\n\t\t//alert('fixed a bad sort');\n\t\tpassedParams['sort'] = 'asc';\n\t}\n\n\tZ.debug(passedParams, 4);\n\n\tvar queryString = '?';\n\tvar queryParamsArray = [];\n\tvar queryParamOptions = ['start', 'limit', 'order', 'sort', 'content', 'include', 'format', 'q', 'fq', 'itemType', 'itemKey', 'collectionKey', 'searchKey', 'locale', 'tag', 'tagType', 'key', 'style', 'linkMode', 'linkwrap', 'session', 'newer', 'since'];\n\tqueryParamOptions.sort();\n\t//build simple api query parameters object\n\tvar queryParams = {};\n\tqueryParamOptions.forEach(function (val) {\n\t\tif (passedParams.hasOwnProperty(val) && passedParams[val] !== '') {\n\t\t\tqueryParams[val] = passedParams[val];\n\t\t}\n\t});\n\n\t//take out itemKey if it is not a list\n\tif (passedParams.hasOwnProperty('target') && passedParams['target'] !== 'items') {\n\t\tif (queryParams.hasOwnProperty('itemKey') && queryParams['itemKey'].indexOf(',') == -1) {\n\t\t\tdelete queryParams['itemKey'];\n\t\t}\n\t}\n\n\t//take out collectionKey if it is not a list\n\tif (passedParams.hasOwnProperty('target') && passedParams['target'] !== 'collections') {\n\t\tif (queryParams.hasOwnProperty('collectionKey') && queryParams['collectionKey'].indexOf(',') === -1) {\n\t\t\tdelete queryParams['collectionKey'];\n\t\t}\n\t}\n\n\t//add each of the found queryParams onto array\n\tObject.keys(queryParams).forEach(function (key) {\n\t\tvar value = queryParams[key];\n\t\tif (Array.isArray(value)) {\n\t\t\tvalue.forEach(function (v) {\n\t\t\t\tif (key == \"tag\" && v[0] == \"-\") {\n\t\t\t\t\tv = \"\\\\\" + v;\n\t\t\t\t}\n\t\t\t\tqueryParamsArray.push(encodeURIComponent(key) + '=' + encodeURIComponent(v));\n\t\t\t});\n\t\t} else {\n\t\t\tif (key == \"tag\" && value[0] == \"-\") {\n\t\t\t\tvalue = \"\\\\\" + value;\n\t\t\t}\n\t\t\tqueryParamsArray.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\n\t\t}\n\t});\n\n\t//build query string by concatenating array\n\tqueryString += queryParamsArray.join('&');\n\t//Z.debug(\"resulting queryString:\" + queryString);\n\treturn queryString;\n};\n\nZotero.ajax.apiRequestString = function (config) {\n\treturn Zotero.ajax.apiRequestUrl(config) + Zotero.ajax.apiQueryString(config);\n};\n\nZotero.ajax.proxyWrapper = function (requestUrl, method) {\n\tif (Zotero.config.proxy) {\n\t\tif (!method) {\n\t\t\tmethod = 'GET';\n\t\t}\n\t\treturn Zotero.config.proxyPath + \"?requestMethod=\" + method + \"&requestUrl=\" + encodeURIComponent(requestUrl);\n\t} else {\n\t\treturn requestUrl;\n\t}\n};\n\nZotero.ajax.parseQueryString = function (query) {};\n\nZotero.ajax.webUrl = function (args) {};\n\nZotero.ajax.downloadBlob = function (url) {\n\treturn new Promise(function (resolve, reject) {\n\t\tvar xhr = new XMLHttpRequest();\n\t\tvar blob;\n\n\t\txhr.open(\"GET\", url, true);\n\t\txhr.responseType = \"blob\";\n\n\t\txhr.addEventListener(\"load\", function () {\n\t\t\tif (xhr.status === 200) {\n\t\t\t\tZ.debug(\"downloadBlob Image retrieved. resolving\", 3);\n\t\t\t\tresolve(xhr.response);\n\t\t\t} else {\n\t\t\t\treject(xhr.response);\n\t\t\t}\n\t\t});\n\t\t// Send XHR\n\t\txhr.send();\n\t});\n};\n\"use strict\";\n\nfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\nZotero.ApiObject = function () {\n\tthis.instance = \"Zotero.ApiObject\";\n\tthis.version = 0;\n};\n\n//associate Entry with a library so we can update it on the server\nZotero.ApiObject.prototype.associateWithLibrary = function (library) {\n\tvar apiObject = this;\n\tapiObject.owningLibrary = library;\n\tif (_typeof(this.apiObj.library) == \"object\") {\n\t\tthis.apiObj.library.type = library.type;\n\t\tthis.apiObj.library.id = library.libraryID;\n\t}\n\treturn apiObject;\n};\n\nZotero.ApiObject.prototype.fieldComparer = function (attr) {\n\tif (window.Intl) {\n\t\tvar collator = new window.Intl.Collator();\n\t\treturn function (a, b) {\n\t\t\treturn collator.compare(a.apiObj.data[attr], b.apiObj.data[attr]);\n\t\t};\n\t} else {\n\t\treturn function (a, b) {\n\t\t\tif (a.apiObj.data[attr].toLowerCase() == b.apiObj.data[attr].toLowerCase()) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tif (a.apiObj.data[attr].toLowerCase() < b.apiObj.data[attr].toLowerCase()) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\treturn 1;\n\t\t};\n\t}\n};\n\"use strict\";\n\nZotero.ApiResponse = function (response) {\n\tZ.debug(\"Zotero.ApiResponse\", 3);\n\tthis.totalResults = 0;\n\tthis.apiVersion = null;\n\tthis.lastModifiedVersion = 0;\n\tthis.linkHeader = '';\n\tthis.links = {};\n\n\tif (response) {\n\t\tif (!response.isError) {\n\t\t\tthis.isError = false;\n\t\t} else {\n\t\t\tthis.isError = true;\n\t\t}\n\t\tthis.data = response.data;\n\t\t//this.jqxhr = response.jqxhr;\n\t\tthis.parseResponse(response);\n\t}\n};\n\nZotero.ApiResponse.prototype.parseResponse = function (response) {\n\tZ.debug(\"parseResponse\");\n\tvar apiResponse = this;\n\tapiResponse.jqxhr = response.jqxhr;\n\tapiResponse.status = response.jqxhr.status;\n\t//keep track of relevant headers\n\tapiResponse.lastModifiedVersion = response.jqxhr.getResponseHeader(\"Last-Modified-Version\");\n\tapiResponse.apiVersion = response.jqxhr.getResponseHeader(\"Zotero-API-Version\");\n\tapiResponse.backoff = response.jqxhr.getResponseHeader(\"Backoff\");\n\tapiResponse.retryAfter = response.jqxhr.getResponseHeader(\"Retry-After\");\n\tapiResponse.contentType = response.jqxhr.getResponseHeader(\"Content-Type\");\n\tapiResponse.linkHeader = response.jqxhr.getResponseHeader(\"Link\");\n\tapiResponse.totalResults = response.jqxhr.getResponseHeader(\"Total-Results\");\n\tif (apiResponse.backoff) {\n\t\tapiResponse.backoff = parseInt(apiResponse.backoff, 10);\n\t}\n\tif (apiResponse.retryAfter) {\n\t\tapiResponse.retryAfter = parseInt(apiResponse.retryAfter, 10);\n\t}\n\t//TODO: parse link header into individual links\n\tZ.debug(\"parse link header\");\n\tZ.debug(apiResponse.linkHeader);\n\tif (apiResponse.linkHeader) {\n\t\tvar links = apiResponse.linkHeader.split(',');\n\t\tvar parsedLinks = {};\n\t\tvar linkRegex = /^<([^>]+)>; rel=\"([^\\\"]*)\"$/;\n\t\tfor (var i = 0; i < links.length; i++) {\n\t\t\tvar matches = linkRegex.exec(links[i].trim());\n\t\t\tif (matches[2]) {\n\t\t\t\tparsedLinks[matches[2]] = matches[1];\n\t\t\t}\n\t\t}\n\t\tapiResponse.parsedLinks = parsedLinks;\n\t}\n\tZ.debug(\"done parsing response\");\n};\n\"use strict\";\n\nfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\n/*\n * Make concurrent and sequential network requests, respecting backoff/retry-after\n * headers, and keeping concurrent requests below a certain limit.\n * \n * Push onto the queue individual or arrays of requestConfig objects\n * If there is room for requests and we are not currently backing off:\n *   start a sequential series, or individual request\n * When any request or set of requests finishes, we preprocess the response,\n * looking for backoff/retry-after to obey, and putting sequential responses\n * into an array. We then trigger the next waiting request.\n * \n */\n\nZotero.Net = function () {\n\tthis.deferredQueue = [];\n\tthis.numRunning = 0;\n\tthis.numConcurrent = 3;\n\tthis.backingOff = false;\n};\n\nZotero.Net.prototype.queueDeferred = function () {\n\tvar net = this;\n\tvar d = new J.Deferred();\n\tnet.deferredQueue.push(d);\n\treturn Promise.resolve(d);\n};\n\nZotero.Net.prototype.queueRequest = function (requestObject) {\n\tZ.debug(\"Zotero.Net.queueRequest\", 3);\n\tvar net = this;\n\tvar resultPromise;\n\n\tif (Array.isArray(requestObject)) {\n\t\tresultPromise = net.queueDeferred().then(function () {\n\t\t\tZ.debug(\"running sequential after queued deferred resolved\", 4);\n\t\t\treturn net.runSequential(requestObject);\n\t\t}).then(function (response) {\n\t\t\tZ.debug(\"runSequential done\", 3);\n\t\t\tnet.queuedRequestDone();\n\t\t\treturn response;\n\t\t});\n\t} else {\n\t\tresultPromise = net.queueDeferred().then(function () {\n\t\t\tZ.debug(\"running concurrent after queued deferred resolved\", 4);\n\t\t\treturn net.runConcurrent(requestObject);\n\t\t}).then(function (response) {\n\t\t\tZ.debug(\"done with queuedRequest\");\n\t\t\tnet.queuedRequestDone();\n\t\t\treturn response;\n\t\t});\n\t}\n\n\tnet.runNext();\n\treturn resultPromise.catch(function (error) {\n\t\tZ.error(\"Error before leaving Zotero.Net\");\n\t\tZ.error(error);\n\t});\n};\n\nZotero.Net.prototype.runConcurrent = function (requestObject) {\n\tZ.debug(\"Zotero.Net.runConcurrent\", 3);\n\treturn this.ajaxRequest(requestObject).then(function (response) {\n\t\tZ.debug(\"done with runConcurrent request\");\n\t\treturn response;\n\t});\n};\n\n//run the set of requests serially\n//chaining each request onto the .then of the previous one, after\n//adding the previous response to a responses array that will be\n//returned via promise to the caller when all requests are complete\nZotero.Net.prototype.runSequential = function (requestObjects) {\n\tZ.debug(\"Zotero.Net.runSequential\", 3);\n\tvar net = this;\n\tvar responses = [];\n\tvar seqPromise = Promise.resolve();\n\n\tfor (var i = 0; i < requestObjects.length; i++) {\n\t\tvar requestObject = requestObjects[i];\n\t\tseqPromise = seqPromise.then(function () {\n\t\t\tvar p = net.ajaxRequest(requestObject).then(function (response) {\n\t\t\t\tZ.debug('pushing sequential response into result array');\n\t\t\t\tresponses.push(response);\n\t\t\t});\n\t\t\treturn p;\n\t\t});\n\t}\n\n\treturn seqPromise.then(function () {\n\t\tZ.debug(\"done with sequential aggregator promise - returning responses\");\n\t\treturn responses;\n\t});\n};\n\n//when one concurrent call, or a sequential series finishes, subtract it from the running\n//count and run the next if there is something waiting to be run\nZotero.Net.prototype.individualRequestDone = function (response) {\n\tZ.debug(\"Zotero.Net.individualRequestDone\", 3);\n\tvar net = this;\n\n\t//check if we need to back off before making more requests\n\tvar wait = net.checkDelay(response);\n\tif (wait > 0) {\n\t\tvar waitms = wait * 1000;\n\t\tnet.backingOff = true;\n\t\tvar waitExpiration = Date.now() + waitms;\n\t\tif (waitExpiration > net.waitingExpires) {\n\t\t\tnet.waitingExpires = waitExpiration;\n\t\t}\n\t\twindow.setTimeout(net.runNext, waitms);\n\t}\n\n\treturn response;\n};\n\nZotero.Net.prototype.queuedRequestDone = function (response) {\n\tZ.debug('queuedRequestDone', 3);\n\tvar net = this;\n\tnet.numRunning--;\n\tnet.runNext();\n\treturn response;\n};\n\nZotero.Net.prototype.runNext = function () {\n\tZ.debug(\"Zotero.Net.runNext\", 3);\n\tvar net = this;\n\tvar nowms = Date.now();\n\n\t//check if we're backing off and need to remain backing off,\n\t//or if we should now continue\n\tif (net.backingOff && net.waitingExpires > nowms - 100) {\n\t\tZ.debug(\"currently backing off\", 3);\n\t\tvar waitms = net.waitingExpires - nowms;\n\t\twindow.setTimeout(net.runNext, waitms);\n\t\treturn;\n\t} else if (net.backingOff && net.waitingExpires <= nowms - 100) {\n\t\tnet.backingOff = false;\n\t}\n\n\t//continue making requests up to the concurrent limit\n\tZ.debug(net.numRunning + \"/\" + net.numConcurrent + \" Running. \" + net.deferredQueue.length + \" queued.\", 3);\n\twhile (net.deferredQueue.length > 0 && net.numRunning < net.numConcurrent) {\n\t\tnet.numRunning++;\n\t\tvar nextD = net.deferredQueue.shift();\n\t\tnextD.resolve();\n\t\tZ.debug(net.numRunning + \"/\" + net.numConcurrent + \" Running. \" + net.deferredQueue.length + \" queued.\", 3);\n\t}\n};\n\nZotero.Net.prototype.checkDelay = function (response) {\n\tZ.debug('Zotero.Net.checkDelay');\n\tZ.debug(response);\n\tvar net = this;\n\tvar wait = 0;\n\tif (Array.isArray(response)) {\n\t\tfor (var i = 0; i < response.length; i++) {\n\t\t\tvar iwait = net.checkDelay(response[i]);\n\t\t\tif (iwait > wait) {\n\t\t\t\twait = iwait;\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (response.status == 429) {\n\t\t\twait = response.retryAfter;\n\t\t} else if (response.backoff) {\n\t\t\twait = response.backoff;\n\t\t}\n\t}\n\treturn wait;\n};\n\nZotero.Net.prototype.ajaxRequest = function (requestConfig) {\n\tZ.debug(\"Zotero.Net.ajaxRequest\", 3);\n\tvar net = this;\n\tvar defaultConfig = {\n\t\ttype: 'GET',\n\t\theaders: {\n\t\t\t'Zotero-API-Version': Zotero.config.apiVersion,\n\t\t\t'Content-Type': 'application/json'\n\t\t},\n\t\tsuccess: function success(response) {\n\t\t\treturn response;\n\t\t},\n\t\terror: function error(response) {\n\t\t\tZ.error(\"ajaxRequest rejected:\" + response.jqxhr.status + \" - \" + response.jqxhr.responseText);\n\t\t\treturn response;\n\t\t}\n\t\t//cache:false\n\t};\n\tvar headers = Z.extend({}, defaultConfig.headers, requestConfig.headers);\n\tvar config = Z.extend({}, defaultConfig, requestConfig);\n\tconfig.headers = headers;\n\tif (_typeof(config.url) == 'object') {\n\t\tconfig.url = Zotero.ajax.apiRequestString(config.url);\n\t}\n\tconfig.url = Zotero.ajax.proxyWrapper(config.url, config.type);\n\n\tif (!config.url) {\n\t\tthrow \"No url specified in Zotero.Net.ajaxRequest\";\n\t}\n\t//rename success/error callbacks so J.ajax does not actually use them\n\t//and we can use them as es6 promise result functions with expected\n\t//single value arguments\n\tconfig.zsuccess = config.success;\n\tconfig.zerror = config.error;\n\tdelete config.success;\n\tdelete config.error;\n\n\tZ.debug(\"AJAX config\");\n\tZ.debug(config);\n\tvar ajaxpromise = new Promise(function (resolve, reject) {\n\t\tnet.ajax(config).then(function (request) {\n\t\t\tvar data;\n\t\t\tswitch (request.responseType) {\n\t\t\t\tcase \"json\":\n\t\t\t\tcase \"\":\n\t\t\t\t\ttry {\n\t\t\t\t\t\tdata = JSON.parse(request.response);\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\tdata = request.response;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"text\":\n\t\t\t\t//case \"\":\n\t\t\t\tdefault:\n\t\t\t\t\tdata = request.response;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tvar r = new Zotero.ApiResponse({\n\t\t\t\tjqxhr: request,\n\t\t\t\tdata: data,\n\t\t\t\ttextStatus: request.responseText\n\t\t\t});\n\t\t\tresolve(r);\n\t\t}, function (request) {\n\t\t\tvar r = new Zotero.ApiResponse({\n\t\t\t\tjqxhr: request,\n\t\t\t\ttextStatus: request.responseText,\n\t\t\t\tisError: true\n\t\t\t});\n\t\t\treject(r);\n\t\t});\n\t}).then(net.individualRequestDone.bind(net)).then(function (response) {\n\t\t//now that we're done handling, reject\n\t\tif (response.isError) {\n\t\t\tZ.error(\"re-throwing ApiResponse that was a rejection\");\n\t\t\tthrow response;\n\t\t}\n\t\treturn response;\n\t}).then(config.zsuccess, config.zerror);\n\n\treturn ajaxpromise;\n};\n\nZotero.Net.prototype.ajax = function (config) {\n\tconfig = Zotero.extend({ type: 'GET' }, config);\n\tvar promise = new Promise(function (resolve, reject) {\n\t\tvar req = new XMLHttpRequest();\n\t\tvar uri = config.url;\n\t\treq.open(config.type, uri);\n\n\t\tif (config.headers) {\n\t\t\tObject.keys(config.headers).forEach(function (key) {\n\t\t\t\tvar val = config.headers[key];\n\t\t\t\treq.setRequestHeader(key, val);\n\t\t\t});\n\t\t}\n\n\t\treq.send(config.data);\n\n\t\treq.onload = function () {\n\t\t\tZ.debug(\"XMLHttpRequest done\");\n\t\t\tZ.debug(req);\n\t\t\tif (req.status >= 200 && req.status < 300) {\n\t\t\t\tZ.debug(\"200-300 response: resolving Net.ajax promise\");\n\t\t\t\t// Performs the function \"resolve\" when this.status is equal to 2xx\n\t\t\t\tresolve(req);\n\t\t\t} else {\n\t\t\t\tZ.debug(\"not 200-300 response: rejecting Net.ajax promise\");\n\t\t\t\t// Performs the function \"reject\" when this.status is different than 2xx\n\t\t\t\treject(req);\n\t\t\t}\n\t\t};\n\t\treq.onerror = function () {\n\t\t\treject(req);\n\t\t};\n\t});\n\n\treturn promise;\n};\n\nZotero.net = new Zotero.Net();\n\"use strict\";\n\n/**\n * A user or group Zotero library. This is generally the top level object\n * through which interactions should happen. It houses containers for\n * Zotero API objects (collections, items, etc) and handles making requests\n * with particular API credentials, as well as storing data locally.\n * @param {string} type                 type of library, 'user' or 'group'\n * @param {int} libraryID            ID of the library\n * @param {string} libraryUrlIdentifier identifier used in urls, could be library id or user/group slug\n * @param {string} apiKey               key to use for API requests\n */\nZotero.Library = function (type, libraryID, libraryUrlIdentifier, apiKey) {\n\tZ.debug(\"Zotero.Library constructor\", 3);\n\tZ.debug(\"Library Constructor: \" + type + \" \" + libraryID + \" \", 3);\n\tvar library = this;\n\tZ.debug(libraryUrlIdentifier, 4);\n\tlibrary.instance = \"Zotero.Library\";\n\tlibrary.libraryVersion = 0;\n\tlibrary.syncState = {\n\t\tearliestVersion: null,\n\t\tlatestVersion: null\n\t};\n\tlibrary._apiKey = apiKey || '';\n\n\tif (Zotero.config.librarySettings) {\n\t\tlibrary.libraryBaseWebsiteUrl = Zotero.config.librarySettings.libraryPathString;\n\t} else {\n\t\tlibrary.libraryBaseWebsiteUrl = Zotero.config.baseWebsiteUrl;\n\t\tif (type == 'group') {\n\t\t\tlibrary.libraryBaseWebsiteUrl += 'groups/';\n\t\t}\n\t\tif (libraryUrlIdentifier) {\n\t\t\tthis.libraryBaseWebsiteUrl += libraryUrlIdentifier + '/items';\n\t\t} else {\n\t\t\tZ.warn(\"no libraryUrlIdentifier specified\");\n\t\t}\n\t}\n\t//object holders within this library, whether tied to a specific library or not\n\tlibrary.items = new Zotero.Items();\n\tlibrary.items.owningLibrary = library;\n\tlibrary.itemKeys = [];\n\tlibrary.collections = new Zotero.Collections();\n\tlibrary.collections.libraryUrlIdentifier = library.libraryUrlIdentifier;\n\tlibrary.collections.owningLibrary = library;\n\tlibrary.tags = new Zotero.Tags();\n\tlibrary.searches = new Zotero.Searches();\n\tlibrary.searches.owningLibrary = library;\n\tlibrary.groups = new Zotero.Groups();\n\tlibrary.groups.owningLibrary = library;\n\tlibrary.deleted = new Zotero.Deleted();\n\tlibrary.deleted.owningLibrary = library;\n\n\tif (!type) {\n\t\t//return early if library not specified\n\t\tZ.warn(\"No type specified for library\");\n\t\treturn;\n\t}\n\t//attributes tying instance to a specific Zotero library\n\tlibrary.type = type;\n\tlibrary.libraryType = type;\n\tlibrary.libraryID = libraryID;\n\tlibrary.libraryString = Zotero.utils.libraryString(library.libraryType, library.libraryID);\n\tlibrary.libraryUrlIdentifier = libraryUrlIdentifier;\n\n\t//initialize preferences object\n\tlibrary.preferences = new Zotero.Preferences(Zotero.store, library.libraryString);\n\n\t//initialize indexedDB if we're supposed to use it\n\t//detect safari until they fix their shit\n\tvar is_chrome = navigator.userAgent.indexOf('Chrome') > -1;\n\tvar is_explorer = navigator.userAgent.indexOf('MSIE') > -1;\n\tvar is_firefox = navigator.userAgent.indexOf('Firefox') > -1;\n\tvar is_safari = navigator.userAgent.indexOf(\"Safari\") > -1;\n\tvar is_opera = navigator.userAgent.toLowerCase().indexOf(\"op\") > -1;\n\tif (is_chrome && is_safari) {\n\t\tis_safari = false;\n\t}\n\tif (is_chrome && is_opera) {\n\t\tis_chrome = false;\n\t}\n\tif (is_safari) {\n\t\tZotero.config.useIndexedDB = false;\n\t\tZotero.warn(\"Safari detected; disabling indexedDB\");\n\t}\n\n\tif (Zotero.config.useIndexedDB === true) {\n\t\tZ.debug(\"Library Constructor: indexedDB init\", 3);\n\t\tvar idbLibrary = new Zotero.Idb.Library(library.libraryString);\n\t\tidbLibrary.owningLibrary = this;\n\t\tlibrary.idbLibrary = idbLibrary;\n\t\tidbLibrary.init().then(function () {\n\t\t\tZ.debug(\"Library Constructor: idbInitD Done\", 3);\n\t\t\tif (Zotero.config.preloadCachedLibrary === true) {\n\t\t\t\tZ.debug(\"Library Constructor: preloading cached library\", 3);\n\t\t\t\tvar cacheLoadD = library.loadIndexedDBCache();\n\t\t\t\tcacheLoadD.then(function () {\n\t\t\t\t\t//TODO: any stuff that needs to execute only after cache is loaded\n\t\t\t\t\t//possibly fire new events to cause display to refresh after load\n\t\t\t\t\tZ.debug(\"Library Constructor: Library.items.itemsVersion: \" + library.items.itemsVersion, 3);\n\t\t\t\t\tZ.debug(\"Library Constructor: Library.collections.collectionsVersion: \" + library.collections.collectionsVersion, 3);\n\t\t\t\t\tZ.debug(\"Library Constructor: Library.tags.tagsVersion: \" + library.tags.tagsVersion, 3);\n\t\t\t\t\tZ.debug(\"Library Constructor: Triggering cachedDataLoaded\", 3);\n\t\t\t\t\tlibrary.trigger('cachedDataLoaded');\n\t\t\t\t}, function (err) {\n\t\t\t\t\tZ.error(\"Error loading cached library\");\n\t\t\t\t\tZ.error(err);\n\t\t\t\t\tthrow new Error(\"Error loading cached library\");\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t//trigger cachedDataLoaded since we are done with that step\n\t\t\t\tlibrary.trigger('cachedDataLoaded');\n\t\t\t}\n\t\t}, function () {\n\t\t\t//can't use indexedDB. Set to false in config and trigger error to notify user\n\t\t\tZotero.config.useIndexedDB = false;\n\t\t\tlibrary.trigger(\"indexedDBError\");\n\t\t\tlibrary.trigger('cachedDataLoaded');\n\t\t\tZ.error(\"Error initializing indexedDB. Promise rejected.\");\n\t\t\t//don't re-throw error, since we can still load data from the API\n\t\t});\n\t}\n\n\tlibrary.dirty = false;\n\n\t//set noop data-change callbacks\n\tlibrary.tagsChanged = function () {};\n\tlibrary.collectionsChanged = function () {};\n\tlibrary.itemsChanged = function () {};\n};\n/**\n * Items columns for which sorting is supported\n * @type {Array}\n */\nZotero.Library.prototype.sortableColumns = ['title', 'creator', 'itemType', 'date', 'year', 'publisher', 'publicationTitle', 'journalAbbreviation', 'language', 'accessDate', 'libraryCatalog', 'callNumber', 'rights', 'dateAdded', 'dateModified',\n/*'numChildren',*/\n'addedBy'\n/*'modifiedBy'*/];\n/**\n * Columns that can be displayed in an items table UI\n * @type {Array}\n */\nZotero.Library.prototype.displayableColumns = ['title', 'creator', 'itemType', 'date', 'year', 'publisher', 'publicationTitle', 'journalAbbreviation', 'language', 'accessDate', 'libraryCatalog', 'callNumber', 'rights', 'dateAdded', 'dateModified', 'numChildren', 'addedBy'\n/*'modifiedBy'*/];\n/**\n * Items columns that only apply to group libraries\n * @type {Array}\n */\nZotero.Library.prototype.groupOnlyColumns = ['addedBy'\n/*'modifiedBy'*/];\n\n/**\n * Sort function that converts strings to locale lower case before comparing,\n * however this is still not particularly effective at getting correct localized\n * sorting in modern browsers due to browser implementations being poor. What we\n * really want here is to strip diacritics first.\n * @param  {string} a [description]\n * @param  {string} b [description]\n * @return {int}   [description]\n */\nZotero.Library.prototype.comparer = function () {\n\tif (window.Intl) {\n\t\treturn new window.Intl.Collator().compare;\n\t} else {\n\t\treturn function (a, b) {\n\t\t\tif (a.toLocaleLowerCase() == b.toLocaleLowerCase()) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tif (a.toLocaleLowerCase() < b.toLocaleLowerCase()) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\treturn 1;\n\t\t};\n\t}\n};\n\n//Zotero library wrapper around jQuery ajax that returns a jQuery promise\n//@url String url to request or object for input to apiRequestUrl and query string\n//@type request method\n//@options jquery options that are not the default for Zotero requests\nZotero.Library.prototype.ajaxRequest = function (url, type, options) {\n\tZ.debug(\"Library.ajaxRequest\", 3);\n\tif (!type) {\n\t\ttype = 'GET';\n\t}\n\tif (!options) {\n\t\toptions = {};\n\t}\n\tvar requestObject = {\n\t\turl: url,\n\t\ttype: type\n\t};\n\trequestObject = Z.extend({}, requestObject, options);\n\tZ.debug(requestObject, 3);\n\treturn Zotero.net.queueRequest(requestObject);\n};\n\n//Take an array of objects that specify Zotero API requests and perform them\n//in sequence.\n//return deferred that gets resolved when all requests have gone through.\n//Update versions after each request, otherwise subsequent writes won't go through.\n//or do we depend on specified callbacks to update versions if necessary?\n//fail on error?\n//request object must specify: url, method, body, headers, success callback, fail callback(?)\n\n/**\n * Take an array of objects that specify Zotero API requests and perform them\n * in sequence. Return a promise that gets resolved when all requests have\n * gone through.\n * @param  {[] Objects} requests Array of objects specifying requests to be made\n * @return {Promise}          Promise that resolves/rejects along with requests\n */\nZotero.Library.prototype.sequentialRequests = function (requests) {\n\tZ.debug(\"Zotero.Library.sequentialRequests\", 3);\n\tvar library = this;\n\treturn Zotero.net.queueRequest(requests);\n};\n\n/**\n * Generate a website url based on a dictionary of variables and the configured\n * libraryBaseWebsiteUrl\n * @param  {Object} urlvars Dictionary of key/value variables\n * @return {string}         website url\n */\nZotero.Library.prototype.websiteUrl = function (urlvars) {\n\tZ.debug(\"Zotero.library.websiteUrl\", 3);\n\tZ.debug(urlvars, 4);\n\tvar library = this;\n\n\tvar urlVarsArray = [];\n\tObject.keys(urlvars).forEach(function (key) {\n\t\tvar value = urlvars[key];\n\t\tif (value === '') return;\n\t\turlVarsArray.push(key + '/' + value);\n\t});\n\turlVarsArray.sort();\n\tZ.debug(urlVarsArray, 4);\n\tvar pathVarsString = urlVarsArray.join('/');\n\n\treturn library.libraryBaseWebsiteUrl + '/' + pathVarsString;\n};\n\nZotero.Library.prototype.synchronize = function () {\n\t//get updated group metadata if applicable\n\t//  (this is an individual library method, so only necessary if this is\n\t//  a group library and we want to keep info about it)\n\t//sync library data\n\t//  get updated collections versions newer than current library version\n\t//  get updated searches versions newer than current library version\n\t//  get updated item versions newer than current library version\n\t//\n};\n\n/**\n * Make and process API requests to update the local library items based on the\n * versions we have locally. When the promise is resolved, we should have up to\n * date items in this library's items container, as well as saved to indexedDB\n * if configured to use it.\n * @return {Promise} Promise\n */\nZotero.Library.prototype.loadUpdatedItems = function () {\n\tZ.debug(\"Zotero.Library.loadUpdatedItems\", 3);\n\tvar library = this;\n\t//sync from the libraryVersion if it exists, otherwise use the itemsVersion, which is likely\n\t//derived from the most recent version of any individual item we have.\n\tvar syncFromVersion = library.libraryVersion ? library.libraryVersion : library.items.itemsVersion;\n\treturn Promise.resolve(library.updatedVersions(\"items\", syncFromVersion)).then(function (response) {\n\t\tZ.debug(\"itemVersions resolved\", 3);\n\t\tZ.debug(\"items Last-Modified-Version: \" + response.lastModifiedVersion, 3);\n\t\tlibrary.items.updateSyncState(response.lastModifiedVersion);\n\n\t\tvar itemVersions = response.data;\n\t\tlibrary.itemVersions = itemVersions;\n\t\tvar itemKeys = [];\n\t\tObject.keys(itemVersions).forEach(function (key) {\n\t\t\tvar val = itemVersions[key];\n\t\t\tvar item = library.items.getItem(key);\n\t\t\tif (!item || item.apiObj.key != val) {\n\t\t\t\titemKeys.push(key);\n\t\t\t}\n\t\t});\n\t\treturn library.loadItemsFromKeys(itemKeys);\n\t}).then(function (responses) {\n\t\tZ.debug(\"loadItemsFromKeys resolved\", 3);\n\t\tlibrary.items.updateSyncedVersion();\n\n\t\t//TODO: library needs its own state\n\t\tvar displayParams = Zotero.state.getUrlVars();\n\t\tlibrary.buildItemDisplayView(displayParams);\n\t\t//save updated items to IDB\n\t\tif (Zotero.config.useIndexedDB) {\n\t\t\tvar saveItemsD = library.idbLibrary.updateItems(library.items.objectArray);\n\t\t}\n\t});\n};\n\nZotero.Library.prototype.loadUpdatedCollections = function () {\n\tZ.debug(\"Zotero.Library.loadUpdatedCollections\", 3);\n\tvar library = this;\n\t//sync from the libraryVersion if it exists, otherwise use the collectionsVersion, which is likely\n\t//derived from the most recent version of any individual collection we have.\n\tZ.debug('library.collections.collectionsVersion:' + library.collections.collectionsVersion);\n\tvar syncFromVersion = library.libraryVersion ? library.libraryVersion : library.collections.collectionsVersion;\n\t//we need modified collectionKeys regardless, so load them\n\treturn library.updatedVersions(\"collections\", syncFromVersion).then(function (response) {\n\t\tZ.debug(\"collectionVersions finished\", 3);\n\t\tZ.debug(\"Collections Last-Modified-Version: \" + response.lastModifiedVersion, 3);\n\t\t//start the syncState version tracking. This should be the earliest version throughout\n\t\tlibrary.collections.updateSyncState(response.lastModifiedVersion);\n\n\t\tvar collectionVersions = response.data;\n\t\tlibrary.collectionVersions = collectionVersions;\n\t\tvar collectionKeys = [];\n\t\tObject.keys(collectionVersions).forEach(function (key) {\n\t\t\tvar val = collectionVersions[key];\n\t\t\tvar c = library.collections.getCollection(key);\n\t\t\tif (!c || c.apiObj.version != val) {\n\t\t\t\tcollectionKeys.push(key);\n\t\t\t}\n\t\t});\n\t\tif (collectionKeys.length === 0) {\n\t\t\tZ.debug(\"No collectionKeys need updating. resolving\", 3);\n\t\t\treturn response;\n\t\t} else {\n\t\t\tZ.debug(\"fetching collections by key\", 3);\n\t\t\treturn library.loadCollectionsFromKeys(collectionKeys).then(function () {\n\t\t\t\tvar collections = library.collections;\n\t\t\t\tcollections.initSecondaryData();\n\n\t\t\t\tZ.debug(\"All updated collections loaded\", 3);\n\t\t\t\tlibrary.collections.updateSyncedVersion();\n\t\t\t\t//TODO: library needs its own state\n\t\t\t\tvar displayParams = Zotero.state.getUrlVars();\n\t\t\t\t//save updated collections to cache\n\t\t\t\tZ.debug(\"loadUpdatedCollections complete - saving collections to cache before resolving\", 3);\n\t\t\t\tZ.debug(\"collectionsVersion: \" + library.collections.collectionsVersion, 3);\n\t\t\t\t//library.saveCachedCollections();\n\t\t\t\t//save updated collections to IDB\n\t\t\t\tif (Zotero.config.useIndexedDB) {\n\t\t\t\t\treturn library.idbLibrary.updateCollections(collections.collectionsArray);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}).then(function () {\n\t\tZ.debug(\"done getting collection data. requesting deleted data\", 3);\n\t\treturn library.getDeleted(library.libraryVersion);\n\t}).then(function (response) {\n\t\tZ.debug(\"got deleted collections data: removing local copies\", 3);\n\t\tZ.debug(library.deleted);\n\t\tif (library.deleted.deletedData.collections && library.deleted.deletedData.collections.length > 0) {\n\t\t\tlibrary.collections.removeLocalCollections(library.deleted.deletedData.collections);\n\t\t}\n\t});\n};\n\nZotero.Library.prototype.loadUpdatedTags = function () {\n\tZ.debug(\"Zotero.Library.loadUpdatedTags\", 3);\n\tvar library = this;\n\tZ.debug(\"tagsVersion: \" + library.tags.tagsVersion, 3);\n\treturn Promise.resolve(library.loadAllTags({ since: library.tags.tagsVersion })).then(function () {\n\t\tZ.debug(\"done getting tags, request deleted tags data\", 3);\n\t\treturn library.getDeleted(library.libraryVersion);\n\t}).then(function (response) {\n\t\tZ.debug(\"got deleted tags data\");\n\t\tif (library.deleted.deletedData.tags && library.deleted.deletedData.tags.length > 0) {\n\t\t\tlibrary.tags.removeTags(library.deleted.deletedData.tags);\n\t\t}\n\t\t//save updated tags to IDB\n\t\tif (Zotero.config.useIndexedDB) {\n\t\t\tZ.debug(\"saving updated tags to IDB\", 3);\n\t\t\tvar saveTagsD = library.idbLibrary.updateTags(library.tags.tagsArray);\n\t\t}\n\t});\n};\n\nZotero.Library.prototype.getDeleted = function (version) {\n\tZ.debug(\"Zotero.Library.getDeleted\", 3);\n\tvar library = this;\n\tvar urlconf = {\n\t\ttarget: 'deleted',\n\t\tlibraryType: library.libraryType,\n\t\tlibraryID: library.libraryID,\n\t\tsince: version\n\t};\n\n\t//if there is already a request working, create a new promise to resolve\n\t//when the actual request finishes\n\tif (library.deleted.pending) {\n\t\tZ.debug(\"getDeleted resolving with previously pending promise\");\n\t\treturn Promise.resolve(library.deleted.pendingPromise);\n\t}\n\n\t//don't fetch again if version we'd be requesting is between\n\t//deleted.newer and delete.deleted versions, just use that one\n\tZ.debug(\"version:\" + version);\n\tZ.debug('sinceVersion:' + library.deleted.sinceVersion);\n\tZ.debug('untilVersion:' + library.deleted.untilVersion);\n\n\tif (library.deleted.untilVersion && version >= library.deleted.sinceVersion /*&&\n                                                                             version < library.deleted.untilVersion*/) {\n\t\t\tZ.debug(\"deletedVersion matches requested: immediately resolving\");\n\t\t\treturn Promise.resolve(library.deleted.deletedData);\n\t\t}\n\n\tlibrary.deleted.pending = true;\n\tlibrary.deleted.pendingPromise = library.ajaxRequest(urlconf).then(function (response) {\n\t\tZ.debug(\"got deleted response\");\n\t\tlibrary.deleted.deletedData = response.data;\n\t\tZ.debug(\"Deleted Last-Modified-Version:\" + response.lastModifiedVersion, 3);\n\t\tlibrary.deleted.untilVersion = response.lastModifiedVersion;\n\t\tlibrary.deleted.sinceVersion = version;\n\t}).then(function (response) {\n\t\tZ.debug(\"cleaning up deleted pending\");\n\t\tlibrary.deleted.pending = false;\n\t\tlibrary.deleted.pendingPromise = false;\n\t});\n\n\treturn library.deleted.pendingPromise;\n};\n\nZotero.Library.prototype.processDeletions = function (deletions) {\n\tvar library = this;\n\t//process deleted collections\n\tlibrary.collections.processDeletions(deletions.collections);\n\t//process deleted items\n\tlibrary.items.processDeletions(deletions.items);\n};\n\n//Get a full bibliography from the API for web based citating\nZotero.Library.prototype.loadFullBib = function (itemKeys, style) {\n\tvar library = this;\n\tvar itemKeyString = itemKeys.join(',');\n\tvar urlconfig = {\n\t\t'target': 'items',\n\t\t'libraryType': library.libraryType,\n\t\t'libraryID': library.libraryID,\n\t\t'itemKey': itemKeyString,\n\t\t'format': 'bib',\n\t\t'linkwrap': '1'\n\t};\n\tif (itemKeys.length == 1) {\n\t\turlconfig.target = 'item';\n\t}\n\tif (style) {\n\t\turlconfig['style'] = style;\n\t}\n\n\tvar loadBibPromise = library.ajaxRequest(urlconfig).then(function (response) {\n\t\treturn response.data;\n\t});\n\n\treturn loadBibPromise;\n};\n\n//load bib for a single item from the API\nZotero.Library.prototype.loadItemBib = function (itemKey, style) {\n\tZ.debug(\"Zotero.Library.loadItemBib\", 3);\n\tvar library = this;\n\tvar urlconfig = {\n\t\t'target': 'item',\n\t\t'libraryType': library.libraryType,\n\t\t'libraryID': library.libraryID,\n\t\t'itemKey': itemKey,\n\t\t'content': 'bib'\n\t};\n\tif (style) {\n\t\turlconfig['style'] = style;\n\t}\n\n\tvar itemBibPromise = library.ajaxRequest(urlconfig).then(function (response) {\n\t\tvar item = new Zotero.Item(response.data);\n\t\tvar bibContent = item.apiObj.bib;\n\t\treturn bibContent;\n\t});\n\n\treturn itemBibPromise;\n};\n\n//load library settings from Zotero API and return a promise that gets resolved with\n//the Zotero.Preferences object for this library\nZotero.Library.prototype.loadSettings = function () {\n\tZ.debug(\"Zotero.Library.loadSettings\", 3);\n\tvar library = this;\n\tvar urlconfig = {\n\t\t'target': 'settings',\n\t\t'libraryType': library.libraryType,\n\t\t'libraryID': library.libraryID\n\t};\n\n\treturn library.ajaxRequest(urlconfig).then(function (response) {\n\t\tvar resultObject;\n\t\tif (typeof response.data == 'string') {\n\t\t\tresultObject = JSON.parse(response.data);\n\t\t} else {\n\t\t\tresultObject = response.data;\n\t\t}\n\t\t//save the full settings object so we have it available if we need to write,\n\t\t//even if it has settings we don't use or know about\n\t\tlibrary.preferences.setPref('settings', resultObject);\n\n\t\t//pull out the settings we know we care about so we can query them directly\n\t\tif (resultObject.tagColors) {\n\t\t\tvar tagColors = resultObject.tagColors.value;\n\t\t\tlibrary.preferences.setPref('tagColors', tagColors);\n\t\t\t/*\n   for(var i = 0; i < tagColors.length; i++){\n   \tvar t = library.tags.getTag(tagColors[i].name);\n   \tif(t){\n   \t\tt.color = tagColors[i].color;\n   \t}\n   }\n   */\n\t\t}\n\n\t\tlibrary.trigger('settingsLoaded');\n\t\treturn library.preferences;\n\t});\n};\n\n//take an array of tags and return subset of tags that should be colored, along with\n//the colors they should be\nZotero.Library.prototype.matchColoredTags = function (tags) {\n\tvar library = this;\n\tvar i;\n\tvar tagColorsSettings = library.preferences.getPref(\"tagColors\");\n\tif (!tagColorsSettings) return [];\n\n\tvar tagColorsMap = {};\n\tfor (i = 0; i < tagColorsSettings.length; i++) {\n\t\ttagColorsMap[tagColorsSettings[i].name.toLowerCase()] = tagColorsSettings[i].color;\n\t}\n\tvar resultTags = [];\n\n\tfor (i = 0; i < tags.length; i++) {\n\t\tif (tagColorsMap.hasOwnProperty(tags[i])) {\n\t\t\tresultTags.push(tagColorsMap[tags[i]]);\n\t\t}\n\t}\n\treturn resultTags;\n};\n\n/**\n * Duplicate existing Items from this library and save to foreignLibrary\n * with relationships indicating the ties. At time of writing, Zotero client\n * saves the relationship with either the destination group of two group\n * libraries or the personal library.\n * @param  {Zotero.Item[]} items\n * @param  {Zotero.Library} foreignLibrary\n * @return {Promise.Zotero.Item[]} - newly created items\n */\nZotero.Library.prototype.sendToLibrary = function (items, foreignLibrary) {\n\tvar foreignItems = [];\n\tfor (var i = 0; i < items.length; i++) {\n\t\tvar item = items[i];\n\t\tvar transferData = item.emptyJsonItem();\n\t\ttransferData.data = Z.extend({}, items[i].apiObj.data);\n\t\t//clear data that shouldn't be transferred:itemKey, collections\n\t\ttransferData.data.key = '';\n\t\ttransferData.data.version = 0;\n\t\ttransferData.data.collections = [];\n\t\tdelete transferData.data.dateModified;\n\t\tdelete transferData.data.dateAdded;\n\n\t\tvar newForeignItem = new Zotero.Item(transferData);\n\n\t\tnewForeignItem.pristine = Z.extend({}, newForeignItem.apiObj);\n\t\tnewForeignItem.initSecondaryData();\n\n\t\t//set relationship to tie to old item\n\t\tif (!newForeignItem.apiObj.data.relations) {\n\t\t\tnewForeignItem.apiObj.data.relations = {};\n\t\t}\n\t\tnewForeignItem.apiObj.data.relations['owl:sameAs'] = Zotero.url.relationUrl(item.owningLibrary.libraryType, item.owningLibrary.libraryID, item.key);\n\t\tforeignItems.push(newForeignItem);\n\t}\n\treturn foreignLibrary.items.writeItems(foreignItems);\n};\n\n/*METHODS FOR WORKING WITH THE ENTIRE LIBRARY -- NOT FOR GENERAL USE */\n\n//sync pull:\n//upload changed data\n// get updatedVersions for collections\n// get updatedVersions for searches\n// get upatedVersions for items\n// (sanity check versions we have for individual objects?)\n// loadCollectionsFromKeys\n// loadSearchesFromKeys\n// loadItemsFromKeys\n// process updated objects:\n//      ...\n// getDeletedData\n// process deleted\n// checkConcurrentUpdates (compare Last-Modified-Version from collections?newer request to one from /deleted request)\n\nZotero.Library.prototype.updatedVersions = function () {\n\tvar target = arguments.length <= 0 || arguments[0] === undefined ? \"items\" : arguments[0];\n\tvar version = arguments.length <= 1 || arguments[1] === undefined ? this.libraryVersion : arguments[1];\n\n\tZ.debug(\"Library.updatedVersions\", 3);\n\tvar library = this;\n\tvar urlconf = {\n\t\ttarget: target,\n\t\tformat: 'versions',\n\t\tlibraryType: library.libraryType,\n\t\tlibraryID: library.libraryID,\n\t\tsince: version\n\t};\n\treturn library.ajaxRequest(urlconf);\n};\n\n//Download and save information about every item in the library\n//keys is an array of itemKeys from this library that we need to download\nZotero.Library.prototype.loadItemsFromKeys = function (keys) {\n\tZotero.debug(\"Zotero.Library.loadItemsFromKeys\", 3);\n\tvar library = this;\n\treturn library.loadFromKeys(keys, \"items\");\n};\n\n//keys is an array of collectionKeys from this library that we need to download\nZotero.Library.prototype.loadCollectionsFromKeys = function (keys) {\n\tZotero.debug(\"Zotero.Library.loadCollectionsFromKeys\", 3);\n\tvar library = this;\n\treturn library.loadFromKeys(keys, \"collections\");\n};\n\n//keys is an array of searchKeys from this library that we need to download\nZotero.Library.prototype.loadSeachesFromKeys = function (keys) {\n\tZotero.debug(\"Zotero.Library.loadSearchesFromKeys\", 3);\n\tvar library = this;\n\treturn library.loadFromKeys(keys, \"searches\");\n};\n\nZotero.Library.prototype.loadFromKeys = function (keys, objectType) {\n\tZotero.debug(\"Zotero.Library.loadFromKeys\", 3);\n\tif (!objectType) objectType = 'items';\n\tvar library = this;\n\tvar keyslices = [];\n\twhile (keys.length > 0) {\n\t\tkeyslices.push(keys.splice(0, 50));\n\t}\n\n\tvar requestObjects = [];\n\tkeyslices.forEach(function (keyslice) {\n\t\tvar keystring = keyslice.join(',');\n\t\tswitch (objectType) {\n\t\t\tcase \"items\":\n\t\t\t\trequestObjects.push({\n\t\t\t\t\turl: {\n\t\t\t\t\t\t'target': 'items',\n\t\t\t\t\t\t'targetModifier': null,\n\t\t\t\t\t\t'itemKey': keystring,\n\t\t\t\t\t\t'limit': 50,\n\t\t\t\t\t\t'libraryType': library.libraryType,\n\t\t\t\t\t\t'libraryID': library.libraryID\n\t\t\t\t\t},\n\t\t\t\t\ttype: 'GET',\n\t\t\t\t\tsuccess: library.processLoadedItems.bind(library)\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase \"collections\":\n\t\t\t\trequestObjects.push({\n\t\t\t\t\turl: {\n\t\t\t\t\t\t'target': 'collections',\n\t\t\t\t\t\t'targetModifier': null,\n\t\t\t\t\t\t'collectionKey': keystring,\n\t\t\t\t\t\t'limit': 50,\n\t\t\t\t\t\t'libraryType': library.libraryType,\n\t\t\t\t\t\t'libraryID': library.libraryID\n\t\t\t\t\t},\n\t\t\t\t\ttype: 'GET',\n\t\t\t\t\tsuccess: library.processLoadedCollections.bind(library)\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase \"searches\":\n\t\t\t\trequestObjects.push({\n\t\t\t\t\turl: {\n\t\t\t\t\t\t'target': 'searches',\n\t\t\t\t\t\t'targetModifier': null,\n\t\t\t\t\t\t'searchKey': keystring,\n\t\t\t\t\t\t'limit': 50,\n\t\t\t\t\t\t'libraryType': library.libraryType,\n\t\t\t\t\t\t'libraryID': library.libraryID\n\t\t\t\t\t},\n\t\t\t\t\ttype: 'GET'\n\t\t\t\t\t//success: library.processLoadedSearches.bind(library)\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tvar promises = [];\n\tfor (var i = 0; i < requestObjects.length; i++) {\n\t\tpromises.push(Zotero.net.queueRequest(requestObjects[i]));\n\t}\n\treturn Promise.all(promises);\n\t/*\n return Zotero.net.queueRequest(requestObjects);\n */\n};\n\n//publishes: displayedItemsUpdated\n//assume we have up to date information about items in indexeddb.\n//build a list of indexedDB filter requests to then intersect to get final result\nZotero.Library.prototype.buildItemDisplayView = function (params) {\n\tZ.debug(\"Zotero.Library.buildItemDisplayView\", 3);\n\tZ.debug(params, 4);\n\t//start with list of all items if we don't have collectionKey\n\t//otherwise get the list of items in that collection\n\tvar library = this;\n\t//short-circuit if we don't have an initialized IDB yet\n\tif (!library.idbLibrary.db) {\n\t\treturn Promise.resolve([]);\n\t}\n\n\tvar filterPromises = [];\n\tif (params.collectionKey) {\n\t\tif (params.collectionKey == 'trash') {\n\t\t\tfilterPromises.push(library.idbLibrary.filterItems('deleted', 1));\n\t\t} else {\n\t\t\tfilterPromises.push(library.idbLibrary.filterItems('collectionKeys', params.collectionKey));\n\t\t}\n\t} else {\n\t\tfilterPromises.push(library.idbLibrary.getOrderedItemKeys('title'));\n\t}\n\n\t//filter by selected tags\n\tvar selectedTags = params.tag || [];\n\tif (typeof selectedTags == 'string') selectedTags = [selectedTags];\n\tfor (var i = 0; i < selectedTags.length; i++) {\n\t\tZ.debug('adding selected tag filter', 3);\n\t\tfilterPromises.push(library.idbLibrary.filterItems('itemTagStrings', selectedTags[i]));\n\t}\n\n\t//TODO: filter by search term.\n\t//(need full text array or to decide what we're actually searching on to implement this locally)\n\n\t//when all the filters have been applied, combine and sort\n\treturn Promise.all(filterPromises).then(function (results) {\n\t\tvar i;\n\t\tfor (i = 0; i < results.length; i++) {\n\t\t\tZ.debug(\"result from filterPromise: \" + results[i].length, 3);\n\t\t\tZ.debug(results[i], 3);\n\t\t}\n\t\tvar finalItemKeys = library.idbLibrary.intersectAll(results);\n\t\tvar itemsArray = library.items.getItems(finalItemKeys);\n\n\t\tZ.debug(\"All filters applied - Down to \" + itemsArray.length + ' items displayed', 3);\n\n\t\tZ.debug(\"remove child items and, if not viewing trash, deleted items\", 3);\n\t\tvar displayItemsArray = [];\n\t\tfor (i = 0; i < itemsArray.length; i++) {\n\t\t\tif (itemsArray[i].apiObj.data.parentItem) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (params.collectionKey != 'trash' && itemsArray[i].apiObj.deleted) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tdisplayItemsArray.push(itemsArray[i]);\n\t\t}\n\n\t\t//sort displayedItemsArray by given or configured column\n\t\tvar orderCol = params['order'] || 'title';\n\t\tvar sort = params['sort'] || 'asc';\n\t\tZ.debug(\"Sorting by \" + orderCol + \" - \" + sort, 3);\n\n\t\tvar comparer = Zotero.Library.prototype.comparer();\n\n\t\tdisplayItemsArray.sort(function (a, b) {\n\t\t\tvar aval = a.get(orderCol);\n\t\t\tvar bval = b.get(orderCol);\n\n\t\t\treturn comparer(aval, bval);\n\t\t});\n\n\t\tif (sort == 'desc') {\n\t\t\tZ.debug(\"sort is desc - reversing array\", 4);\n\t\t\tdisplayItemsArray.reverse();\n\t\t}\n\n\t\t//publish event signalling we're done\n\t\tZ.debug(\"triggering publishing displayedItemsUpdated\", 3);\n\t\tlibrary.trigger(\"displayedItemsUpdated\");\n\t\treturn displayItemsArray;\n\t});\n};\n\nZotero.Library.prototype.trigger = function (eventType, data) {\n\tvar library = this;\n\tZotero.trigger(eventType, data, library.libraryString);\n};\n\nZotero.Library.prototype.listen = function (events, handler, data) {\n\tvar library = this;\n\tvar filter = library.libraryString;\n\tZotero.listen(events, handler, data, filter);\n};\n\"use strict\";\n\nZotero.Container = function () {};\n\nZotero.Container.prototype.initSecondaryData = function () {};\n\nZotero.Container.prototype.addObject = function (object) {\n\tZotero.debug(\"Zotero.Container.addObject\", 4);\n\tvar container = this;\n\tcontainer.objectArray.push(object);\n\tcontainer.objectMap[object.key] = object;\n\tif (container.owningLibrary) {\n\t\tobject.associateWithLibrary(container.owningLibrary);\n\t}\n\n\treturn container;\n};\n\nZotero.Container.prototype.fieldComparer = function (field) {\n\tif (window.Intl) {\n\t\tvar collator = new window.Intl.Collator();\n\t\treturn function (a, b) {\n\t\t\treturn collator.compare(a.apiObj.data[field], b.apiObj.data[field]);\n\t\t};\n\t} else {\n\t\treturn function (a, b) {\n\t\t\tif (a.apiObj.data[field].toLowerCase() == b.apiObj.data[field].toLowerCase()) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tif (a.apiObj.data[field].toLowerCase() < b.apiObj.data[field].toLowerCase()) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\treturn 1;\n\t\t};\n\t}\n};\n\nZotero.Container.prototype.getObject = function (key) {\n\tvar container = this;\n\tif (container.objectMap.hasOwnProperty(key)) {\n\t\treturn container.objectMap[key];\n\t} else {\n\t\treturn false;\n\t}\n};\n\nZotero.Container.prototype.getObjects = function (keys) {\n\tvar container = this;\n\tvar objects = [];\n\tvar object;\n\tfor (var i = 0; i < keys.length; i++) {\n\t\tobject = container.getObject(keys[i]);\n\t\tif (object) {\n\t\t\tobjects.push(object);\n\t\t}\n\t}\n\treturn objects;\n};\n\nZotero.Container.prototype.removeObject = function (key) {\n\tvar container = this;\n\tif (container.objectMap.hasOwnProperty(key)) {\n\t\tdelete container.objectmap[key];\n\t\tcontainer.initSecondaryData();\n\t}\n};\n\nZotero.Container.prototype.removeObjects = function (keys) {\n\tvar container = this;\n\t//delete Objects from objectMap;\n\tfor (var i = 0; i < keys.length; i++) {\n\t\tdelete container.objectMap[keys[i]];\n\t}\n\n\t//rebuild array\n\tcontainer.initSecondaryData();\n};\n\nZotero.Container.prototype.writeObjects = function (objects) {\n\t//TODO:implement\n};\n\n//generate keys for objects about to be written if they are new\nZotero.Container.prototype.assignKeys = function (objectsArray) {\n\tvar object;\n\tfor (var i = 0; i < objectsArray.length; i++) {\n\t\tobject = objectsArray[i];\n\t\tvar key = object.get('key');\n\t\tif (!key) {\n\t\t\tvar newObjectKey = Zotero.utils.getKey();\n\t\t\tobject.set(\"key\", newObjectKey);\n\t\t\tobject.set(\"version\", 0);\n\t\t}\n\t}\n\treturn objectsArray;\n};\n\n//split an array of objects into chunks to write over multiple api requests\nZotero.Container.prototype.chunkObjectsArray = function (objectsArray) {\n\tvar chunkSize = 50;\n\tvar writeChunks = [];\n\n\tfor (var i = 0; i < objectsArray.length; i = i + chunkSize) {\n\t\twriteChunks.push(objectsArray.slice(i, i + chunkSize));\n\t}\n\n\treturn writeChunks;\n};\n\nZotero.Container.prototype.rawChunks = function (chunks) {\n\tvar rawChunkObjects = [];\n\n\tfor (var i = 0; i < chunks.length; i++) {\n\t\trawChunkObjects[i] = [];\n\t\tfor (var j = 0; j < chunks[i].length; j++) {\n\t\t\trawChunkObjects[i].push(chunks[i][j].writeApiObj());\n\t\t}\n\t}\n\treturn rawChunkObjects;\n};\n\n/**\n * Update syncState property on container to keep track of updates that occur during sync process.\n * Set earliestVersion to MIN(earliestVersion, version).\n * Set latestVersion to MAX(latestVersion, version).\n * This should be called with the modifiedVersion header for each response tied to this container\n * during a sync process.\n * @param  {Zotero.Container} container\n * @param  {int} version\n * @return {null}\n */\nZotero.Container.prototype.updateSyncState = function (version) {\n\tvar container = this;\n\tZ.debug(\"updateSyncState: \" + version, 3);\n\tif (!container.hasOwnProperty('syncState')) {\n\t\tZ.debug(\"no syncState property\");\n\t\tthrow new Error(\"Attempt to update sync state of object with no syncState property\");\n\t}\n\tif (container.syncState.earliestVersion === null) {\n\t\tcontainer.syncState.earliestVersion = version;\n\t}\n\tif (container.syncState.latestVersion === null) {\n\t\tcontainer.syncState.latestVersion = version;\n\t}\n\tif (version < container.syncState.earliestVersion) {\n\t\tcontainer.syncState.earliestVersion = version;\n\t}\n\tif (version > container.syncState.latestVersion) {\n\t\tcontainer.syncState.latestVersion = version;\n\t}\n\tZ.debug(\"done updating sync state\", 3);\n};\n\nZotero.Container.prototype.updateSyncedVersion = function (versionField) {\n\tvar container = this;\n\tif (container.syncState.earliestVersion !== null && container.syncState.earliestVersion == container.syncState.latestVersion) {\n\t\tcontainer.version = container.syncState.latestVersion;\n\t\tcontainer.synced = true;\n\t} else if (container.syncState.earliestVersion !== null) {\n\t\tcontainer.version = container.syncState.earliestVersion;\n\t}\n};\n\nZotero.Container.prototype.processDeletions = function (deletedKeys) {\n\tvar container = this;\n\tfor (var i = 0; i < deletedKeys.length; i++) {\n\t\tvar localObject = container.get(deletedKeys[i]);\n\t\tif (localObject !== false) {\n\t\t\t//still have object locally\n\t\t\tif (localObject.synced === true) {\n\t\t\t\t//our object is not modified, so delete it as the server thinks we should\n\t\t\t\tcontainer.removeObjects([deletedKeys[i]]);\n\t\t\t} else {\n\t\t\t\t//TODO: conflict resolution\n\t\t\t}\n\t\t}\n\t}\n};\n\n//update items appropriately based on response to multi-write request\n//for success:\n//  update objectKey if item doesn't have one yet (newly created item)\n//  update itemVersion to response's Last-Modified-Version header\n//  mark as synced\n//for unchanged:\n//  don't need to do anything? itemVersion should remain the same?\n//  mark as synced if not already?\n//for failed:\n//  add the failure to the object under writeFailure\n//  don't mark as synced\n//  calling code should check for writeFailure after the written objects\n//  are returned\nZotero.Container.prototype.updateObjectsFromWriteResponse = function (objectsArray, response) {\n\tZ.debug(\"Zotero.Container.updateObjectsFromWriteResponse\", 3);\n\tZ.debug(\"statusCode: \" + response.status, 3);\n\tvar data = response.data;\n\tif (response.status == 200) {\n\t\tZ.debug(\"newLastModifiedVersion: \" + response.lastModifiedVersion, 3);\n\t\t//make sure writes were actually successful and\n\t\t//update the itemKey for the parent\n\t\tif (data.hasOwnProperty('success')) {\n\t\t\t//update each successfully written item, possibly with new itemKeys\n\t\t\tObject.keys(data.success).forEach(function (ind) {\n\t\t\t\tvar i = parseInt(ind, 10);\n\t\t\t\tvar key = data.success[ind];\n\t\t\t\tvar object = objectsArray[i];\n\t\t\t\t//throw error if objectKey mismatch\n\t\t\t\tif (object.key !== \"\" && object.key !== key) {\n\t\t\t\t\tthrow new Error(\"object key mismatch in multi-write response\");\n\t\t\t\t}\n\t\t\t\tif (object.key === '') {\n\t\t\t\t\tobject.updateObjectKey(key);\n\t\t\t\t}\n\t\t\t\tobject.set('version', response.lastModifiedVersion);\n\t\t\t\tobject.synced = true;\n\t\t\t\tobject.writeFailure = false;\n\t\t\t});\n\t\t}\n\t\tif (data.hasOwnProperty('failed')) {\n\t\t\tZ.debug(\"updating objects with failed writes\", 3);\n\t\t\tObject.keys(data.failed).forEach(function (ind) {\n\t\t\t\tvar failure = data.failed[ind];\n\t\t\t\tZ.error(\"failed write \" + ind + \" - \" + failure);\n\t\t\t\tvar i = parseInt(ind, 10);\n\t\t\t\tvar object = objectsArray[i];\n\t\t\t\tobject.writeFailure = failure;\n\t\t\t});\n\t\t}\n\t} else if (response.status == 204) {\n\t\t//single item put response, this probably should never go to this function\n\t\tobjectsArray[0].synced = true;\n\t}\n};\n\n//return the key as a string when passed an argument that\n//could be either a string key or an object with a key property\nZotero.Container.prototype.extractKey = function (object) {\n\tif (typeof object == 'string') {\n\t\treturn object;\n\t}\n\treturn object.get('key');\n};\n\"use strict\";\n\nZotero.Collections = function (jsonBody) {\n\tvar collections = this;\n\tthis.instance = \"Zotero.Collections\";\n\tthis.version = 0;\n\tthis.syncState = {\n\t\tearliestVersion: null,\n\t\tlatestVersion: null\n\t};\n\tthis.collectionObjects = {};\n\tthis.collectionsArray = [];\n\tthis.objectMap = this.collectionObjects;\n\tthis.objectArray = this.collectionsArray;\n\tthis.dirty = false;\n\tthis.loaded = false;\n\n\tif (jsonBody) {\n\t\tthis.addCollectionsFromJson(jsonBody);\n\t\tthis.initSecondaryData();\n\t}\n};\n\nZotero.Collections.prototype = new Zotero.Container();\n//build up secondary data necessary to rendering and easy operations but that\n//depend on all collections already being present\nZotero.Collections.prototype.initSecondaryData = function () {\n\tZ.debug(\"Zotero.Collections.initSecondaryData\", 3);\n\tvar collections = this;\n\n\t//rebuild collectionsArray\n\tcollections.collectionsArray = [];\n\tObject.keys(collections.collectionObjects).forEach(function (key) {\n\t\tvar collection = collections.collectionObjects[key];\n\t\tcollections.collectionsArray.push(collection);\n\t});\n\n\tcollections.collectionsArray.sort(Zotero.ApiObject.prototype.fieldComparer('name'));\n\tcollections.nestCollections();\n\tcollections.assignDepths(0, collections.collectionsArray);\n};\n\n//take Collection XML and insert a Collection object\nZotero.Collections.prototype.addCollection = function (collection) {\n\tthis.addObject(collection);\n\treturn this;\n};\n\nZotero.Collections.prototype.addCollectionsFromJson = function (jsonBody) {\n\tZ.debug(\"addCollectionsFromJson\");\n\tZ.debug(jsonBody);\n\tvar collections = this;\n\tvar collectionsAdded = [];\n\tjsonBody.forEach(function (collectionObj) {\n\t\tvar collection = new Zotero.Collection(collectionObj);\n\t\tcollections.addObject(collection);\n\t\tcollectionsAdded.push(collection);\n\t});\n\treturn collectionsAdded;\n};\n\nZotero.Collections.prototype.assignDepths = function (depth, cArray) {\n\tZ.debug(\"Zotero.Collections.assignDepths\", 3);\n\tvar collections = this;\n\tvar insertchildren = function insertchildren(depth, children) {\n\t\tchildren.forEach(function (col) {\n\t\t\tcol.nestingDepth = depth;\n\t\t\tif (col.hasChildren) {\n\t\t\t\tinsertchildren(depth + 1, col.children);\n\t\t\t}\n\t\t});\n\t};\n\tcollections.collectionsArray.forEach(function (collection) {\n\t\tif (collection.topLevel) {\n\t\t\tcollection.nestingDepth = 1;\n\t\t\tif (collection.hasChildren) {\n\t\t\t\tinsertchildren(2, collection.children);\n\t\t\t}\n\t\t}\n\t});\n};\n\nZotero.Collections.prototype.nestedOrderingArray = function () {\n\tZ.debug(\"Zotero.Collections.nestedOrderingArray\", 3);\n\tvar collections = this;\n\tvar nested = [];\n\tvar insertchildren = function insertchildren(a, children) {\n\t\tchildren.forEach(function (col) {\n\t\t\ta.push(col);\n\t\t\tif (col.hasChildren) {\n\t\t\t\tinsertchildren(a, col.children);\n\t\t\t}\n\t\t});\n\t};\n\tcollections.collectionsArray.forEach(function (collection) {\n\t\tif (collection.topLevel) {\n\t\t\tnested.push(collection);\n\t\t\tif (collection.hasChildren) {\n\t\t\t\tinsertchildren(nested, collection.children);\n\t\t\t}\n\t\t}\n\t});\n\tZ.debug(\"Done with nestedOrderingArray\", 3);\n\treturn nested;\n};\n\nZotero.Collections.prototype.getCollection = function (key) {\n\treturn this.getObject(key);\n};\n\nZotero.Collections.prototype.remoteDeleteCollection = function (collectionKey) {\n\tvar collections = this;\n\treturn collections.removeLocalCollection(collectionKey);\n};\n\nZotero.Collections.prototype.removeLocalCollection = function (collectionKey) {\n\tvar collections = this;\n\treturn collections.removeLocalCollections([collectionKey]);\n};\n\nZotero.Collections.prototype.removeLocalCollections = function (collectionKeys) {\n\tvar collections = this;\n\t//delete Collection from collectionObjects\n\tfor (var i = 0; i < collectionKeys.length; i++) {\n\t\tdelete collections.collectionObjects[collectionKeys[i]];\n\t}\n\n\t//rebuild collectionsArray\n\tcollections.initSecondaryData();\n};\n\n//reprocess all collections to add references to children inside their parents\nZotero.Collections.prototype.nestCollections = function () {\n\tvar collections = this;\n\t//clear out all child references so we don't duplicate\n\tcollections.collectionsArray.forEach(function (collection) {\n\t\tcollection.children = [];\n\t});\n\n\tcollections.collectionsArray.sort(Zotero.ApiObject.prototype.fieldComparer('name'));\n\tcollections.collectionsArray.forEach(function (collection) {\n\t\tcollection.nestCollection(collections.collectionObjects);\n\t});\n};\n\nZotero.Collections.prototype.writeCollections = function (collectionsArray) {\n\tZ.debug('Zotero.Collections.writeCollections', 3);\n\tvar collections = this;\n\tvar library = collections.owningLibrary;\n\tvar i;\n\n\tvar config = {\n\t\t'target': 'collections',\n\t\t'libraryType': collections.owningLibrary.libraryType,\n\t\t'libraryID': collections.owningLibrary.libraryID\n\t};\n\tvar requestUrl = Zotero.ajax.apiRequestString(config);\n\n\t//add collectionKeys to collections if they don't exist yet\n\tfor (i = 0; i < collectionsArray.length; i++) {\n\t\tvar collection = collectionsArray[i];\n\t\t//generate a collectionKey if the collection does not already have one\n\t\tvar collectionKey = collection.get('key');\n\t\tif (collectionKey === \"\" || collectionKey === null) {\n\t\t\tvar newCollectionKey = Zotero.utils.getKey();\n\t\t\tcollection.set(\"key\", newCollectionKey);\n\t\t\tcollection.set(\"version\", 0);\n\t\t}\n\t}\n\n\tvar writeChunks = collections.chunkObjectsArray(collectionsArray);\n\tvar rawChunkObjects = collections.rawChunks(writeChunks);\n\t//update collections with server response if successful\n\tvar writeCollectionsSuccessCallback = function writeCollectionsSuccessCallback(response) {\n\t\tZ.debug(\"writeCollections successCallback\", 3);\n\t\tvar library = this.library;\n\t\tvar writeChunk = this.writeChunk;\n\t\tlibrary.collections.updateObjectsFromWriteResponse(this.writeChunk, response);\n\t\t//save updated collections to collections\n\t\tfor (var i = 0; i < writeChunk.length; i++) {\n\t\t\tvar collection = writeChunk[i];\n\t\t\tif (collection.synced && !collection.writeFailure) {\n\t\t\t\tlibrary.collections.addCollection(collection);\n\t\t\t\t//save updated collections to IDB\n\t\t\t\tif (Zotero.config.useIndexedDB) {\n\t\t\t\t\tZ.debug(\"updating indexedDB collections\");\n\t\t\t\t\tlibrary.idbLibrary.updateCollections(writeChunk);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tresponse.returnCollections = writeChunk;\n\t\treturn response;\n\t};\n\n\tZ.debug(\"collections.version: \" + collections.version, 3);\n\tZ.debug(\"collections.libraryVersion: \" + collections.libraryVersion, 3);\n\n\tvar requestObjects = [];\n\tfor (i = 0; i < writeChunks.length; i++) {\n\t\tvar successContext = {\n\t\t\twriteChunk: writeChunks[i],\n\t\t\tlibrary: library\n\t\t};\n\n\t\tvar requestData = JSON.stringify(rawChunkObjects[i]);\n\t\trequestObjects.push({\n\t\t\turl: requestUrl,\n\t\t\ttype: 'POST',\n\t\t\tdata: requestData,\n\t\t\tprocessData: false,\n\t\t\theaders: {\n\t\t\t\t//'If-Unmodified-Since-Version': collections.version,\n\t\t\t\t//'Content-Type': 'application/json'\n\t\t\t},\n\t\t\tsuccess: writeCollectionsSuccessCallback.bind(successContext)\n\t\t});\n\t}\n\n\treturn library.sequentialRequests(requestObjects).then(function (responses) {\n\t\tZ.debug(\"Done with writeCollections sequentialRequests promise\", 3);\n\t\tcollections.initSecondaryData();\n\n\t\tresponses.forEach(function (response) {\n\t\t\tif (response.isError || response.data.hasOwnProperty('failed') && Object.keys(response.data.failed).length > 0) {\n\t\t\t\tthrow new Error(\"failure when writing collections\");\n\t\t\t}\n\t\t});\n\t\treturn responses;\n\t}).catch(function (err) {\n\t\tZ.error(err);\n\t\t//rethrow so widget doesn't report success\n\t\tthrow err;\n\t});\n};\n\"use strict\";\n\nZotero.Items = function (jsonBody) {\n\tthis.instance = \"Zotero.Items\";\n\t//represent items as array for ordering purposes\n\tthis.itemsVersion = 0;\n\tthis.syncState = {\n\t\tearliestVersion: null,\n\t\tlatestVersion: null\n\t};\n\tthis.itemObjects = {};\n\tthis.objectMap = this.itemObjects;\n\tthis.objectArray = [];\n\tthis.unsyncedItemKeys = [];\n\n\tif (jsonBody) {\n\t\tthis.addItemsFromJson(jsonBody);\n\t}\n};\n\nZotero.Items.prototype = new Zotero.Container();\n\nZotero.Items.prototype.getItem = function (key) {\n\treturn this.getObject(key);\n};\n\nZotero.Items.prototype.getItems = function (keys) {\n\treturn this.getObjects(keys);\n};\n\nZotero.Items.prototype.addItem = function (item) {\n\tthis.addObject(item);\n\treturn this;\n};\n\nZotero.Items.prototype.addItemsFromJson = function (jsonBody) {\n\tZ.debug(\"addItemsFromJson\", 3);\n\tvar items = this;\n\tvar parsedItemJson = jsonBody;\n\tvar itemsAdded = [];\n\tZ.debug(\"looping\");\n\tparsedItemJson.forEach(function (itemObj) {\n\t\tZ.debug(\"creating new Item\");\n\t\tvar item = new Zotero.Item(itemObj);\n\t\titems.addItem(item);\n\t\titemsAdded.push(item);\n\t});\n\treturn itemsAdded;\n};\n\n//Remove item from local set if it has been marked as deleted by the server\nZotero.Items.prototype.removeLocalItem = function (key) {\n\treturn this.removeObject(key);\n};\n\nZotero.Items.prototype.removeLocalItems = function (keys) {\n\treturn this.removeObjects(keys);\n};\n\nZotero.Items.prototype.deleteItem = function (itemKey) {\n\tZ.debug(\"Zotero.Items.deleteItem\", 3);\n\tvar items = this;\n\tvar item;\n\n\tif (!itemKey) return false;\n\titemKey = items.extractKey(itemKey);\n\titem = items.getItem(itemKey);\n\n\tvar urlconfig = {\n\t\t'target': 'item',\n\t\t'libraryType': items.owningLibrary.libraryType,\n\t\t'libraryID': items.owningLibrary.libraryID,\n\t\t'itemKey': item.key\n\t};\n\tvar requestConfig = {\n\t\turl: Zotero.ajax.apiRequestString(urlconfig),\n\t\ttype: 'DELETE',\n\t\theaders: { \"If-Unmodified-Since-Version\": item.get('version') }\n\t};\n\n\treturn Zotero.net.ajaxRequest(requestConfig);\n};\n\nZotero.Items.prototype.deleteItems = function (deleteItems, version) {\n\t//TODO: split into multiple requests if necessary\n\tZ.debug(\"Zotero.Items.deleteItems\", 3);\n\tvar items = this;\n\tvar deleteKeys = [];\n\tvar i;\n\tif (!version && items.itemsVersion !== 0) {\n\t\tversion = items.itemsVersion;\n\t}\n\n\t//make sure we're working with item keys, not items\n\tvar key;\n\tfor (i = 0; i < deleteItems.length; i++) {\n\t\tif (!deleteItems[i]) continue;\n\t\tkey = items.extractKey(deleteItems[i]);\n\t\tif (key) {\n\t\t\tdeleteKeys.push(key);\n\t\t}\n\t}\n\n\t//split keys into chunks of 50 per request\n\tvar deleteChunks = items.chunkObjectsArray(deleteKeys);\n\t/*\n var successCallback = function(response){\n \tvar deleteProgress = index / deleteChunks.length;\n \tZotero.trigger(\"deleteProgress\", {'progress': deleteProgress});\n \treturn response;\n };\n */\n\tvar requestObjects = [];\n\tfor (i = 0; i < deleteChunks.length; i++) {\n\t\tvar deleteKeysString = deleteChunks[i].join(',');\n\t\tvar urlconfig = {\n\t\t\t'target': 'items',\n\t\t\t'libraryType': items.owningLibrary.libraryType,\n\t\t\t'libraryID': items.owningLibrary.libraryID,\n\t\t\t'itemKey': deleteKeysString\n\t\t};\n\t\t//headers['If-Unmodified-Since-Version'] = version;\n\n\t\tvar requestConfig = {\n\t\t\turl: urlconfig,\n\t\t\ttype: 'DELETE'\n\t\t};\n\t\trequestObjects.push(requestConfig);\n\t}\n\n\treturn Zotero.net.queueRequest(requestObjects);\n};\n\nZotero.Items.prototype.trashItems = function (itemsArray) {\n\tvar items = this;\n\tvar i;\n\tfor (i = 0; i < itemsArray.length; i++) {\n\t\tvar item = itemsArray[i];\n\t\titem.set('deleted', 1);\n\t}\n\treturn items.writeItems(itemsArray);\n};\n\nZotero.Items.prototype.untrashItems = function (itemsArray) {\n\tvar items = this;\n\tvar i;\n\tfor (i = 0; i < itemsArray.length; i++) {\n\t\tvar item = itemsArray[i];\n\t\titem.set('deleted', 0);\n\t}\n\treturn items.writeItems(itemsArray);\n};\n\nZotero.Items.prototype.findItems = function (config) {\n\tvar items = this;\n\tvar matchingItems = [];\n\tObject.keys(items.itemObjects).forEach(function (key) {\n\t\tvar item = item.itemObjects[key];\n\t\tif (config.collectionKey && item.apiObj.collections.indexOf(config.collectionKey) === -1) {\n\t\t\treturn;\n\t\t}\n\t\tmatchingItems.push(items.itemObjects[key]);\n\t});\n\treturn matchingItems;\n};\n\n//take an array of items and extract children into their own items\n//for writing\nZotero.Items.prototype.atomizeItems = function (itemsArray) {\n\t//process the array of items, pulling out child notes/attachments to write\n\t//separately with correct parentItem set and assign generated itemKeys to\n\t//new items\n\tvar writeItems = [];\n\tvar item;\n\tfor (var i = 0; i < itemsArray.length; i++) {\n\t\titem = itemsArray[i];\n\t\t//generate an itemKey if the item does not already have one\n\t\tvar itemKey = item.get('key');\n\t\tif (itemKey === \"\" || itemKey === null) {\n\t\t\tvar newItemKey = Zotero.utils.getKey();\n\t\t\titem.set(\"key\", newItemKey);\n\t\t\titem.set(\"version\", 0);\n\t\t}\n\t\t//items that already have item key always in first pass, as are their children\n\t\twriteItems.push(item);\n\t\tif (item.hasOwnProperty('notes') && item.notes.length > 0) {\n\t\t\tfor (var j = 0; j < item.notes.length; j++) {\n\t\t\t\titem.notes[j].set('parentItem', item.get('key'));\n\t\t\t}\n\t\t\twriteItems = writeItems.concat(item.notes);\n\t\t}\n\t\tif (item.hasOwnProperty('attachments') && item.attachments.length > 0) {\n\t\t\tfor (var k = 0; k < item.attachments.length; k++) {\n\t\t\t\titem.attachments[k].set('parentItem', item.get('key'));\n\t\t\t}\n\t\t\twriteItems = writeItems.concat(item.attachments);\n\t\t}\n\t}\n\treturn writeItems;\n};\n\n//accept an array of 'Zotero.Item's\nZotero.Items.prototype.writeItems = function (itemsArray) {\n\tvar items = this;\n\tvar library = items.owningLibrary;\n\tvar i;\n\tvar writeItems = items.atomizeItems(itemsArray);\n\n\tvar config = {\n\t\t'target': 'items',\n\t\t'libraryType': items.owningLibrary.libraryType,\n\t\t'libraryID': items.owningLibrary.libraryID\n\t};\n\tvar requestUrl = Zotero.ajax.apiRequestString(config);\n\n\tvar writeChunks = items.chunkObjectsArray(writeItems);\n\tvar rawChunkObjects = items.rawChunks(writeChunks);\n\n\t//update item with server response if successful\n\tvar writeItemsSuccessCallback = function writeItemsSuccessCallback(response) {\n\t\tZ.debug(\"writeItem successCallback\", 3);\n\t\titems.updateObjectsFromWriteResponse(this.writeChunk, response);\n\t\t//save updated items to IDB\n\t\tif (Zotero.config.useIndexedDB) {\n\t\t\tthis.library.idbLibrary.updateItems(this.writeChunk);\n\t\t}\n\n\t\tZotero.trigger(\"itemsChanged\", { library: this.library });\n\t\tresponse.returnItems = this.writeChunk;\n\t\treturn response;\n\t};\n\n\tZ.debug(\"items.itemsVersion: \" + items.itemsVersion, 3);\n\tZ.debug(\"items.libraryVersion: \" + items.libraryVersion, 3);\n\n\tvar requestObjects = [];\n\tfor (i = 0; i < writeChunks.length; i++) {\n\t\tvar successContext = {\n\t\t\twriteChunk: writeChunks[i],\n\t\t\tlibrary: library\n\t\t};\n\n\t\tvar requestData = JSON.stringify(rawChunkObjects[i]);\n\t\trequestObjects.push({\n\t\t\turl: requestUrl,\n\t\t\ttype: 'POST',\n\t\t\tdata: requestData,\n\t\t\tprocessData: false,\n\t\t\tsuccess: writeItemsSuccessCallback.bind(successContext)\n\t\t});\n\t}\n\n\treturn library.sequentialRequests(requestObjects).then(function (responses) {\n\t\tZ.debug(\"Done with writeItems sequentialRequests promise\", 3);\n\t\treturn responses;\n\t});\n};\n\"use strict\";\n\nZotero.Tags = function (jsonBody) {\n\tthis.instance = \"Zotero.Tags\";\n\t//represent collections as array for ordering purposes\n\tthis.tagsVersion = 0;\n\tthis.syncState = {\n\t\tearliestVersion: null,\n\t\tlatestVersion: null\n\t};\n\tthis.displayTagsArray = [];\n\tthis.displayTagsUrl = '';\n\tthis.tagObjects = {};\n\tthis.tagsArray = [];\n\tthis.loaded = false;\n\tif (jsonBody) {\n\t\tthis.addTagsFromJson(jsonBody);\n\t}\n};\n\nZotero.Tags.prototype = new Zotero.Container();\n\nZotero.Tags.prototype.addTag = function (tag) {\n\tvar tags = this;\n\ttags.tagObjects[tag.apiObj.tag] = tag;\n\ttags.tagsArray.push(tag);\n\tif (tags.owningLibrary) {\n\t\ttag.associateWithLibrary(tags.owningLibrary);\n\t}\n};\n\nZotero.Tags.prototype.getTag = function (tagname) {\n\tvar tags = this;\n\tif (tags.tagObjects.hasOwnProperty(tagname)) {\n\t\treturn this.tagObjects[tagname];\n\t}\n\treturn null;\n};\n\nZotero.Tags.prototype.removeTag = function (tagname) {\n\tvar tags = this;\n\tdelete tags.tagObjects[tagname];\n\ttags.updateSecondaryData();\n};\n\nZotero.Tags.prototype.removeTags = function (tagnames) {\n\tvar tags = this;\n\ttagnames.forEach(function (tagname) {\n\t\tdelete tags.tagObjects[tagname];\n\t});\n\ttags.updateSecondaryData();\n};\n\nZotero.Tags.prototype.plainTagsList = function (tagsArray) {\n\tZ.debug(\"Zotero.Tags.plainTagsList\", 3);\n\tvar plainList = [];\n\ttagsArray.forEach(function (tag) {\n\t\tplainList.push(tag.apiObj.tag);\n\t});\n\treturn plainList;\n};\n\nZotero.Tags.prototype.clear = function () {\n\tZ.debug(\"Zotero.Tags.clear\", 3);\n\tthis.tagsVersion = 0;\n\tthis.syncState.earliestVersion = null;\n\tthis.syncState.latestVersion = null;\n\tthis.displayTagsArray = [];\n\tthis.displayTagsUrl = '';\n\tthis.tagObjects = {};\n\tthis.tagsArray = [];\n};\n\nZotero.Tags.prototype.updateSecondaryData = function () {\n\tZ.debug(\"Zotero.Tags.updateSecondaryData\", 3);\n\tvar tags = this;\n\ttags.tagsArray = [];\n\tObject.keys(tags.tagObjects).forEach(function (key) {\n\t\tvar val = tags.tagObjects[key];\n\t\ttags.tagsArray.push(val);\n\t});\n\ttags.tagsArray.sort(Zotero.Tag.prototype.tagComparer());\n\tvar plainList = tags.plainTagsList(tags.tagsArray);\n\tplainList.sort(Zotero.Library.prototype.comparer());\n\ttags.plainList = plainList;\n};\n\nZotero.Tags.prototype.updateTagsVersion = function (tagsVersion) {\n\tvar tags = this;\n\tObject.keys(tags.tagObjects).forEach(function (key) {\n\t\tvar tag = tags.tagObjects[key];\n\t\ttag.set('version', tagsVersion);\n\t});\n};\n\nZotero.Tags.prototype.rebuildTagsArray = function () {\n\tvar tags = this;\n\ttags.tagsArray = [];\n\tObject.keys(tags.tagObjects).forEach(function (key) {\n\t\tvar tag = tags.tagObjects[key];\n\t\ttags.tagsArray.push(tag);\n\t});\n};\n\nZotero.Tags.prototype.addTagsFromJson = function (jsonBody) {\n\tZ.debug('Zotero.Tags.addTagsFromJson', 3);\n\tvar tags = this;\n\tvar tagsAdded = [];\n\tjsonBody.forEach(function (tagObj) {\n\t\tvar tag = new Zotero.Tag(tagObj);\n\t\ttags.addTag(tag);\n\t\ttagsAdded.push(tag);\n\t});\n\treturn tagsAdded;\n};\n'use strict';\n\nZotero.Groups = function () {\n\tthis.instance = 'Zotero.Groups';\n\tthis.groupsArray = [];\n};\n/*\nZotero.Groups.prototype.fetchGroup = function(groupID, apikey){\n\t//TODO: implement\n};\n*/\nZotero.Groups.prototype.addGroupsFromJson = function (jsonBody) {\n\tvar groups = this;\n\tvar groupsAdded = [];\n\tjsonBody.forEach(function (groupObj) {\n\t\tZ.debug(groupObj, 3);\n\t\tvar group = new Zotero.Group(groupObj);\n\t\tgroups.groupsArray.push(group);\n\t\tgroupsAdded.push(group);\n\t});\n\treturn groupsAdded;\n};\n\nZotero.Groups.prototype.fetchUserGroups = function (userID, apikey) {\n\tvar groups = this;\n\tvar aparams = {\n\t\t'target': 'userGroups',\n\t\t'libraryType': 'user',\n\t\t'libraryID': userID,\n\t\t'order': 'title'\n\t};\n\n\tif (apikey) {\n\t\taparams['key'] = apikey;\n\t} else if (groups.owningLibrary) {\n\t\taparams['key'] = groups.owningLibrary._apiKey;\n\t}\n\n\treturn Zotero.ajaxRequest(aparams).then(function (response) {\n\t\tZ.debug('fetchUserGroups proxied callback', 3);\n\t\tvar fetchedGroups = groups.addGroupsFromJson(response.data);\n\t\tresponse.fetchedGroups = fetchedGroups;\n\t\treturn response;\n\t});\n};\n\"use strict\";\n\nZotero.Searches = function () {\n\tthis.instance = \"Zotero.Searches\";\n\tthis.searchObjects = {};\n\tthis.syncState = {\n\t\tearliestVersion: null,\n\t\tlatestVersion: null\n\t};\n};\n\"use strict\";\n\nZotero.Deleted = function (data) {\n\tthis.instance = \"Zotero.Deleted\";\n\tif (typeof data === 'string') {\n\t\tthis.deletedData = JSON.parse(data);\n\t} else {\n\t\tthis.deletedData = data;\n\t}\n\tthis.untilVersion = null;\n\tthis.sinceVersion = null;\n\tthis.waitingPromises = [];\n\tthis.pending = false;\n};\n\n//create, save referece, and return a Promise that will be resolved\n//the next time we finish a deleted request\nZotero.Deleted.prototype.addWaiter = function () {};\n'use strict';\n\nZotero.Collection = function (collectionObj) {\n\tthis.instance = \"Zotero.Collection\";\n\tthis.libraryUrlIdentifier = '';\n\tthis.itemKeys = false;\n\tthis.key = '';\n\tthis.version = 0;\n\tthis.synced = false;\n\tthis.pristineData = null;\n\tthis.apiObj = {\n\t\t'key': '',\n\t\t'version': 0,\n\t\t'library': {},\n\t\t'links': {},\n\t\t'meta': {},\n\t\t'data': {\n\t\t\t'key': '',\n\t\t\t'version': 0,\n\t\t\t'name': '',\n\t\t\t'parentCollection': false,\n\t\t\t'relations': {}\n\t\t}\n\t};\n\tthis.children = [];\n\tthis.topLevel = true;\n\tif (collectionObj) {\n\t\tthis.parseJsonCollection(collectionObj);\n\t}\n};\n\nZotero.Collection.prototype = new Zotero.ApiObject();\nZotero.Collection.prototype.instance = \"Zotero.Collection\";\n\nZotero.Collection.prototype.updateObjectKey = function (collectionKey) {\n\tthis.updateCollectionKey(collectionKey);\n};\n\nZotero.Collection.prototype.updateCollectionKey = function (collectionKey) {\n\tvar collection = this;\n\tcollection.key = collectionKey;\n\tcollection.apiObj.key = collectionKey;\n\tcollection.apiObj.data.key = collectionKey;\n\treturn collection;\n};\n\nZotero.Collection.prototype.parseJsonCollection = function (apiObj) {\n\tZ.debug(\"parseJsonCollection\", 4);\n\tvar collection = this;\n\tcollection.key = apiObj.key;\n\tcollection.version = apiObj.version;\n\tcollection.apiObj = Z.extend({}, apiObj);\n\tcollection.pristineData = Z.extend({}, apiObj.data);\n\n\tcollection.parentCollection = false;\n\tcollection.topLevel = true;\n\tcollection.synced = true;\n\tcollection.initSecondaryData();\n};\n\nZotero.Collection.prototype.initSecondaryData = function () {\n\tvar collection = this;\n\n\tif (collection.apiObj.data['parentCollection']) {\n\t\tcollection.topLevel = false;\n\t} else {\n\t\tcollection.topLevel = true;\n\t}\n\n\tif (Zotero.config.librarySettings.libraryPathString) {\n\t\tcollection.websiteCollectionLink = Zotero.config.librarySettings.libraryPathString + '/collectionKey/' + collection.apiObj.key;\n\t} else {\n\t\tcollection.websiteCollectionLink = '';\n\t}\n\tcollection.hasChildren = collection.apiObj.meta.numCollections ? true : false;\n};\n\nZotero.Collection.prototype.nestCollection = function (collectionsObject) {\n\tZ.debug(\"Zotero.Collection.nestCollection\", 4);\n\tvar collection = this;\n\tvar parentCollectionKey = collection.get('parentCollection');\n\tif (parentCollectionKey !== false) {\n\t\tif (collectionsObject.hasOwnProperty(parentCollectionKey)) {\n\t\t\tvar parentOb = collectionsObject[parentCollectionKey];\n\t\t\tparentOb.children.push(collection);\n\t\t\tparentOb.hasChildren = true;\n\t\t\tcollection.topLevel = false;\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nZotero.Collection.prototype.addItems = function (itemKeys) {\n\tZ.debug('Zotero.Collection.addItems', 3);\n\tvar collection = this;\n\tvar config = {\n\t\t'target': 'items',\n\t\t'libraryType': collection.apiObj.library.type,\n\t\t'libraryID': collection.apiObj.library.id,\n\t\t'collectionKey': collection.key\n\t};\n\tvar requestData = itemKeys.join(' ');\n\n\treturn Zotero.ajaxRequest(config, 'POST', {\n\t\tdata: requestData\n\t});\n};\n\nZotero.Collection.prototype.getMemberItemKeys = function () {\n\tZ.debug('Zotero.Collection.getMemberItemKeys', 3);\n\tvar collection = this;\n\tvar config = {\n\t\t'target': 'items',\n\t\t'libraryType': collection.apiObj.library.type,\n\t\t'libraryID': collection.apiObj.library.id,\n\t\t'collectionKey': collection.key,\n\t\t'format': 'keys'\n\t};\n\n\treturn Zotero.ajaxRequest(config, 'GET', { processData: false }).then(function (response) {\n\t\tZ.debug('getMemberItemKeys proxied callback', 3);\n\t\tvar result = response.data;\n\t\tvar keys = result.trim().split(/[\\s]+/);\n\t\tcollection.itemKeys = keys;\n\t\treturn keys;\n\t});\n};\n\nZotero.Collection.prototype.removeItem = function (itemKey) {\n\tvar collection = this;\n\tvar config = {\n\t\t'target': 'item',\n\t\t'libraryType': collection.apiObj.library.type,\n\t\t'libraryID': collection.apiObj.library.id,\n\t\t'collectionKey': collection.key,\n\t\t'itemKey': itemKey\n\t};\n\treturn Zotero.ajaxRequest(config, 'DELETE', {\n\t\tprocessData: false,\n\t\tcache: false\n\t});\n};\n\nZotero.Collection.prototype.update = function (name, parentKey) {\n\tvar collection = this;\n\tif (!parentKey) parentKey = false;\n\tvar config = {\n\t\t'target': 'collection',\n\t\t'libraryType': collection.apiObj.library.type,\n\t\t'libraryID': collection.apiObj.library.id,\n\t\t'collectionKey': collection.key\n\t};\n\n\tcollection.set('name', name);\n\tcollection.set('parentCollection', parentKey);\n\n\tvar writeObject = collection.writeApiObj();\n\tvar requestData = JSON.stringify(writeObject);\n\n\treturn Zotero.ajaxRequest(config, 'PUT', {\n\t\tdata: requestData,\n\t\tprocessData: false,\n\t\theaders: {\n\t\t\t'If-Unmodified-Since-Version': collection.version\n\t\t},\n\t\tcache: false\n\t});\n};\n\nZotero.Collection.prototype.writeApiObj = function () {\n\tvar collection = this;\n\tvar writeObj = Z.extend({}, collection.pristineData, collection.apiObj.data);\n\treturn writeObj;\n};\n\nZotero.Collection.prototype.remove = function () {\n\tZ.debug(\"Zotero.Collection.delete\", 3);\n\tvar collection = this;\n\tvar owningLibrary = collection.owningLibrary;\n\tvar config = {\n\t\t'target': 'collection',\n\t\t'libraryType': collection.apiObj.library.type,\n\t\t'libraryID': collection.apiObj.library.id,\n\t\t'collectionKey': collection.key\n\t};\n\n\treturn Zotero.ajaxRequest(config, 'DELETE', {\n\t\tprocessData: false,\n\t\theaders: {\n\t\t\t'If-Unmodified-Since-Version': collection.version\n\t\t},\n\t\tcache: false\n\t}).then(function () {\n\t\tZ.debug(\"done deleting collection. remove local copy.\", 3);\n\t\towningLibrary.collections.removeLocalCollection(collection.key);\n\t\towningLibrary.trigger(\"libraryCollectionsUpdated\");\n\t});\n};\n\nZotero.Collection.prototype.get = function (key) {\n\tvar collection = this;\n\tswitch (key) {\n\t\tcase 'title':\n\t\tcase 'name':\n\t\t\treturn collection.apiObj.data.name;\n\t\tcase 'collectionKey':\n\t\tcase 'key':\n\t\t\treturn collection.apiObj.key || collection.key;\n\t\tcase 'collectionVersion':\n\t\tcase 'version':\n\t\t\treturn collection.apiObj.version;\n\t\tcase 'parentCollection':\n\t\t\treturn collection.apiObj.data.parentCollection;\n\t}\n\n\tif (key in collection.apiObj.data) {\n\t\treturn collection.apiObj.data[key];\n\t} else if (collection.apiObj.meta.hasOwnProperty(key)) {\n\t\treturn collection.apiObj.meta[key];\n\t} else if (collection.hasOwnProperty(key)) {\n\t\treturn collection[key];\n\t}\n\n\treturn null;\n};\n/*\nZotero.Collection.prototype.get = function(key){\n\tvar collection = this;\n\tswitch(key) {\n\t\tcase 'title':\n\t\tcase 'name':\n\t\t\treturn collection.apiObj.data['name'];\n\t\tcase 'collectionKey':\n\t\tcase 'key':\n\t\t\treturn collection.apiObj.key;\n\t\tcase 'parentCollection':\n\t\t\treturn collection.apiObj.data['parentCollection'];\n\t\tcase 'collectionVersion':\n\t\tcase 'version':\n\t\t\treturn collection.apiObj.version;\n\t}\n\t\n\tif(key in collection.apiObj.data){\n\t\treturn collection.apiObj.data[key];\n\t}\n\telse if(key in collection.apiObj.meta){\n\t\treturn collection.apiObj.meta[key];\n\t}\n\telse if(collection.hasOwnProperty(key)){\n\t\treturn collection[key];\n\t}\n\t\n\treturn null;\n};\n*/\n\nZotero.Collection.prototype.set = function (key, val) {\n\tvar collection = this;\n\tif (key in collection.apiObj.data) {\n\t\tcollection.apiObj.data[key] = val;\n\t}\n\tswitch (key) {\n\t\tcase 'title':\n\t\tcase 'name':\n\t\t\tcollection.apiObj.data['name'] = val;\n\t\t\tbreak;\n\t\tcase 'collectionKey':\n\t\tcase 'key':\n\t\t\tcollection.key = val;\n\t\t\tcollection.apiObj.key = val;\n\t\t\tcollection.apiObj.data.key = val;\n\t\t\tbreak;\n\t\tcase 'parentCollection':\n\t\t\tcollection.apiObj.data['parentCollection'] = val;\n\t\t\tbreak;\n\t\tcase 'collectionVersion':\n\t\tcase 'version':\n\t\t\tcollection.version = val;\n\t\t\tcollection.apiObj.version = val;\n\t\t\tcollection.apiObj.data.version = val;\n\t\t\tbreak;\n\t}\n\n\tif (collection.hasOwnProperty(key)) {\n\t\tcollection[key] = val;\n\t}\n};\n\"use strict\";\n\n/*\n * TODO: several functions should not work unless we build a fresh item with a template\n * or parsed an item from the api with json content (things that depend on apiObj)\n * There should be a flag to note whether this is the case and throwing on attempts to\n * use these functions when it is not.\n */\nZotero.Item = function (itemObj) {\n\tthis.instance = \"Zotero.Item\";\n\tthis.version = 0;\n\tthis.key = '';\n\tthis.synced = false;\n\tthis.apiObj = {};\n\tthis.pristineData = null;\n\tthis.childItemKeys = [];\n\tthis.writeErrors = [];\n\tthis.notes = [];\n\tif (itemObj) {\n\t\tthis.parseJsonItem(itemObj);\n\t} else {\n\t\tthis.parseJsonItem(this.emptyJsonItem());\n\t}\n\tthis.initSecondaryData();\n};\n\nZotero.Item.prototype = new Zotero.ApiObject();\n\nZotero.Item.prototype.parseJsonItem = function (apiObj) {\n\tZ.debug(\"parseJsonItem\", 3);\n\tvar item = this;\n\titem.version = apiObj.version;\n\titem.key = apiObj.key;\n\titem.apiObj = Z.extend({}, apiObj);\n\titem.pristineData = Z.extend({}, apiObj.data);\n\tif (!item.apiObj._supplement) {\n\t\titem.apiObj._supplement = {};\n\t}\n};\n\nZotero.Item.prototype.emptyJsonItem = function () {\n\treturn {\n\t\tkey: '',\n\t\tversion: 0,\n\t\tlibrary: {},\n\t\tlinks: {},\n\t\tdata: {\n\t\t\tkey: '',\n\t\t\tversion: 0,\n\t\t\ttitle: '',\n\t\t\tcreators: [],\n\t\t\tcollections: [],\n\t\t\ttags: [],\n\t\t\trelations: {}\n\t\t},\n\t\tmeta: {},\n\t\t_supplement: {}\n\t};\n};\n\n//populate property values derived from json content\nZotero.Item.prototype.initSecondaryData = function () {\n\tZ.debug(\"initSecondaryData\", 3);\n\tvar item = this;\n\n\titem.version = item.apiObj.version;\n\n\tif (item.apiObj.data.itemType == 'attachment') {\n\t\titem.mimeType = item.apiObj.data.contentType;\n\t\titem.translatedMimeType = Zotero.utils.translateMimeType(item.mimeType);\n\t}\n\tif ('linkMode' in item.apiObj) {\n\t\titem.linkMode = item.apiObj.data.linkMode;\n\t}\n\n\titem.attachmentDownloadUrl = Zotero.url.attachmentDownloadUrl(item);\n\n\tif (item.apiObj.meta.parsedDate) {\n\t\titem.parsedDate = new Date(item.apiObj.meta.parsedDate);\n\t} else {\n\t\titem.parsedDate = false;\n\t}\n\n\titem.synced = false;\n\n\titem.updateTagStrings();\n\tZ.debug(\"done with initSecondaryData\", 3);\n};\n\nZotero.Item.prototype.updateTagStrings = function () {\n\tvar item = this;\n\tvar tagstrings = [];\n\tfor (var i = 0; i < item.apiObj.data.tags.length; i++) {\n\t\ttagstrings.push(item.apiObj.data.tags[i].tag);\n\t}\n\titem.apiObj._supplement.tagstrings = tagstrings;\n};\n\nZotero.Item.prototype.initEmpty = function (itemType, linkMode) {\n\tvar item = this;\n\treturn item.getItemTemplate(itemType, linkMode).then(function (template) {\n\t\titem.initEmptyFromTemplate(template);\n\t\treturn item;\n\t});\n};\n\n//special case note initialization to guarentee synchronous and simplify some uses\nZotero.Item.prototype.initEmptyNote = function () {\n\tvar item = this;\n\titem.version = 0;\n\tvar noteTemplate = { \"itemType\": \"note\", \"note\": \"\", \"tags\": [], \"collections\": [], \"relations\": {} };\n\n\titem.initEmptyFromTemplate(noteTemplate);\n\n\treturn item;\n};\n\nZotero.Item.prototype.initEmptyFromTemplate = function (template) {\n\tvar item = this;\n\titem.version = 0;\n\n\titem.key = '';\n\titem.pristineData = Z.extend({}, template);\n\titem.apiObj = {\n\t\tkey: '',\n\t\tversion: 0,\n\t\tlibrary: {},\n\t\tlinks: {},\n\t\tdata: template,\n\t\tmeta: {},\n\t\t_supplement: {}\n\t};\n\n\titem.initSecondaryData();\n\treturn item;\n};\n\nZotero.Item.prototype.isSupplementaryItem = function () {\n\tvar item = this;\n\tvar itemType = item.get('itemType');\n\tif (itemType == \"attachment\" || itemType == \"note\") {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nZotero.Item.prototype.isSnapshot = function () {\n\tvar item = this;\n\tif (item.apiObj.links['enclosure']) {\n\t\tvar ftype = item.apiObj.links['enclosure'].type;\n\t\tif (!item.apiObj.links['enclosure']['length'] && ftype == 'text/html') {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nZotero.Item.prototype.updateObjectKey = function (objectKey) {\n\treturn this.updateItemKey(objectKey);\n};\n\nZotero.Item.prototype.updateItemKey = function (itemKey) {\n\tvar item = this;\n\titem.key = itemKey;\n\titem.apiObj.key = itemKey;\n\titem.apiObj.data.key = itemKey;\n\titem.pristineData.key = itemKey;\n\treturn item;\n};\n\n/*\n * Write updated information for the item to the api and potentiallyp\n * create new child notes (or attachments?) of this item\n */\nZotero.Item.prototype.writeItem = function () {\n\tvar item = this;\n\tif (!item.owningLibrary) {\n\t\tthrow new Error(\"Item must be associated with a library\");\n\t}\n\treturn item.owningLibrary.items.writeItems([item]);\n};\n\n//get the JS object to be PUT/POSTed for write\nZotero.Item.prototype.writeApiObj = function () {\n\tvar item = this;\n\n\t//remove any creators that have no names\n\tif (item.apiObj.data.creators) {\n\t\tvar newCreatorsArray = item.apiObj.data.creators.filter(function (c) {\n\t\t\tif (c.name || c.firstName || c.lastName) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\titem.apiObj.data.creators = newCreatorsArray;\n\t}\n\n\t//copy apiObj, extend with pristine to make sure required fields are present\n\t//and remove unwriteable fields(?)\n\tvar writeApiObj = Z.extend({}, item.pristineData, item.apiObj.data);\n\treturn writeApiObj;\n};\n\nZotero.Item.prototype.createChildNotes = function (notes) {\n\tvar item = this;\n\tvar childItems = [];\n\tvar childItemPromises = [];\n\n\tnotes.forEach(function (note) {\n\t\tvar childItem = new Zotero.Item();\n\t\tvar p = childItem.initEmpty('note').then(function (noteItem) {\n\t\t\tnoteItem.set('note', note.note);\n\t\t\tnoteItem.set('parentItem', item.key);\n\t\t\tchildItems.push(noteItem);\n\t\t});\n\t\tchildItemPromises.push(p);\n\t});\n\n\treturn Promise.all(childItemPromises).then(function () {\n\t\treturn item.owningLibrary.writeItems(childItems);\n\t});\n};\n\n//TODO: implement\nZotero.Item.prototype.writePatch = function () {};\n\nZotero.Item.prototype.getChildren = function (library) {\n\tZ.debug(\"Zotero.Item.getChildren\");\n\tvar item = this;\n\treturn Promise.resolve().then(function () {\n\t\t//short circuit if has item has no children\n\t\tif (!item.apiObj.meta.numChildren) {\n\t\t\treturn [];\n\t\t}\n\n\t\tvar config = {\n\t\t\turl: {\n\t\t\t\t'target': 'children',\n\t\t\t\t'libraryType': item.apiObj.library.type,\n\t\t\t\t'libraryID': item.apiObj.library.id,\n\t\t\t\t'itemKey': item.key\n\t\t\t}\n\t\t};\n\n\t\treturn Zotero.net.queueRequest(config).then(function (response) {\n\t\t\tZ.debug('getChildren proxied callback', 4);\n\t\t\tvar items = library.items;\n\t\t\tvar childItems = items.addItemsFromJson(response.data);\n\t\t\tfor (var i = childItems.length - 1; i >= 0; i--) {\n\t\t\t\tchildItems[i].associateWithLibrary(library);\n\t\t\t}\n\n\t\t\treturn childItems;\n\t\t});\n\t});\n};\n\nZotero.Item.prototype.getItemTypes = function (locale) {\n\tZ.debug(\"Zotero.Item.prototype.getItemTypes\", 3);\n\tif (!locale) {\n\t\tlocale = 'en-US';\n\t}\n\tlocale = 'en-US';\n\n\tvar itemTypes = Zotero.cache.load({ locale: locale, target: 'itemTypes' });\n\tif (itemTypes) {\n\t\tZ.debug(\"have itemTypes in localStorage\", 3);\n\t\tZotero.Item.prototype.itemTypes = itemTypes; //JSON.parse(Zotero.storage.localStorage['itemTypes']);\n\t\treturn;\n\t}\n\n\tvar query = Zotero.ajax.apiQueryString({ locale: locale });\n\tvar url = Zotero.config.baseApiUrl + '/itemTypes' + query;\n\tZotero.net.ajax({\n\t\turl: Zotero.ajax.proxyWrapper(url, 'GET'),\n\t\ttype: 'GET'\n\t}).then(function (xhr) {\n\t\tZ.debug(\"got itemTypes response\", 3);\n\t\tZ.debug(xhr.response, 4);\n\t\tZotero.Item.prototype.itemTypes = JSON.parse(xhr.responseText);\n\t\tZotero.cache.save({ locale: locale, target: 'itemTypes' }, Zotero.Item.prototype.itemTypes);\n\t});\n};\n\nZotero.Item.prototype.getItemFields = function (locale) {\n\tZ.debug(\"Zotero.Item.prototype.getItemFields\", 3);\n\tif (!locale) {\n\t\tlocale = 'en-US';\n\t}\n\tlocale = 'en-US';\n\n\tvar itemFields = Zotero.cache.load({ locale: locale, target: 'itemFields' });\n\tif (itemFields) {\n\t\tZ.debug(\"have itemFields in localStorage\", 3);\n\t\tZotero.Item.prototype.itemFields = itemFields; //JSON.parse(Zotero.storage.localStorage['itemFields']);\n\t\tObject.keys(Zotero.Item.prototype.itemFields).forEach(function (key) {\n\t\t\tvar val = Zotero.Item.prototype.itemFields[key];\n\t\t\tZotero.localizations.fieldMap[val.field] = val.localized;\n\t\t});\n\t\treturn;\n\t}\n\n\tvar query = Zotero.ajax.apiQueryString({ locale: locale });\n\tvar requestUrl = Zotero.config.baseApiUrl + '/itemFields' + query;\n\tZotero.net.ajax({\n\t\turl: Zotero.ajax.proxyWrapper(requestUrl),\n\t\ttype: 'GET'\n\t}).then(function (xhr) {\n\t\tZ.debug(\"got itemTypes response\", 4);\n\t\tvar data = JSON.parse(xhr.responseText);\n\t\tZotero.Item.prototype.itemFields = data;\n\t\tZotero.cache.save({ locale: locale, target: 'itemFields' }, data);\n\t\t//Zotero.storage.localStorage['itemFields'] = JSON.stringify(data);\n\t\tObject.keys(Zotero.Item.prototype.itemFields).forEach(function (key) {\n\t\t\tvar val = Zotero.Item.prototype.itemFields[key];\n\t\t\tZotero.localizations.fieldMap[val.field] = val.localized;\n\t\t});\n\t});\n};\n\nZotero.Item.prototype.getItemTemplate = function () {\n\tvar itemType = arguments.length <= 0 || arguments[0] === undefined ? \"document\" : arguments[0];\n\tvar linkMode = arguments.length <= 1 || arguments[1] === undefined ? \"\" : arguments[1];\n\n\tZ.debug(\"Zotero.Item.prototype.getItemTemplate\", 3);\n\tif (itemType == 'attachment' && linkMode == '') {\n\t\tthrow new Error(\"attachment template requested with no linkMode\");\n\t}\n\n\tvar query = Zotero.ajax.apiQueryString({ itemType: itemType, linkMode: linkMode });\n\tvar requestUrl = Zotero.config.baseApiUrl + '/items/new' + query;\n\n\tvar cacheConfig = { itemType: itemType, target: 'itemTemplate' };\n\tvar itemTemplate = Zotero.cache.load(cacheConfig);\n\tif (itemTemplate) {\n\t\tZ.debug(\"have itemTemplate in localStorage\", 3);\n\t\tvar template = itemTemplate; // JSON.parse(Zotero.storage.localStorage[url]);\n\t\treturn Promise.resolve(template);\n\t}\n\n\treturn Zotero.ajaxRequest(requestUrl, 'GET', { dataType: 'json' }).then(function (response) {\n\t\tZ.debug(\"got itemTemplate response\", 3);\n\t\tZotero.cache.save(cacheConfig, response.data);\n\t\treturn response.data;\n\t});\n};\n\nZotero.Item.prototype.getUploadAuthorization = function (fileinfo) {\n\t//fileInfo: md5, filename, filesize, mtime, zip, contentType, charset\n\tZ.debug(\"Zotero.Item.getUploadAuthorization\", 3);\n\tvar item = this;\n\n\tvar config = {\n\t\t'target': 'item',\n\t\t'targetModifier': 'file',\n\t\t'libraryType': item.owningLibrary.type,\n\t\t'libraryID': item.owningLibrary.libraryID,\n\t\t'itemKey': item.key\n\t};\n\tvar headers = {\n\t\t'Content-Type': 'application/x-www-form-urlencoded'\n\t};\n\tvar oldmd5 = item.get('md5');\n\tif (oldmd5) {\n\t\theaders['If-Match'] = oldmd5;\n\t} else {\n\t\theaders['If-None-Match'] = '*';\n\t}\n\n\treturn Zotero.ajaxRequest(config, 'POST', {\n\t\tprocessData: true,\n\t\tdata: fileinfo,\n\t\theaders: headers\n\t});\n};\n\nZotero.Item.prototype.registerUpload = function (uploadKey) {\n\tZ.debug(\"Zotero.Item.registerUpload\", 3);\n\tvar item = this;\n\tvar config = {\n\t\t'target': 'item',\n\t\t'targetModifier': 'file',\n\t\t'libraryType': item.owningLibrary.type,\n\t\t'libraryID': item.owningLibrary.libraryID,\n\t\t'itemKey': item.key\n\t};\n\tvar headers = {\n\t\t'Content-Type': 'application/x-www-form-urlencoded'\n\t};\n\tvar oldmd5 = item.get('md5');\n\tif (oldmd5) {\n\t\theaders['If-Match'] = oldmd5;\n\t} else {\n\t\theaders['If-None-Match'] = '*';\n\t}\n\n\treturn Zotero.ajaxRequest(config, 'POST', {\n\t\tprocessData: true,\n\t\tdata: { upload: uploadKey },\n\t\theaders: headers\n\t});\n};\n\nZotero.Item.prototype.fullUpload = function (file) {};\n\nZotero.Item.prototype.creatorTypes = {};\n\nZotero.Item.prototype.getCreatorTypes = function (itemType) {\n\tZ.debug(\"Zotero.Item.prototype.getCreatorTypes: \" + itemType, 3);\n\tif (!itemType) {\n\t\titemType = 'document';\n\t}\n\n\t//parse stored creatorTypes object if it exists\n\t//creatorTypes maps itemType to the possible creatorTypes\n\tvar creatorTypes = Zotero.cache.load({ target: 'creatorTypes' });\n\tif (creatorTypes) {\n\t\tZ.debug(\"have creatorTypes in localStorage\", 3);\n\t\tZotero.Item.prototype.creatorTypes = creatorTypes; //JSON.parse(Zotero.storage.localStorage['creatorTypes']);\n\t}\n\n\tif (Zotero.Item.prototype.creatorTypes[itemType]) {\n\t\tZ.debug(\"creatorTypes of requested itemType available in localStorage\", 3);\n\t\tZ.debug(Zotero.Item.prototype.creatorTypes, 4);\n\t\treturn Promise.resolve(Zotero.Item.prototype.creatorTypes[itemType]);\n\t} else {\n\t\tZ.debug(\"sending request for creatorTypes\", 3);\n\t\tvar query = Zotero.ajax.apiQueryString({ itemType: itemType });\n\t\t//TODO: this probably shouldn't be using baseApiUrl directly\n\t\tvar requestUrl = Zotero.config.baseApiUrl + '/itemTypeCreatorTypes' + query;\n\n\t\treturn Zotero.ajaxRequest(requestUrl, 'GET', { dataType: 'json' }).then(function (response) {\n\t\t\tZ.debug(\"got creatorTypes response\", 4);\n\t\t\tZotero.Item.prototype.creatorTypes[itemType] = response.data;\n\t\t\t//Zotero.storage.localStorage['creatorTypes'] = JSON.stringify(Zotero.Item.prototype.creatorTypes);\n\t\t\tZotero.cache.save({ target: 'creatorTypes' }, Zotero.Item.prototype.creatorTypes);\n\t\t\treturn Zotero.Item.prototype.creatorTypes[itemType];\n\t\t});\n\t}\n};\n\nZotero.Item.prototype.getCreatorFields = function (locale) {\n\tZ.debug(\"Zotero.Item.prototype.getCreatorFields\", 3);\n\tvar creatorFields = Zotero.cache.load({ target: 'creatorFields' });\n\tif (creatorFields) {\n\t\tZ.debug(\"have creatorFields in localStorage\", 3);\n\t\tZotero.Item.prototype.creatorFields = creatorFields; // JSON.parse(Zotero.storage.localStorage['creatorFields']);\n\t\treturn Promise.resolve(creatorFields);\n\t}\n\n\tvar requestUrl = Zotero.config.baseApiUrl + '/creatorFields';\n\treturn Zotero.ajaxRequest(requestUrl, 'GET', { dataType: 'json' }).then(function (response) {\n\t\tZ.debug(\"got itemTypes response\", 4);\n\t\tZotero.Item.prototype.creatorFields = response.data;\n\t\tZotero.cache.save({ target: 'creatorFields' }, response.data);\n\t});\n};\n\n//---Functions to manually add Zotero format data instead of fetching it from the API ---\n//To be used first with cached data for offline, could also maybe be used for custom types\nZotero.Item.prototype.addItemTypes = function (itemTypes, locale) {};\n\nZotero.Item.prototype.addItemFields = function (itemType, itemFields) {};\n\nZotero.Item.prototype.addCreatorTypes = function (itemType, creatorTypes) {};\n\nZotero.Item.prototype.addCreatorFields = function (itemType, creatorFields) {};\n\nZotero.Item.prototype.addItemTemplates = function (templates) {};\n\nZotero.Item.prototype.itemTypeImageClass = function () {\n\t//linkModes: imported_file,imported_url,linked_file,linked_url\n\tvar item = this;\n\tif (item.apiObj.data.itemType == 'attachment') {\n\t\tswitch (item.apiObj.data.linkMode) {\n\t\t\tcase 'imported_file':\n\t\t\t\tif (item.translatedMimeType == 'pdf') {\n\t\t\t\t\treturn item.itemTypeImageSrc['attachmentPdf'];\n\t\t\t\t}\n\t\t\t\treturn item.itemTypeImageSrc['attachmentFile'];\n\t\t\tcase 'imported_url':\n\t\t\t\tif (item.translatedMimeType == 'pdf') {\n\t\t\t\t\treturn item.itemTypeImageSrc['attachmentPdf'];\n\t\t\t\t}\n\t\t\t\treturn item.itemTypeImageSrc['attachmentSnapshot'];\n\t\t\tcase 'linked_file':\n\t\t\t\treturn item.itemTypeImageSrc['attachmentLink'];\n\t\t\tcase 'linked_url':\n\t\t\t\treturn item.itemTypeImageSrc['attachmentWeblink'];\n\t\t\tdefault:\n\t\t\t\treturn item.itemTypeImageSrc['attachment'];\n\t\t}\n\t} else {\n\t\treturn item.apiObj.data.itemType;\n\t}\n};\n\nZotero.Item.prototype.itemTypeIconClass = function () {\n\t//linkModes: imported_file,imported_url,linked_file,linked_url\n\tvar item = this;\n\tvar defaultIcon = 'fa fa-file-text-o';\n\tswitch (item.apiObj.data.itemType) {\n\t\tcase 'attachment':\n\t\t\tswitch (item.apiObj.data.linkMode) {\n\t\t\t\tcase 'imported_file':\n\t\t\t\t\tif (item.translatedMimeType == 'pdf') {\n\t\t\t\t\t\treturn 'fa fa-file-pdf-o';\n\t\t\t\t\t}\n\t\t\t\t\treturn 'glyphicons glyphicons-file';\n\t\t\t\tcase 'imported_url':\n\t\t\t\t\tif (item.translatedMimeType == 'pdf') {\n\t\t\t\t\t\treturn 'fa fa-file-pdf-o';\n\t\t\t\t\t}\n\t\t\t\t\treturn 'glyphicons glyphicons-file';\n\t\t\t\tcase 'linked_file':\n\t\t\t\t\treturn 'glyphicons glyphicons-link';\n\t\t\t\t//return item.itemTypeImageSrc['attachmentLink'];\n\t\t\t\tcase 'linked_url':\n\t\t\t\t\treturn 'glyphicons glyphicons-link';\n\t\t\t\t//return item.itemTypeImageSrc['attachmentWeblink'];\n\t\t\t\tdefault:\n\t\t\t\t\treturn 'glyphicons glyphicons-paperclip';\n\t\t\t\t//return item.itemTypeImageSrc['attachment'];\n\t\t\t}\n\t\t\treturn 'glyphicons file';\n\t\tcase 'artwork':\n\t\t\treturn 'glyphicons glyphicons-picture';\n\t\tcase 'audioRecording':\n\t\t\treturn 'glyphicons glyphicons-microphone';\n\t\tcase 'bill':\n\t\t\treturn defaultIcon;\n\t\tcase 'blogPost':\n\t\t\treturn 'glyphicons glyphicons-blog';\n\t\tcase 'book':\n\t\t\treturn 'glyphicons glyphicons-book';\n\t\tcase 'bookSection':\n\t\t\treturn 'glyphicons glyphicons-book-open';\n\t\tcase 'case':\n\t\t\treturn defaultIcon;\n\t\tcase 'computerProgram':\n\t\t\treturn 'glyphicons glyphicons-floppy-disk';\n\t\tcase 'conferencePaper':\n\t\t\treturn defaultIcon;\n\t\tcase 'dictionaryEntry':\n\t\t\treturn 'glyphicons glyphicons-translate';\n\t\tcase 'document':\n\t\t\treturn 'glyphicons glyphicons-file';\n\t\tcase 'email':\n\t\t\treturn 'glyphicons glyphicons-envelope';\n\t\tcase 'encyclopediaArticle':\n\t\t\treturn 'glyphicons glyphicons-bookmark';\n\t\tcase 'film':\n\t\t\treturn 'glyphicons glyphicons-film';\n\t\tcase 'forumPost':\n\t\t\treturn 'glyphicons glyphicons-bullhorn';\n\t\tcase 'hearing':\n\t\t\treturn 'fa fa-gavel';\n\t\tcase 'instantMessage':\n\t\t\treturn 'fa fa-comment-o';\n\t\tcase 'interview':\n\t\t\treturn 'fa fa-comments-o';\n\t\tcase 'journalArticle':\n\t\t\treturn 'fa fa-file-text-o';\n\t\tcase 'letter':\n\t\t\treturn 'glyphicons glyphicons-message-full';\n\t\tcase 'magazineArticle':\n\t\t\treturn defaultIcon;\n\t\tcase 'manuscript':\n\t\t\treturn 'glyphicons glyphicons-pen';\n\t\tcase 'map':\n\t\t\treturn 'glyphicons glyphicons-google-maps';\n\t\tcase 'newspaperArticle':\n\t\t\treturn 'fa fa-newspaper-o';\n\t\tcase 'note':\n\t\t\treturn 'glyphicons glyphicons-notes noteyellow';\n\t\tcase 'patent':\n\t\t\treturn 'glyphicons glyphicons-lightbulb';\n\t\tcase 'podcast':\n\t\t\treturn 'glyphicons glyphicons-ipod';\n\t\tcase 'presentation':\n\t\t\treturn 'glyphicons glyphicons-keynote';\n\t\tcase 'radioBroadcast':\n\t\t\treturn 'glyphicons glyphicons-wifi-alt';\n\t\tcase 'report':\n\t\t\treturn 'glyphicons glyphicons-notes-2';\n\t\tcase 'statue':\n\t\t\treturn 'glyphicons glyphicons-bank';\n\t\tcase 'thesis':\n\t\t\treturn 'fa fa-graduation-cap';\n\t\tcase 'tvBroadcast':\n\t\t\treturn 'glyphicons glyphicons-display';\n\t\tcase 'videoRecording':\n\t\t\treturn 'glyphicons glyphicons-facetime-video';\n\t\tcase 'webpage':\n\t\t\treturn 'glyphicons glyphicons-embed-close';\n\t\tdefault:\n\t\t\treturn 'glyphicons file';\n\t}\n};\n\nZotero.Item.prototype.get = function (key) {\n\tvar item = this;\n\tswitch (key) {\n\t\tcase 'title':\n\t\t\tvar title = '';\n\t\t\tif (item.apiObj.data.itemType == 'note') {\n\t\t\t\treturn item.noteTitle(item.apiObj.data.note);\n\t\t\t} else {\n\t\t\t\treturn item.apiObj.data.title;\n\t\t\t}\n\t\t\tif (title === '') {\n\t\t\t\treturn '[Untitled]';\n\t\t\t}\n\t\t\treturn title;\n\t\tcase 'creatorSummary':\n\t\tcase 'creator':\n\t\t\tif (typeof item.apiObj.meta.creatorSummary !== \"undefined\") {\n\t\t\t\treturn item.apiObj.meta.creatorSummary;\n\t\t\t} else {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'year':\n\t\t\tif (item.parsedDate) {\n\t\t\t\treturn item.parsedDate.getFullYear();\n\t\t\t} else {\n\t\t\t\treturn '';\n\t\t\t}\n\t}\n\n\tif (key in item.apiObj.data) {\n\t\treturn item.apiObj.data[key];\n\t} else if (key in item.apiObj.meta) {\n\t\treturn item.apiObj.meta[key];\n\t} else if (item.hasOwnProperty(key)) {\n\t\treturn item[key];\n\t}\n\n\treturn null;\n};\n\nZotero.Item.prototype.set = function (key, val) {\n\tvar item = this;\n\tif (key in item.apiObj) {\n\t\titem.apiObj[key] = val;\n\t}\n\tif (key in item.apiObj.data) {\n\t\titem.apiObj.data[key] = val;\n\t}\n\tif (key in item.apiObj.meta) {\n\t\titem.apiObj.meta[key] = val;\n\t}\n\n\tswitch (key) {\n\t\tcase \"itemKey\":\n\t\tcase \"key\":\n\t\t\titem.key = val;\n\t\t\titem.apiObj.data.key = val;\n\t\t\tbreak;\n\t\tcase \"itemVersion\":\n\t\tcase \"version\":\n\t\t\titem.version = val;\n\t\t\titem.apiObj.data.version = val;\n\t\t\tbreak;\n\t\tcase \"itemType\":\n\t\t\titem.itemType = val;\n\t\t\t//TODO: translate api object to new item type\n\t\t\tbreak;\n\t\tcase \"linkMode\":\n\t\t\tbreak;\n\t\tcase \"deleted\":\n\t\t\titem.apiObj.data.deleted = val;\n\t\t\tbreak;\n\t\tcase \"parentItem\":\n\t\t\tif (val === '') {\n\t\t\t\tval = false;\n\t\t\t}\n\t\t\titem.apiObj.data.parentItem = val;\n\t\t\tbreak;\n\t}\n\n\t//    item.synced = false;\n\treturn item;\n};\n\nZotero.Item.prototype.noteTitle = function (note) {\n\tvar len = 120;\n\tvar notetext = J(note).text();\n\tvar firstNewline = notetext.indexOf(\"\\n\");\n\tif (firstNewline != -1 && firstNewline < len) {\n\t\treturn notetext.substr(0, firstNewline);\n\t} else {\n\t\treturn notetext.substr(0, len);\n\t}\n};\n\nZotero.Item.prototype.setParent = function (parentItemKey) {\n\tvar item = this;\n\t//pull out itemKey string if we were passed an item object\n\tif (typeof parentItemKey != 'string' && parentItemKey.hasOwnProperty('instance') && parentItemKey.instance == 'Zotero.Item') {\n\t\tparentItemKey = parentItemKey.key;\n\t}\n\titem.set('parentItem', parentItemKey);\n\treturn item;\n};\n\nZotero.Item.prototype.addToCollection = function (collectionKey) {\n\tvar item = this;\n\t//take out the collection key if we're passed a collection object instead\n\tif (typeof collectionKey != 'string') {\n\t\tif (collectionKey.instance == 'Zotero.Collection') {\n\t\t\tcollectionKey = collectionKey.key;\n\t\t}\n\t}\n\tif (item.apiObj.data.collections.indexOf(collectionKey) === -1) {\n\t\titem.apiObj.data.collections.push(collectionKey);\n\t}\n\treturn;\n};\n\nZotero.Item.prototype.removeFromCollection = function (collectionKey) {\n\tvar item = this;\n\t//take out the collection key if we're passed a collection object instead\n\tif (typeof collectionKey != 'string') {\n\t\tif (collectionKey.instance == 'Zotero.Collection') {\n\t\t\tcollectionKey = collectionKey.key;\n\t\t}\n\t}\n\tvar index = item.apiObj.data.collections.indexOf(collectionKey);\n\tif (index != -1) {\n\t\titem.apiObj.data.collections.splice(index, 1);\n\t}\n\treturn;\n};\n\nZotero.Item.prototype.uploadChildAttachment = function (childItem, fileInfo, progressCallback) {\n\t/*\n  * write child item so that it exists\n  * get upload authorization for actual file\n  * perform full upload\n  */\n\tvar item = this;\n\tZ.debug(\"uploadChildAttachment\", 3);\n\tif (!item.owningLibrary) {\n\t\treturn Promise.reject(new Error(\"Item must be associated with a library\"));\n\t}\n\n\t//make sure childItem has parent set\n\tchildItem.set('parentItem', item.key);\n\tchildItem.associateWithLibrary(item.owningLibrary);\n\n\treturn childItem.writeItem().then(function (response) {\n\t\t//successful attachmentItemWrite\n\t\titem.numChildren++;\n\t\treturn childItem.uploadFile(fileInfo, progressCallback);\n\t}, function (response) {\n\t\t//failure during attachmentItem write\n\t\tthrow {\n\t\t\t\"message\": \"Failure during attachmentItem write.\",\n\t\t\t\"code\": response.status,\n\t\t\t\"serverMessage\": response.jqxhr.responseText,\n\t\t\t\"response\": response\n\t\t};\n\t});\n};\n\nZotero.Item.prototype.uploadFile = function (fileInfo, progressCallback) {\n\tvar item = this;\n\tZ.debug(\"Zotero.Item.uploadFile\", 3);\n\tvar uploadAuthFileData = {\n\t\tmd5: fileInfo.md5,\n\t\tfilename: item.get('title'),\n\t\tfilesize: fileInfo.filesize,\n\t\tmtime: fileInfo.mtime,\n\t\tcontentType: fileInfo.contentType,\n\t\tparams: 1\n\t};\n\tif (fileInfo.contentType === \"\") {\n\t\tuploadAuthFileData.contentType = \"application/octet-stream\";\n\t}\n\treturn item.getUploadAuthorization(uploadAuthFileData).then(function (response) {\n\t\tZ.debug(\"uploadAuth callback\", 3);\n\t\tvar upAuthOb;\n\t\tif (typeof response.data == \"string\") {\n\t\t\tupAuthOb = JSON.parse(response.data);\n\t\t} else {\n\t\t\tupAuthOb = response.data;\n\t\t}\n\t\tif (upAuthOb.exists == 1) {\n\t\t\treturn { 'message': \"File Exists\" };\n\t\t} else {\n\t\t\t//TODO: add progress\n\t\t\treturn Zotero.file.uploadFile(upAuthOb, fileInfo).then(function () {\n\t\t\t\t//upload was successful: register it\n\t\t\t\treturn item.registerUpload(upAuthOb.uploadKey).then(function (response) {\n\t\t\t\t\tif (response.isError) {\n\t\t\t\t\t\tvar e = {\n\t\t\t\t\t\t\t\"message\": \"Failed to register uploaded file.\",\n\t\t\t\t\t\t\t\"code\": response.status,\n\t\t\t\t\t\t\t\"serverMessage\": response.jqxhr.responseText,\n\t\t\t\t\t\t\t'response': response\n\t\t\t\t\t\t};\n\t\t\t\t\t\tZ.error(e);\n\t\t\t\t\t\tthrow e;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn { 'message': 'Upload Successful' };\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}).catch(function (response) {\n\t\tZ.debug(\"Failure caught during upload\", 3);\n\t\tZ.debug(response, 3);\n\t\tthrow {\n\t\t\t\"message\": \"Failure during upload.\",\n\t\t\t\"code\": response.status,\n\t\t\t\"serverMessage\": response.jqxhr.responseText,\n\t\t\t'response': response\n\t\t};\n\t});\n};\n\nZotero.Item.prototype.cslItem = function () {\n\tvar zoteroItem = this;\n\n\t// don't return URL or accessed information for journal articles if a\n\t// pages field exists\n\tvar itemType = zoteroItem.get(\"itemType\"); //Zotero_ItemTypes::getName($zoteroItem->itemTypeID);\n\tvar cslType = zoteroItem.cslTypeMap.hasOwnProperty(itemType) ? zoteroItem.cslTypeMap[itemType] : false;\n\tif (!cslType) cslType = \"article\";\n\tvar ignoreURL = (zoteroItem.get(\"accessDate\") || zoteroItem.get(\"url\")) && itemType in { \"journalArticle\": 1, \"newspaperArticle\": 1, \"magazineArticle\": 1 } && zoteroItem.get(\"pages\") && zoteroItem.citePaperJournalArticleURL;\n\n\tvar cslItem = { 'type': cslType };\n\tif (zoteroItem.owningLibrary) {\n\t\tcslItem['id'] = zoteroItem.apiObj.library.id + \"/\" + zoteroItem.get(\"key\");\n\t} else {\n\t\tcslItem['id'] = Zotero.utils.getKey();\n\t}\n\n\t// get all text variables (there must be a better way)\n\t// TODO: does citeproc-js permit short forms?\n\tObject.keys(zoteroItem.cslFieldMap).forEach(function (variable) {\n\t\tvar fields = zoteroItem.cslFieldMap[variable];\n\t\tif (variable == \"URL\" && ignoreURL) return;\n\t\tfields.forEach(function (field) {\n\t\t\tvar value = zoteroItem.get(field);\n\t\t\tif (value) {\n\t\t\t\t//TODO: strip enclosing quotes? necessary when not pulling from DB?\n\t\t\t\tcslItem[variable] = value;\n\t\t\t}\n\t\t});\n\t});\n\n\t// separate name variables\n\tvar creators = zoteroItem.get('creators');\n\tcreators.forEach(function (creator) {\n\t\tvar creatorType = creator['creatorType']; // isset(self::$zoteroNameMap[$creatorType]) ? self::$zoteroNameMap[$creatorType] : false;\n\t\tif (!creatorType) return;\n\n\t\tvar nameObj;\n\t\tif (creator.hasOwnProperty(\"name\")) {\n\t\t\tnameObj = { 'literal': creator['name'] };\n\t\t} else {\n\t\t\tnameObj = { 'family': creator['lastName'], 'given': creator['firstName'] };\n\t\t}\n\n\t\tif (cslItem.hasOwnProperty(creatorType)) {\n\t\t\tcslItem[creatorType].push(nameObj);\n\t\t} else {\n\t\t\tcslItem[creatorType] = [nameObj];\n\t\t}\n\t});\n\n\t// get date variables\n\tObject.keys(zoteroItem.cslDateMap).forEach(function (key) {\n\t\tvar val = zoteroItem.cslDateMap[key];\n\t\tvar date = zoteroItem.get(val);\n\t\tif (date) {\n\t\t\tcslItem[key] = { \"raw\": date };\n\t\t}\n\t});\n\n\treturn cslItem;\n};\n\"use strict\";\n\nZotero.Item.prototype.fieldMap = {\n\t\"itemType\": \"Item Type\",\n\t\"title\": \"Title\",\n\t\"dateAdded\": \"Date Added\",\n\t\"dateModified\": \"Date Modified\",\n\t\"source\": \"Source\",\n\t\"notes\": \"Notes\",\n\t\"tags\": \"Tags\",\n\t\"attachments\": \"Attachments\",\n\t\"related\": \"Related\",\n\t\"url\": \"URL\",\n\t\"rights\": \"Rights\",\n\t\"series\": \"Series\",\n\t\"volume\": \"Volume\",\n\t\"issue\": \"Issue\",\n\t\"edition\": \"Edition\",\n\t\"place\": \"Place\",\n\t\"publisher\": \"Publisher\",\n\t\"pages\": \"Pages\",\n\t\"ISBN\": \"ISBN\",\n\t\"publicationTitle\": \"Publication\",\n\t\"ISSN\": \"ISSN\",\n\t\"date\": \"Date\",\n\t\"year\": \"Year\",\n\t\"section\": \"Section\",\n\t\"callNumber\": \"Call Number\",\n\t\"archive\": \"Archive\",\n\t\"archiveLocation\": \"Loc. in Archive\",\n\t\"libraryCatalog\": \"Library Catalog\",\n\t\"distributor\": \"Distributor\",\n\t\"extra\": \"Extra\",\n\t\"journalAbbreviation\": \"Journal Abbr\",\n\t\"DOI\": \"DOI\",\n\t\"accessDate\": \"Accessed\",\n\t\"seriesTitle\": \"Series Title\",\n\t\"seriesText\": \"Series Text\",\n\t\"seriesNumber\": \"Series Number\",\n\t\"institution\": \"Institution\",\n\t\"reportType\": \"Report Type\",\n\t\"code\": \"Code\",\n\t\"session\": \"Session\",\n\t\"legislativeBody\": \"Legislative Body\",\n\t\"history\": \"History\",\n\t\"reporter\": \"Reporter\",\n\t\"court\": \"Court\",\n\t\"numberOfVolumes\": \"# of Volumes\",\n\t\"committee\": \"Committee\",\n\t\"assignee\": \"Assignee\",\n\t\"patentNumber\": \"Patent Number\",\n\t\"priorityNumbers\": \"Priority Numbers\",\n\t\"issueDate\": \"Issue Date\",\n\t\"references\": \"References\",\n\t\"legalStatus\": \"Legal Status\",\n\t\"codeNumber\": \"Code Number\",\n\t\"artworkMedium\": \"Medium\",\n\t\"number\": \"Number\",\n\t\"artworkSize\": \"Artwork Size\",\n\t\"repository\": \"Repository\",\n\t\"videoRecordingType\": \"Recording Type\",\n\t\"interviewMedium\": \"Medium\",\n\t\"letterType\": \"Type\",\n\t\"manuscriptType\": \"Type\",\n\t\"mapType\": \"Type\",\n\t\"scale\": \"Scale\",\n\t\"thesisType\": \"Type\",\n\t\"websiteType\": \"Website Type\",\n\t\"audioRecordingType\": \"Recording Type\",\n\t\"label\": \"Label\",\n\t\"presentationType\": \"Type\",\n\t\"meetingName\": \"Meeting Name\",\n\t\"studio\": \"Studio\",\n\t\"runningTime\": \"Running Time\",\n\t\"network\": \"Network\",\n\t\"postType\": \"Post Type\",\n\t\"audioFileType\": \"File Type\",\n\t\"versionNumber\": \"Version Number\",\n\t\"system\": \"System\",\n\t\"company\": \"Company\",\n\t\"conferenceName\": \"Conference Name\",\n\t\"encyclopediaTitle\": \"Encyclopedia Title\",\n\t\"dictionaryTitle\": \"Dictionary Title\",\n\t\"language\": \"Language\",\n\t\"programmingLanguage\": \"Language\",\n\t\"university\": \"University\",\n\t\"abstractNote\": \"Abstract\",\n\t\"websiteTitle\": \"Website Title\",\n\t\"reportNumber\": \"Report Number\",\n\t\"billNumber\": \"Bill Number\",\n\t\"codeVolume\": \"Code Volume\",\n\t\"codePages\": \"Code Pages\",\n\t\"dateDecided\": \"Date Decided\",\n\t\"reporterVolume\": \"Reporter Volume\",\n\t\"firstPage\": \"First Page\",\n\t\"documentNumber\": \"Document Number\",\n\t\"dateEnacted\": \"Date Enacted\",\n\t\"publicLawNumber\": \"Public Law Number\",\n\t\"country\": \"Country\",\n\t\"applicationNumber\": \"Application Number\",\n\t\"forumTitle\": \"Forum/Listserv Title\",\n\t\"episodeNumber\": \"Episode Number\",\n\t\"blogTitle\": \"Blog Title\",\n\t\"caseName\": \"Case Name\",\n\t\"nameOfAct\": \"Name of Act\",\n\t\"subject\": \"Subject\",\n\t\"proceedingsTitle\": \"Proceedings Title\",\n\t\"bookTitle\": \"Book Title\",\n\t\"shortTitle\": \"Short Title\",\n\t\"docketNumber\": \"Docket Number\",\n\t\"numPages\": \"# of Pages\",\n\t\"note\": \"Note\",\n\t\"numChildren\": \"# of Children\",\n\t\"addedBy\": \"Added By\",\n\t\"creator\": \"Creator\"\n};\n\nZotero.localizations.fieldMap = Zotero.Item.prototype.fieldMap;\n\nZotero.Item.prototype.typeMap = {\n\t\"note\": \"Note\",\n\t\"attachment\": \"Attachment\",\n\t\"book\": \"Book\",\n\t\"bookSection\": \"Book Section\",\n\t\"journalArticle\": \"Journal Article\",\n\t\"magazineArticle\": \"Magazine Article\",\n\t\"newspaperArticle\": \"Newspaper Article\",\n\t\"thesis\": \"Thesis\",\n\t\"letter\": \"Letter\",\n\t\"manuscript\": \"Manuscript\",\n\t\"interview\": \"Interview\",\n\t\"film\": \"Film\",\n\t\"artwork\": \"Artwork\",\n\t\"webpage\": \"Web Page\",\n\t\"report\": \"Report\",\n\t\"bill\": \"Bill\",\n\t\"case\": \"Case\",\n\t\"hearing\": \"Hearing\",\n\t\"patent\": \"Patent\",\n\t\"statute\": \"Statute\",\n\t\"email\": \"E-mail\",\n\t\"map\": \"Map\",\n\t\"blogPost\": \"Blog Post\",\n\t\"instantMessage\": \"Instant Message\",\n\t\"forumPost\": \"Forum Post\",\n\t\"audioRecording\": \"Audio Recording\",\n\t\"presentation\": \"Presentation\",\n\t\"videoRecording\": \"Video Recording\",\n\t\"tvBroadcast\": \"TV Broadcast\",\n\t\"radioBroadcast\": \"Radio Broadcast\",\n\t\"podcast\": \"Podcast\",\n\t\"computerProgram\": \"Computer Program\",\n\t\"conferencePaper\": \"Conference Paper\",\n\t\"document\": \"Document\",\n\t\"encyclopediaArticle\": \"Encyclopedia Article\",\n\t\"dictionaryEntry\": \"Dictionary Entry\"\n};\n\nZotero.localizations.typeMap = Zotero.Item.prototype.typeMap;\n\nZotero.Item.prototype.creatorMap = {\n\t\"author\": \"Author\",\n\t\"contributor\": \"Contributor\",\n\t\"editor\": \"Editor\",\n\t\"translator\": \"Translator\",\n\t\"seriesEditor\": \"Series Editor\",\n\t\"interviewee\": \"Interview With\",\n\t\"interviewer\": \"Interviewer\",\n\t\"director\": \"Director\",\n\t\"scriptwriter\": \"Scriptwriter\",\n\t\"producer\": \"Producer\",\n\t\"castMember\": \"Cast Member\",\n\t\"sponsor\": \"Sponsor\",\n\t\"counsel\": \"Counsel\",\n\t\"inventor\": \"Inventor\",\n\t\"attorneyAgent\": \"Attorney/Agent\",\n\t\"recipient\": \"Recipient\",\n\t\"performer\": \"Performer\",\n\t\"composer\": \"Composer\",\n\t\"wordsBy\": \"Words By\",\n\t\"cartographer\": \"Cartographer\",\n\t\"programmer\": \"Programmer\",\n\t\"reviewedAuthor\": \"Reviewed Author\",\n\t\"artist\": \"Artist\",\n\t\"commenter\": \"Commenter\",\n\t\"presenter\": \"Presenter\",\n\t\"guest\": \"Guest\",\n\t\"podcaster\": \"Podcaster\"\n};\n\nZotero.Item.prototype.hideFields = [\"mimeType\", \"linkMode\", \"charset\", \"md5\", \"mtime\", \"version\", \"key\", \"collections\", \"relations\", \"parentItem\", \"contentType\", \"filename\", \"tags\"];\n\nZotero.Item.prototype.noEditFields = [\"accessDate\", \"modified\", \"filename\", \"dateAdded\", \"dateModified\"];\n\nZotero.localizations.creatorMap = Zotero.Item.prototype.creatorMap;\n\nZotero.Item.prototype.itemTypeImageSrc = {\n\t\"note\": \"note\",\n\t\"attachment\": \"attachment-pdf\",\n\t\"attachmentPdf\": \"attachment-pdf\",\n\t\"attachmentWeblink\": \"attachment-web-link\",\n\t\"attachmentSnapshot\": \"attachment-snapshot\",\n\t\"attachmentFile\": \"attachment-file\",\n\t\"attachmentLink\": \"attachment-link\",\n\t\"book\": \"book\",\n\t\"bookSection\": \"book_open\",\n\t\"journalArticle\": \"page_white_text\",\n\t\"magazineArticle\": \"layout\",\n\t\"newspaperArticle\": \"newspaper\",\n\t\"thesis\": \"report\",\n\t\"letter\": \"email_open\",\n\t\"manuscript\": \"script\",\n\t\"interview\": \"comments\",\n\t\"film\": \"film\",\n\t\"artwork\": \"picture\",\n\t\"webpage\": \"page\",\n\t\"report\": \"report\",\n\t\"bill\": \"page_white\",\n\t\"case\": \"page_white\",\n\t\"hearing\": \"page_white\",\n\t\"patent\": \"page_white\",\n\t\"statute\": \"page_white\",\n\t\"email\": \"email\",\n\t\"map\": \"map\",\n\t\"blogPost\": \"layout\",\n\t\"instantMessage\": \"page_white\",\n\t\"forumPost\": \"page\",\n\t\"audioRecording\": \"ipod\",\n\t\"presentation\": \"page_white\",\n\t\"videoRecording\": \"film\",\n\t\"tvBroadcast\": \"television\",\n\t\"radioBroadcast\": \"transmit\",\n\t\"podcast\": \"ipod_cast\",\n\t\"computerProgram\": \"page_white_code\",\n\t\"conferencePaper\": \"treeitem-conferencePaper\",\n\t\"document\": \"page_white\",\n\t\"encyclopediaArticle\": \"page_white\",\n\t\"dictionaryEntry\": \"page_white\"\n};\n\nZotero.Item.prototype.cslNameMap = {\n\t\"author\": \"author\",\n\t\"editor\": \"editor\",\n\t\"bookAuthor\": \"container-author\",\n\t\"composer\": \"composer\",\n\t\"interviewer\": \"interviewer\",\n\t\"recipient\": \"recipient\",\n\t\"seriesEditor\": \"collection-editor\",\n\t\"translator\": \"translator\"\n};\n\nZotero.Item.prototype.cslFieldMap = {\n\t\"title\": [\"title\"],\n\t\"container-title\": [\"publicationTitle\", \"reporter\", \"code\"], /* reporter and code should move to SQL mapping tables */\n\t\"collection-title\": [\"seriesTitle\", \"series\"],\n\t\"collection-number\": [\"seriesNumber\"],\n\t\"publisher\": [\"publisher\", \"distributor\"], /* distributor should move to SQL mapping tables */\n\t\"publisher-place\": [\"place\"],\n\t\"authority\": [\"court\"],\n\t\"page\": [\"pages\"],\n\t\"volume\": [\"volume\"],\n\t\"issue\": [\"issue\"],\n\t\"number-of-volumes\": [\"numberOfVolumes\"],\n\t\"number-of-pages\": [\"numPages\"],\n\t\"edition\": [\"edition\"],\n\t\"versionNumber\": [\"version\"],\n\t\"section\": [\"section\"],\n\t\"genre\": [\"type\", \"artworkSize\"], /* artworkSize should move to SQL mapping tables, or added as a CSL variable */\n\t\"medium\": [\"medium\", \"system\"],\n\t\"archive\": [\"archive\"],\n\t\"archive_location\": [\"archiveLocation\"],\n\t\"event\": [\"meetingName\", \"conferenceName\"], /* these should be mapped to the same base field in SQL mapping tables */\n\t\"event-place\": [\"place\"],\n\t\"abstract\": [\"abstractNote\"],\n\t\"URL\": [\"url\"],\n\t\"DOI\": [\"DOI\"],\n\t\"ISBN\": [\"ISBN\"],\n\t\"call-number\": [\"callNumber\"],\n\t\"note\": [\"extra\"],\n\t\"number\": [\"number\"],\n\t\"references\": [\"history\"],\n\t\"shortTitle\": [\"shortTitle\"],\n\t\"journalAbbreviation\": [\"journalAbbreviation\"],\n\t\"language\": [\"language\"]\n};\n\nZotero.Item.prototype.cslDateMap = {\n\t\"issued\": \"date\",\n\t\"accessed\": \"accessDate\"\n};\n\nZotero.Item.prototype.cslTypeMap = {\n\t'book': \"book\",\n\t'bookSection': \"chapter\",\n\t'journalArticle': \"article-journal\",\n\t'magazineArticle': \"article-magazine\",\n\t'newspaperArticle': \"article-newspaper\",\n\t'thesis': \"thesis\",\n\t'encyclopediaArticle': \"entry-encyclopedia\",\n\t'dictionaryEntry': \"entry-dictionary\",\n\t'conferencePaper': \"paper-conference\",\n\t'letter': \"personal_communication\",\n\t'manuscript': \"manuscript\",\n\t'interview': \"interview\",\n\t'film': \"motion_picture\",\n\t'artwork': \"graphic\",\n\t'webpage': \"webpage\",\n\t'report': \"report\",\n\t'bill': \"bill\",\n\t'case': \"legal_case\",\n\t'hearing': \"bill\", // ??\n\t'patent': \"patent\",\n\t'statute': \"bill\", // ??\n\t'email': \"personal_communication\",\n\t'map': \"map\",\n\t'blogPost': \"webpage\",\n\t'instantMessage': \"personal_communication\",\n\t'forumPost': \"webpage\",\n\t'audioRecording': \"song\", // ??\n\t'presentation': \"speech\",\n\t'videoRecording': \"motion_picture\",\n\t'tvBroadcast': \"broadcast\",\n\t'radioBroadcast': \"broadcast\",\n\t'podcast': \"song\", // ??\n\t'computerProgram': \"book\" // ??\n};\n\nZotero.Item.prototype.citePaperJournalArticleURL = false;\n'use strict';\n\nfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\nZotero.Tag = function (tagObj) {\n\tthis.instance = \"Zotero.Tag\";\n\tthis.color = null;\n\tthis.version = 0;\n\tif ((typeof tagObj === 'undefined' ? 'undefined' : _typeof(tagObj)) == 'object') {\n\t\tthis.parseJsonTag(tagObj);\n\t} else if (typeof tagObj == 'string') {\n\t\tthis.parseJsonTag(this.templateApiObj(tagObj));\n\t} else {\n\t\tthis.parseJsonTag(this.tamplateApiObj(''));\n\t}\n};\n\nZotero.Tag.prototype = new Zotero.ApiObject();\n\nZotero.Tag.prototype.parseJsonTag = function (tagObj) {\n\tvar tag = this;\n\ttag.apiObj = Z.extend({}, tagObj);\n\ttag.urlencodedtag = encodeURIComponent(tag.apiObj.tag);\n\ttag.version = tag.apiObj.version;\n};\n\nZotero.Tag.prototype.templateApiObj = function (tagString) {\n\treturn {\n\t\ttag: tagString,\n\t\tlinks: {},\n\t\tmeta: {\n\t\t\ttype: 0,\n\t\t\tnumItems: 1\n\t\t}\n\t};\n};\n\nZotero.Tag.prototype.tagComparer = function () {\n\tif (window.Intl) {\n\t\tvar collator = new window.Intl.Collator();\n\t\treturn function (a, b) {\n\t\t\treturn collator.compare(a.apiObj.tag, b.apiObj.tag);\n\t\t};\n\t} else {\n\t\treturn function (a, b) {\n\t\t\tif (a.apiObj.tag.toLocaleLowerCase() == b.apiObj.tag.toLocaleLowerCase()) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tif (a.apiObj.tag.toLocaleLowerCase() < b.apiObj.tag.toLocaleLowerCase()) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\treturn 1;\n\t\t};\n\t}\n};\n\nZotero.Tag.prototype.set = function (key, val) {\n\tvar tag = this;\n\n\tif (key in tag.apiObj) {\n\t\ttag.apiObj[key] = val;\n\t}\n\tif (key in tag.apiObj.meta) {\n\t\ttag.apiObj.meta[key] = val;\n\t}\n\n\tswitch (key) {\n\t\tcase \"tagVersion\":\n\t\tcase \"version\":\n\t\t\ttag.version = val;\n\t\t\ttag.apiObj.version = val;\n\t\t\tbreak;\n\t}\n\n\treturn tag;\n};\n\"use strict\";\n\nZotero.Search = function () {\n\tthis.instance = \"Zotero.Search\";\n\tthis.searchObject = {};\n};\n'use strict';\n\nZotero.Group = function (groupObj) {\n\tvar group = this;\n\tgroup.instance = \"Zotero.Group\";\n\tif (groupObj) {\n\t\tthis.parseJsonGroup(groupObj);\n\t}\n};\n\nZotero.Group.prototype = new Zotero.ApiObject();\n\nZotero.Group.prototype.parseJsonGroup = function (groupObj) {\n\tvar group = this;\n\tgroup.apiObj = groupObj;\n};\n\nZotero.Group.prototype.get = function (key) {\n\tvar group = this;\n\tswitch (key) {\n\t\tcase 'title':\n\t\tcase 'name':\n\t\t\treturn group.apiObj.data.name;\n\t}\n\n\tif (key in group.apiObj) {\n\t\treturn group.apiObj[key];\n\t}\n\tif (key in group.apiObj.data) {\n\t\treturn group.apiObj.data[key];\n\t}\n\tif (key in group.apiObj.meta) {\n\t\treturn group.apiObj.meta[key];\n\t}\n\tif (group.hasOwnProperty(key)) {\n\t\treturn group[key];\n\t}\n\n\treturn null;\n};\n\nZotero.Group.prototype.isWritable = function (userID) {\n\tvar group = this;\n\tswitch (true) {\n\t\tcase group.get('owner') == userID:\n\t\t\treturn true;\n\t\tcase group.apiObj.data.admins && group.apiObj.data.admins.indexOf(userID) != -1:\n\t\t\treturn true;\n\t\tcase group.apiObj.data.libraryEditing == 'members' && group.apiObj.data.members && group.apiObj.data.members.indexOf(userID) != -1:\n\t\t\treturn true;\n\t\tdefault:\n\t\t\treturn false;\n\t}\n};\n\nZotero.Group.prototype.typeMap = {\n\t'Private': 'Private',\n\t'PublicOpen': 'Public, Open Membership',\n\t'PublicClosed': 'Public, Closed Membership'\n};\n\nZotero.Group.prototype.accessMap = {\n\t'all': {\n\t\t'members': 'Anyone can view, only members can edit',\n\t\t'admins': 'Anyone can view, only admins can edit'\n\t},\n\t'members': {\n\t\t'members': 'Only members can view and edit',\n\t\t'admins': 'Only members can view, only admins can edit'\n\t},\n\t'admins': {\n\t\t'members': 'Only admins can view, only members can edit',\n\t\t'admins': 'Only admins can view and edit'\n\t}\n};\n'use strict';\n\nZotero.User = function () {\n\tthis.instance = \"Zotero.User\";\n};\nZotero.User.prototype = new Zotero.ApiObject();\nZotero.User.prototype.loadObject = function (ob) {\n\tthis.title = ob.title;\n\tthis.author = ob.author;\n\tthis.tagID = ob.tagID;\n\tthis.published = ob.published;\n\tthis.updated = ob.updated;\n\tthis.links = ob.links;\n\tthis.numItems = ob.numItems;\n\tthis.items = ob.items;\n\tthis.tagType = ob.tagType;\n\tthis.modified = ob.modified;\n\tthis.added = ob.added;\n\tthis.key = ob.key;\n};\n\nZotero.User.prototype.parseXmlUser = function (tel) {\n\tthis.parseXmlEntry(tel);\n\n\tvar tagEl = tel.find('content>tag');\n\tif (tagEl.length !== 0) {\n\t\tthis.tagKey = tagEl.attr('key'); // find(\"zapi\\\\:itemID\").text();\n\t\tthis.libraryID = tagEl.attr(\"libraryID\");\n\t\tthis.tagName = tagEl.attr(\"name\");\n\t\tthis.dateAdded = tagEl.attr('dateAdded');\n\t\tthis.dateModified = tagEl.attr('dateModified');\n\t}\n};\n\"use strict\";\n\nfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\nZotero.utils = {\n\trandomString: function randomString(len, chars) {\n\t\tif (!chars) {\n\t\t\tchars = \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\";\n\t\t}\n\t\tif (!len) {\n\t\t\tlen = 8;\n\t\t}\n\t\tvar randomstring = '';\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tvar rnum = Math.floor(Math.random() * chars.length);\n\t\t\trandomstring += chars.substring(rnum, rnum + 1);\n\t\t}\n\t\treturn randomstring;\n\t},\n\n\tgetKey: function getKey() {\n\t\tvar baseString = \"23456789ABCDEFGHIJKMNPQRSTUVWXZ\";\n\t\treturn Zotero.utils.randomString(8, baseString);\n\t},\n\n\tslugify: function slugify(name) {\n\t\tvar slug = name.trim();\n\t\tslug = slug.toLowerCase();\n\t\tslug = slug.replace(/[^a-z0-9 ._-]/g, \"\");\n\t\tslug = slug.replace(/\\s/g, \"_\");\n\n\t\treturn slug;\n\t},\n\n\tprependAutocomplete: function prependAutocomplete(pre, source) {\n\t\tZ.debug('Zotero.utils.prependAutocomplete', 3);\n\t\tZ.debug(\"prepend match: \" + pre);\n\t\tvar satisfy;\n\t\tif (!source) {\n\t\t\tZ.debug(\"source is not defined\");\n\t\t}\n\t\tif (pre === '') {\n\t\t\tsatisfy = source.slice(0);\n\t\t\treturn satisfy;\n\t\t}\n\t\tvar plen = pre.length;\n\t\tvar plower = pre.toLowerCase();\n\t\tsatisfy = source.map(function (n) {\n\t\t\tif (n.substr(0, plen).toLowerCase() == plower) {\n\t\t\t\treturn n;\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t});\n\t\treturn satisfy;\n\t},\n\n\tmatchAnyAutocomplete: function matchAnyAutocomplete(pre, source) {\n\t\tZ.debug('Zotero.utils.matchAnyAutocomplete', 3);\n\t\tZ.debug(\"matchAny match: \" + pre);\n\t\tvar satisfy;\n\t\tif (!source) {\n\t\t\tZ.debug(\"source is not defined\");\n\t\t}\n\t\tif (pre === '') {\n\t\t\tsatisfy = source.slice(0);\n\t\t\treturn satisfy;\n\t\t}\n\t\tvar plen = pre.length;\n\t\tvar plower = pre.toLowerCase();\n\t\tsatisfy = source.map(function (n) {\n\t\t\tif (n.toLowerCase().indexOf(plower) != -1) {\n\t\t\t\treturn n;\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t});\n\t\treturn satisfy;\n\t},\n\n\tlibraryString: function libraryString(type, libraryID) {\n\t\tvar lstring = '';\n\t\tif (type == 'user') lstring = 'u';else if (type == 'group') lstring = 'g';\n\t\tlstring += libraryID;\n\t\treturn lstring;\n\t},\n\n\tparseLibString: function parseLibString(libraryString) {\n\t\tvar type;\n\t\tvar libraryID;\n\t\tif (libraryString.charAt(0) == 'u') {\n\t\t\ttype = 'user';\n\t\t} else if (libraryString.charAt(0) == 'g') {\n\t\t\ttype = 'group';\n\t\t} else {\n\t\t\tthrow new Error(\"unexpected type character in libraryString\");\n\t\t}\n\t\tlibraryID = parseInt(libraryString.substring(1));\n\t\treturn { libraryType: type, libraryID: libraryID };\n\t},\n\n\t//return true if retrieved more than lifetime minutes ago\n\tstale: function stale(retrievedDate, lifetime) {\n\t\tvar now = Date.now(); //current local time\n\t\tvar elapsed = now.getTime() - retrievedDate.getTime();\n\t\tif (elapsed / 60000 > lifetime) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\n\tentityify: function entityify(str) {\n\t\tvar character = {\n\t\t\t'<': '&lt;',\n\t\t\t'>': '&gt;',\n\t\t\t'&': '&amp;',\n\t\t\t'\"': '&quot;'\n\t\t};\n\t\treturn str.replace(/[<>&\"]/g, function (c) {\n\t\t\treturn character[c];\n\t\t});\n\t},\n\n\tparseApiDate: function parseApiDate(datestr, date) {\n\t\t//var parsems = Date.parse(datestr);\n\n\t\tvar re = /([0-9]+)-([0-9]+)-([0-9]+)T([0-9]+):([0-9]+):([0-9]+)Z/;\n\t\tvar matches = re.exec(datestr);\n\t\tif (matches === null) {\n\t\t\tZ.error(\"error parsing api date: \" + datestr);\n\t\t\treturn null;\n\t\t} else {\n\t\t\tdate = new Date(Date.UTC(matches[1], matches[2] - 1, matches[3], matches[4], matches[5], matches[6]));\n\t\t\treturn date;\n\t\t}\n\n\t\treturn date;\n\t},\n\n\treadCookie: function readCookie(name) {\n\t\tvar nameEQ = name + \"=\";\n\t\tvar ca = document.cookie.split(';');\n\t\tfor (var i = 0; i < ca.length; i++) {\n\t\t\tvar c = ca[i];\n\t\t\twhile (c.charAt(0) == ' ') {\n\t\t\t\tc = c.substring(1, c.length);\n\t\t\t}if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);\n\t\t}\n\t\treturn null;\n\t},\n\n\t/**\n  * Translate common mimetypes to user friendly versions\n  *\n  * @param string $mimeType\n  * @return string\n  */\n\ttranslateMimeType: function translateMimeType(mimeType) {\n\t\tswitch (mimeType) {\n\t\t\tcase 'text/html':\n\t\t\t\treturn 'html';\n\n\t\t\tcase 'application/pdf':\n\t\t\tcase 'application/x-pdf':\n\t\t\tcase 'application/acrobat':\n\t\t\tcase 'applications/vnd.pdf':\n\t\t\tcase 'text/pdf':\n\t\t\tcase 'text/x-pdf':\n\t\t\t\treturn 'pdf';\n\n\t\t\tcase 'image/jpg':\n\t\t\tcase 'image/jpeg':\n\t\t\t\treturn 'jpg';\n\n\t\t\tcase 'image/gif':\n\t\t\t\treturn 'gif';\n\n\t\t\tcase 'application/msword':\n\t\t\tcase 'application/doc':\n\t\t\tcase 'application/vnd.msword':\n\t\t\tcase 'application/vnd.ms-word':\n\t\t\tcase 'application/winword':\n\t\t\tcase 'application/word':\n\t\t\tcase 'application/x-msw6':\n\t\t\tcase 'application/x-msword':\n\t\t\t\treturn 'doc';\n\n\t\t\tcase 'application/vnd.oasis.opendocument.text':\n\t\t\tcase 'application/x-vnd.oasis.opendocument.text':\n\t\t\t\treturn 'odt';\n\n\t\t\tcase 'video/flv':\n\t\t\tcase 'video/x-flv':\n\t\t\t\treturn 'flv';\n\n\t\t\tcase 'image/tif':\n\t\t\tcase 'image/tiff':\n\t\t\tcase 'image/x-tif':\n\t\t\tcase 'image/x-tiff':\n\t\t\tcase 'application/tif':\n\t\t\tcase 'application/x-tif':\n\t\t\tcase 'application/tiff':\n\t\t\tcase 'application/x-tiff':\n\t\t\t\treturn 'tiff';\n\n\t\t\tcase 'application/zip':\n\t\t\tcase 'application/x-zip':\n\t\t\tcase 'application/x-zip-compressed':\n\t\t\tcase 'application/x-compress':\n\t\t\tcase 'application/x-compressed':\n\t\t\tcase 'multipart/x-zip':\n\t\t\t\treturn 'zip';\n\n\t\t\tcase 'video/quicktime':\n\t\t\tcase 'video/x-quicktime':\n\t\t\t\treturn 'mov';\n\n\t\t\tcase 'video/avi':\n\t\t\tcase 'video/msvideo':\n\t\t\tcase 'video/x-msvideo':\n\t\t\t\treturn 'avi';\n\n\t\t\tcase 'audio/wav':\n\t\t\tcase 'audio/x-wav':\n\t\t\tcase 'audio/wave':\n\t\t\t\treturn 'wav';\n\n\t\t\tcase 'audio/aiff':\n\t\t\tcase 'audio/x-aiff':\n\t\t\tcase 'sound/aiff':\n\t\t\t\treturn 'aiff';\n\n\t\t\tcase 'text/plain':\n\t\t\t\treturn 'plain text';\n\t\t\tcase 'application/rtf':\n\t\t\t\treturn 'rtf';\n\n\t\t\tdefault:\n\t\t\t\treturn mimeType;\n\t\t}\n\t},\n\n\t/**\n  * Get the permissions a key has for a library\n  * if no key is passed use the currently set key for the library\n  *\n  * @param int|string $userID\n  * @param string $key\n  * @return array $keyPermissions\n  */\n\tgetKeyPermissions: function getKeyPermissions(userID, key) {\n\t\tif (!userID) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!key) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar urlconfig = { 'target': 'key', 'libraryType': 'user', 'libraryID': userID, 'apiKey': key };\n\t\tvar requestUrl = Zotero.ajax.apiRequestString(urlconfig);\n\n\t\treturn Zotero.ajaxRequest(requestUrl).then(function (response) {\n\t\t\tvar keyObject = JSON.parse(response.data);\n\t\t\treturn keyObject;\n\t\t});\n\t},\n\n\tparseQuery: function parseQuery(query) {\n\t\tvar params = {};\n\t\tvar match;\n\t\tvar pl = /\\+/g; // Regex for replacing addition symbol with a space\n\t\tvar search = /([^&=]+)=?([^&]*)/g;\n\t\tvar decode = function decode(s) {\n\t\t\treturn decodeURIComponent(s.replace(pl, \" \"));\n\t\t};\n\n\t\twhile (match = search.exec(query)) {\n\t\t\tparams[decode(match[1])] = decode(match[2]);\n\t\t}\n\t\treturn params;\n\t},\n\n\tquerystring: function querystring(href) {\n\t\tvar hashindex = href.indexOf('#') != -1 ? href.indexOf('#') : undefined;\n\t\tvar q = href.substring(href.indexOf('?') + 1, hashindex);\n\t\treturn q;\n\t}\n};\n\nZotero.extend = function () {\n\tvar res = {};\n\tfor (var i = 0; i < arguments.length; i++) {\n\t\tvar a = arguments[i];\n\t\tif ((typeof a === \"undefined\" ? \"undefined\" : _typeof(a)) != \"object\") {\n\t\t\tcontinue;\n\t\t}\n\t\tObject.keys(a).forEach(function (key) {\n\t\t\tres[key] = a[key];\n\t\t});\n\t}\n\treturn res;\n};\n'use strict';\n\n// Url.js - construct certain urls and links locally that may depend on the\n// current website's routing scheme etc. Not necessarily pointing to zotero.org\n// - href for a particular item's local representation\n// - link with appropriate text, to download file or view framed snapshot\n// - href for file download/view, depending on whether config says to download\n// directly from the api, or to proxy it\n// - displayable string describing the attachment file (attachmentFileDetails)\n// - list of urls for supported export formats\n//\n\n//locally construct a url for the item on the current website\nZotero.url.itemHref = function (item) {\n\tvar href = '';\n\thref += Zotero.config.librarySettings.libraryPathString + '/itemKey/' + item.get('key');\n\treturn href;\n};\n\n//construct a download link for an item's enclosure file that takes into\n//account size and whether the file is a snapshot\nZotero.url.attachmentDownloadLink = function (item) {\n\tvar retString = '';\n\tvar downloadUrl = item.attachmentDownloadUrl;\n\tvar contentType = item.get('contentType');\n\n\tif (item.apiObj.links && item.apiObj.links['enclosure']) {\n\t\tif (!item.apiObj.links['enclosure']['length'] && item.isSnapshot()) {\n\t\t\t//snapshot: redirect to view\n\t\t\tretString += '<a href=\"' + downloadUrl + '\">' + 'View Snapshot</a>';\n\t\t} else {\n\t\t\t//file: offer download\n\t\t\tvar enctype = Zotero.utils.translateMimeType(item.apiObj.links['enclosure'].type);\n\t\t\tvar enc = item.apiObj.links['enclosure'];\n\t\t\tvar filesize = parseInt(enc['length'], 10);\n\t\t\tvar filesizeString = \"\" + filesize + \" B\";\n\t\t\tif (filesize > 1073741824) {\n\t\t\t\tfilesizeString = \"\" + (filesize / 1073741824).toFixed(1) + \" GB\";\n\t\t\t} else if (filesize > 1048576) {\n\t\t\t\tfilesizeString = \"\" + (filesize / 1048576).toFixed(1) + \" MB\";\n\t\t\t} else if (filesize > 1024) {\n\t\t\t\tfilesizeString = \"\" + (filesize / 1024).toFixed(1) + \" KB\";\n\t\t\t}\n\t\t\tZ.debug(enctype, 3);\n\t\t\tretString += '<a href=\"' + downloadUrl + '\">';\n\t\t\tif (enctype == 'undefined' || enctype === '' || typeof enctype == 'undefined') {\n\t\t\t\tretString += filesizeString + '</a>';\n\t\t\t} else {\n\t\t\t\tretString += enctype + ', ' + filesizeString + '</a>';\n\t\t\t}\n\t\t\treturn retString;\n\t\t}\n\t}\n\treturn retString;\n};\n\nZotero.url.attachmentDownloadUrl = function (item) {\n\tif (item.apiObj.links && item.apiObj.links['enclosure']) {\n\t\tif (Zotero.config.proxyDownloads) {\n\t\t\t//we have a proxy for downloads at baseDownloadUrl so just pass an itemkey to that\n\t\t\treturn Zotero.url.wwwDownloadUrl(item);\n\t\t} else {\n\t\t\treturn Zotero.url.apiDownloadUrl(item);\n\t\t}\n\t}\n\treturn false;\n};\n\nZotero.url.apiDownloadUrl = function (item) {\n\tif (item.apiObj.links['enclosure']) {\n\t\treturn item.apiObj.links['enclosure']['href'];\n\t}\n\treturn false;\n};\n\nZotero.url.proxyDownloadUrl = function (item) {\n\tif (item.apiObj.links['enclosure']) {\n\t\tif (Zotero.config.proxyDownloads) {\n\t\t\treturn Zotero.config.baseDownloadUrl + \"?itemkey=\" + item.get('key');\n\t\t} else {\n\t\t\treturn Zotero.url.apiDownloadUrl(item);\n\t\t}\n\t} else {\n\t\treturn false;\n\t}\n};\n\nZotero.url.wwwDownloadUrl = function (item) {\n\tif (item.apiObj.links['enclosure']) {\n\t\treturn Zotero.config.baseZoteroWebsiteUrl + Zotero.config.librarySettings.libraryPathString + \"/\" + item.get('key') + \"/file/view\";\n\t} else {\n\t\treturn false;\n\t}\n};\n\nZotero.url.publicationsDownloadUrl = function (item) {\n\tif (item.apiObj.links['enclosure']) {\n\t\treturn item.apiObj.links['enclosure']['href'];\n\t}\n\treturn false;\n};\n\nZotero.url.attachmentFileDetails = function (item) {\n\t//file: offer download\n\tif (!item.apiObj.links['enclosure']) return '';\n\tvar enctype = Zotero.utils.translateMimeType(item.apiObj.links['enclosure'].type);\n\tvar enc = item.apiObj.links['enclosure'];\n\tvar filesizeString = '';\n\tif (enc['length']) {\n\t\tvar filesize = parseInt(enc['length'], 10);\n\t\tfilesizeString = \"\" + filesize + \" B\";\n\t\tif (filesize > 1073741824) {\n\t\t\tfilesizeString = \"\" + (filesize / 1073741824).toFixed(1) + \" GB\";\n\t\t} else if (filesize > 1048576) {\n\t\t\tfilesizeString = \"\" + (filesize / 1048576).toFixed(1) + \" MB\";\n\t\t} else if (filesize > 1024) {\n\t\t\tfilesizeString = \"\" + (filesize / 1024).toFixed(1) + \" KB\";\n\t\t}\n\t\treturn '(' + enctype + ', ' + filesizeString + ')';\n\t} else {\n\t\treturn '(' + enctype + ')';\n\t}\n};\n\nZotero.url.userWebLibrary = function (slug) {\n\treturn [Zotero.config.baseWebsiteUrl, slug, \"items\"].join(\"/\");\n};\n\nZotero.url.groupWebLibrary = function (group) {\n\tif (group.type == 'Private') {\n\t\treturn [Zotero.config.baseWebsiteUrl, \"groups\", group.get('id'), \"items\"].join(\"/\");\n\t} else {\n\t\treturn [Zotero.config.baseWebsiteUrl, \"groups\", Zotero.utils.slugify(group.get('name')), \"items\"].join(\"/\");\n\t}\n};\n\nZotero.url.exportUrls = function (config) {\n\tZ.debug(\"Zotero.url.exportUrls\", 3);\n\tvar exportUrls = {};\n\tvar exportConfig = {};\n\tZotero.config.exportFormats.forEach(function (format) {\n\t\texportConfig = Z.extend(config, { 'format': format });\n\t\texportUrls[format] = Zotero.ajax.apiRequestUrl(exportConfig) + Zotero.ajax.apiQueryString({ format: format, limit: '25' });\n\t});\n\treturn exportUrls;\n};\n\nZotero.url.relationUrl = function (libraryType, libraryID, itemKey) {\n\treturn \"http://zotero.org/\" + libraryType + \"s/\" + libraryID + \"/items/\" + itemKey;\n};\n'use strict';\n\nZotero.file = {};\n\nZotero.file.getFileInfo = function (file) {\n\t//fileInfo: md5, filename, filesize, mtime, zip, contentType, charset\n\tif (typeof FileReader === 'undefined') {\n\t\treturn Promise.reject(new Error(\"FileReader not supported\"));\n\t}\n\n\treturn new Promise(function (resolve, reject) {\n\t\tvar fileInfo = {};\n\t\tvar reader = new FileReader();\n\t\treader.onload = function (e) {\n\t\t\tZ.debug('Zotero.file.getFileInfo onloadFunc', 3);\n\t\t\tvar result = e.target.result;\n\t\t\tZotero.debug(result, 3);\n\t\t\tfileInfo.md5 = SparkMD5.ArrayBuffer.hash(result);\n\t\t\tfileInfo.filename = file.name;\n\t\t\tfileInfo.filesize = file.size;\n\t\t\tfileInfo.mtime = Date.now();\n\t\t\tfileInfo.contentType = file.type;\n\t\t\t//fileInfo.reader = reader;\n\t\t\tfileInfo.filedata = result;\n\t\t\tresolve(fileInfo);\n\t\t};\n\n\t\treader.readAsArrayBuffer(file);\n\t});\n};\n\nZotero.file.uploadFile = function (uploadInfo, fileInfo) {\n\tZ.debug(\"Zotero.file.uploadFile\", 3);\n\tZ.debug(uploadInfo, 4);\n\n\tvar formData = new FormData();\n\tObject.keys(uploadInfo.params).forEach(function (key) {\n\t\tvar val = uploadInfo.params[key];\n\t\tformData.append(key, val);\n\t});\n\n\tvar blobData = new Blob([fileInfo.filedata], { type: fileInfo.contentType });\n\tformData.append('file', blobData);\n\n\tvar xhr = new XMLHttpRequest();\n\n\txhr.open('POST', uploadInfo.url, true);\n\n\treturn new Promise(function (resolve, reject) {\n\t\txhr.onload = function (evt) {\n\t\t\tZ.debug('uploadFile onload event', 3);\n\t\t\tif (this.status == 201) {\n\t\t\t\tZ.debug(\"successful upload - 201\", 3);\n\t\t\t\tresolve();\n\t\t\t} else {\n\t\t\t\tZ.error('uploadFile failed - ' + xhr.status);\n\t\t\t\treject({\n\t\t\t\t\t\"message\": \"Failure uploading file.\",\n\t\t\t\t\t\"code\": xhr.status,\n\t\t\t\t\t\"serverMessage\": xhr.responseText\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\txhr.onprogress = function (evt) {\n\t\t\tZ.debug('progress event');\n\t\t\tZ.debug(evt);\n\t\t};\n\t\txhr.send(formData);\n\t});\n\n\t//If CORS is not enabled on s3 this XHR will not have the normal status\n\t//information, but will still fire readyStateChanges so you can tell\n\t//when the upload has finished (even if you can't tell if it was successful\n\t//from JS)\n};\n\"use strict\";\n\nZotero.Idb = {};\n\n//Initialize an indexedDB for the specified library user or group + id\n//returns a promise that is resolved with a Zotero.Idb.Library instance when successful\n//and rejected onerror\nZotero.Idb.Library = function (libraryString) {\n\tZ.debug(\"Zotero.Idb.Library\", 3);\n\tZ.debug(\"Initializing Zotero IDB\", 3);\n\tthis.libraryString = libraryString;\n\tthis.owningLibrary = null;\n\tthis.initialized = false;\n};\n\nZotero.Idb.Library.prototype.init = function () {\n\tvar idbLibrary = this;\n\treturn new Promise(function (resolve, reject) {\n\t\t//Don't bother with the prefixed names because they should all be irrelevant by now\n\t\tvar indexedDB = window.indexedDB;\n\t\tidbLibrary.indexedDB = indexedDB;\n\n\t\t// Now we can open our database\n\t\tZ.debug(\"requesting indexedDb from browser\", 3);\n\t\tvar request = indexedDB.open(\"Zotero_\" + idbLibrary.libraryString, 4);\n\t\trequest.onerror = function (e) {\n\t\t\tZotero.error(\"ERROR OPENING INDEXED DB\");\n\t\t\treject();\n\t\t};\n\n\t\tvar upgradeCallback = function upgradeCallback(event) {\n\t\t\tZ.debug(\"Zotero.Idb onupgradeneeded or onsuccess\", 3);\n\t\t\tvar oldVersion = event.oldVersion;\n\t\t\tZ.debug(\"oldVersion: \" + event.oldVersion, 3);\n\t\t\tvar db = event.target.result;\n\t\t\tidbLibrary.db = db;\n\n\t\t\tif (oldVersion < 4) {\n\t\t\t\t//delete old versions of object stores\n\t\t\t\tZ.debug(\"Existing object store names:\", 3);\n\t\t\t\tZ.debug(JSON.stringify(db.objectStoreNames), 3);\n\t\t\t\tZ.debug(\"Deleting old object stores\", 3);\n\t\t\t\tif (db.objectStoreNames[\"items\"]) {\n\t\t\t\t\tdb.deleteObjectStore(\"items\");\n\t\t\t\t}\n\t\t\t\tif (db.objectStoreNames[\"tags\"]) {\n\t\t\t\t\tdb.deleteObjectStore(\"tags\");\n\t\t\t\t}\n\t\t\t\tif (db.objectStoreNames[\"collections\"]) {\n\t\t\t\t\tdb.deleteObjectStore(\"collections\");\n\t\t\t\t}\n\t\t\t\tif (db.objectStoreNames[\"files\"]) {\n\t\t\t\t\tdb.deleteObjectStore(\"files\");\n\t\t\t\t}\n\t\t\t\tif (db.objectStoreNames[\"versions\"]) {\n\t\t\t\t\tdb.deleteObjectStore(\"versions\");\n\t\t\t\t}\n\t\t\t\tZ.debug(\"Existing object store names:\", 3);\n\t\t\t\tZ.debug(JSON.stringify(db.objectStoreNames), 3);\n\n\t\t\t\t// Create object stores to hold items, collections, and tags.\n\t\t\t\t// IDB keys are just the zotero object keys\n\t\t\t\tvar itemStore = db.createObjectStore(\"items\", { keyPath: \"key\" });\n\t\t\t\tvar collectionStore = db.createObjectStore(\"collections\", { keyPath: \"key\" });\n\t\t\t\tvar tagStore = db.createObjectStore(\"tags\", { keyPath: \"tag\" });\n\t\t\t\tvar fileStore = db.createObjectStore(\"files\");\n\t\t\t\tvar versionStore = db.createObjectStore(\"versions\");\n\n\t\t\t\tZ.debug(\"itemStore index names:\", 3);\n\t\t\t\tZ.debug(JSON.stringify(itemStore.indexNames), 3);\n\t\t\t\tZ.debug(\"collectionStore index names:\", 3);\n\t\t\t\tZ.debug(JSON.stringify(collectionStore.indexNames), 3);\n\t\t\t\tZ.debug(\"tagStore index names:\", 3);\n\t\t\t\tZ.debug(JSON.stringify(tagStore.indexNames), 3);\n\n\t\t\t\t// Create index to search/sort items by each attribute\n\t\t\t\tObject.keys(Zotero.Item.prototype.fieldMap).forEach(function (key) {\n\t\t\t\t\tZ.debug(\"Creating index on \" + key, 3);\n\t\t\t\t\titemStore.createIndex(key, \"data.\" + key, { unique: false });\n\t\t\t\t});\n\n\t\t\t\t//itemKey index was created above with all other item fields\n\t\t\t\t//itemStore.createIndex(\"itemKey\", \"itemKey\", { unique: false });\n\n\t\t\t\t//create multiEntry indices on item collectionKeys and tags\n\t\t\t\titemStore.createIndex(\"collectionKeys\", \"data.collections\", { unique: false, multiEntry: true });\n\t\t\t\t//index on extra tagstrings array since tags are objects and we can't index them directly\n\t\t\t\titemStore.createIndex(\"itemTagStrings\", \"_supplement.tagstrings\", { unique: false, multiEntry: true });\n\t\t\t\t//example filter for tag: Zotero.Idb.filterItems(\"itemTagStrings\", \"Unread\");\n\t\t\t\t//example filter collection: Zotero.Idb.filterItems(\"collectionKeys\", \"<collectionKey>\");\n\n\t\t\t\t//itemStore.createIndex(\"itemType\", \"itemType\", { unique: false });\n\t\t\t\titemStore.createIndex(\"parentItemKey\", \"data.parentItem\", { unique: false });\n\t\t\t\titemStore.createIndex(\"libraryKey\", \"libraryKey\", { unique: false });\n\t\t\t\titemStore.createIndex(\"deleted\", \"data.deleted\", { unique: false });\n\n\t\t\t\tcollectionStore.createIndex(\"name\", \"data.name\", { unique: false });\n\t\t\t\tcollectionStore.createIndex(\"key\", \"key\", { unique: false });\n\t\t\t\tcollectionStore.createIndex(\"parentCollection\", \"data.parentCollection\", { unique: false });\n\t\t\t\t//collectionStore.createIndex(\"libraryKey\", \"libraryKey\", { unique: false });\n\n\t\t\t\ttagStore.createIndex(\"tag\", \"tag\", { unique: false });\n\t\t\t\t//tagStore.createIndex(\"libraryKey\", \"libraryKey\", { unique: false });\n\t\t\t}\n\t\t};\n\n\t\trequest.onupgradeneeded = upgradeCallback;\n\n\t\trequest.onsuccess = function () {\n\t\t\tZ.debug(\"IDB success\", 3);\n\t\t\tidbLibrary.db = request.result;\n\t\t\tidbLibrary.initialized = true;\n\t\t\tresolve(idbLibrary);\n\t\t};\n\t});\n};\n\nZotero.Idb.Library.prototype.deleteDB = function () {\n\tvar idbLibrary = this;\n\tidbLibrary.db.close();\n\treturn new Promise(function (resolve, reject) {\n\t\tvar deleteRequest = idbLibrary.indexedDB.deleteDatabase(\"Zotero_\" + idbLibrary.libraryString);\n\t\tdeleteRequest.onerror = function () {\n\t\t\tZ.error(\"Error deleting indexedDB\");\n\t\t\treject();\n\t\t};\n\t\tdeleteRequest.onsuccess = function () {\n\t\t\tZ.debug(\"Successfully deleted indexedDB\", 2);\n\t\t\tresolve();\n\t\t};\n\t});\n};\n\n/**\n* @param {string} store_name\n* @param {string} mode either \"readonly\" or \"readwrite\"\n*/\nZotero.Idb.Library.prototype.getObjectStore = function (store_name, mode) {\n\tvar idbLibrary = this;\n\tvar tx = idbLibrary.db.transaction(store_name, mode);\n\treturn tx.objectStore(store_name);\n};\n\nZotero.Idb.Library.prototype.clearObjectStore = function (store_name) {\n\tvar idbLibrary = this;\n\tvar store = idbLibrary.getObjectStore(store_name, 'readwrite');\n\treturn new Promise(function (resolve, reject) {\n\t\tvar req = store.clear();\n\t\treq.onsuccess = function (evt) {\n\t\t\tZ.debug(\"Store cleared\", 3);\n\t\t\tresolve();\n\t\t};\n\t\treq.onerror = function (evt) {\n\t\t\tZ.error(\"clearObjectStore:\", evt.target.errorCode);\n\t\t\treject();\n\t\t};\n\t});\n};\n\n/**\n* Add array of items to indexedDB\n* @param {array} items\n*/\nZotero.Idb.Library.prototype.addItems = function (items) {\n\treturn this.addObjects(items, 'item');\n};\n\n/**\n* Update/add array of items to indexedDB\n* @param {array} items\n*/\nZotero.Idb.Library.prototype.updateItems = function (items) {\n\treturn this.updateObjects(items, 'item');\n};\n\n/**\n* Remove array of items to indexedDB. Just references itemKey and does no other checks that items match\n* @param {array} items\n*/\nZotero.Idb.Library.prototype.removeItems = function (items) {\n\treturn this.removeObjects(items, 'item');\n};\n\n/**\n* Get item from indexedDB that has given itemKey\n* @param {string} itemKey\n*/\nZotero.Idb.Library.prototype.getItem = function (itemKey) {\n\tvar idbLibrary = this;\n\treturn new Promise(function (resolve, reject) {\n\t\tvar success = function success(event) {\n\t\t\tresolve(event.target.result);\n\t\t};\n\t\tidbLibrary.db.transaction(\"items\").objectStore([\"items\"], \"readonly\").get(itemKey).onsuccess = success;\n\t});\n};\n\n/**\n* Get all the items in this indexedDB\n* @param {array} items\n*/\nZotero.Idb.Library.prototype.getAllItems = function () {\n\treturn this.getAllObjects('item');\n};\n\nZotero.Idb.Library.prototype.getOrderedItemKeys = function (field, order) {\n\tvar idbLibrary = this;\n\tZ.debug(\"Zotero.Idb.getOrderedItemKeys\", 3);\n\tZ.debug(\"\" + field + \" \" + order, 3);\n\treturn new Promise(function (resolve, reject) {\n\t\tvar objectStore = idbLibrary.db.transaction(['items'], 'readonly').objectStore('items');\n\t\tvar index = objectStore.index(field);\n\t\tif (!index) {\n\t\t\tthrow new Error(\"Index for requested field '\" + field + \"'' not found\");\n\t\t}\n\n\t\tvar cursorDirection = \"next\";\n\t\tif (order == \"desc\") {\n\t\t\tcursorDirection = \"prev\";\n\t\t}\n\n\t\tvar cursorRequest = index.openKeyCursor(null, cursorDirection);\n\t\tvar itemKeys = [];\n\t\tcursorRequest.onsuccess = (function (event) {\n\t\t\tvar cursor = event.target.result;\n\t\t\tif (cursor) {\n\t\t\t\titemKeys.push(cursor.primaryKey);\n\t\t\t\tcursor.continue();\n\t\t\t} else {\n\t\t\t\tZ.debug(\"No more cursor: done. Resolving deferred.\", 3);\n\t\t\t\tresolve(itemKeys);\n\t\t\t}\n\t\t}).bind(this);\n\n\t\tcursorRequest.onfailure = (function (event) {\n\t\t\treject();\n\t\t}).bind(this);\n\t});\n};\n\n//filter the items in indexedDB by value in field\nZotero.Idb.Library.prototype.filterItems = function (field, value) {\n\tvar idbLibrary = this;\n\tZ.debug(\"Zotero.Idb.filterItems \" + field + \" - \" + value, 3);\n\treturn new Promise(function (resolve, reject) {\n\t\tvar itemKeys = [];\n\t\tvar objectStore = idbLibrary.db.transaction(['items'], 'readonly').objectStore('items');\n\t\tvar index = objectStore.index(field);\n\t\tif (!index) {\n\t\t\tthrow new Error(\"Index for requested field '\" + field + \"'' not found\");\n\t\t}\n\n\t\tvar cursorDirection = \"next\";\n\t\t/*if(order == \"desc\"){\n  \tcursorDirection = \"prev\";\n  }*/\n\n\t\tvar range = IDBKeyRange.only(value);\n\t\tvar cursorRequest = index.openKeyCursor(range, cursorDirection);\n\t\tcursorRequest.onsuccess = (function (event) {\n\t\t\tvar cursor = event.target.result;\n\t\t\tif (cursor) {\n\t\t\t\titemKeys.push(cursor.primaryKey);\n\t\t\t\tcursor.continue();\n\t\t\t} else {\n\t\t\t\tZ.debug(\"No more cursor: done. Resolving deferred.\", 3);\n\t\t\t\tresolve(itemKeys);\n\t\t\t}\n\t\t}).bind(this);\n\n\t\tcursorRequest.onfailure = (function (event) {\n\t\t\treject();\n\t\t}).bind(this);\n\t});\n};\n\nZotero.Idb.Library.prototype.inferType = function (object) {\n\tif (!object) {\n\t\treturn false;\n\t}\n\tif (!object.instance) {\n\t\treturn false;\n\t}\n\tswitch (object.instance) {\n\t\tcase 'Zotero.Item':\n\t\t\treturn 'item';\n\t\tcase 'Zotero.Collection':\n\t\t\treturn 'collection';\n\t\tcase 'Zotero.Tag':\n\t\t\treturn 'tag';\n\t\tdefault:\n\t\t\treturn false;\n\t}\n};\n\nZotero.Idb.Library.prototype.getTransactionAndStore = function (type, access) {\n\tvar idbLibrary = this;\n\tvar transaction;\n\tvar objectStore;\n\tswitch (type) {\n\t\tcase 'item':\n\t\t\ttransaction = idbLibrary.db.transaction(['items'], access);\n\t\t\tobjectStore = transaction.objectStore('items');\n\t\t\tbreak;\n\t\tcase 'collection':\n\t\t\ttransaction = idbLibrary.db.transaction(['collections'], access);\n\t\t\tobjectStore = transaction.objectStore('collections');\n\t\t\tbreak;\n\t\tcase 'tag':\n\t\t\ttransaction = idbLibrary.db.transaction(['tags'], access);\n\t\t\tobjectStore = transaction.objectStore('tags');\n\t\t\tbreak;\n\t\tdefault:\n\t\t\treturn Promise.reject();\n\t}\n\treturn [transaction, objectStore];\n};\n\nZotero.Idb.Library.prototype.addObjects = function (objects, type) {\n\tZ.debug(\"Zotero.Idb.Library.addObjects\", 3);\n\tvar idbLibrary = this;\n\tif (!type) {\n\t\ttype = idbLibrary.inferType(objects[0]);\n\t}\n\tvar TS = idbLibrary.getTransactionAndStore(type, 'readwrite');\n\tvar transaction = TS[0];\n\tvar objectStore = TS[1];\n\n\treturn new Promise(function (resolve, reject) {\n\t\ttransaction.oncomplete = function (event) {\n\t\t\tZotero.debug(\"Add Objects transaction completed.\", 3);\n\t\t\tresolve();\n\t\t};\n\n\t\ttransaction.onerror = function (event) {\n\t\t\tZotero.error(\"Add Objects transaction failed.\");\n\t\t\treject();\n\t\t};\n\n\t\tvar reqSuccess = function reqSuccess(event) {\n\t\t\tZotero.debug(\"Added Object \" + event.target.result, 4);\n\t\t};\n\t\tfor (var i in objects) {\n\t\t\tvar request = objectStore.add(objects[i].apiObj);\n\t\t\trequest.onsuccess = reqSuccess;\n\t\t}\n\t});\n};\n\nZotero.Idb.Library.prototype.updateObjects = function (objects, type) {\n\tZ.debug(\"Zotero.Idb.Library.updateObjects\", 3);\n\tvar idbLibrary = this;\n\tif (!type) {\n\t\ttype = idbLibrary.inferType(objects[0]);\n\t}\n\tvar TS = idbLibrary.getTransactionAndStore(type, 'readwrite');\n\tvar transaction = TS[0];\n\tvar objectStore = TS[1];\n\n\treturn new Promise(function (resolve, reject) {\n\t\ttransaction.oncomplete = function (event) {\n\t\t\tZotero.debug(\"Update Objects transaction completed.\", 3);\n\t\t\tresolve();\n\t\t};\n\n\t\ttransaction.onerror = function (event) {\n\t\t\tZotero.error(\"Update Objects transaction failed.\");\n\t\t\treject();\n\t\t};\n\n\t\tvar reqSuccess = function reqSuccess(event) {\n\t\t\tZotero.debug(\"Updated Object \" + event.target.result, 4);\n\t\t};\n\t\tfor (var i in objects) {\n\t\t\tvar request = objectStore.put(objects[i].apiObj);\n\t\t\trequest.onsuccess = reqSuccess;\n\t\t}\n\t});\n};\n\nZotero.Idb.Library.prototype.removeObjects = function (objects, type) {\n\tvar idbLibrary = this;\n\tif (!type) {\n\t\ttype = idbLibrary.inferType(objects[0]);\n\t}\n\tvar TS = idbLibrary.getTransactionAndStore(type, 'readwrite');\n\tvar transaction = TS[0];\n\tvar objectStore = TS[1];\n\n\treturn new Promise(function (resolve, reject) {\n\t\ttransaction.oncomplete = function (event) {\n\t\t\tZotero.debug(\"Remove Objects transaction completed.\", 3);\n\t\t\tresolve();\n\t\t};\n\n\t\ttransaction.onerror = function (event) {\n\t\t\tZotero.error(\"Remove Objects transaction failed.\");\n\t\t\treject();\n\t\t};\n\n\t\tvar reqSuccess = function reqSuccess(event) {\n\t\t\tZotero.debug(\"Removed Object \" + event.target.result, 4);\n\t\t};\n\t\tfor (var i in objects) {\n\t\t\tvar request = objectStore.delete(objects[i].key);\n\t\t\trequest.onsuccess = reqSuccess;\n\t\t}\n\t});\n};\n\nZotero.Idb.Library.prototype.getAllObjects = function (type) {\n\tvar idbLibrary = this;\n\treturn new Promise(function (resolve, reject) {\n\t\tvar objects = [];\n\t\tvar objectStore = idbLibrary.db.transaction(type + 's').objectStore(type + 's');\n\n\t\tobjectStore.openCursor().onsuccess = function (event) {\n\t\t\tvar cursor = event.target.result;\n\t\t\tif (cursor) {\n\t\t\t\tobjects.push(cursor.value);\n\t\t\t\tcursor.continue();\n\t\t\t} else {\n\t\t\t\tresolve(objects);\n\t\t\t}\n\t\t};\n\t});\n};\n\nZotero.Idb.Library.prototype.addCollections = function (collections) {\n\treturn this.addObjects(collections, 'collection');\n};\n\nZotero.Idb.Library.prototype.updateCollections = function (collections) {\n\tZ.debug(\"Zotero.Idb.Library.updateCollections\", 3);\n\treturn this.updateObjects(collections, 'collection');\n};\n\n/**\n* Get collection from indexedDB that has given collectionKey\n* @param {string} collectionKey\n*/\nZotero.Idb.Library.prototype.getCollection = function (collectionKey) {\n\tvar idbLibrary = this;\n\treturn new Promise(function (resolve, reject) {\n\t\tvar success = function success(event) {\n\t\t\tresolve(event.target.result);\n\t\t};\n\t\tidbLibrary.db.transaction(\"collections\").objectStore([\"collections\"], \"readonly\").get(collectionKey).onsuccess = success;\n\t});\n};\n\nZotero.Idb.Library.prototype.removeCollections = function (collections) {\n\tZ.debug(\"Zotero.Idb.Library.removeCollections\", 3);\n\treturn this.removeObjects(collections, 'collection');\n};\n\nZotero.Idb.Library.prototype.getAllCollections = function () {\n\tZ.debug('Zotero.Idb.Library.getAllCollections', 3);\n\treturn this.getAllObjects('collection');\n};\n\nZotero.Idb.Library.prototype.addTags = function (tags) {\n\treturn this.addObjects(tags, 'tag');\n};\n\nZotero.Idb.Library.prototype.updateTags = function (tags) {\n\tZ.debug(\"Zotero.Idb.Library.updateTags\", 3);\n\treturn this.updateObjects(tags, 'tag');\n};\n\nZotero.Idb.Library.prototype.getAllTags = function () {\n\tZ.debug('getAllTags', 3);\n\treturn this.getAllObjects('tag');\n};\n\nZotero.Idb.Library.prototype.setVersion = function (type, version) {\n\tZ.debug(\"Zotero.Idb.Library.setVersion\", 3);\n\tvar idbLibrary = this;\n\treturn new Promise(function (resolve, reject) {\n\t\tvar transaction = idbLibrary.db.transaction([\"versions\"], \"readwrite\");\n\n\t\ttransaction.oncomplete = function (event) {\n\t\t\tZotero.debug(\"set version transaction completed.\", 3);\n\t\t\tresolve();\n\t\t};\n\n\t\ttransaction.onerror = function (event) {\n\t\t\tZotero.error(\"set version transaction failed.\");\n\t\t\treject();\n\t\t};\n\n\t\tvar versionStore = transaction.objectStore(\"versions\");\n\t\tvar reqSuccess = function reqSuccess(event) {\n\t\t\tZotero.debug(\"Set Version\" + event.target.result, 3);\n\t\t};\n\t\tvar request = versionStore.put(version, type);\n\t\trequest.onsuccess = reqSuccess;\n\t});\n};\n\n/**\n* Get version data from indexedDB\n* @param {string} type\n*/\nZotero.Idb.Library.prototype.getVersion = function (type) {\n\tZ.debug(\"Zotero.Idb.Library.getVersion\", 3);\n\tvar idbLibrary = this;\n\treturn new Promise(function (resolve, reject) {\n\t\tvar success = function success(event) {\n\t\t\tZ.debug(\"done getting version\");\n\t\t\tresolve(event.target.result);\n\t\t};\n\t\tidbLibrary.db.transaction([\"versions\"], \"readonly\").objectStore(\"versions\").get(type).onsuccess = success;\n\t});\n};\n\nZotero.Idb.Library.prototype.setFile = function (itemKey, fileData) {\n\tZ.debug(\"Zotero.Idb.Library.setFile\", 3);\n\tvar idbLibrary = this;\n\treturn new Promise(function (resolve, reject) {\n\t\tvar transaction = idbLibrary.db.transaction([\"files\"], \"readwrite\");\n\n\t\ttransaction.oncomplete = function (event) {\n\t\t\tZotero.debug(\"set file transaction completed.\", 3);\n\t\t\tresolve();\n\t\t};\n\n\t\ttransaction.onerror = function (event) {\n\t\t\tZotero.error(\"set file transaction failed.\");\n\t\t\treject();\n\t\t};\n\n\t\tvar fileStore = transaction.objectStore(\"files\");\n\t\tvar reqSuccess = function reqSuccess(event) {\n\t\t\tZotero.debug(\"Set File\" + event.target.result, 3);\n\t\t};\n\t\tvar request = fileStore.put(fileData, itemKey);\n\t\trequest.onsuccess = reqSuccess;\n\t});\n};\n\n/**\n* Get item from indexedDB that has given itemKey\n* @param {string} itemKey\n*/\nZotero.Idb.Library.prototype.getFile = function (itemKey) {\n\tZ.debug(\"Zotero.Idb.Library.getFile\", 3);\n\tvar idbLibrary = this;\n\treturn new Promise(function (resolve, reject) {\n\t\tvar success = function success(event) {\n\t\t\tZ.debug(\"done getting file\");\n\t\t\tresolve(event.target.result);\n\t\t};\n\t\tidbLibrary.db.transaction([\"files\"], \"readonly\").objectStore(\"files\").get(itemKey).onsuccess = success;\n\t});\n};\n\nZotero.Idb.Library.prototype.deleteFile = function (itemKey) {\n\tZ.debug(\"Zotero.Idb.Library.deleteFile\", 3);\n\tvar idbLibrary = this;\n\treturn new Promise(function (resolve, reject) {\n\t\tvar transaction = idbLibrary.db.transaction([\"files\"], \"readwrite\");\n\n\t\ttransaction.oncomplete = function (event) {\n\t\t\tZotero.debug(\"delete file transaction completed.\", 3);\n\t\t\tresolve();\n\t\t};\n\n\t\ttransaction.onerror = function (event) {\n\t\t\tZotero.error(\"delete file transaction failed.\");\n\t\t\treject();\n\t\t};\n\n\t\tvar fileStore = transaction.objectStore(\"files\");\n\t\tvar reqSuccess = function reqSuccess(event) {\n\t\t\tZotero.debug(\"Deleted File\" + event.target.result, 4);\n\t\t};\n\t\tvar request = fileStore.delete(itemKey);\n\t\trequest.onsuccess = reqSuccess;\n\t});\n};\n\n//intersect two arrays of strings as an AND condition on index results\nZotero.Idb.Library.prototype.intersect = function (ar1, ar2) {\n\tvar idbLibrary = this;\n\tvar result = [];\n\tfor (var i = 0; i < ar1.length; i++) {\n\t\tif (ar2.indexOf(ar1[i]) !== -1) {\n\t\t\tresult.push(ar1[i]);\n\t\t}\n\t}\n\treturn result;\n};\n\n//intersect an array of arrays of strings as an AND condition on index results\nZotero.Idb.Library.prototype.intersectAll = function (arrs) {\n\tvar idbLibrary = this;\n\tvar result = arrs[0];\n\tfor (var i = 0; i < arrs.length - 1; i++) {\n\t\tresult = idbLibrary.intersect(result, arrs[i + 1]);\n\t}\n\treturn result;\n};\n\"use strict\";\n\nZotero.Library.prototype.processLoadedCollections = function (response) {\n\tZ.debug('processLoadedCollections', 3);\n\tvar library = this;\n\n\t//clear out display items\n\tZ.debug(\"adding collections to library.collections\");\n\tvar collectionsAdded = library.collections.addCollectionsFromJson(response.data);\n\tfor (var i = 0; i < collectionsAdded.length; i++) {\n\t\tcollectionsAdded[i].associateWithLibrary(library);\n\t}\n\t//update sync state\n\tlibrary.collections.updateSyncState(response.lastModifiedVersion);\n\n\tZotero.trigger(\"loadedCollectionsProcessed\", { library: library, collectionsAdded: collectionsAdded });\n\treturn response;\n};\n\n//create+write a collection given a name and optional parentCollectionKey\nZotero.Library.prototype.addCollection = function (name, parentCollection) {\n\tZ.debug(\"Zotero.Library.addCollection\", 3);\n\tvar library = this;\n\n\tvar collection = new Zotero.Collection();\n\tcollection.associateWithLibrary(library);\n\tcollection.set('name', name);\n\tcollection.set('parentCollection', parentCollection);\n\n\treturn library.collections.writeCollections([collection]);\n};\n'use strict';\n\n//make request for item keys and return jquery ajax promise\nZotero.Library.prototype.fetchItemKeys = function () {\n\tvar config = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n\tZ.debug(\"Zotero.Library.fetchItemKeys\", 3);\n\tvar library = this;\n\tvar urlconfig = Z.extend(true, {\n\t\t'target': 'items',\n\t\t'libraryType': this.libraryType,\n\t\t'libraryID': this.libraryID,\n\t\t'format': 'keys'\n\t}, config);\n\n\treturn library.ajaxRequest(urlconfig);\n};\n\n//get keys of all items marked for deletion\nZotero.Library.prototype.getTrashKeys = function () {\n\tZ.debug(\"Zotero.Library.getTrashKeys\", 3);\n\tvar library = this;\n\tvar urlconfig = {\n\t\t'target': 'items',\n\t\t'libraryType': library.libraryType,\n\t\t'libraryID': library.libraryID,\n\t\t'format': 'keys',\n\t\t'collectionKey': 'trash'\n\t};\n\n\treturn library.ajaxRequest(urlconfig);\n};\n\nZotero.Library.prototype.emptyTrash = function () {\n\tZ.debug(\"Zotero.Library.emptyTrash\", 3);\n\tvar library = this;\n\treturn library.getTrashKeys().then(function (response) {\n\t\tvar trashedItemKeys = response.data.split(\"\\n\");\n\t\treturn library.items.deleteItems(trashedItemKeys, response.lastModifiedVersion);\n\t});\n};\n\nZotero.Library.prototype.loadItemKeys = function (config) {\n\tZ.debug(\"Zotero.Library.loadItemKeys\", 3);\n\tvar library = this;\n\treturn this.fetchItemKeys(config).then(function (response) {\n\t\tZ.debug('loadItemKeys proxied callback', 3);\n\t\tvar keys = response.data.split(/[\\s]+/);\n\t\tlibrary.itemKeys = keys;\n\t});\n};\n\nZotero.Library.prototype.loadItems = function (config) {\n\tZ.debug(\"Zotero.Library.loadItems\", 3);\n\tvar library = this;\n\tif (!config) {\n\t\tconfig = {};\n\t}\n\n\tvar defaultConfig = {\n\t\ttarget: 'items',\n\t\ttargetModifier: 'top',\n\t\tstart: 0,\n\t\tlimit: 25,\n\t\torder: Zotero.config.defaultSortColumn,\n\t\tsort: Zotero.config.defaultSortOrder\n\t};\n\n\t//Build config object that should be displayed next and compare to currently displayed\n\tvar newConfig = Z.extend({}, defaultConfig, config);\n\t//newConfig.start = parseInt(newConfig.limit, 10) * (parseInt(newConfig.itemPage, 10) - 1);\n\n\tvar urlconfig = Z.extend({\n\t\t'target': 'items',\n\t\t'libraryType': library.libraryType,\n\t\t'libraryID': library.libraryID\n\t}, newConfig);\n\tvar requestUrl = Zotero.ajax.apiRequestString(urlconfig);\n\n\treturn library.ajaxRequest(requestUrl).then(function (response) {\n\t\tZ.debug('loadItems proxied callback', 3);\n\t\t//var library = this;\n\t\tvar items = library.items;\n\t\t//clear out display items\n\t\tvar loadedItemsArray = items.addItemsFromJson(response.data);\n\t\tZ.debug(\"Looping over loadedItemsArray\");\n\t\tfor (var i = 0; i < loadedItemsArray.length; i++) {\n\t\t\tloadedItemsArray[i].associateWithLibrary(library);\n\t\t}\n\n\t\tresponse.loadedItems = loadedItemsArray;\n\t\tZotero.trigger(\"itemsChanged\", { library: library });\n\t\treturn response;\n\t});\n};\n\nZotero.Library.prototype.loadPublications = function (config) {\n\tZ.debug(\"Zotero.Library.loadPublications\", 3);\n\tvar library = this;\n\tif (!config) {\n\t\tconfig = {};\n\t}\n\n\tvar defaultConfig = {\n\t\ttarget: 'publications',\n\t\tstart: 0,\n\t\tlimit: 50,\n\t\torder: Zotero.config.defaultSortColumn,\n\t\tsort: Zotero.config.defaultSortOrder,\n\t\tinclude: 'bib'\n\t};\n\n\t//Build config object that should be displayed next and compare to currently displayed\n\tvar newConfig = Z.extend({}, defaultConfig, config);\n\n\tvar urlconfig = Z.extend({\n\t\t'target': 'publications',\n\t\t'libraryType': library.libraryType,\n\t\t'libraryID': library.libraryID\n\t}, newConfig);\n\tvar requestUrl = Zotero.ajax.apiRequestString(urlconfig);\n\n\treturn library.ajaxRequest(requestUrl).then(function (response) {\n\t\tZ.debug('loadPublications proxied callback', 3);\n\t\tvar publicationItems = [];\n\t\tvar parsedItemJson = response.data;\n\t\tparsedItemJson.forEach(function (itemObj) {\n\t\t\tvar item = new Zotero.Item(itemObj);\n\t\t\tpublicationItems.push(item);\n\t\t});\n\n\t\tresponse.publicationItems = publicationItems;\n\t\treturn response;\n\t});\n};\n\nZotero.Library.prototype.processLoadedItems = function (response) {\n\tZ.debug('processLoadedItems', 3);\n\tvar library = this;\n\tvar items = library.items;\n\t//clear out display items\n\tvar loadedItemsArray = items.addItemsFromJson(response.data);\n\tfor (var i = 0; i < loadedItemsArray.length; i++) {\n\t\tloadedItemsArray[i].associateWithLibrary(library);\n\t}\n\n\t//update sync state\n\tlibrary.items.updateSyncState(response.lastModifiedVersion);\n\n\tZotero.trigger(\"itemsChanged\", { library: library, loadedItems: loadedItemsArray });\n\treturn response;\n};\n\nZotero.Library.prototype.loadItem = function (itemKey) {\n\tZ.debug(\"Zotero.Library.loadItem\", 3);\n\tvar library = this;\n\tif (!config) {\n\t\tvar config = {};\n\t}\n\n\tvar urlconfig = {\n\t\t'target': 'item',\n\t\t'libraryType': library.libraryType,\n\t\t'libraryID': library.libraryID,\n\t\t'itemKey': itemKey\n\t};\n\n\treturn library.ajaxRequest(urlconfig).then(function (response) {\n\t\tZ.debug(\"Got loadItem response\");\n\t\tvar item = new Zotero.Item(response.data);\n\t\titem.owningLibrary = library;\n\t\tlibrary.items.itemObjects[item.key] = item;\n\t\tZotero.trigger(\"itemsChanged\", { library: library });\n\t\treturn item;\n\t}, function (response) {\n\t\tZ.debug(\"Error loading Item\");\n\t});\n};\n\nZotero.Library.prototype.trashItem = function (itemKey) {\n\tvar library = this;\n\treturn library.items.trashItems([library.items.getItem(itemKey)]);\n};\n\nZotero.Library.prototype.untrashItem = function (itemKey) {\n\tZ.debug(\"Zotero.Library.untrashItem\", 3);\n\tif (!itemKey) return false;\n\n\tvar item = this.items.getItem(itemKey);\n\titem.apiObj.deleted = 0;\n\treturn item.writeItem();\n};\n\nZotero.Library.prototype.deleteItem = function (itemKey) {\n\tZ.debug(\"Zotero.Library.deleteItem\", 3);\n\tvar library = this;\n\treturn library.items.deleteItem(itemKey);\n};\n\nZotero.Library.prototype.deleteItems = function (itemKeys) {\n\tZ.debug(\"Zotero.Library.deleteItems\", 3);\n\tvar library = this;\n\treturn library.items.deleteItems(itemKeys);\n};\n\nZotero.Library.prototype.addNote = function (itemKey, note) {\n\tZ.debug('Zotero.Library.prototype.addNote', 3);\n\tvar library = this;\n\tvar config = {\n\t\t'target': 'children',\n\t\t'libraryType': library.libraryType,\n\t\t'libraryID': library.libraryID,\n\t\t'itemKey': itemKey\n\t};\n\n\tvar requestUrl = Zotero.ajax.apiRequestString(config);\n\tvar item = this.items.getItem(itemKey);\n\n\treturn library.ajaxRequest(requestUrl, \"POST\", { processData: false });\n};\n\nZotero.Library.prototype.fetchGlobalItems = function (config) {\n\tZ.debug(\"Zotero.Library.fetchGlobalItems\", 3);\n\tvar library = this;\n\tif (!config) {\n\t\tconfig = {};\n\t}\n\n\tvar defaultConfig = {\n\t\ttarget: 'items',\n\t\tstart: 0,\n\t\tlimit: 25\n\t};\n\n\t//Build config object that should be displayed next and compare to currently displayed\n\tvar newConfig = Z.extend({}, defaultConfig, config);\n\t//newConfig.start = parseInt(newConfig.limit, 10) * (parseInt(newConfig.itemPage, 10) - 1);\n\n\tvar urlconfig = Z.extend({ 'target': 'items', 'libraryType': '' }, newConfig);\n\tvar requestUrl = Zotero.ajax.apiRequestString(urlconfig);\n\n\treturn library.ajaxRequest(requestUrl, \"GET\", { dataType: 'json' }).then(function (response) {\n\t\tZ.debug('globalItems callback', 3);\n\t\treturn response.data;\n\t});\n};\n\nZotero.Library.prototype.fetchGlobalItem = function (globalKey) {\n\tZ.debug(\"Zotero.Library.fetchGlobalItem\", 3);\n\tZ.debug(globalKey);\n\tvar library = this;\n\n\tvar defaultConfig = { target: 'item' };\n\n\t//Build config object that should be displayed next and compare to currently displayed\n\tvar newConfig = Z.extend({}, defaultConfig);\n\tvar urlconfig = Z.extend({\n\t\t'target': 'item',\n\t\t'libraryType': '',\n\t\t'itemKey': globalKey\n\t}, newConfig);\n\tvar requestUrl = Zotero.ajax.apiRequestString(urlconfig);\n\n\treturn library.ajaxRequest(requestUrl, \"GET\", { dataType: \"json\" }).then(function (response) {\n\t\tZ.debug('globalItem callback', 3);\n\t\treturn response.data;\n\t});\n};\n'use strict';\n\nZotero.Library.prototype.fetchTags = function (config) {\n\tZ.debug(\"Zotero.Library.fetchTags\", 3);\n\tvar library = this;\n\tvar defaultConfig = {\n\t\ttarget: 'tags',\n\t\torder: 'title',\n\t\tsort: 'asc',\n\t\tlimit: 100\n\t};\n\tvar newConfig = Z.extend({}, defaultConfig, config);\n\tvar urlconfig = Z.extend({\n\t\t'target': 'tags',\n\t\t'libraryType': this.libraryType,\n\t\t'libraryID': this.libraryID\n\t}, newConfig);\n\n\treturn Zotero.ajaxRequest(urlconfig);\n};\n\nZotero.Library.prototype.loadTags = function () {\n\tvar config = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n\tZ.debug(\"Zotero.Library.loadTags\", 3);\n\tvar library = this;\n\n\tif (config.showAutomaticTags && config.collectionKey) {\n\t\tdelete config.collectionKey;\n\t}\n\n\tlibrary.tags.displayTagsArray = [];\n\treturn library.fetchTags(config).then(function (response) {\n\t\tZ.debug('loadTags proxied callback', 3);\n\t\tvar updatedVersion = response.lastModifiedVersion;\n\t\tlibrary.tags.updateSyncState(updatedVersion);\n\t\tvar addedTags = library.tags.addTagsFromJson(response.data);\n\t\tlibrary.tags.updateTagsVersion(updatedVersion);\n\t\tlibrary.tags.rebuildTagsArray();\n\n\t\tif (response.parsedLinks.hasOwnProperty('next')) {\n\t\t\tlibrary.tags.hasNextLink = true;\n\t\t\tlibrary.tags.nextLink = response.parsedLinks['next'];\n\t\t} else {\n\t\t\tlibrary.tags.hasNextLink = false;\n\t\t\tlibrary.tags.nextLink = null;\n\t\t}\n\t\tlibrary.trigger(\"tagsChanged\", { library: library });\n\t\treturn library.tags;\n\t});\n};\n\nZotero.Library.prototype.loadAllTags = function () {\n\tvar config = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n\tZ.debug(\"Zotero.Library.loadAllTags\", 3);\n\tvar library = this;\n\tvar defaultConfig = {\n\t\ttarget: 'tags',\n\t\torder: 'title',\n\t\tsort: 'asc',\n\t\tlimit: 100,\n\t\tlibraryType: library.libraryType,\n\t\tlibraryID: library.libraryID\n\t};\n\n\t//Build config object that should be displayed next and compare to currently displayed\n\tvar newConfig = Z.extend({}, defaultConfig, config);\n\tvar urlconfig = Z.extend({}, newConfig);\n\tvar requestUrl = Zotero.ajax.apiRequestString(urlconfig);\n\tvar tags = library.tags;\n\n\t//check if already loaded tags are okay to use\n\tvar loadedConfig = Z.extend({}, defaultConfig, tags.loadedConfig);\n\tvar loadedConfigRequestUrl = tags.loadedRequestUrl;\n\tZ.debug(\"requestUrl: \" + requestUrl, 4);\n\tZ.debug('loadedConfigRequestUrl: ' + loadedConfigRequestUrl, 4);\n\treturn new Promise(function (resolve, reject) {\n\t\tvar continueLoadingCallback = function continueLoadingCallback(tags) {\n\t\t\tZ.debug(\"loadAllTags continueLoadingCallback\", 3);\n\t\t\tvar plainList = Zotero.Tags.prototype.plainTagsList(tags.tagsArray);\n\t\t\tplainList.sort(Zotero.Library.prototype.comparer());\n\t\t\ttags.plainList = plainList;\n\n\t\t\tif (tags.hasNextLink) {\n\t\t\t\tZ.debug(\"still has next link.\", 3);\n\t\t\t\ttags.tagsArray.sort(Zotero.Tag.prototype.tagComparer());\n\t\t\t\tplainList = Zotero.Tags.prototype.plainTagsList(tags.tagsArray);\n\t\t\t\tplainList.sort(Zotero.Library.prototype.comparer());\n\t\t\t\ttags.plainList = plainList;\n\n\t\t\t\tvar nextLink = tags.nextLink;\n\t\t\t\tvar nextLinkConfig = Zotero.utils.parseQuery(Zotero.utils.querystring(nextLink));\n\t\t\t\tvar newConfig = Z.extend({}, config);\n\t\t\t\tnewConfig.start = nextLinkConfig.start;\n\t\t\t\tnewConfig.limit = nextLinkConfig.limit;\n\t\t\t\treturn library.loadTags(newConfig).then(continueLoadingCallback);\n\t\t\t} else {\n\t\t\t\tZ.debug(\"no next in tags link\", 3);\n\t\t\t\ttags.updateSyncedVersion();\n\t\t\t\ttags.tagsArray.sort(Zotero.Tag.prototype.tagComparer());\n\t\t\t\tplainList = Zotero.Tags.prototype.plainTagsList(tags.tagsArray);\n\t\t\t\tplainList.sort(Zotero.Library.prototype.comparer());\n\t\t\t\ttags.plainList = plainList;\n\t\t\t\tZ.debug(\"resolving loadTags deferred\", 3);\n\t\t\t\tlibrary.tagsLoaded = true;\n\t\t\t\tlibrary.tags.loaded = true;\n\t\t\t\ttags.loadedConfig = config;\n\t\t\t\ttags.loadedRequestUrl = requestUrl;\n\n\t\t\t\t//update all tags with tagsVersion\n\t\t\t\tfor (var i = 0; i < library.tags.tagsArray.length; i++) {\n\t\t\t\t\ttags.tagsArray[i].apiObj.version = tags.tagsVersion;\n\t\t\t\t}\n\n\t\t\t\tlibrary.trigger(\"tagsChanged\", { library: library });\n\t\t\t\treturn tags;\n\t\t\t}\n\t\t};\n\n\t\tresolve(library.loadTags(urlconfig).then(continueLoadingCallback));\n\t});\n};\n\"use strict\";\n\n//load objects from indexedDB\nZotero.Library.prototype.loadIndexedDBCache = function () {\n\tZotero.debug(\"Zotero.Library.loadIndexedDBCache\", 3);\n\n\tvar library = this;\n\n\tvar itemsPromise = library.idbLibrary.getAllItems();\n\tvar collectionsPromise = library.idbLibrary.getAllCollections();\n\tvar tagsPromise = library.idbLibrary.getAllTags();\n\n\titemsPromise.then(function (itemsArray) {\n\t\tZ.debug(\"loadIndexedDBCache itemsD done\", 3);\n\t\t//create itemsDump from array of item objects\n\t\tvar latestItemVersion = 0;\n\t\tfor (var i = 0; i < itemsArray.length; i++) {\n\t\t\tvar item = new Zotero.Item(itemsArray[i]);\n\t\t\tlibrary.items.addItem(item);\n\t\t\tif (item.version > latestItemVersion) {\n\t\t\t\tlatestItemVersion = item.version;\n\t\t\t}\n\t\t}\n\t\tlibrary.items.itemsVersion = latestItemVersion;\n\n\t\t//TODO: add itemsVersion as last version in any of these items?\n\t\t//or store it somewhere else for indexedDB cache purposes\n\t\tlibrary.items.loaded = true;\n\t\tZ.debug(\"Done loading indexedDB items promise into library\", 3);\n\t});\n\n\tcollectionsPromise.then(function (collectionsArray) {\n\t\tZ.debug(\"loadIndexedDBCache collectionsD done\", 3);\n\t\t//create collectionsDump from array of collection objects\n\t\tvar latestCollectionVersion = 0;\n\t\tfor (var i = 0; i < collectionsArray.length; i++) {\n\t\t\tvar collection = new Zotero.Collection(collectionsArray[i]);\n\t\t\tlibrary.collections.addCollection(collection);\n\t\t\tif (collection.version > latestCollectionVersion) {\n\t\t\t\tlatestCollectionVersion = collection.version;\n\t\t\t}\n\t\t}\n\t\tlibrary.collections.collectionsVersion = latestCollectionVersion;\n\n\t\t//TODO: add collectionsVersion as last version in any of these items?\n\t\t//or store it somewhere else for indexedDB cache purposes\n\t\tlibrary.collections.initSecondaryData();\n\t\tlibrary.collections.loaded = true;\n\t});\n\n\ttagsPromise.then(function (tagsArray) {\n\t\tZ.debug(\"loadIndexedDBCache tagsD done\", 3);\n\t\tZ.debug(tagsArray);\n\t\t//create tagsDump from array of tag objects\n\t\tvar latestVersion = 0;\n\t\tvar tagsVersion = 0;\n\t\tfor (var i = 0; i < tagsArray.length; i++) {\n\t\t\tvar tag = new Zotero.Tag(tagsArray[i]);\n\t\t\tlibrary.tags.addTag(tag);\n\t\t\tif (tagsArray[i].version > latestVersion) {\n\t\t\t\tlatestVersion = tagsArray[i].version;\n\t\t\t}\n\t\t}\n\t\ttagsVersion = latestVersion;\n\t\tlibrary.tags.tagsVersion = tagsVersion;\n\n\t\t//TODO: add tagsVersion as last version in any of these items?\n\t\t//or store it somewhere else for indexedDB cache purposes\n\t\tlibrary.tags.loaded = true;\n\t});\n\n\t//resolve the overall deferred when all the child deferreds are finished\n\treturn Promise.all([itemsPromise, collectionsPromise, tagsPromise]);\n};\n\nZotero.Library.prototype.saveIndexedDB = function () {\n\tvar library = this;\n\n\tvar saveItemsPromise = library.idbLibrary.updateItems(library.items.itemsArray);\n\tvar saveCollectionsPromise = library.idbLibrary.updateCollections(library.collections.collectionsArray);\n\tvar saveTagsPromise = library.idbLibrary.updateTags(library.tags.tagsArray);\n\n\t//resolve the overall deferred when all the child deferreds are finished\n\treturn Promise.all([saveItemsPromise, saveCollectionsPromise, saveTagsPromise]);\n};\n'use strict';\n\nfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\nZotero.Preferences = function (store, idString) {\n\tthis.store = store;\n\tthis.idString = idString;\n\tthis.preferencesObject = {};\n\tthis.defaults = {\n\t\tdebug_level: 3, //lower level is higher priority\n\t\tdebug_log: true,\n\t\tdebug_mock: false,\n\t\tlistDisplayedFields: ['title', 'creator', 'dateModified'],\n\t\tshowAutomaticTags: false, //tagType:1 is automatic, tagType:0 was added by user\n\t\titemsPerPage: 25,\n\t\torder: 'title',\n\t\ttitle: 'asc'\n\t};\n\tthis.load();\n};\n\nZotero.Preferences.prototype.setPref = function (key, value) {\n\tvar preferences = this;\n\tpreferences.preferencesObject[key] = value;\n\tpreferences.persist();\n};\n\nZotero.Preferences.prototype.setPrefs = function (newPrefs) {\n\tvar preferences = this;\n\tif ((typeof newPrefs === 'undefined' ? 'undefined' : _typeof(newPrefs)) != \"object\") {\n\t\tthrow new Error(\"Preferences must be an object\");\n\t}\n\tpreferences.preferencesObject = newPrefs;\n\tpreferences.persist();\n};\n\nZotero.Preferences.prototype.getPref = function (key) {\n\tvar preferences = this;\n\tif (preferences.preferencesObject[key]) {\n\t\treturn preferences.preferencesObject[key];\n\t} else if (preferences.defaults[key]) {\n\t\treturn preferences.defaults[key];\n\t} else {\n\t\treturn null;\n\t}\n};\n\nZotero.Preferences.prototype.getPrefs = function () {\n\tvar preferences = this;\n\treturn preferences.preferencesObject;\n};\n\nZotero.Preferences.prototype.persist = function () {\n\tvar preferences = this;\n\tvar storageString = 'preferences_' + preferences.idString;\n\tpreferences.store[storageString] = JSON.stringify(preferences.preferencesObject);\n};\n\nZotero.Preferences.prototype.load = function () {\n\tvar preferences = this;\n\tvar storageString = 'preferences_' + preferences.idString;\n\tvar storageObjectString = preferences.store[storageString];\n\tif (!storageObjectString) {\n\t\tpreferences.preferencesObject = {};\n\t} else {\n\t\tpreferences.preferencesObject = JSON.parse(storageObjectString);\n\t}\n};\n\n","/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE\n * @version   3.0.2\n */\n\n(function() {\n    \"use strict\";\n    function lib$es6$promise$utils$$objectOrFunction(x) {\n      return typeof x === 'function' || (typeof x === 'object' && x !== null);\n    }\n\n    function lib$es6$promise$utils$$isFunction(x) {\n      return typeof x === 'function';\n    }\n\n    function lib$es6$promise$utils$$isMaybeThenable(x) {\n      return typeof x === 'object' && x !== null;\n    }\n\n    var lib$es6$promise$utils$$_isArray;\n    if (!Array.isArray) {\n      lib$es6$promise$utils$$_isArray = function (x) {\n        return Object.prototype.toString.call(x) === '[object Array]';\n      };\n    } else {\n      lib$es6$promise$utils$$_isArray = Array.isArray;\n    }\n\n    var lib$es6$promise$utils$$isArray = lib$es6$promise$utils$$_isArray;\n    var lib$es6$promise$asap$$len = 0;\n    var lib$es6$promise$asap$$toString = {}.toString;\n    var lib$es6$promise$asap$$vertxNext;\n    var lib$es6$promise$asap$$customSchedulerFn;\n\n    var lib$es6$promise$asap$$asap = function asap(callback, arg) {\n      lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len] = callback;\n      lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len + 1] = arg;\n      lib$es6$promise$asap$$len += 2;\n      if (lib$es6$promise$asap$$len === 2) {\n        // If len is 2, that means that we need to schedule an async flush.\n        // If additional callbacks are queued before the queue is flushed, they\n        // will be processed by this flush that we are scheduling.\n        if (lib$es6$promise$asap$$customSchedulerFn) {\n          lib$es6$promise$asap$$customSchedulerFn(lib$es6$promise$asap$$flush);\n        } else {\n          lib$es6$promise$asap$$scheduleFlush();\n        }\n      }\n    }\n\n    function lib$es6$promise$asap$$setScheduler(scheduleFn) {\n      lib$es6$promise$asap$$customSchedulerFn = scheduleFn;\n    }\n\n    function lib$es6$promise$asap$$setAsap(asapFn) {\n      lib$es6$promise$asap$$asap = asapFn;\n    }\n\n    var lib$es6$promise$asap$$browserWindow = (typeof window !== 'undefined') ? window : undefined;\n    var lib$es6$promise$asap$$browserGlobal = lib$es6$promise$asap$$browserWindow || {};\n    var lib$es6$promise$asap$$BrowserMutationObserver = lib$es6$promise$asap$$browserGlobal.MutationObserver || lib$es6$promise$asap$$browserGlobal.WebKitMutationObserver;\n    var lib$es6$promise$asap$$isNode = typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';\n\n    // test for web worker but not in IE10\n    var lib$es6$promise$asap$$isWorker = typeof Uint8ClampedArray !== 'undefined' &&\n      typeof importScripts !== 'undefined' &&\n      typeof MessageChannel !== 'undefined';\n\n    // node\n    function lib$es6$promise$asap$$useNextTick() {\n      // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n      // see https://github.com/cujojs/when/issues/410 for details\n      return function() {\n        process.nextTick(lib$es6$promise$asap$$flush);\n      };\n    }\n\n    // vertx\n    function lib$es6$promise$asap$$useVertxTimer() {\n      return function() {\n        lib$es6$promise$asap$$vertxNext(lib$es6$promise$asap$$flush);\n      };\n    }\n\n    function lib$es6$promise$asap$$useMutationObserver() {\n      var iterations = 0;\n      var observer = new lib$es6$promise$asap$$BrowserMutationObserver(lib$es6$promise$asap$$flush);\n      var node = document.createTextNode('');\n      observer.observe(node, { characterData: true });\n\n      return function() {\n        node.data = (iterations = ++iterations % 2);\n      };\n    }\n\n    // web worker\n    function lib$es6$promise$asap$$useMessageChannel() {\n      var channel = new MessageChannel();\n      channel.port1.onmessage = lib$es6$promise$asap$$flush;\n      return function () {\n        channel.port2.postMessage(0);\n      };\n    }\n\n    function lib$es6$promise$asap$$useSetTimeout() {\n      return function() {\n        setTimeout(lib$es6$promise$asap$$flush, 1);\n      };\n    }\n\n    var lib$es6$promise$asap$$queue = new Array(1000);\n    function lib$es6$promise$asap$$flush() {\n      for (var i = 0; i < lib$es6$promise$asap$$len; i+=2) {\n        var callback = lib$es6$promise$asap$$queue[i];\n        var arg = lib$es6$promise$asap$$queue[i+1];\n\n        callback(arg);\n\n        lib$es6$promise$asap$$queue[i] = undefined;\n        lib$es6$promise$asap$$queue[i+1] = undefined;\n      }\n\n      lib$es6$promise$asap$$len = 0;\n    }\n\n    function lib$es6$promise$asap$$attemptVertx() {\n      try {\n        var r = require;\n        var vertx = r('vertx');\n        lib$es6$promise$asap$$vertxNext = vertx.runOnLoop || vertx.runOnContext;\n        return lib$es6$promise$asap$$useVertxTimer();\n      } catch(e) {\n        return lib$es6$promise$asap$$useSetTimeout();\n      }\n    }\n\n    var lib$es6$promise$asap$$scheduleFlush;\n    // Decide what async method to use to triggering processing of queued callbacks:\n    if (lib$es6$promise$asap$$isNode) {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useNextTick();\n    } else if (lib$es6$promise$asap$$BrowserMutationObserver) {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMutationObserver();\n    } else if (lib$es6$promise$asap$$isWorker) {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMessageChannel();\n    } else if (lib$es6$promise$asap$$browserWindow === undefined && typeof require === 'function') {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$attemptVertx();\n    } else {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useSetTimeout();\n    }\n\n    function lib$es6$promise$$internal$$noop() {}\n\n    var lib$es6$promise$$internal$$PENDING   = void 0;\n    var lib$es6$promise$$internal$$FULFILLED = 1;\n    var lib$es6$promise$$internal$$REJECTED  = 2;\n\n    var lib$es6$promise$$internal$$GET_THEN_ERROR = new lib$es6$promise$$internal$$ErrorObject();\n\n    function lib$es6$promise$$internal$$selfFulfillment() {\n      return new TypeError(\"You cannot resolve a promise with itself\");\n    }\n\n    function lib$es6$promise$$internal$$cannotReturnOwn() {\n      return new TypeError('A promises callback cannot return that same promise.');\n    }\n\n    function lib$es6$promise$$internal$$getThen(promise) {\n      try {\n        return promise.then;\n      } catch(error) {\n        lib$es6$promise$$internal$$GET_THEN_ERROR.error = error;\n        return lib$es6$promise$$internal$$GET_THEN_ERROR;\n      }\n    }\n\n    function lib$es6$promise$$internal$$tryThen(then, value, fulfillmentHandler, rejectionHandler) {\n      try {\n        then.call(value, fulfillmentHandler, rejectionHandler);\n      } catch(e) {\n        return e;\n      }\n    }\n\n    function lib$es6$promise$$internal$$handleForeignThenable(promise, thenable, then) {\n       lib$es6$promise$asap$$asap(function(promise) {\n        var sealed = false;\n        var error = lib$es6$promise$$internal$$tryThen(then, thenable, function(value) {\n          if (sealed) { return; }\n          sealed = true;\n          if (thenable !== value) {\n            lib$es6$promise$$internal$$resolve(promise, value);\n          } else {\n            lib$es6$promise$$internal$$fulfill(promise, value);\n          }\n        }, function(reason) {\n          if (sealed) { return; }\n          sealed = true;\n\n          lib$es6$promise$$internal$$reject(promise, reason);\n        }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n        if (!sealed && error) {\n          sealed = true;\n          lib$es6$promise$$internal$$reject(promise, error);\n        }\n      }, promise);\n    }\n\n    function lib$es6$promise$$internal$$handleOwnThenable(promise, thenable) {\n      if (thenable._state === lib$es6$promise$$internal$$FULFILLED) {\n        lib$es6$promise$$internal$$fulfill(promise, thenable._result);\n      } else if (thenable._state === lib$es6$promise$$internal$$REJECTED) {\n        lib$es6$promise$$internal$$reject(promise, thenable._result);\n      } else {\n        lib$es6$promise$$internal$$subscribe(thenable, undefined, function(value) {\n          lib$es6$promise$$internal$$resolve(promise, value);\n        }, function(reason) {\n          lib$es6$promise$$internal$$reject(promise, reason);\n        });\n      }\n    }\n\n    function lib$es6$promise$$internal$$handleMaybeThenable(promise, maybeThenable) {\n      if (maybeThenable.constructor === promise.constructor) {\n        lib$es6$promise$$internal$$handleOwnThenable(promise, maybeThenable);\n      } else {\n        var then = lib$es6$promise$$internal$$getThen(maybeThenable);\n\n        if (then === lib$es6$promise$$internal$$GET_THEN_ERROR) {\n          lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$GET_THEN_ERROR.error);\n        } else if (then === undefined) {\n          lib$es6$promise$$internal$$fulfill(promise, maybeThenable);\n        } else if (lib$es6$promise$utils$$isFunction(then)) {\n          lib$es6$promise$$internal$$handleForeignThenable(promise, maybeThenable, then);\n        } else {\n          lib$es6$promise$$internal$$fulfill(promise, maybeThenable);\n        }\n      }\n    }\n\n    function lib$es6$promise$$internal$$resolve(promise, value) {\n      if (promise === value) {\n        lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$selfFulfillment());\n      } else if (lib$es6$promise$utils$$objectOrFunction(value)) {\n        lib$es6$promise$$internal$$handleMaybeThenable(promise, value);\n      } else {\n        lib$es6$promise$$internal$$fulfill(promise, value);\n      }\n    }\n\n    function lib$es6$promise$$internal$$publishRejection(promise) {\n      if (promise._onerror) {\n        promise._onerror(promise._result);\n      }\n\n      lib$es6$promise$$internal$$publish(promise);\n    }\n\n    function lib$es6$promise$$internal$$fulfill(promise, value) {\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) { return; }\n\n      promise._result = value;\n      promise._state = lib$es6$promise$$internal$$FULFILLED;\n\n      if (promise._subscribers.length !== 0) {\n        lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish, promise);\n      }\n    }\n\n    function lib$es6$promise$$internal$$reject(promise, reason) {\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) { return; }\n      promise._state = lib$es6$promise$$internal$$REJECTED;\n      promise._result = reason;\n\n      lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publishRejection, promise);\n    }\n\n    function lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection) {\n      var subscribers = parent._subscribers;\n      var length = subscribers.length;\n\n      parent._onerror = null;\n\n      subscribers[length] = child;\n      subscribers[length + lib$es6$promise$$internal$$FULFILLED] = onFulfillment;\n      subscribers[length + lib$es6$promise$$internal$$REJECTED]  = onRejection;\n\n      if (length === 0 && parent._state) {\n        lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish, parent);\n      }\n    }\n\n    function lib$es6$promise$$internal$$publish(promise) {\n      var subscribers = promise._subscribers;\n      var settled = promise._state;\n\n      if (subscribers.length === 0) { return; }\n\n      var child, callback, detail = promise._result;\n\n      for (var i = 0; i < subscribers.length; i += 3) {\n        child = subscribers[i];\n        callback = subscribers[i + settled];\n\n        if (child) {\n          lib$es6$promise$$internal$$invokeCallback(settled, child, callback, detail);\n        } else {\n          callback(detail);\n        }\n      }\n\n      promise._subscribers.length = 0;\n    }\n\n    function lib$es6$promise$$internal$$ErrorObject() {\n      this.error = null;\n    }\n\n    var lib$es6$promise$$internal$$TRY_CATCH_ERROR = new lib$es6$promise$$internal$$ErrorObject();\n\n    function lib$es6$promise$$internal$$tryCatch(callback, detail) {\n      try {\n        return callback(detail);\n      } catch(e) {\n        lib$es6$promise$$internal$$TRY_CATCH_ERROR.error = e;\n        return lib$es6$promise$$internal$$TRY_CATCH_ERROR;\n      }\n    }\n\n    function lib$es6$promise$$internal$$invokeCallback(settled, promise, callback, detail) {\n      var hasCallback = lib$es6$promise$utils$$isFunction(callback),\n          value, error, succeeded, failed;\n\n      if (hasCallback) {\n        value = lib$es6$promise$$internal$$tryCatch(callback, detail);\n\n        if (value === lib$es6$promise$$internal$$TRY_CATCH_ERROR) {\n          failed = true;\n          error = value.error;\n          value = null;\n        } else {\n          succeeded = true;\n        }\n\n        if (promise === value) {\n          lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$cannotReturnOwn());\n          return;\n        }\n\n      } else {\n        value = detail;\n        succeeded = true;\n      }\n\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) {\n        // noop\n      } else if (hasCallback && succeeded) {\n        lib$es6$promise$$internal$$resolve(promise, value);\n      } else if (failed) {\n        lib$es6$promise$$internal$$reject(promise, error);\n      } else if (settled === lib$es6$promise$$internal$$FULFILLED) {\n        lib$es6$promise$$internal$$fulfill(promise, value);\n      } else if (settled === lib$es6$promise$$internal$$REJECTED) {\n        lib$es6$promise$$internal$$reject(promise, value);\n      }\n    }\n\n    function lib$es6$promise$$internal$$initializePromise(promise, resolver) {\n      try {\n        resolver(function resolvePromise(value){\n          lib$es6$promise$$internal$$resolve(promise, value);\n        }, function rejectPromise(reason) {\n          lib$es6$promise$$internal$$reject(promise, reason);\n        });\n      } catch(e) {\n        lib$es6$promise$$internal$$reject(promise, e);\n      }\n    }\n\n    function lib$es6$promise$enumerator$$Enumerator(Constructor, input) {\n      var enumerator = this;\n\n      enumerator._instanceConstructor = Constructor;\n      enumerator.promise = new Constructor(lib$es6$promise$$internal$$noop);\n\n      if (enumerator._validateInput(input)) {\n        enumerator._input     = input;\n        enumerator.length     = input.length;\n        enumerator._remaining = input.length;\n\n        enumerator._init();\n\n        if (enumerator.length === 0) {\n          lib$es6$promise$$internal$$fulfill(enumerator.promise, enumerator._result);\n        } else {\n          enumerator.length = enumerator.length || 0;\n          enumerator._enumerate();\n          if (enumerator._remaining === 0) {\n            lib$es6$promise$$internal$$fulfill(enumerator.promise, enumerator._result);\n          }\n        }\n      } else {\n        lib$es6$promise$$internal$$reject(enumerator.promise, enumerator._validationError());\n      }\n    }\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._validateInput = function(input) {\n      return lib$es6$promise$utils$$isArray(input);\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._validationError = function() {\n      return new Error('Array Methods must be provided an Array');\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._init = function() {\n      this._result = new Array(this.length);\n    };\n\n    var lib$es6$promise$enumerator$$default = lib$es6$promise$enumerator$$Enumerator;\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._enumerate = function() {\n      var enumerator = this;\n\n      var length  = enumerator.length;\n      var promise = enumerator.promise;\n      var input   = enumerator._input;\n\n      for (var i = 0; promise._state === lib$es6$promise$$internal$$PENDING && i < length; i++) {\n        enumerator._eachEntry(input[i], i);\n      }\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._eachEntry = function(entry, i) {\n      var enumerator = this;\n      var c = enumerator._instanceConstructor;\n\n      if (lib$es6$promise$utils$$isMaybeThenable(entry)) {\n        if (entry.constructor === c && entry._state !== lib$es6$promise$$internal$$PENDING) {\n          entry._onerror = null;\n          enumerator._settledAt(entry._state, i, entry._result);\n        } else {\n          enumerator._willSettleAt(c.resolve(entry), i);\n        }\n      } else {\n        enumerator._remaining--;\n        enumerator._result[i] = entry;\n      }\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._settledAt = function(state, i, value) {\n      var enumerator = this;\n      var promise = enumerator.promise;\n\n      if (promise._state === lib$es6$promise$$internal$$PENDING) {\n        enumerator._remaining--;\n\n        if (state === lib$es6$promise$$internal$$REJECTED) {\n          lib$es6$promise$$internal$$reject(promise, value);\n        } else {\n          enumerator._result[i] = value;\n        }\n      }\n\n      if (enumerator._remaining === 0) {\n        lib$es6$promise$$internal$$fulfill(promise, enumerator._result);\n      }\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._willSettleAt = function(promise, i) {\n      var enumerator = this;\n\n      lib$es6$promise$$internal$$subscribe(promise, undefined, function(value) {\n        enumerator._settledAt(lib$es6$promise$$internal$$FULFILLED, i, value);\n      }, function(reason) {\n        enumerator._settledAt(lib$es6$promise$$internal$$REJECTED, i, reason);\n      });\n    };\n    function lib$es6$promise$promise$all$$all(entries) {\n      return new lib$es6$promise$enumerator$$default(this, entries).promise;\n    }\n    var lib$es6$promise$promise$all$$default = lib$es6$promise$promise$all$$all;\n    function lib$es6$promise$promise$race$$race(entries) {\n      /*jshint validthis:true */\n      var Constructor = this;\n\n      var promise = new Constructor(lib$es6$promise$$internal$$noop);\n\n      if (!lib$es6$promise$utils$$isArray(entries)) {\n        lib$es6$promise$$internal$$reject(promise, new TypeError('You must pass an array to race.'));\n        return promise;\n      }\n\n      var length = entries.length;\n\n      function onFulfillment(value) {\n        lib$es6$promise$$internal$$resolve(promise, value);\n      }\n\n      function onRejection(reason) {\n        lib$es6$promise$$internal$$reject(promise, reason);\n      }\n\n      for (var i = 0; promise._state === lib$es6$promise$$internal$$PENDING && i < length; i++) {\n        lib$es6$promise$$internal$$subscribe(Constructor.resolve(entries[i]), undefined, onFulfillment, onRejection);\n      }\n\n      return promise;\n    }\n    var lib$es6$promise$promise$race$$default = lib$es6$promise$promise$race$$race;\n    function lib$es6$promise$promise$resolve$$resolve(object) {\n      /*jshint validthis:true */\n      var Constructor = this;\n\n      if (object && typeof object === 'object' && object.constructor === Constructor) {\n        return object;\n      }\n\n      var promise = new Constructor(lib$es6$promise$$internal$$noop);\n      lib$es6$promise$$internal$$resolve(promise, object);\n      return promise;\n    }\n    var lib$es6$promise$promise$resolve$$default = lib$es6$promise$promise$resolve$$resolve;\n    function lib$es6$promise$promise$reject$$reject(reason) {\n      /*jshint validthis:true */\n      var Constructor = this;\n      var promise = new Constructor(lib$es6$promise$$internal$$noop);\n      lib$es6$promise$$internal$$reject(promise, reason);\n      return promise;\n    }\n    var lib$es6$promise$promise$reject$$default = lib$es6$promise$promise$reject$$reject;\n\n    var lib$es6$promise$promise$$counter = 0;\n\n    function lib$es6$promise$promise$$needsResolver() {\n      throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n    }\n\n    function lib$es6$promise$promise$$needsNew() {\n      throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n    }\n\n    var lib$es6$promise$promise$$default = lib$es6$promise$promise$$Promise;\n    /**\n      Promise objects represent the eventual result of an asynchronous operation. The\n      primary way of interacting with a promise is through its `then` method, which\n      registers callbacks to receive either a promise's eventual value or the reason\n      why the promise cannot be fulfilled.\n\n      Terminology\n      -----------\n\n      - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n      - `thenable` is an object or function that defines a `then` method.\n      - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n      - `exception` is a value that is thrown using the throw statement.\n      - `reason` is a value that indicates why a promise was rejected.\n      - `settled` the final resting state of a promise, fulfilled or rejected.\n\n      A promise can be in one of three states: pending, fulfilled, or rejected.\n\n      Promises that are fulfilled have a fulfillment value and are in the fulfilled\n      state.  Promises that are rejected have a rejection reason and are in the\n      rejected state.  A fulfillment value is never a thenable.\n\n      Promises can also be said to *resolve* a value.  If this value is also a\n      promise, then the original promise's settled state will match the value's\n      settled state.  So a promise that *resolves* a promise that rejects will\n      itself reject, and a promise that *resolves* a promise that fulfills will\n      itself fulfill.\n\n\n      Basic Usage:\n      ------------\n\n      ```js\n      var promise = new Promise(function(resolve, reject) {\n        // on success\n        resolve(value);\n\n        // on failure\n        reject(reason);\n      });\n\n      promise.then(function(value) {\n        // on fulfillment\n      }, function(reason) {\n        // on rejection\n      });\n      ```\n\n      Advanced Usage:\n      ---------------\n\n      Promises shine when abstracting away asynchronous interactions such as\n      `XMLHttpRequest`s.\n\n      ```js\n      function getJSON(url) {\n        return new Promise(function(resolve, reject){\n          var xhr = new XMLHttpRequest();\n\n          xhr.open('GET', url);\n          xhr.onreadystatechange = handler;\n          xhr.responseType = 'json';\n          xhr.setRequestHeader('Accept', 'application/json');\n          xhr.send();\n\n          function handler() {\n            if (this.readyState === this.DONE) {\n              if (this.status === 200) {\n                resolve(this.response);\n              } else {\n                reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n              }\n            }\n          };\n        });\n      }\n\n      getJSON('/posts.json').then(function(json) {\n        // on fulfillment\n      }, function(reason) {\n        // on rejection\n      });\n      ```\n\n      Unlike callbacks, promises are great composable primitives.\n\n      ```js\n      Promise.all([\n        getJSON('/posts'),\n        getJSON('/comments')\n      ]).then(function(values){\n        values[0] // => postsJSON\n        values[1] // => commentsJSON\n\n        return values;\n      });\n      ```\n\n      @class Promise\n      @param {function} resolver\n      Useful for tooling.\n      @constructor\n    */\n    function lib$es6$promise$promise$$Promise(resolver) {\n      this._id = lib$es6$promise$promise$$counter++;\n      this._state = undefined;\n      this._result = undefined;\n      this._subscribers = [];\n\n      if (lib$es6$promise$$internal$$noop !== resolver) {\n        if (!lib$es6$promise$utils$$isFunction(resolver)) {\n          lib$es6$promise$promise$$needsResolver();\n        }\n\n        if (!(this instanceof lib$es6$promise$promise$$Promise)) {\n          lib$es6$promise$promise$$needsNew();\n        }\n\n        lib$es6$promise$$internal$$initializePromise(this, resolver);\n      }\n    }\n\n    lib$es6$promise$promise$$Promise.all = lib$es6$promise$promise$all$$default;\n    lib$es6$promise$promise$$Promise.race = lib$es6$promise$promise$race$$default;\n    lib$es6$promise$promise$$Promise.resolve = lib$es6$promise$promise$resolve$$default;\n    lib$es6$promise$promise$$Promise.reject = lib$es6$promise$promise$reject$$default;\n    lib$es6$promise$promise$$Promise._setScheduler = lib$es6$promise$asap$$setScheduler;\n    lib$es6$promise$promise$$Promise._setAsap = lib$es6$promise$asap$$setAsap;\n    lib$es6$promise$promise$$Promise._asap = lib$es6$promise$asap$$asap;\n\n    lib$es6$promise$promise$$Promise.prototype = {\n      constructor: lib$es6$promise$promise$$Promise,\n\n    /**\n      The primary way of interacting with a promise is through its `then` method,\n      which registers callbacks to receive either a promise's eventual value or the\n      reason why the promise cannot be fulfilled.\n\n      ```js\n      findUser().then(function(user){\n        // user is available\n      }, function(reason){\n        // user is unavailable, and you are given the reason why\n      });\n      ```\n\n      Chaining\n      --------\n\n      The return value of `then` is itself a promise.  This second, 'downstream'\n      promise is resolved with the return value of the first promise's fulfillment\n      or rejection handler, or rejected if the handler throws an exception.\n\n      ```js\n      findUser().then(function (user) {\n        return user.name;\n      }, function (reason) {\n        return 'default name';\n      }).then(function (userName) {\n        // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n        // will be `'default name'`\n      });\n\n      findUser().then(function (user) {\n        throw new Error('Found user, but still unhappy');\n      }, function (reason) {\n        throw new Error('`findUser` rejected and we're unhappy');\n      }).then(function (value) {\n        // never reached\n      }, function (reason) {\n        // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n        // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n      });\n      ```\n      If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n\n      ```js\n      findUser().then(function (user) {\n        throw new PedagogicalException('Upstream error');\n      }).then(function (value) {\n        // never reached\n      }).then(function (value) {\n        // never reached\n      }, function (reason) {\n        // The `PedgagocialException` is propagated all the way down to here\n      });\n      ```\n\n      Assimilation\n      ------------\n\n      Sometimes the value you want to propagate to a downstream promise can only be\n      retrieved asynchronously. This can be achieved by returning a promise in the\n      fulfillment or rejection handler. The downstream promise will then be pending\n      until the returned promise is settled. This is called *assimilation*.\n\n      ```js\n      findUser().then(function (user) {\n        return findCommentsByAuthor(user);\n      }).then(function (comments) {\n        // The user's comments are now available\n      });\n      ```\n\n      If the assimliated promise rejects, then the downstream promise will also reject.\n\n      ```js\n      findUser().then(function (user) {\n        return findCommentsByAuthor(user);\n      }).then(function (comments) {\n        // If `findCommentsByAuthor` fulfills, we'll have the value here\n      }, function (reason) {\n        // If `findCommentsByAuthor` rejects, we'll have the reason here\n      });\n      ```\n\n      Simple Example\n      --------------\n\n      Synchronous Example\n\n      ```javascript\n      var result;\n\n      try {\n        result = findResult();\n        // success\n      } catch(reason) {\n        // failure\n      }\n      ```\n\n      Errback Example\n\n      ```js\n      findResult(function(result, err){\n        if (err) {\n          // failure\n        } else {\n          // success\n        }\n      });\n      ```\n\n      Promise Example;\n\n      ```javascript\n      findResult().then(function(result){\n        // success\n      }, function(reason){\n        // failure\n      });\n      ```\n\n      Advanced Example\n      --------------\n\n      Synchronous Example\n\n      ```javascript\n      var author, books;\n\n      try {\n        author = findAuthor();\n        books  = findBooksByAuthor(author);\n        // success\n      } catch(reason) {\n        // failure\n      }\n      ```\n\n      Errback Example\n\n      ```js\n\n      function foundBooks(books) {\n\n      }\n\n      function failure(reason) {\n\n      }\n\n      findAuthor(function(author, err){\n        if (err) {\n          failure(err);\n          // failure\n        } else {\n          try {\n            findBoooksByAuthor(author, function(books, err) {\n              if (err) {\n                failure(err);\n              } else {\n                try {\n                  foundBooks(books);\n                } catch(reason) {\n                  failure(reason);\n                }\n              }\n            });\n          } catch(error) {\n            failure(err);\n          }\n          // success\n        }\n      });\n      ```\n\n      Promise Example;\n\n      ```javascript\n      findAuthor().\n        then(findBooksByAuthor).\n        then(function(books){\n          // found books\n      }).catch(function(reason){\n        // something went wrong\n      });\n      ```\n\n      @method then\n      @param {Function} onFulfilled\n      @param {Function} onRejected\n      Useful for tooling.\n      @return {Promise}\n    */\n      then: function(onFulfillment, onRejection) {\n        var parent = this;\n        var state = parent._state;\n\n        if (state === lib$es6$promise$$internal$$FULFILLED && !onFulfillment || state === lib$es6$promise$$internal$$REJECTED && !onRejection) {\n          return this;\n        }\n\n        var child = new this.constructor(lib$es6$promise$$internal$$noop);\n        var result = parent._result;\n\n        if (state) {\n          var callback = arguments[state - 1];\n          lib$es6$promise$asap$$asap(function(){\n            lib$es6$promise$$internal$$invokeCallback(state, child, callback, result);\n          });\n        } else {\n          lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection);\n        }\n\n        return child;\n      },\n\n    /**\n      `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n      as the catch block of a try/catch statement.\n\n      ```js\n      function findAuthor(){\n        throw new Error('couldn't find that author');\n      }\n\n      // synchronous\n      try {\n        findAuthor();\n      } catch(reason) {\n        // something went wrong\n      }\n\n      // async with promises\n      findAuthor().catch(function(reason){\n        // something went wrong\n      });\n      ```\n\n      @method catch\n      @param {Function} onRejection\n      Useful for tooling.\n      @return {Promise}\n    */\n      'catch': function(onRejection) {\n        return this.then(null, onRejection);\n      }\n    };\n    function lib$es6$promise$polyfill$$polyfill() {\n      var local;\n\n      if (typeof global !== 'undefined') {\n          local = global;\n      } else if (typeof self !== 'undefined') {\n          local = self;\n      } else {\n          try {\n              local = Function('return this')();\n          } catch (e) {\n              throw new Error('polyfill failed because global object is unavailable in this environment');\n          }\n      }\n\n      var P = local.Promise;\n\n      if (P && Object.prototype.toString.call(P.resolve()) === '[object Promise]' && !P.cast) {\n        return;\n      }\n\n      local.Promise = lib$es6$promise$promise$$default;\n    }\n    var lib$es6$promise$polyfill$$default = lib$es6$promise$polyfill$$polyfill;\n\n    var lib$es6$promise$umd$$ES6Promise = {\n      'Promise': lib$es6$promise$promise$$default,\n      'polyfill': lib$es6$promise$polyfill$$default\n    };\n\n    /* global define:true module:true window: true */\n    if (typeof define === 'function' && define['amd']) {\n      define(function() { return lib$es6$promise$umd$$ES6Promise; });\n    } else if (typeof module !== 'undefined' && module['exports']) {\n      module['exports'] = lib$es6$promise$umd$$ES6Promise;\n    } else if (typeof this !== 'undefined') {\n      this['ES6Promise'] = lib$es6$promise$umd$$ES6Promise;\n    }\n\n    lib$es6$promise$polyfill$$default();\n}).call(this);\n\n","(function (factory) {\n    if (typeof exports === 'object') {\n        // Node/CommonJS\n        module.exports = factory();\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD\n        define(factory);\n    } else {\n        // Browser globals (with support for web workers)\n        var glob;\n\n        try {\n            glob = window;\n        } catch (e) {\n            glob = self;\n        }\n\n        glob.SparkMD5 = factory();\n    }\n}(function (undefined) {\n\n    'use strict';\n\n    /*\n     * Fastest md5 implementation around (JKM md5).\n     * Credits: Joseph Myers\n     *\n     * @see http://www.myersdaily.org/joseph/javascript/md5-text.html\n     * @see http://jsperf.com/md5-shootout/7\n     */\n\n    /* this function is much faster,\n      so if possible we use it. Some IEs\n      are the only ones I know of that\n      need the idiotic second function,\n      generated by an if clause.  */\n    var add32 = function (a, b) {\n        return (a + b) & 0xFFFFFFFF;\n    },\n        hex_chr = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\n\n\n    function cmn(q, a, b, x, s, t) {\n        a = add32(add32(a, q), add32(x, t));\n        return add32((a << s) | (a >>> (32 - s)), b);\n    }\n\n    function ff(a, b, c, d, x, s, t) {\n        return cmn((b & c) | ((~b) & d), a, b, x, s, t);\n    }\n\n    function gg(a, b, c, d, x, s, t) {\n        return cmn((b & d) | (c & (~d)), a, b, x, s, t);\n    }\n\n    function hh(a, b, c, d, x, s, t) {\n        return cmn(b ^ c ^ d, a, b, x, s, t);\n    }\n\n    function ii(a, b, c, d, x, s, t) {\n        return cmn(c ^ (b | (~d)), a, b, x, s, t);\n    }\n\n    function md5cycle(x, k) {\n        var a = x[0],\n            b = x[1],\n            c = x[2],\n            d = x[3];\n\n        a = ff(a, b, c, d, k[0], 7, -680876936);\n        d = ff(d, a, b, c, k[1], 12, -389564586);\n        c = ff(c, d, a, b, k[2], 17, 606105819);\n        b = ff(b, c, d, a, k[3], 22, -1044525330);\n        a = ff(a, b, c, d, k[4], 7, -176418897);\n        d = ff(d, a, b, c, k[5], 12, 1200080426);\n        c = ff(c, d, a, b, k[6], 17, -1473231341);\n        b = ff(b, c, d, a, k[7], 22, -45705983);\n        a = ff(a, b, c, d, k[8], 7, 1770035416);\n        d = ff(d, a, b, c, k[9], 12, -1958414417);\n        c = ff(c, d, a, b, k[10], 17, -42063);\n        b = ff(b, c, d, a, k[11], 22, -1990404162);\n        a = ff(a, b, c, d, k[12], 7, 1804603682);\n        d = ff(d, a, b, c, k[13], 12, -40341101);\n        c = ff(c, d, a, b, k[14], 17, -1502002290);\n        b = ff(b, c, d, a, k[15], 22, 1236535329);\n\n        a = gg(a, b, c, d, k[1], 5, -165796510);\n        d = gg(d, a, b, c, k[6], 9, -1069501632);\n        c = gg(c, d, a, b, k[11], 14, 643717713);\n        b = gg(b, c, d, a, k[0], 20, -373897302);\n        a = gg(a, b, c, d, k[5], 5, -701558691);\n        d = gg(d, a, b, c, k[10], 9, 38016083);\n        c = gg(c, d, a, b, k[15], 14, -660478335);\n        b = gg(b, c, d, a, k[4], 20, -405537848);\n        a = gg(a, b, c, d, k[9], 5, 568446438);\n        d = gg(d, a, b, c, k[14], 9, -1019803690);\n        c = gg(c, d, a, b, k[3], 14, -187363961);\n        b = gg(b, c, d, a, k[8], 20, 1163531501);\n        a = gg(a, b, c, d, k[13], 5, -1444681467);\n        d = gg(d, a, b, c, k[2], 9, -51403784);\n        c = gg(c, d, a, b, k[7], 14, 1735328473);\n        b = gg(b, c, d, a, k[12], 20, -1926607734);\n\n        a = hh(a, b, c, d, k[5], 4, -378558);\n        d = hh(d, a, b, c, k[8], 11, -2022574463);\n        c = hh(c, d, a, b, k[11], 16, 1839030562);\n        b = hh(b, c, d, a, k[14], 23, -35309556);\n        a = hh(a, b, c, d, k[1], 4, -1530992060);\n        d = hh(d, a, b, c, k[4], 11, 1272893353);\n        c = hh(c, d, a, b, k[7], 16, -155497632);\n        b = hh(b, c, d, a, k[10], 23, -1094730640);\n        a = hh(a, b, c, d, k[13], 4, 681279174);\n        d = hh(d, a, b, c, k[0], 11, -358537222);\n        c = hh(c, d, a, b, k[3], 16, -722521979);\n        b = hh(b, c, d, a, k[6], 23, 76029189);\n        a = hh(a, b, c, d, k[9], 4, -640364487);\n        d = hh(d, a, b, c, k[12], 11, -421815835);\n        c = hh(c, d, a, b, k[15], 16, 530742520);\n        b = hh(b, c, d, a, k[2], 23, -995338651);\n\n        a = ii(a, b, c, d, k[0], 6, -198630844);\n        d = ii(d, a, b, c, k[7], 10, 1126891415);\n        c = ii(c, d, a, b, k[14], 15, -1416354905);\n        b = ii(b, c, d, a, k[5], 21, -57434055);\n        a = ii(a, b, c, d, k[12], 6, 1700485571);\n        d = ii(d, a, b, c, k[3], 10, -1894986606);\n        c = ii(c, d, a, b, k[10], 15, -1051523);\n        b = ii(b, c, d, a, k[1], 21, -2054922799);\n        a = ii(a, b, c, d, k[8], 6, 1873313359);\n        d = ii(d, a, b, c, k[15], 10, -30611744);\n        c = ii(c, d, a, b, k[6], 15, -1560198380);\n        b = ii(b, c, d, a, k[13], 21, 1309151649);\n        a = ii(a, b, c, d, k[4], 6, -145523070);\n        d = ii(d, a, b, c, k[11], 10, -1120210379);\n        c = ii(c, d, a, b, k[2], 15, 718787259);\n        b = ii(b, c, d, a, k[9], 21, -343485551);\n\n        x[0] = add32(a, x[0]);\n        x[1] = add32(b, x[1]);\n        x[2] = add32(c, x[2]);\n        x[3] = add32(d, x[3]);\n    }\n\n    function md5blk(s) {\n        var md5blks = [],\n            i; /* Andy King said do it this way. */\n\n        for (i = 0; i < 64; i += 4) {\n            md5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24);\n        }\n        return md5blks;\n    }\n\n    function md5blk_array(a) {\n        var md5blks = [],\n            i; /* Andy King said do it this way. */\n\n        for (i = 0; i < 64; i += 4) {\n            md5blks[i >> 2] = a[i] + (a[i + 1] << 8) + (a[i + 2] << 16) + (a[i + 3] << 24);\n        }\n        return md5blks;\n    }\n\n    function md51(s) {\n        var n = s.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n            md5cycle(state, md5blk(s.substring(i - 64, i)));\n        }\n        s = s.substring(i - 64);\n        length = s.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= s.charCodeAt(i) << ((i % 4) << 3);\n        }\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(state, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Beware that the final length might not fit in 32 bits so we take care of that\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n\n        md5cycle(state, tail);\n        return state;\n    }\n\n    function md51_array(a) {\n        var n = a.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n            md5cycle(state, md5blk_array(a.subarray(i - 64, i)));\n        }\n\n        // Not sure if it is a bug, however IE10 will always produce a sub array of length 1\n        // containing the last element of the parent array if the sub array specified starts\n        // beyond the length of the parent array - weird.\n        // https://connect.microsoft.com/IE/feedback/details/771452/typed-array-subarray-issue\n        a = (i - 64) < n ? a.subarray(i - 64) : new Uint8Array(0);\n\n        length = a.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= a[i] << ((i % 4) << 3);\n        }\n\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(state, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Beware that the final length might not fit in 32 bits so we take care of that\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n\n        md5cycle(state, tail);\n\n        return state;\n    }\n\n    function rhex(n) {\n        var s = '',\n            j;\n        for (j = 0; j < 4; j += 1) {\n            s += hex_chr[(n >> (j * 8 + 4)) & 0x0F] + hex_chr[(n >> (j * 8)) & 0x0F];\n        }\n        return s;\n    }\n\n    function hex(x) {\n        var i;\n        for (i = 0; i < x.length; i += 1) {\n            x[i] = rhex(x[i]);\n        }\n        return x.join('');\n    }\n\n    // In some cases the fast add32 function cannot be used..\n    if (hex(md51('hello')) !== '5d41402abc4b2a76b9719d911017c592') {\n        add32 = function (x, y) {\n            var lsw = (x & 0xFFFF) + (y & 0xFFFF),\n                msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n            return (msw << 16) | (lsw & 0xFFFF);\n        };\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * ArrayBuffer slice polyfill.\n     *\n     * @see https://github.com/ttaubert/node-arraybuffer-slice\n     */\n\n    if (typeof ArrayBuffer !== 'undefined' && !ArrayBuffer.prototype.slice) {\n        (function () {\n            function clamp(val, length) {\n                val = (val | 0) || 0;\n\n                if (val < 0) {\n                    return Math.max(val + length, 0);\n                }\n\n                return Math.min(val, length);\n            }\n\n            ArrayBuffer.prototype.slice = function (from, to) {\n                var length = this.byteLength,\n                    begin = clamp(from, length),\n                    end = length,\n                    num,\n                    target,\n                    targetArray,\n                    sourceArray;\n\n                if (to !== undefined) {\n                    end = clamp(to, length);\n                }\n\n                if (begin > end) {\n                    return new ArrayBuffer(0);\n                }\n\n                num = end - begin;\n                target = new ArrayBuffer(num);\n                targetArray = new Uint8Array(target);\n\n                sourceArray = new Uint8Array(this, begin, num);\n                targetArray.set(sourceArray);\n\n                return target;\n            };\n        })();\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * Helpers.\n     */\n\n    function toUtf8(str) {\n        if (/[\\u0080-\\uFFFF]/.test(str)) {\n            str = unescape(encodeURIComponent(str));\n        }\n\n        return str;\n    }\n\n    function utf8Str2ArrayBuffer(str, returnUInt8Array) {\n        var length = str.length,\n           buff = new ArrayBuffer(length),\n           arr = new Uint8Array(buff),\n           i;\n\n        for (i = 0; i < length; i += 1) {\n            arr[i] = str.charCodeAt(i);\n        }\n\n        return returnUInt8Array ? arr : buff;\n    }\n\n    function arrayBuffer2Utf8Str(buff) {\n        return String.fromCharCode.apply(null, new Uint8Array(buff));\n    }\n\n    function concatenateArrayBuffers(first, second, returnUInt8Array) {\n        var result = new Uint8Array(first.byteLength + second.byteLength);\n\n        result.set(new Uint8Array(first));\n        result.set(new Uint8Array(second), first.byteLength);\n\n        return returnUInt8Array ? result : result.buffer;\n    }\n\n    function hexToBinaryString(hex) {\n        var bytes = [],\n            length = hex.length,\n            x;\n\n        for (x = 0; x < length - 1; x += 2) {\n            bytes.push(parseInt(hex.substr(x, 2), 16));\n        }\n\n        return String.fromCharCode.apply(String, bytes);\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * SparkMD5 OOP implementation.\n     *\n     * Use this class to perform an incremental md5, otherwise use the\n     * static methods instead.\n     */\n\n    function SparkMD5() {\n        // call reset to init the instance\n        this.reset();\n    }\n\n    /**\n     * Appends a string.\n     * A conversion will be applied if an utf8 string is detected.\n     *\n     * @param {String} str The string to be appended\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.append = function (str) {\n        // Converts the string to utf8 bytes if necessary\n        // Then append as binary\n        this.appendBinary(toUtf8(str));\n\n        return this;\n    };\n\n    /**\n     * Appends a binary string.\n     *\n     * @param {String} contents The binary string to be appended\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.appendBinary = function (contents) {\n        this._buff += contents;\n        this._length += contents.length;\n\n        var length = this._buff.length,\n            i;\n\n        for (i = 64; i <= length; i += 64) {\n            md5cycle(this._hash, md5blk(this._buff.substring(i - 64, i)));\n        }\n\n        this._buff = this._buff.substring(i - 64);\n\n        return this;\n    };\n\n    /**\n     * Finishes the incremental computation, reseting the internal state and\n     * returning the result.\n     *\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            i,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= buff.charCodeAt(i) << ((i % 4) << 3);\n        }\n\n        this._finish(tail, length);\n        ret = hex(this._hash);\n\n        if (raw) {\n            ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n\n        return ret;\n    };\n\n    /**\n     * Resets the internal state of the computation.\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.reset = function () {\n        this._buff = '';\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n\n        return this;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @return {Object} The state\n     */\n    SparkMD5.prototype.getState = function () {\n        return {\n            buff: this._buff,\n            length: this._length,\n            hash: this._hash\n        };\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @param {Object} state The state\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.setState = function (state) {\n        this._buff = state.buff;\n        this._length = state.length;\n        this._hash = state.hash;\n\n        return this;\n    };\n\n    /**\n     * Releases memory used by the incremental buffer and other additional\n     * resources. If you plan to use the instance again, use reset instead.\n     */\n    SparkMD5.prototype.destroy = function () {\n        delete this._hash;\n        delete this._buff;\n        delete this._length;\n    };\n\n    /**\n     * Finish the final calculation based on the tail.\n     *\n     * @param {Array}  tail   The tail (will be modified)\n     * @param {Number} length The length of the remaining buffer\n     */\n    SparkMD5.prototype._finish = function (tail, length) {\n        var i = length,\n            tmp,\n            lo,\n            hi;\n\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(this._hash, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Do the final computation based on the tail and length\n        // Beware that the final length may not fit in 32 bits so we take care of that\n        tmp = this._length * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n        md5cycle(this._hash, tail);\n    };\n\n    /**\n     * Performs the md5 hash on a string.\n     * A conversion will be applied if utf8 string is detected.\n     *\n     * @param {String}  str The string\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.hash = function (str, raw) {\n        // Converts the string to utf8 bytes if necessary\n        // Then compute it using the binary function\n        return SparkMD5.hashBinary(toUtf8(str), raw);\n    };\n\n    /**\n     * Performs the md5 hash on a binary string.\n     *\n     * @param {String}  content The binary string\n     * @param {Boolean} raw     True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.hashBinary = function (content, raw) {\n        var hash = md51(content),\n            ret = hex(hash);\n\n        return raw ? hexToBinaryString(ret) : ret;\n    };\n\n    // ---------------------------------------------------\n\n    /**\n     * SparkMD5 OOP implementation for array buffers.\n     *\n     * Use this class to perform an incremental md5 ONLY for array buffers.\n     */\n    SparkMD5.ArrayBuffer = function () {\n        // call reset to init the instance\n        this.reset();\n    };\n\n    /**\n     * Appends an array buffer.\n     *\n     * @param {ArrayBuffer} arr The array to be appended\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.append = function (arr) {\n        var buff = concatenateArrayBuffers(this._buff.buffer, arr, true),\n            length = buff.length,\n            i;\n\n        this._length += arr.byteLength;\n\n        for (i = 64; i <= length; i += 64) {\n            md5cycle(this._hash, md5blk_array(buff.subarray(i - 64, i)));\n        }\n\n        this._buff = (i - 64) < length ? new Uint8Array(buff.buffer.slice(i - 64)) : new Uint8Array(0);\n\n        return this;\n    };\n\n    /**\n     * Finishes the incremental computation, reseting the internal state and\n     * returning the result.\n     *\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.ArrayBuffer.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            i,\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= buff[i] << ((i % 4) << 3);\n        }\n\n        this._finish(tail, length);\n        ret = hex(this._hash);\n\n        if (raw) {\n            ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n\n        return ret;\n    };\n\n    /**\n     * Resets the internal state of the computation.\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.reset = function () {\n        this._buff = new Uint8Array(0);\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n\n        return this;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @return {Object} The state\n     */\n    SparkMD5.ArrayBuffer.prototype.getState = function () {\n        var state = SparkMD5.prototype.getState.call(this);\n\n        // Convert buffer to a string\n        state.buff = arrayBuffer2Utf8Str(state.buff);\n\n        return state;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @param {Object} state The state\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.setState = function (state) {\n        // Convert string to buffer\n        state.buff = utf8Str2ArrayBuffer(state.buff, true);\n\n        return SparkMD5.prototype.setState.call(this, state);\n    };\n\n    SparkMD5.ArrayBuffer.prototype.destroy = SparkMD5.prototype.destroy;\n\n    SparkMD5.ArrayBuffer.prototype._finish = SparkMD5.prototype._finish;\n\n    /**\n     * Performs the md5 hash on an array buffer.\n     *\n     * @param {ArrayBuffer} arr The array buffer\n     * @param {Boolean}     raw True to get the raw string, false to get the hex one\n     *\n     * @return {String} The result\n     */\n    SparkMD5.ArrayBuffer.hash = function (arr, raw) {\n        var hash = md51_array(new Uint8Array(arr)),\n            ret = hex(hash);\n\n        return raw ? hexToBinaryString(ret) : ret;\n    };\n\n    return SparkMD5;\n}));\n","//'use strict';\nvar J = jQuery.noConflict();\n\nvar Zotero = {\n\tajax: {},\n\tcallbacks: {},\n\tui: {\n\t\tcallbacks: {},\n\t\tkeyCode: {\n\t\t\tBACKSPACE: 8,\n\t\t\tCOMMA: 188,\n\t\t\tDELETE: 46,\n\t\t\tDOWN: 40,\n\t\t\tEND: 35,\n\t\t\tENTER: 13,\n\t\t\tESCAPE: 27,\n\t\t\tHOME: 36,\n\t\t\tLEFT: 37,\n\t\t\tPAGE_DOWN: 34,\n\t\t\tPAGE_UP: 33,\n\t\t\tPERIOD: 190,\n\t\t\tRIGHT: 39,\n\t\t\tSPACE: 32,\n\t\t\tTAB: 9,\n\t\t\tUP: 38\n\t\t}\n\t},\n\turl: {},\n\tutils: {},\n\toffline: {},\n\ttemp: {},\n\tlocalizations: {},\n\t\n\tconfig: {librarySettings: {},\n\t\t\tbaseApiUrl: 'https://api.zotero.org',\n\t\t\tbaseWebsiteUrl: 'https://zotero.org',\n\t\t\tbaseFeedUrl: 'https://api.zotero.org',\n\t\t\tbaseZoteroWebsiteUrl: 'https://www.zotero.org',\n\t\t\tbaseDownloadUrl: 'https://www.zotero.org',\n\t\t\tnonparsedBaseUrl: \"\",\n\t\t\tdebugLogEndpoint: '',\n\t\t\tstoreDebug: true,\n\t\t\tdirectDownloads: true,\n\t\t\tproxyPath: '/proxyrequest',\n\t\t\tignoreLoggedInStatus: false,\n\t\t\tstorePrefsRemote: true,\n\t\t\tpreferUrlItem: true,\n\t\t\tsessionAuth: false,\n\t\t\tproxy: false,\n\t\t\tapiKey: '',\n\t\t\tapiVersion: 3,\n\t\t\tlocale: 'en-US',\n\t\t\tcacheStoreType: 'localStorage',\n\t\t\tpreloadCachedLibrary: true,\n\t\t\tsortOrdering: {\n\t\t\t\t'dateAdded': 'desc',\n\t\t\t\t'dateModified': 'desc',\n\t\t\t\t'date': 'desc',\n\t\t\t\t'year': 'desc',\n\t\t\t\t'accessDate': 'desc',\n\t\t\t\t'title': 'asc',\n\t\t\t\t'creator': 'asc'\n\t\t\t},\n\t\t\tdefaultSortColumn: 'title',\n\t\t\tdefaultSortOrder: 'asc',\n\t\t\tlargeFields: {\n\t\t\t\t'title': 1,\n\t\t\t\t'abstractNote': 1,\n\t\t\t\t'extra' : 1\n\t\t\t},\n\t\t\trichTextFields: {\n\t\t\t\t'note': 1\n\t\t\t},\n\t\t\tmaxFieldSummaryLength: {title:60},\n\t\t\texportFormats: [\n\t\t\t\t'bibtex',\n\t\t\t\t'bookmarks',\n\t\t\t\t'mods',\n\t\t\t\t'refer',\n\t\t\t\t'rdf_bibliontology',\n\t\t\t\t'rdf_dc',\n\t\t\t\t'rdf_zotero',\n\t\t\t\t'ris',\n\t\t\t\t'wikipedia'\n\t\t\t\t],\n\t\t\texportFormatsMap: {\n\t\t\t\t'bibtex': 'BibTeX',\n\t\t\t\t'bookmarks': 'Bookmarks',\n\t\t\t\t'mods': 'MODS',\n\t\t\t\t'refer': 'Refer/BibIX',\n\t\t\t\t'rdf_bibliontology': 'Bibliontology RDF',\n\t\t\t\t'rdf_dc': 'Unqualified Dublin Core RDF',\n\t\t\t\t'rdf_zotero': 'Zotero RDF',\n\t\t\t\t'ris': 'RIS',\n\t\t\t\t'wikipedia': 'Wikipedia Citation Templates'\n\t\t\t},\n\t\t\tdefaultApiArgs: {\n\t\t\t\t'order': 'title',\n\t\t\t\t'sort': 'asc',\n\t\t\t\t'limit': 50,\n\t\t\t\t'start': 0\n\t\t\t}\n\t},\n\t\n\tdebug: function(debugstring, level){\n\t\tvar prefLevel = 3;\n\t\tif(Zotero.config.storeDebug){\n\t\t\tif(level <= prefLevel){\n\t\t\t\tZotero.debugstring += \"DEBUG:\" + debugstring + \"\\n\";\n\t\t\t}\n\t\t}\n\t\tif(typeof console == 'undefined'){\n\t\t\treturn;\n\t\t}\n\t\tif(typeof(level) !== \"number\"){\n\t\t\tlevel = 1;\n\t\t}\n\t\tif(Zotero.preferences !== undefined){\n\t\t\tprefLevel = Zotero.preferences.getPref('debug_level');\n\t\t}\n\t\tif(level <= prefLevel) {\n\t\t\tconsole.log(debugstring);\n\t\t}\n\t},\n\t\n\twarn: function(warnstring){\n\t\tif(Zotero.config.storeDebug){\n\t\t\tZotero.debugstring += \"WARN:\" + warnstring + \"\\n\";\n\t\t}\n\t\tif(typeof console == 'undefined' || typeof console.warn == 'undefined'){\n\t\t\tthis.debug(warnstring);\n\t\t}\n\t\telse{\n\t\t\tconsole.warn(warnstring);\n\t\t}\n\t},\n\t\n\terror: function(errorstring){\n\t\tif(Zotero.config.storeDebug){\n\t\t\tZotero.debugstring += \"ERROR:\" + errorstring + \"\\n\";\n\t\t}\n\t\tif(typeof console == 'undefined' || typeof console.error == 'undefined'){\n\t\t\tthis.debug(errorstring);\n\t\t}\n\t\telse{\n\t\t\tconsole.error(errorstring);\n\t\t}\n\t},\n\n\tsubmitDebugLog: function(){\n\t\tZotero.net.ajax({\n\t\t\turl: Zotero.config.debugLogEndpoint,\n\t\t\tdata: {'debug_string': Zotero.debugstring}\n\t\t}).then(function(xhr){\n\t\t\tvar data = JSON.parse(xhr.responseText);\n\t\t\tif(data.logID) {\n\t\t\t\talert(\"ZoteroWWW debug logID:\" + data.logID);\n\t\t\t} else if (data.error) {\n\t\t\t\talert(\"Error submitting ZoteroWWW debug log:\" + data.error);\n\t\t\t}\n\t\t});\n\t},\n\t\n\tcatchPromiseError: function(err){\n\t\tZotero.error(err);\n\t},\n\t\n\tlibraries: {},\n\t\n\tvalidator: {\n\t\tpatterns: {\n\t\t\t//'itemKey': /^([A-Z0-9]{8,},?)+$/,\n\t\t\t'itemKey': /^.+$/,\n\t\t\t'collectionKey': /^([A-Z0-9]{8,})|trash$/,\n\t\t\t//'tag': /^[^#]*$/,\n\t\t\t'libraryID': /^[0-9]+$/,\n\t\t\t'libraryType': /^(user|group|)$/,\n\t\t\t'target': /^(items?|collections?|tags|children|deleted|userGroups|key|settings|publications)$/,\n\t\t\t'targetModifier': /^(top|file|file\\/view)$/,\n\t\t\t\n\t\t\t//get params\n\t\t\t'sort': /^(asc|desc)$/,\n\t\t\t'start': /^[0-9]*$/,\n\t\t\t'limit': /^[0-9]*$/,\n\t\t\t'order': /^\\S*$/,\n\t\t\t'content': /^((html|json|data|bib|none|bibtex|bookmarks|coins|csljson|mods|refer|rdf_bibliontology|rdf_dc|ris|tei|wikipedia),?)+$/,\n\t\t\t'include': /^((html|json|data|bib|none|bibtex|bookmarks|coins|csljson|mods|refer|rdf_bibliontology|rdf_dc|ris|tei|wikipedia),?)+$/,\n\t\t\t'q': /^.*$/,\n\t\t\t'fq': /^\\S*$/,\n\t\t\t'itemType': /^\\S*$/,\n\t\t\t'locale': /^\\S*$/,\n\t\t\t'tag': /^.*$/,\n\t\t\t'tagType': /^(0|1)$/,\n\t\t\t'key': /^\\S*/,\n\t\t\t'format': /^(json|atom|bib|keys|versions|bibtex|bookmarks|mods|refer|rdf_bibliontology|rdf_dc|rdf_zotero|ris|wikipedia)$/,\n\t\t\t'style': /^\\S*$/,\n\t\t\t'linkwrap': /^(0|1)*$/\n\t\t},\n\t\t\n\t\tvalidate: function(arg, type){\n\t\t\tZ.debug(\"Zotero.validate\", 4);\n\t\t\tif(arg === ''){\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\telse if(arg === null){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tZ.debug(arg + \" \" + type, 4);\n\t\t\tvar patterns = this.patterns;\n\t\t\t\n\t\t\tif(patterns.hasOwnProperty(type)){\n\t\t\t\treturn patterns[type].test(arg);\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t},\n\t\n\t_logEnabled: 0,\n\tenableLogging: function(){\n\t\tZotero._logEnabled++;\n\t\tif(Zotero._logEnabled > 0){\n\t\t\t//TODO: enable debug_log?\n\t\t}\n\t},\n\t\n\tdisableLogging: function(){\n\t\tZotero._logEnabled--;\n\t\tif(Zotero._logEnabled <= 0){\n\t\t\tZotero._logEnabled = 0;\n\t\t\t//TODO: disable debug_log?\n\t\t}\n\t},\n\t\n\tinit: function(){\n\t\tvar store;\n\t\tif(Zotero.config.cacheStoreType == 'localStorage' && typeof localStorage != 'undefined'){\n\t\t\tstore = localStorage;\n\t\t}\n\t\telse if(Zotero.config.cacheStoreType == 'sessionStorage' && typeof sessionStorage != 'undefined'){\n\t\t\tstore = sessionStorage;\n\t\t}\n\t\telse{\n\t\t\tstore = {};\n\t\t}\n\t\tZotero.store = store;\n\t\t\n\t\tZotero.cache = new Zotero.Cache(store);\n\t\t\n\t\t//initialize global preferences object\n\t\tZotero.preferences = new Zotero.Preferences(Zotero.store, 'global');\n\t\t\n\t\t//get localized item constants if not stored in localstorage\n\t\tvar locale = 'en-US';\n\t\tif(Zotero.config.locale){\n\t\t\tlocale = Zotero.config.locale;\n\t\t}\n\t\tlocale = 'en-US';\n\t}\n};\n\nZotero.Cache = function(store){\n\tthis.store = store;\n\tvar registry = this.store._registry;\n\tif(registry === null || typeof registry == 'undefined'){\n\t\tregistry = {};\n\t\tthis.store._registry = JSON.stringify(registry);\n\t}\n};\n\n//build a consistent string from an object to use as a cache key\n//put object key/value pairs into array, sort array, and concatenate\n//array with '/'\nZotero.Cache.prototype.objectCacheString = function(params){\n\tvar paramVarsArray = [];\n\tObject.keys(params).forEach(function(index){\n\t\tvar value = params[index];\n\t\tif(!value) { return; }\n\t\telse if(Array.isArray(value)){\n\t\t\tvalue.forEach(function(v){\n\t\t\t\tparamVarsArray.push(index + '/' + encodeURIComponent(v) );\n\t\t\t});\n\t\t}\n\t\telse{\n\t\t\tparamVarsArray.push(index + '/' + encodeURIComponent(value) );\n\t\t}\n\t});\n\tparamVarsArray.sort();\n\tZ.debug(paramVarsArray, 4);\n\tvar objectCacheString = paramVarsArray.join('/');\n\treturn objectCacheString;\n};\n\n//should use setItem and getItem if I extend that to the case where no Storage object is available in the browser\nZotero.Cache.prototype.save = function(params, object, cachetags){\n\t//cachetags for expiring entries\n\tif(!Array.isArray(cachetags)){\n\t\tcachetags = [];\n\t}\n\t//get registry object from storage\n\tvar registry = JSON.parse(this.store._registry);\n\tif(!registry){\n\t\tregistry = {};\n\t}\n\tvar objectCacheString = this.objectCacheString(params);\n\t//save object in storage\n\tthis.store[objectCacheString] = JSON.stringify(object);\n\t//make registry entry for object\n\tvar registryEntry = {'id':objectCacheString, saved:Date.now(), cachetags:cachetags};\n\tregistry[objectCacheString] = registryEntry;\n\t//save registry back to storage\n\tthis.store._registry = JSON.stringify(registry);\n};\n\nZotero.Cache.prototype.load = function(params){\n\tZ.debug(\"Zotero.Cache.load\", 3);\n\tvar objectCacheString = this.objectCacheString(params);\n\tZ.debug(objectCacheString, 4);\n\ttry{\n\t\tvar s = this.store[objectCacheString];\n\t\tif(!s){\n\t\t\tZ.warn(\"No value found in cache store - \" + objectCacheString, 3);\n\t\t\treturn null;\n\t\t}\n\t\telse{\n\t\t\treturn JSON.parse(s);\n\t\t}\n\t}\n\tcatch(e){\n\t\tZ.error('Error parsing retrieved cache data: ' + objectCacheString + ' : ' + s);\n\t\treturn null;\n\t}\n};\n\nZotero.Cache.prototype.expireCacheTag = function(tag){\n\tZ.debug(\"Zotero.Cache.expireCacheTag\", 3);\n\tvar registry = JSON.parse(this.store._registry);\n\tvar store = this.store;\n\tObject.keys(registry).forEach(function(index){\n\t\tvar value = registry[index];\n\t\tif(value.cachetags.indexOf(tag) != (-1)){\n\t\t\tZ.debug('tag ' + tag + ' found for item ' + value['id'] + ' : expiring', 4);\n\t\t\tdelete store[value['id']];\n\t\t\tdelete registry[value['id']];\n\t\t}\n\t});\n};\n\nZotero.Cache.prototype.clear = function(){\n\tif(typeof(this.store.clear) == 'function'){\n\t\tthis.store.clear();\n\t}\n\telse{\n\t\tthis.store = {};\n\t}\n};\n\nZotero.ajaxRequest = function(url, type, options){\n\tZ.debug(\"Zotero.ajaxRequest ==== \" + url, 3);\n\tif(!type){\n\t\ttype = 'GET';\n\t}\n\tif(!options){\n\t\toptions = {};\n\t}\n\tvar requestObject = {\n\t\turl: url,\n\t\ttype: type\n\t};\n\trequestObject = Z.extend({}, requestObject, options);\n\tZ.debug(requestObject, 3);\n\treturn Zotero.net.queueRequest(requestObject);\n};\n\n//non-DOM (jquery) event management\nZotero.eventmanager = {\n\tcallbacks: {}\n};\n\nZotero.trigger = function(eventType, data={}, filter=false){\n\tif(filter){\n\t\tZ.debug(\"filter is not false\", 3);\n\t\teventType += \"_\" + filter;\n\t}\n\tZotero.debug(\"Triggering eventful \" + eventType, 3);\n\tZ.debug(data);\n\t\n\tdata.zeventful = true;\n\tif(data.triggeringElement === null || data.triggeringElement === undefined){\n\t\tdata.triggeringElement = J(\"#eventful\");\n\t}\n\t\n\ttry{\n\t\tif(Zotero.eventmanager.callbacks.hasOwnProperty(eventType)){\n\t\t\tvar callbacks = Zotero.eventmanager.callbacks[eventType];\n\t\t\tcallbacks.forEach(function(callback){\n\t\t\t\tvar cdata = Z.extend({}, data, callback.data);\n\t\t\t\tvar e = {\n\t\t\t\t\tdata: cdata\n\t\t\t\t};\n\t\t\t\tcallback.f(e);\n\t\t\t});\n\t\t}\n\t}\n\tcatch(e){\n\t\tZ.error(\"failed triggering:\" + eventType);\n\t\tZ.error(e);\n\t}\n};\n\nZotero.listen = function(events, handler, data, filter){\n\tZ.debug(\"Zotero.listen: \" + events);\n\t//append filter to event strings if it's specified\n\tvar eventsArray = events.split(\" \");\n\tif(eventsArray.length > 0 && filter){\n\t\tfor(var i = 0; i < eventsArray.length; i++){\n\t\t\teventsArray[i] += \"_\" + filter;\n\t\t}\n\t}\n\teventsArray.forEach(function(ev){\n\t\tif(Zotero.eventmanager.callbacks.hasOwnProperty(ev)){\n\t\t\tZotero.eventmanager.callbacks[ev].push({\n\t\t\t\tdata: data,\n\t\t\t\tf: handler\n\t\t\t});\n\t\t} else {\n\t\t\tZotero.eventmanager.callbacks[ev] = [{\n\t\t\t\tdata: data,\n\t\t\t\tf: handler\n\t\t\t}];\n\t\t}\n\t});\n};\n\nvar Z = Zotero;\n\n\n","/*\nZotero.ajax.error = function(event, request, settings, exception){\n\t//Zotero.ui.jsNotificationMessage(\"Error requesting \" + settings.url, 'error');\n\t//J(\"#js-message-list\").append(\"<li>Error requesting \" + settings.url + \"</li>\");\n\tZ.debug(\"Exception: \" + exception);\n\t//Z.exception = exception;\n};\n*/\n/*\nZotero.ajax.errorCallback = function(jqxhr, textStatus, errorThrown){\n\tZ.debug(\"ajax error callback\", 2);\n\tZ.debug('textStatus: ' + textStatus, 2);\n\tZ.debug('errorThrown: ', 2);\n\tZ.debug(errorThrown, 2);\n\tZ.debug(jqxhr, 2);\n};\n*/\nZotero.ajax.errorCallback = function(response){\n\tZ.error(response);\n\tZ.debug('ajax error callback', 2);\n\tZ.debug('textStatus: ' + response.textStatus, 2);\n\tZ.debug('errorThrown: ', 2);\n\tZ.debug(response.errorThrown, 2);\n\tZ.debug(response.jqxhr, 2);\n};\n\nZotero.ajax.error = Zotero.ajax.errorCallback;\nZotero.ajax.activeRequests = [];\n\n/*\n * Requires {target:items|collections|tags, libraryType:user|group, libraryID:<>}\n */\nZotero.ajax.apiRequestUrl = function(params){\n\tZ.debug('Zotero.ajax.apiRequestUrl', 4);\n\tZ.debug(params, 4);\n\tObject.keys(params).forEach(function(key){\n\t\tvar val = params[key];\n\t\t//should probably figure out exactly why I'm doing this, is it just to make sure no hashes snuck in?\n\t\t//if so the new validation below takes care of that instead\n\t\tif(typeof val == 'string'){\n\t\t\tval = val.split('#', 1);\n\t\t\tparams[key] = val[0];\n\t\t}\n\t\t\n\t\t//validate params based on patterns in Zotero.validate\n\t\tif(Zotero.validator.validate(val, key) === false){\n\t\t\t//warn on invalid parameter and drop from params that will be used\n\t\t\tZotero.warn('API argument failed validation: ' + key + ' cannot be ' + val);\n\t\t\tZotero.warn(params);\n\t\t\tdelete params[key];\n\t\t}\n\t});\n\t\n\tif(!params.target) throw new Error('No target defined for api request');\n\tif(!(params.libraryType == 'user' ||\n\t\tparams.libraryType == 'group' ||\n\t\tparams.libraryType === '')) {\n\t\tthrow new Error('Unexpected libraryType for api request ' + JSON.stringify(params));\n\t}\n\tif((params.libraryType) && !(params.libraryID)) {\n\t\tthrow new Error('No libraryID defined for api request');\n\t}\n\tif((params.target == 'publications') && (params.libraryType != 'user')){\n\t\tthrow new Error('publications is only valid for user libraries');\n\t}\n\t\n\tvar base = Zotero.config.baseApiUrl;\n\tvar url;\n\t\n\tif(params.libraryType !== ''){\n\t\turl = base + '/' + params.libraryType + 's/' + params.libraryID;\n\t\tif(params.collectionKey){\n\t\t\tif(params.collectionKey == 'trash'){\n\t\t\t\turl += '/items/trash';\n\t\t\t\treturn url;\n\t\t\t}\n\t\t\telse if(params.collectionKey.indexOf(',') !== -1){\n\t\t\t\t\n\t\t\t}\n\t\t\telse if(params.target != 'collections'){\n\t\t\t\turl += '/collections/' + params.collectionKey;\n\t\t\t}\n\t\t}\n\t}\n\telse{\n\t\turl = base;\n\t}\n\t\n\tswitch(params.target){\n\t\tcase 'items':\n\t\t\turl += '/items';\n\t\t\tbreak;\n\t\tcase 'item':\n\t\t\tif(params.itemKey){\n\t\t\t\turl += '/items/' + params.itemKey;\n\t\t\t}\n\t\t\telse{\n\t\t\t\turl += '/items';\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'collections':\n\t\t\turl += '/collections';\n\t\t\tbreak;\n\t\tcase 'childCollections':\n\t\t\turl += '/collections';\n\t\t\tbreak;\n\t\tcase 'collection':\n\t\t\tbreak;\n\t\tcase 'tags':\n\t\t\turl += '/tags';\n\t\t\tbreak;\n\t\tcase 'children':\n\t\t\turl += '/items/' + params.itemKey + '/children';\n\t\t\tbreak;\n\t\tcase 'key':\n\t\t\turl = base + '/users/' + params.libraryID + '/keys/' + params.apiKey;\n\t\t\tbreak;\n\t\tcase 'deleted':\n\t\t\turl += '/deleted';\n\t\t\tbreak;\n\t\tcase 'userGroups':\n\t\t\turl = base + '/users/' + params.libraryID + '/groups';\n\t\t\tbreak;\n\t\tcase 'settings':\n\t\t\turl += '/settings/' + (params.settingsKey || '');\n\t\t\tbreak;\n\t\tcase 'publications':\n\t\t\turl += '/publications/items';\n\t\t\tbreak;\n\t\tdefault:\n\t\t\treturn false;\n\t}\n\tswitch(params.targetModifier){\n\t\tcase 'top':\n\t\t\turl += '/top';\n\t\t\tbreak;\n\t\tcase 'file':\n\t\t\turl += '/file';\n\t\t\tbreak;\n\t\tcase 'viewsnapshot':\n\t\t\turl += '/file/view';\n\t\t\tbreak;\n\t}\n\t//Z.debug(\"returning apiRequestUrl: \" + url, 3);\n\treturn url;\n};\n\nZotero.ajax.apiQueryString = function(passedParams, useConfigKey){\n\tZ.debug(\"Zotero.ajax.apiQueryString\", 4);\n\tZ.debug(passedParams, 4);\n\tif(useConfigKey === null || typeof useConfigKey === 'undefined'){\n\t\tuseConfigKey = true;\n\t}\n\t\n\tObject.keys(passedParams).forEach(function(key){\n\t\tvar val = passedParams[key];\n\t\tif(typeof val == 'string'){\n\t\t\tval = val.split('#', 1);\n\t\t\tpassedParams[key] = val[0];\n\t\t}\n\t});\n\tif(passedParams.hasOwnProperty('order') && passedParams['order'] == 'creatorSummary'){\n\t\tpassedParams['order'] = 'creator';\n\t}\n\tif(passedParams.hasOwnProperty('order') && passedParams['order'] == 'year'){\n\t\tpassedParams['order'] = 'date';\n\t}\n\tif(useConfigKey && Zotero.config.sessionAuth) {\n\t\tvar sessionKey = Zotero.utils.readCookie(Zotero.config.sessionCookieName);\n\t\tpassedParams['session'] = sessionKey;\n\t}\n\telse if(useConfigKey && Zotero.config.apiKey){\n\t\tpassedParams['key'] = Zotero.config.apiKey;\n\t}\n\t\n\t//Z.debug()\n\tif(passedParams.hasOwnProperty('sort') && passedParams['sort'] == 'undefined' ){\n\t\t//alert('fixed a bad sort');\n\t\tpassedParams['sort'] = 'asc';\n\t}\n\t\n\tZ.debug(passedParams, 4);\n\t\n\tvar queryString = '?';\n\tvar queryParamsArray = [];\n\tvar queryParamOptions = ['start',\n\t\t\t\t\t\t\t'limit',\n\t\t\t\t\t\t\t'order',\n\t\t\t\t\t\t\t'sort',\n\t\t\t\t\t\t\t'content',\n\t\t\t\t\t\t\t'include',\n\t\t\t\t\t\t\t'format',\n\t\t\t\t\t\t\t'q',\n\t\t\t\t\t\t\t'fq',\n\t\t\t\t\t\t\t'itemType',\n\t\t\t\t\t\t\t'itemKey',\n\t\t\t\t\t\t\t'collectionKey',\n\t\t\t\t\t\t\t'searchKey',\n\t\t\t\t\t\t\t'locale',\n\t\t\t\t\t\t\t'tag',\n\t\t\t\t\t\t\t'tagType',\n\t\t\t\t\t\t\t'key',\n\t\t\t\t\t\t\t'style',\n\t\t\t\t\t\t\t'linkMode',\n\t\t\t\t\t\t\t'linkwrap',\n\t\t\t\t\t\t\t'session',\n\t\t\t\t\t\t\t'newer',\n\t\t\t\t\t\t\t'since'\n\t];\n\tqueryParamOptions.sort();\n\t//build simple api query parameters object\n\tvar queryParams = {};\n\tqueryParamOptions.forEach(function(val){\n\t\tif(passedParams.hasOwnProperty(val) && (passedParams[val] !== '')){\n\t\t\tqueryParams[val] = passedParams[val];\n\t\t}\n\t});\n\t\n\t//take out itemKey if it is not a list\n\tif(passedParams.hasOwnProperty('target') && passedParams['target'] !== 'items'){\n\t\tif(queryParams.hasOwnProperty('itemKey') && queryParams['itemKey'].indexOf(',') == -1){\n\t\t\tdelete queryParams['itemKey'];\n\t\t}\n\t}\n\t\n\t//take out collectionKey if it is not a list\n\tif(passedParams.hasOwnProperty('target') && passedParams['target'] !== 'collections'){\n\t\tif(queryParams.hasOwnProperty('collectionKey') && queryParams['collectionKey'].indexOf(',') === -1){\n\t\t\tdelete queryParams['collectionKey'];\n\t\t}\n\t}\n\t\n\t//add each of the found queryParams onto array\n\tObject.keys(queryParams).forEach(function(key){\n\t\tvar value = queryParams[key];\n\t\tif(Array.isArray(value)){\n\t\t\tvalue.forEach(function(v){\n\t\t\t\tif(key == \"tag\" && v[0] == \"-\"){\n\t\t\t\t\tv = \"\\\\\" + v;\n\t\t\t\t}\n\t\t\t\tqueryParamsArray.push(encodeURIComponent(key) + '=' + encodeURIComponent(v));\n\t\t\t});\n\t\t}\n\t\telse{\n\t\t\tif(key == \"tag\" && value[0] == \"-\"){\n\t\t\t\tvalue = \"\\\\\" + value;\n\t\t\t}\n\t\t\tqueryParamsArray.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\n\t\t}\n\t});\n\t\n\t//build query string by concatenating array\n\tqueryString += queryParamsArray.join('&');\n\t//Z.debug(\"resulting queryString:\" + queryString);\n\treturn queryString;\n};\n\nZotero.ajax.apiRequestString = function(config){\n\treturn Zotero.ajax.apiRequestUrl(config) + Zotero.ajax.apiQueryString(config);\n};\n\nZotero.ajax.proxyWrapper = function(requestUrl, method){\n\tif(Zotero.config.proxy){\n\t\tif(!method){\n\t\t\tmethod = 'GET';\n\t\t}\n\t\treturn Zotero.config.proxyPath + \"?requestMethod=\" + method + \"&requestUrl=\" + encodeURIComponent(requestUrl);\n\t}\n\telse{\n\t\treturn requestUrl;\n\t}\n};\n\nZotero.ajax.parseQueryString = function(query){\n\t\n};\n\nZotero.ajax.webUrl = function(args){\n\t\n};\n\nZotero.ajax.downloadBlob = function(url){\n\treturn new Promise(function(resolve, reject){\n\t\tvar xhr = new XMLHttpRequest();\n\t\tvar blob;\n\t\t\n\t\txhr.open(\"GET\", url, true);\n\t\txhr.responseType = \"blob\";\n\t\t\n\t\txhr.addEventListener(\"load\", function () {\n\t\t\tif (xhr.status === 200) {\n\t\t\t\tZ.debug(\"downloadBlob Image retrieved. resolving\", 3);\n\t\t\t\tresolve(xhr.response);\n\t\t\t}\n\t\t\telse {\n\t\t\t\treject(xhr.response);\n\t\t\t}\n\t\t} );\n\t\t// Send XHR\n\t\txhr.send();\n\t});\n};\n\n","Zotero.ApiObject = function(){\n\tthis.instance = \"Zotero.ApiObject\";\n\tthis.version = 0;\n};\n\n//associate Entry with a library so we can update it on the server\nZotero.ApiObject.prototype.associateWithLibrary = function(library){\n\tvar apiObject = this;\n\tapiObject.owningLibrary = library;\n\tif(typeof this.apiObj.library == \"object\"){\n\t\tthis.apiObj.library.type = library.type;\n\t\tthis.apiObj.library.id = library.libraryID;\n\t}\n\treturn apiObject;\n};\n\nZotero.ApiObject.prototype.fieldComparer = function(attr){\n\tif(window.Intl){\n\t\tvar collator = new window.Intl.Collator();\n\t\treturn function(a, b){\n\t\t\treturn collator.compare(a.apiObj.data[attr], b.apiObj.data[attr]);\n\t\t};\n\t} else {\n\t\treturn function(a, b){\n\t\t\tif(a.apiObj.data[attr].toLowerCase() == b.apiObj.data[attr].toLowerCase()){\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tif(a.apiObj.data[attr].toLowerCase() < b.apiObj.data[attr].toLowerCase()){\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\treturn 1;\n\t\t};\n\t}\n};\n","Zotero.ApiResponse = function(response) {\n\tZ.debug(\"Zotero.ApiResponse\", 3);\n\tthis.totalResults = 0;\n\tthis.apiVersion = null;\n\tthis.lastModifiedVersion = 0;\n\tthis.linkHeader = '';\n\tthis.links = {};\n\t\n\tif(response){\n\t\tif(!response.isError){\n\t\t\tthis.isError = false;\n\t\t} else {\n\t\t\tthis.isError = true;\n\t\t}\n\t\tthis.data = response.data;\n\t\t//this.jqxhr = response.jqxhr;\n\t\tthis.parseResponse(response);\n\t}\n};\n\nZotero.ApiResponse.prototype.parseResponse = function(response){\n\tZ.debug(\"parseResponse\");\n\tvar apiResponse = this;\n\tapiResponse.jqxhr = response.jqxhr;\n\tapiResponse.status = response.jqxhr.status;\n\t//keep track of relevant headers\n\tapiResponse.lastModifiedVersion = response.jqxhr.getResponseHeader(\"Last-Modified-Version\");\n\tapiResponse.apiVersion = response.jqxhr.getResponseHeader(\"Zotero-API-Version\");\n\tapiResponse.backoff = response.jqxhr.getResponseHeader(\"Backoff\");\n\tapiResponse.retryAfter = response.jqxhr.getResponseHeader(\"Retry-After\");\n\tapiResponse.contentType = response.jqxhr.getResponseHeader(\"Content-Type\");\n\tapiResponse.linkHeader = response.jqxhr.getResponseHeader(\"Link\");\n\tapiResponse.totalResults = response.jqxhr.getResponseHeader(\"Total-Results\");\n\tif(apiResponse.backoff){\n\t\tapiResponse.backoff = parseInt(apiResponse.backoff, 10);\n\t}\n\tif(apiResponse.retryAfter){\n\t\tapiResponse.retryAfter = parseInt(apiResponse.retryAfter, 10);\n\t}\n\t//TODO: parse link header into individual links\n\tZ.debug(\"parse link header\");\n\tZ.debug(apiResponse.linkHeader);\n\tif(apiResponse.linkHeader){\n\t\tvar links = apiResponse.linkHeader.split(',');\n\t\tvar parsedLinks = {};\n\t\tvar linkRegex = /^<([^>]+)>; rel=\"([^\\\"]*)\"$/;\n\t\tfor(var i = 0; i < links.length; i++){\n\t\t\tvar matches = linkRegex.exec(links[i].trim());\n\t\t\tif(matches[2]){\n\t\t\t\tparsedLinks[matches[2]] = matches[1];\n\t\t\t}\n\t\t}\n\t\tapiResponse.parsedLinks = parsedLinks;\n\t}\n\tZ.debug(\"done parsing response\");\n};","/*\n * Make concurrent and sequential network requests, respecting backoff/retry-after\n * headers, and keeping concurrent requests below a certain limit.\n * \n * Push onto the queue individual or arrays of requestConfig objects\n * If there is room for requests and we are not currently backing off:\n *   start a sequential series, or individual request\n * When any request or set of requests finishes, we preprocess the response,\n * looking for backoff/retry-after to obey, and putting sequential responses\n * into an array. We then trigger the next waiting request.\n * \n */\n\nZotero.Net = function(){\n\tthis.deferredQueue = [];\n\tthis.numRunning = 0;\n\tthis.numConcurrent = 3;\n\tthis.backingOff = false;\n};\n\nZotero.Net.prototype.queueDeferred = function(){\n\tvar net = this;\n\tvar d = new J.Deferred();\n\tnet.deferredQueue.push(d);\n\treturn Promise.resolve(d);\n};\n\nZotero.Net.prototype.queueRequest = function(requestObject){\n\tZ.debug(\"Zotero.Net.queueRequest\", 3);\n\tvar net = this;\n\tvar resultPromise;\n\t\n\tif(Array.isArray(requestObject)){\n\t\tresultPromise = net.queueDeferred().then(function(){\n\t\t\tZ.debug(\"running sequential after queued deferred resolved\", 4);\n\t\t\treturn net.runSequential(requestObject);\n\t\t}).then(function(response){\n\t\t\tZ.debug(\"runSequential done\", 3);\n\t\t\tnet.queuedRequestDone();\n\t\t\treturn response;\n\t\t});\n\t}\n\telse {\n\t\tresultPromise = net.queueDeferred().then(function(){\n\t\t\tZ.debug(\"running concurrent after queued deferred resolved\", 4);\n\t\t\treturn net.runConcurrent(requestObject);\n\t\t}).then(function(response){\n\t\t\tZ.debug(\"done with queuedRequest\");\n\t\t\tnet.queuedRequestDone();\n\t\t\treturn response;\n\t\t});\n\t}\n\t\n\tnet.runNext();\n\treturn resultPromise.catch(function(error){\n\t\tZ.error(\"Error before leaving Zotero.Net\");\n\t\tZ.error(error);\n\t});\n};\n\nZotero.Net.prototype.runConcurrent = function(requestObject){\n\tZ.debug(\"Zotero.Net.runConcurrent\", 3);\n\treturn this.ajaxRequest(requestObject).then(function(response){\n\t\tZ.debug(\"done with runConcurrent request\");\n\t\treturn response;\n\t});\n};\n\n//run the set of requests serially\n//chaining each request onto the .then of the previous one, after\n//adding the previous response to a responses array that will be\n//returned via promise to the caller when all requests are complete\nZotero.Net.prototype.runSequential = function(requestObjects){\n\tZ.debug(\"Zotero.Net.runSequential\", 3);\n\tvar net = this;\n\tvar responses = [];\n\tvar seqPromise = Promise.resolve();\n\t\n\tfor(var i = 0; i < requestObjects.length; i++){\n\t\tvar requestObject = requestObjects[i];\n\t\tseqPromise = seqPromise.then(function(){\n\t\t\tvar p = net.ajaxRequest(requestObject)\n\t\t\t.then(function(response){\n\t\t\t\tZ.debug('pushing sequential response into result array');\n\t\t\t\tresponses.push(response);\n\t\t\t});\n\t\t\treturn p;\n\t\t});\n\t}\n\t\n\treturn seqPromise.then(function(){\n\t\tZ.debug(\"done with sequential aggregator promise - returning responses\");\n\t\treturn responses;\n\t});\n};\n\n//when one concurrent call, or a sequential series finishes, subtract it from the running\n//count and run the next if there is something waiting to be run\nZotero.Net.prototype.individualRequestDone = function(response){\n\tZ.debug(\"Zotero.Net.individualRequestDone\", 3);\n\tvar net = this;\n\t\n\t//check if we need to back off before making more requests\n\tvar wait = net.checkDelay(response);\n\tif(wait > 0){\n\t\tvar waitms = wait * 1000;\n\t\tnet.backingOff = true;\n\t\tvar waitExpiration = Date.now() + waitms;\n\t\tif(waitExpiration > net.waitingExpires){\n\t\t\tnet.waitingExpires = waitExpiration;\n\t\t}\n\t\twindow.setTimeout(net.runNext, waitms);\n\t}\n\t\n\treturn response;\n};\n\nZotero.Net.prototype.queuedRequestDone = function(response){\n\tZ.debug('queuedRequestDone', 3);\n\tvar net = this;\n\tnet.numRunning--;\n\tnet.runNext();\n\treturn response;\n};\n\nZotero.Net.prototype.runNext = function(){\n\tZ.debug(\"Zotero.Net.runNext\", 3);\n\tvar net = this;\n\tvar nowms = Date.now();\n\t\n\t//check if we're backing off and need to remain backing off,\n\t//or if we should now continue\n\tif(net.backingOff && (net.waitingExpires > (nowms - 100)) ){\n\t\tZ.debug(\"currently backing off\", 3);\n\t\tvar waitms = net.waitingExpires - nowms;\n\t\twindow.setTimeout(net.runNext, waitms);\n\t\treturn;\n\t}\n\telse if(net.backingOff && (net.waitingExpires <= (nowms - 100))){\n\t\tnet.backingOff = false;\n\t}\n\t\n\t//continue making requests up to the concurrent limit\n\tZ.debug(net.numRunning + \"/\" + net.numConcurrent + \" Running. \" + net.deferredQueue.length + \" queued.\", 3);\n\twhile((net.deferredQueue.length > 0) && (net.numRunning < net.numConcurrent)){\n\t\tnet.numRunning++;\n\t\tvar nextD = net.deferredQueue.shift();\n\t\tnextD.resolve();\n\t\tZ.debug(net.numRunning + \"/\" + net.numConcurrent + \" Running. \" + net.deferredQueue.length + \" queued.\", 3);\n\t}\n};\n\nZotero.Net.prototype.checkDelay = function(response){\n\tZ.debug('Zotero.Net.checkDelay');\n\tZ.debug(response);\n\tvar net = this;\n\tvar wait = 0;\n\tif(Array.isArray(response)){\n\t\tfor(var i = 0; i < response.length; i++){\n\t\t\tvar iwait = net.checkDelay(response[i]);\n\t\t\tif(iwait > wait){\n\t\t\t\twait = iwait;\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tif(response.status == 429){\n\t\t\twait = response.retryAfter;\n\t\t}\n\t\telse if(response.backoff){\n\t\t\twait = response.backoff;\n\t\t}\n\t}\n\treturn wait;\n};\n\nZotero.Net.prototype.ajaxRequest = function(requestConfig){\n\tZ.debug(\"Zotero.Net.ajaxRequest\", 3);\n\tvar net = this;\n\tvar defaultConfig = {\n\t\ttype:'GET',\n\t\theaders:{\n\t\t\t'Zotero-API-Version': Zotero.config.apiVersion,\n\t\t\t'Content-Type': 'application/json'\n\t\t},\n\t\tsuccess: function(response){\n\t\t\treturn response;\n\t\t},\n\t\terror: function(response){\n\t\t\tZ.error(\"ajaxRequest rejected:\" + response.jqxhr.status + \" - \" + response.jqxhr.responseText);\n\t\t\treturn response;\n\t\t}\n\t\t//cache:false\n\t};\n\tvar headers = Z.extend({}, defaultConfig.headers, requestConfig.headers);\n\tvar config = Z.extend({}, defaultConfig, requestConfig);\n\tconfig.headers = headers;\n\tif(typeof config.url == 'object'){\n\t\tconfig.url = Zotero.ajax.apiRequestString(config.url);\n\t}\n\tconfig.url = Zotero.ajax.proxyWrapper(config.url, config.type);\n\t\n\tif(!config.url){\n\t\tthrow \"No url specified in Zotero.Net.ajaxRequest\";\n\t}\n\t//rename success/error callbacks so J.ajax does not actually use them\n\t//and we can use them as es6 promise result functions with expected\n\t//single value arguments\n\tconfig.zsuccess = config.success;\n\tconfig.zerror = config.error;\n\tdelete config.success;\n\tdelete config.error;\n\t\n\tZ.debug(\"AJAX config\");\n\tZ.debug(config);\n\tvar ajaxpromise = new Promise(function(resolve, reject){\n\t\tnet.ajax(config)\n\t\t.then(function(request){\n\t\t\tvar data;\n\t\t\tswitch(request.responseType){\n\t\t\t\tcase \"json\":\n\t\t\t\tcase \"\":\n\t\t\t\t\ttry{\n\t\t\t\t\t\tdata = JSON.parse(request.response);\n\t\t\t\t\t} catch(err) {\n\t\t\t\t\t\tdata = request.response;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"text\":\n\t\t\t\t//case \"\":\n\t\t\t\tdefault:\n\t\t\t\t\tdata = request.response;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tvar r = new Zotero.ApiResponse({\n\t\t\t\tjqxhr: request,\n\t\t\t\tdata: data,\n\t\t\t\ttextStatus: request.responseText\n\t\t\t});\n\t\t\tresolve(r);\n\t\t}, function(request){\n\t\t\tvar r = new Zotero.ApiResponse({\n\t\t\t\tjqxhr: request,\n\t\t\t\ttextStatus: request.responseText,\n\t\t\t\tisError: true\n\t\t\t});\n\t\t\treject(r);\n\t\t});\n\t})\n\t.then(net.individualRequestDone.bind(net))\n\t.then(function(response){\n\t\t//now that we're done handling, reject\n\t\tif(response.isError){\n\t\t\tZ.error(\"re-throwing ApiResponse that was a rejection\");\n\t\t\tthrow response;\n\t\t}\n\t\treturn response;\n\t})\n\t.then(config.zsuccess, config.zerror);\n\t\n\treturn ajaxpromise;\n};\n\nZotero.Net.prototype.ajax = function(config){\n\tconfig = Zotero.extend({type:'GET'}, config);\n\tvar promise = new Promise(function(resolve, reject){\n\t\tvar req = new XMLHttpRequest();\n\t\tvar uri = config.url;\n\t\treq.open(config.type, uri);\n\t\t\n\t\tif(config.headers){\n\t\t\tObject.keys(config.headers).forEach(function(key){\n\t\t\t\tvar val = config.headers[key];\n\t\t\t\treq.setRequestHeader(key, val);\n\t\t\t});\n\t\t}\n\n\t\treq.send(config.data);\n\n\t\treq.onload = function(){\n\t\t\tZ.debug(\"XMLHttpRequest done\");\n\t\t\tZ.debug(req);\n\t\t\tif (req.status >= 200 && req.status < 300) {\n\t\t\t\tZ.debug(\"200-300 response: resolving Net.ajax promise\");\n\t\t\t\t// Performs the function \"resolve\" when this.status is equal to 2xx\n\t\t\t\tresolve(req);\n\t\t\t} else {\n\t\t\t\tZ.debug(\"not 200-300 response: rejecting Net.ajax promise\");\n\t\t\t\t// Performs the function \"reject\" when this.status is different than 2xx\n\t\t\t\treject(req);\n\t\t\t}\n\t\t};\n\t\treq.onerror = function() {\n\t\t\treject(req);\n\t\t};\n\t});\n\n\treturn promise;\n};\n\nZotero.net = new Zotero.Net();\n","/**\n * A user or group Zotero library. This is generally the top level object\n * through which interactions should happen. It houses containers for\n * Zotero API objects (collections, items, etc) and handles making requests\n * with particular API credentials, as well as storing data locally.\n * @param {string} type                 type of library, 'user' or 'group'\n * @param {int} libraryID            ID of the library\n * @param {string} libraryUrlIdentifier identifier used in urls, could be library id or user/group slug\n * @param {string} apiKey               key to use for API requests\n */\nZotero.Library = function(type, libraryID, libraryUrlIdentifier, apiKey){\n\tZ.debug(\"Zotero.Library constructor\", 3);\n\tZ.debug(\"Library Constructor: \" + type + \" \" + libraryID + \" \", 3);\n\tvar library = this;\n\tZ.debug(libraryUrlIdentifier, 4);\n\tlibrary.instance = \"Zotero.Library\";\n\tlibrary.libraryVersion = 0;\n\tlibrary.syncState = {\n\t\tearliestVersion: null,\n\t\tlatestVersion: null\n\t};\n\tlibrary._apiKey = apiKey || '';\n\t\n\tif(Zotero.config.librarySettings){\n\t\tlibrary.libraryBaseWebsiteUrl = Zotero.config.librarySettings.libraryPathString;\n\t}\n\telse{\n\t\tlibrary.libraryBaseWebsiteUrl = Zotero.config.baseWebsiteUrl;\n\t\tif(type == 'group'){\n\t\t\tlibrary.libraryBaseWebsiteUrl += 'groups/';\n\t\t}\n\t\tif(libraryUrlIdentifier){\n\t\t\tthis.libraryBaseWebsiteUrl += libraryUrlIdentifier + '/items';\n\t\t} else {\n\t\t\tZ.warn(\"no libraryUrlIdentifier specified\");\n\t\t}\n\t}\n\t//object holders within this library, whether tied to a specific library or not\n\tlibrary.items = new Zotero.Items();\n\tlibrary.items.owningLibrary = library;\n\tlibrary.itemKeys = [];\n\tlibrary.collections = new Zotero.Collections();\n\tlibrary.collections.libraryUrlIdentifier = library.libraryUrlIdentifier;\n\tlibrary.collections.owningLibrary = library;\n\tlibrary.tags = new Zotero.Tags();\n\tlibrary.searches = new Zotero.Searches();\n\tlibrary.searches.owningLibrary = library;\n\tlibrary.groups = new Zotero.Groups();\n\tlibrary.groups.owningLibrary = library;\n\tlibrary.deleted = new Zotero.Deleted();\n\tlibrary.deleted.owningLibrary = library;\n\t\n\tif(!type){\n\t\t//return early if library not specified\n\t\tZ.warn(\"No type specified for library\");\n\t\treturn;\n\t}\n\t//attributes tying instance to a specific Zotero library\n\tlibrary.type = type;\n\tlibrary.libraryType = type;\n\tlibrary.libraryID = libraryID;\n\tlibrary.libraryString = Zotero.utils.libraryString(library.libraryType, library.libraryID);\n\tlibrary.libraryUrlIdentifier = libraryUrlIdentifier;\n\t\n\t//initialize preferences object\n\tlibrary.preferences = new Zotero.Preferences(Zotero.store, library.libraryString);\n\t\n\t//initialize indexedDB if we're supposed to use it\n\t//detect safari until they fix their shit\n\tvar is_chrome = navigator.userAgent.indexOf('Chrome') > -1;\n\tvar is_explorer = navigator.userAgent.indexOf('MSIE') > -1;\n\tvar is_firefox = navigator.userAgent.indexOf('Firefox') > -1;\n\tvar is_safari = navigator.userAgent.indexOf(\"Safari\") > -1;\n\tvar is_opera = navigator.userAgent.toLowerCase().indexOf(\"op\") > -1;\n\tif ((is_chrome)&&(is_safari)) {is_safari=false;}\n\tif ((is_chrome)&&(is_opera)) {is_chrome=false;}\n\tif(is_safari) {\n\t\tZotero.config.useIndexedDB = false;\n\t\tZotero.warn(\"Safari detected; disabling indexedDB\");\n\t}\n\n\tif(Zotero.config.useIndexedDB === true){\n\t\tZ.debug(\"Library Constructor: indexedDB init\", 3);\n\t\tvar idbLibrary = new Zotero.Idb.Library(library.libraryString);\n\t\tidbLibrary.owningLibrary = this;\n\t\tlibrary.idbLibrary = idbLibrary;\n\t\tidbLibrary.init()\n\t\t.then(function(){\n\t\t\tZ.debug(\"Library Constructor: idbInitD Done\", 3);\n\t\t\tif(Zotero.config.preloadCachedLibrary === true){\n\t\t\t\tZ.debug(\"Library Constructor: preloading cached library\", 3);\n\t\t\t\tvar cacheLoadD = library.loadIndexedDBCache();\n\t\t\t\tcacheLoadD.then(function(){\n\t\t\t\t\t//TODO: any stuff that needs to execute only after cache is loaded\n\t\t\t\t\t//possibly fire new events to cause display to refresh after load\n\t\t\t\t\tZ.debug(\"Library Constructor: Library.items.itemsVersion: \" + library.items.itemsVersion, 3);\n\t\t\t\t\tZ.debug(\"Library Constructor: Library.collections.collectionsVersion: \" + library.collections.collectionsVersion, 3);\n\t\t\t\t\tZ.debug(\"Library Constructor: Library.tags.tagsVersion: \" + library.tags.tagsVersion, 3);\n\t\t\t\t\tZ.debug(\"Library Constructor: Triggering cachedDataLoaded\", 3);\n\t\t\t\t\tlibrary.trigger('cachedDataLoaded');\n\t\t\t\t},\n\t\t\t\tfunction(err){\n\t\t\t\t\tZ.error(\"Error loading cached library\");\n\t\t\t\t\tZ.error(err);\n\t\t\t\t\tthrow new Error(\"Error loading cached library\");\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\t//trigger cachedDataLoaded since we are done with that step\n\t\t\t\tlibrary.trigger('cachedDataLoaded');\n\t\t\t}\n\t\t},\n\t\tfunction(){\n\t\t\t//can't use indexedDB. Set to false in config and trigger error to notify user\n\t\t\tZotero.config.useIndexedDB = false;\n\t\t\tlibrary.trigger(\"indexedDBError\");\n\t\t\tlibrary.trigger('cachedDataLoaded');\n\t\t\tZ.error(\"Error initializing indexedDB. Promise rejected.\");\n\t\t\t//don't re-throw error, since we can still load data from the API\n\t\t});\n\t}\n\t\n\tlibrary.dirty = false;\n\t\n\t//set noop data-change callbacks\n\tlibrary.tagsChanged = function(){};\n\tlibrary.collectionsChanged = function(){};\n\tlibrary.itemsChanged = function(){};\n};\n/**\n * Items columns for which sorting is supported\n * @type {Array}\n */\nZotero.Library.prototype.sortableColumns = ['title',\n\t\t\t\t\t\t\t\t\t\t\t'creator',\n\t\t\t\t\t\t\t\t\t\t\t'itemType',\n\t\t\t\t\t\t\t\t\t\t\t'date',\n\t\t\t\t\t\t\t\t\t\t\t'year',\n\t\t\t\t\t\t\t\t\t\t\t'publisher',\n\t\t\t\t\t\t\t\t\t\t\t'publicationTitle',\n\t\t\t\t\t\t\t\t\t\t\t'journalAbbreviation',\n\t\t\t\t\t\t\t\t\t\t\t'language',\n\t\t\t\t\t\t\t\t\t\t\t'accessDate',\n\t\t\t\t\t\t\t\t\t\t\t'libraryCatalog',\n\t\t\t\t\t\t\t\t\t\t\t'callNumber',\n\t\t\t\t\t\t\t\t\t\t\t'rights',\n\t\t\t\t\t\t\t\t\t\t\t'dateAdded',\n\t\t\t\t\t\t\t\t\t\t\t'dateModified',\n\t\t\t\t\t\t\t\t\t\t\t/*'numChildren',*/\n\t\t\t\t\t\t\t\t\t\t\t'addedBy'\n\t\t\t\t\t\t\t\t\t\t\t/*'modifiedBy'*/];\n/**\n * Columns that can be displayed in an items table UI\n * @type {Array}\n */\nZotero.Library.prototype.displayableColumns = ['title',\n\t\t\t\t\t\t\t\t\t\t\t'creator',\n\t\t\t\t\t\t\t\t\t\t\t'itemType',\n\t\t\t\t\t\t\t\t\t\t\t'date',\n\t\t\t\t\t\t\t\t\t\t\t'year',\n\t\t\t\t\t\t\t\t\t\t\t'publisher',\n\t\t\t\t\t\t\t\t\t\t\t'publicationTitle',\n\t\t\t\t\t\t\t\t\t\t\t'journalAbbreviation',\n\t\t\t\t\t\t\t\t\t\t\t'language',\n\t\t\t\t\t\t\t\t\t\t\t'accessDate',\n\t\t\t\t\t\t\t\t\t\t\t'libraryCatalog',\n\t\t\t\t\t\t\t\t\t\t\t'callNumber',\n\t\t\t\t\t\t\t\t\t\t\t'rights',\n\t\t\t\t\t\t\t\t\t\t\t'dateAdded',\n\t\t\t\t\t\t\t\t\t\t\t'dateModified',\n\t\t\t\t\t\t\t\t\t\t\t'numChildren',\n\t\t\t\t\t\t\t\t\t\t\t'addedBy'\n\t\t\t\t\t\t\t\t\t\t\t/*'modifiedBy'*/];\n/**\n * Items columns that only apply to group libraries\n * @type {Array}\n */\nZotero.Library.prototype.groupOnlyColumns = ['addedBy'\n\t\t\t\t\t\t\t\t\t\t\t/*'modifiedBy'*/];\n\n/**\n * Sort function that converts strings to locale lower case before comparing,\n * however this is still not particularly effective at getting correct localized\n * sorting in modern browsers due to browser implementations being poor. What we\n * really want here is to strip diacritics first.\n * @param  {string} a [description]\n * @param  {string} b [description]\n * @return {int}   [description]\n */\nZotero.Library.prototype.comparer = function(){\n\tif(window.Intl){\n\t\treturn new window.Intl.Collator().compare;\n\t} else {\n\t\treturn function(a, b){\n\t\t\tif(a.toLocaleLowerCase() == b.toLocaleLowerCase()){\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tif(a.toLocaleLowerCase() < b.toLocaleLowerCase()){\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\treturn 1;\n\t\t};\n\t}\n};\n\n//Zotero library wrapper around jQuery ajax that returns a jQuery promise\n//@url String url to request or object for input to apiRequestUrl and query string\n//@type request method\n//@options jquery options that are not the default for Zotero requests\nZotero.Library.prototype.ajaxRequest = function(url, type, options){\n\tZ.debug(\"Library.ajaxRequest\", 3);\n\tif(!type){\n\t\ttype = 'GET';\n\t}\n\tif(!options){\n\t\toptions = {};\n\t}\n\tvar requestObject = {\n\t\turl: url,\n\t\ttype: type\n\t};\n\trequestObject = Z.extend({}, requestObject, options);\n\tZ.debug(requestObject, 3);\n\treturn Zotero.net.queueRequest(requestObject);\n};\n\n//Take an array of objects that specify Zotero API requests and perform them\n//in sequence.\n//return deferred that gets resolved when all requests have gone through.\n//Update versions after each request, otherwise subsequent writes won't go through.\n//or do we depend on specified callbacks to update versions if necessary?\n//fail on error?\n//request object must specify: url, method, body, headers, success callback, fail callback(?)\n\n/**\n * Take an array of objects that specify Zotero API requests and perform them\n * in sequence. Return a promise that gets resolved when all requests have\n * gone through.\n * @param  {[] Objects} requests Array of objects specifying requests to be made\n * @return {Promise}          Promise that resolves/rejects along with requests\n */\nZotero.Library.prototype.sequentialRequests = function(requests){\n\tZ.debug(\"Zotero.Library.sequentialRequests\", 3);\n\tvar library = this;\n\treturn Zotero.net.queueRequest(requests);\n};\n\n/**\n * Generate a website url based on a dictionary of variables and the configured\n * libraryBaseWebsiteUrl\n * @param  {Object} urlvars Dictionary of key/value variables\n * @return {string}         website url\n */\nZotero.Library.prototype.websiteUrl = function(urlvars){\n\tZ.debug(\"Zotero.library.websiteUrl\", 3);\n\tZ.debug(urlvars, 4);\n\tvar library = this;\n\t\n\tvar urlVarsArray = [];\n\tObject.keys(urlvars).forEach(function(key){\n\t\tvar value = urlvars[key];\n\t\tif(value === '') return;\n\t\turlVarsArray.push(key + '/' + value);\n\t});\n\turlVarsArray.sort();\n\tZ.debug(urlVarsArray, 4);\n\tvar pathVarsString = urlVarsArray.join('/');\n\t\n\treturn library.libraryBaseWebsiteUrl + '/' + pathVarsString;\n};\n\n\nZotero.Library.prototype.synchronize = function(){\n\t//get updated group metadata if applicable\n\t//  (this is an individual library method, so only necessary if this is\n\t//  a group library and we want to keep info about it)\n\t//sync library data\n\t//  get updated collections versions newer than current library version\n\t//  get updated searches versions newer than current library version\n\t//  get updated item versions newer than current library version\n\t//\n};\n\n/**\n * Make and process API requests to update the local library items based on the\n * versions we have locally. When the promise is resolved, we should have up to\n * date items in this library's items container, as well as saved to indexedDB\n * if configured to use it.\n * @return {Promise} Promise\n */\nZotero.Library.prototype.loadUpdatedItems = function(){\n\tZ.debug(\"Zotero.Library.loadUpdatedItems\", 3);\n\tvar library = this;\n\t//sync from the libraryVersion if it exists, otherwise use the itemsVersion, which is likely\n\t//derived from the most recent version of any individual item we have.\n\tvar syncFromVersion = library.libraryVersion ? library.libraryVersion : library.items.itemsVersion;\n\treturn Promise.resolve(library.updatedVersions(\"items\", syncFromVersion))\n\t.then(function(response){\n\t\tZ.debug(\"itemVersions resolved\", 3);\n\t\tZ.debug(\"items Last-Modified-Version: \" + response.lastModifiedVersion, 3);\n\t\tlibrary.items.updateSyncState(response.lastModifiedVersion);\n\t\t\n\t\tvar itemVersions = response.data;\n\t\tlibrary.itemVersions = itemVersions;\n\t\tvar itemKeys = [];\n\t\tObject.keys(itemVersions).forEach(function(key){\n\t\t\tvar val = itemVersions[key];\n\t\t\tvar item = library.items.getItem(key);\n\t\t\tif((!item) || (item.apiObj.key != val)){\n\t\t\t\titemKeys.push(key);\n\t\t\t}\n\t\t});\n\t\treturn library.loadItemsFromKeys(itemKeys);\n\t}).then(function(responses){\n\t\tZ.debug(\"loadItemsFromKeys resolved\", 3);\n\t\tlibrary.items.updateSyncedVersion();\n\t\t\n\t\t//TODO: library needs its own state\n\t\tvar displayParams = Zotero.state.getUrlVars();\n\t\tlibrary.buildItemDisplayView(displayParams);\n\t\t//save updated items to IDB\n\t\tif(Zotero.config.useIndexedDB){\n\t\t\tvar saveItemsD = library.idbLibrary.updateItems(library.items.objectArray);\n\t\t}\n\t});\n};\n\nZotero.Library.prototype.loadUpdatedCollections = function(){\n\tZ.debug(\"Zotero.Library.loadUpdatedCollections\", 3);\n\tvar library = this;\n\t//sync from the libraryVersion if it exists, otherwise use the collectionsVersion, which is likely\n\t//derived from the most recent version of any individual collection we have.\n\tZ.debug('library.collections.collectionsVersion:' + library.collections.collectionsVersion);\n\tvar syncFromVersion = library.libraryVersion ? library.libraryVersion : library.collections.collectionsVersion;\n\t//we need modified collectionKeys regardless, so load them\n\treturn library.updatedVersions(\"collections\", syncFromVersion)\n\t.then(function(response){\n\t\tZ.debug(\"collectionVersions finished\", 3);\n\t\tZ.debug(\"Collections Last-Modified-Version: \" + response.lastModifiedVersion, 3);\n\t\t//start the syncState version tracking. This should be the earliest version throughout\n\t\tlibrary.collections.updateSyncState(response.lastModifiedVersion);\n\t\t\n\t\tvar collectionVersions = response.data;\n\t\tlibrary.collectionVersions = collectionVersions;\n\t\tvar collectionKeys = [];\n\t\tObject.keys(collectionVersions).forEach(function(key){\n\t\t\tvar val = collectionVersions[key];\n\t\t\tvar c = library.collections.getCollection(key);\n\t\t\tif((!c) || (c.apiObj.version != val)){\n\t\t\t\tcollectionKeys.push(key);\n\t\t\t}\n\t\t});\n\t\tif(collectionKeys.length === 0){\n\t\t\tZ.debug(\"No collectionKeys need updating. resolving\", 3);\n\t\t\treturn response;\n\t\t}\n\t\telse {\n\t\t\tZ.debug(\"fetching collections by key\", 3);\n\t\t\treturn library.loadCollectionsFromKeys(collectionKeys)\n\t\t\t.then(function(){\n\t\t\t\tvar collections = library.collections;\n\t\t\t\tcollections.initSecondaryData();\n\t\t\t\t\n\t\t\t\tZ.debug(\"All updated collections loaded\", 3);\n\t\t\t\tlibrary.collections.updateSyncedVersion();\n\t\t\t\t//TODO: library needs its own state\n\t\t\t\tvar displayParams = Zotero.state.getUrlVars();\n\t\t\t\t//save updated collections to cache\n\t\t\t\tZ.debug(\"loadUpdatedCollections complete - saving collections to cache before resolving\", 3);\n\t\t\t\tZ.debug(\"collectionsVersion: \" + library.collections.collectionsVersion, 3);\n\t\t\t\t//library.saveCachedCollections();\n\t\t\t\t//save updated collections to IDB\n\t\t\t\tif(Zotero.config.useIndexedDB){\n\t\t\t\t\treturn library.idbLibrary.updateCollections(collections.collectionsArray);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t})\n\t.then(function(){\n\t\tZ.debug(\"done getting collection data. requesting deleted data\", 3);\n\t\treturn library.getDeleted(library.libraryVersion);\n\t})\n\t.then(function(response){\n\t\tZ.debug(\"got deleted collections data: removing local copies\", 3);\n\t\tZ.debug(library.deleted);\n\t\tif(library.deleted.deletedData.collections && library.deleted.deletedData.collections.length > 0 ){\n\t\t\tlibrary.collections.removeLocalCollections(library.deleted.deletedData.collections);\n\t\t}\n\t});\n};\n\nZotero.Library.prototype.loadUpdatedTags = function(){\n\tZ.debug(\"Zotero.Library.loadUpdatedTags\", 3);\n\tvar library = this;\n\tZ.debug(\"tagsVersion: \" + library.tags.tagsVersion, 3);\n\treturn Promise.resolve(library.loadAllTags({since:library.tags.tagsVersion}))\n\t.then(function(){\n\t\tZ.debug(\"done getting tags, request deleted tags data\", 3);\n\t\treturn library.getDeleted(library.libraryVersion);\n\t})\n\t.then(function(response){\n\t\tZ.debug(\"got deleted tags data\");\n\t\tif(library.deleted.deletedData.tags && library.deleted.deletedData.tags.length > 0 ){\n\t\t\tlibrary.tags.removeTags(library.deleted.deletedData.tags);\n\t\t}\n\t\t//save updated tags to IDB\n\t\tif(Zotero.config.useIndexedDB){\n\t\t\tZ.debug(\"saving updated tags to IDB\", 3);\n\t\t\tvar saveTagsD = library.idbLibrary.updateTags(library.tags.tagsArray);\n\t\t}\n\t});\n};\n\nZotero.Library.prototype.getDeleted = function(version) {\n\tZ.debug(\"Zotero.Library.getDeleted\", 3);\n\tvar library = this;\n\tvar urlconf = {\n\t\ttarget:'deleted',\n\t\tlibraryType:library.libraryType,\n\t\tlibraryID:library.libraryID,\n\t\tsince:version\n\t};\n\t\n\t//if there is already a request working, create a new promise to resolve\n\t//when the actual request finishes\n\tif(library.deleted.pending){\n\t\tZ.debug(\"getDeleted resolving with previously pending promise\");\n\t\treturn Promise.resolve(library.deleted.pendingPromise);\n\t}\n\t\n\t//don't fetch again if version we'd be requesting is between\n\t//deleted.newer and delete.deleted versions, just use that one\n\tZ.debug(\"version:\" + version);\n\tZ.debug('sinceVersion:' + library.deleted.sinceVersion);\n\tZ.debug('untilVersion:' + library.deleted.untilVersion);\n\t\n\tif(library.deleted.untilVersion &&\n\t\tversion >= library.deleted.sinceVersion /*&&\n\t\tversion < library.deleted.untilVersion*/){\n\t\tZ.debug(\"deletedVersion matches requested: immediately resolving\");\n\t\treturn Promise.resolve(library.deleted.deletedData);\n\t}\n\t\n\tlibrary.deleted.pending = true;\n\tlibrary.deleted.pendingPromise = library.ajaxRequest(urlconf)\n\t.then(function(response){\n\t\tZ.debug(\"got deleted response\");\n\t\tlibrary.deleted.deletedData = response.data;\n\t\tZ.debug(\"Deleted Last-Modified-Version:\" + response.lastModifiedVersion, 3);\n\t\tlibrary.deleted.untilVersion = response.lastModifiedVersion;\n\t\tlibrary.deleted.sinceVersion = version;\n\t}).then(function(response){\n\t\tZ.debug(\"cleaning up deleted pending\");\n\t\tlibrary.deleted.pending = false;\n\t\tlibrary.deleted.pendingPromise = false;\n\t});\n\t\n\treturn library.deleted.pendingPromise;\n};\n\nZotero.Library.prototype.processDeletions = function(deletions){\n\tvar library = this;\n\t//process deleted collections\n\tlibrary.collections.processDeletions(deletions.collections);\n\t//process deleted items\n\tlibrary.items.processDeletions(deletions.items);\n};\n\n//Get a full bibliography from the API for web based citating\nZotero.Library.prototype.loadFullBib = function(itemKeys, style){\n\tvar library = this;\n\tvar itemKeyString = itemKeys.join(',');\n\tvar urlconfig = {\n\t\t'target':'items',\n\t\t'libraryType':library.libraryType,\n\t\t'libraryID':library.libraryID,\n\t\t'itemKey':itemKeyString,\n\t\t'format':'bib',\n\t\t'linkwrap':'1'\n\t};\n\tif(itemKeys.length == 1){\n\t\turlconfig.target = 'item';\n\t}\n\tif(style){\n\t\turlconfig['style'] = style;\n\t}\n\t\n\tvar loadBibPromise = library.ajaxRequest(urlconfig)\n\t.then(function(response){\n\t\treturn response.data;\n\t});\n\t\n\treturn loadBibPromise;\n};\n\n//load bib for a single item from the API\nZotero.Library.prototype.loadItemBib = function(itemKey, style) {\n\tZ.debug(\"Zotero.Library.loadItemBib\", 3);\n\tvar library = this;\n\tvar urlconfig = {\n\t\t'target':'item',\n\t\t'libraryType':library.libraryType,\n\t\t'libraryID':library.libraryID,\n\t\t'itemKey':itemKey,\n\t\t'content':'bib'\n\t};\n\tif(style){\n\t\turlconfig['style'] = style;\n\t}\n\t\n\tvar itemBibPromise = library.ajaxRequest(urlconfig)\n\t.then(function(response){\n\t\tvar item = new Zotero.Item(response.data);\n\t\tvar bibContent = item.apiObj.bib;\n\t\treturn bibContent;\n\t});\n\t\n\treturn itemBibPromise;\n};\n\n//load library settings from Zotero API and return a promise that gets resolved with\n//the Zotero.Preferences object for this library\nZotero.Library.prototype.loadSettings = function() {\n\tZ.debug(\"Zotero.Library.loadSettings\", 3);\n\tvar library = this;\n\tvar urlconfig = {\n\t\t'target':'settings',\n\t\t'libraryType':library.libraryType,\n\t\t'libraryID':library.libraryID\n\t};\n\t\n\treturn library.ajaxRequest(urlconfig)\n\t.then(function(response){\n\t\tvar resultObject;\n\t\tif(typeof response.data == 'string'){\n\t\t\tresultObject = JSON.parse(response.data);\n\t\t}\n\t\telse {\n\t\t\tresultObject = response.data;\n\t\t}\n\t\t//save the full settings object so we have it available if we need to write,\n\t\t//even if it has settings we don't use or know about\n\t\tlibrary.preferences.setPref('settings', resultObject);\n\t\t\n\t\t//pull out the settings we know we care about so we can query them directly\n\t\tif(resultObject.tagColors){\n\t\t\tvar tagColors = resultObject.tagColors.value;\n\t\t\tlibrary.preferences.setPref('tagColors', tagColors);\n\t\t\t/*\n\t\t\tfor(var i = 0; i < tagColors.length; i++){\n\t\t\t\tvar t = library.tags.getTag(tagColors[i].name);\n\t\t\t\tif(t){\n\t\t\t\t\tt.color = tagColors[i].color;\n\t\t\t\t}\n\t\t\t}\n\t\t\t*/\n\t\t}\n\t\t\n\t\tlibrary.trigger('settingsLoaded');\n\t\treturn library.preferences;\n\t});\n};\n\n//take an array of tags and return subset of tags that should be colored, along with\n//the colors they should be\nZotero.Library.prototype.matchColoredTags = function(tags) {\n\tvar library = this;\n\tvar i;\n\tvar tagColorsSettings = library.preferences.getPref(\"tagColors\");\n\tif(!tagColorsSettings) return [];\n\t\n\tvar tagColorsMap = {};\n\tfor(i = 0; i < tagColorsSettings.length; i++){\n\t\ttagColorsMap[tagColorsSettings[i].name.toLowerCase()] = tagColorsSettings[i].color;\n\t}\n\tvar resultTags = [];\n\t\n\tfor(i = 0; i < tags.length; i++){\n\t\tif(tagColorsMap.hasOwnProperty(tags[i]) ) {\n\t\t\tresultTags.push(tagColorsMap[tags[i]]);\n\t\t}\n\t}\n\treturn resultTags;\n};\n\n/**\n * Duplicate existing Items from this library and save to foreignLibrary\n * with relationships indicating the ties. At time of writing, Zotero client\n * saves the relationship with either the destination group of two group\n * libraries or the personal library.\n * @param  {Zotero.Item[]} items\n * @param  {Zotero.Library} foreignLibrary\n * @return {Promise.Zotero.Item[]} - newly created items\n */\nZotero.Library.prototype.sendToLibrary = function(items, foreignLibrary){\n\tvar foreignItems = [];\n\tfor(var i = 0; i < items.length; i++){\n\t\tvar item = items[i];\n\t\tvar transferData = item.emptyJsonItem();\n\t\ttransferData.data = Z.extend({}, items[i].apiObj.data);\n\t\t//clear data that shouldn't be transferred:itemKey, collections\n\t\ttransferData.data.key = '';\n\t\ttransferData.data.version = 0;\n\t\ttransferData.data.collections = [];\n\t\tdelete transferData.data.dateModified;\n\t\tdelete transferData.data.dateAdded;\n\t\t\n\t\tvar newForeignItem = new Zotero.Item(transferData);\n\t\t\n\t\tnewForeignItem.pristine = Z.extend({}, newForeignItem.apiObj);\n\t\tnewForeignItem.initSecondaryData();\n\t\t\n\t\t//set relationship to tie to old item\n\t\tif(!newForeignItem.apiObj.data.relations){\n\t\t\tnewForeignItem.apiObj.data.relations = {};\n\t\t}\n\t\tnewForeignItem.apiObj.data.relations['owl:sameAs'] = Zotero.url.relationUrl(item.owningLibrary.libraryType, item.owningLibrary.libraryID, item.key);\n\t\tforeignItems.push(newForeignItem);\n\t}\n\treturn foreignLibrary.items.writeItems(foreignItems);\n};\n\n/*METHODS FOR WORKING WITH THE ENTIRE LIBRARY -- NOT FOR GENERAL USE */\n\n//sync pull:\n//upload changed data\n// get updatedVersions for collections\n// get updatedVersions for searches\n// get upatedVersions for items\n// (sanity check versions we have for individual objects?)\n// loadCollectionsFromKeys\n// loadSearchesFromKeys\n// loadItemsFromKeys\n// process updated objects:\n//      ...\n// getDeletedData\n// process deleted\n// checkConcurrentUpdates (compare Last-Modified-Version from collections?newer request to one from /deleted request)\n\nZotero.Library.prototype.updatedVersions = function(target=\"items\", version=this.libraryVersion){\n\tZ.debug(\"Library.updatedVersions\", 3);\n\tvar library = this;\n\tvar urlconf = {\n\t\ttarget: target,\n\t\tformat: 'versions',\n\t\tlibraryType: library.libraryType,\n\t\tlibraryID: library.libraryID,\n\t\tsince: version\n\t};\n\treturn library.ajaxRequest(urlconf);\n};\n\n//Download and save information about every item in the library\n//keys is an array of itemKeys from this library that we need to download\nZotero.Library.prototype.loadItemsFromKeys = function(keys){\n\tZotero.debug(\"Zotero.Library.loadItemsFromKeys\", 3);\n\tvar library = this;\n\treturn library.loadFromKeys(keys, \"items\");\n};\n\n//keys is an array of collectionKeys from this library that we need to download\nZotero.Library.prototype.loadCollectionsFromKeys = function(keys){\n\tZotero.debug(\"Zotero.Library.loadCollectionsFromKeys\", 3);\n\tvar library = this;\n\treturn library.loadFromKeys(keys, \"collections\");\n};\n\n//keys is an array of searchKeys from this library that we need to download\nZotero.Library.prototype.loadSeachesFromKeys = function(keys){\n\tZotero.debug(\"Zotero.Library.loadSearchesFromKeys\", 3);\n\tvar library = this;\n\treturn library.loadFromKeys(keys, \"searches\");\n};\n\nZotero.Library.prototype.loadFromKeys = function(keys, objectType){\n\tZotero.debug(\"Zotero.Library.loadFromKeys\", 3);\n\tif(!objectType) objectType = 'items';\n\tvar library = this;\n\tvar keyslices = [];\n\twhile(keys.length > 0){\n\t\tkeyslices.push(keys.splice(0, 50));\n\t}\n\t\n\tvar requestObjects = [];\n\tkeyslices.forEach(function(keyslice){\n\t\tvar keystring = keyslice.join(',');\n\t\tswitch (objectType) {\n\t\t\tcase \"items\":\n\t\t\t\trequestObjects.push({\n\t\t\t\t\turl: {\n\t\t\t\t\t\t'target':'items',\n\t\t\t\t\t\t'targetModifier':null,\n\t\t\t\t\t\t'itemKey':keystring,\n\t\t\t\t\t\t'limit':50,\n\t\t\t\t\t\t'libraryType':library.libraryType,\n\t\t\t\t\t\t'libraryID':library.libraryID\n\t\t\t\t\t},\n\t\t\t\t\ttype: 'GET',\n\t\t\t\t\tsuccess: library.processLoadedItems.bind(library)\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase \"collections\":\n\t\t\t\trequestObjects.push({\n\t\t\t\t\turl: {\n\t\t\t\t\t\t'target':'collections',\n\t\t\t\t\t\t'targetModifier':null,\n\t\t\t\t\t\t'collectionKey':keystring,\n\t\t\t\t\t\t'limit':50,\n\t\t\t\t\t\t'libraryType':library.libraryType,\n\t\t\t\t\t\t'libraryID':library.libraryID\n\t\t\t\t\t},\n\t\t\t\t\ttype: 'GET',\n\t\t\t\t\tsuccess: library.processLoadedCollections.bind(library)\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase \"searches\":\n\t\t\t\trequestObjects.push({\n\t\t\t\t\turl: {\n\t\t\t\t\t\t'target':'searches',\n\t\t\t\t\t\t'targetModifier':null,\n\t\t\t\t\t\t'searchKey':keystring,\n\t\t\t\t\t\t'limit':50,\n\t\t\t\t\t\t'libraryType':library.libraryType,\n\t\t\t\t\t\t'libraryID':library.libraryID\n\t\t\t\t\t},\n\t\t\t\t\ttype: 'GET'\n\t\t\t\t\t//success: library.processLoadedSearches.bind(library)\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t}\n\t});\n\t\n\tvar promises = [];\n\tfor(var i = 0; i < requestObjects.length; i++){\n\t\tpromises.push(Zotero.net.queueRequest(requestObjects[i]));\n\t}\n\treturn Promise.all(promises);\n\t/*\n\treturn Zotero.net.queueRequest(requestObjects);\n\t*/\n};\n\n//publishes: displayedItemsUpdated\n//assume we have up to date information about items in indexeddb.\n//build a list of indexedDB filter requests to then intersect to get final result\nZotero.Library.prototype.buildItemDisplayView = function(params) {\n\tZ.debug(\"Zotero.Library.buildItemDisplayView\", 3);\n\tZ.debug(params, 4);\n\t//start with list of all items if we don't have collectionKey\n\t//otherwise get the list of items in that collection\n\tvar library = this;\n\t//short-circuit if we don't have an initialized IDB yet\n\tif(!library.idbLibrary.db){\n\t\treturn Promise.resolve([]);\n\t}\n\t\n\tvar filterPromises = [];\n\tif(params.collectionKey){\n\t\tif(params.collectionKey == 'trash'){\n\t\t\tfilterPromises.push(library.idbLibrary.filterItems('deleted', 1));\n\t\t}\n\t\telse{\n\t\t\tfilterPromises.push(library.idbLibrary.filterItems('collectionKeys', params.collectionKey));\n\t\t}\n\t}\n\telse {\n\t\tfilterPromises.push(library.idbLibrary.getOrderedItemKeys('title'));\n\t}\n\t\n\t//filter by selected tags\n\tvar selectedTags = params.tag || [];\n\tif(typeof selectedTags == 'string') selectedTags = [selectedTags];\n\tfor(var i = 0; i < selectedTags.length; i++){\n\t\tZ.debug('adding selected tag filter', 3);\n\t\tfilterPromises.push(library.idbLibrary.filterItems('itemTagStrings', selectedTags[i]));\n\t}\n\t\n\t//TODO: filter by search term. \n\t//(need full text array or to decide what we're actually searching on to implement this locally)\n\t\n\t//when all the filters have been applied, combine and sort\n\treturn Promise.all(filterPromises)\n\t.then(function(results){\n\t\tvar i;\n\t\tfor(i = 0; i < results.length; i++){\n\t\t\tZ.debug(\"result from filterPromise: \" + results[i].length, 3);\n\t\t\tZ.debug(results[i], 3);\n\t\t}\n\t\tvar finalItemKeys = library.idbLibrary.intersectAll(results);\n\t\tvar itemsArray = library.items.getItems(finalItemKeys);\n\t\t\n\t\tZ.debug(\"All filters applied - Down to \" + itemsArray.length + ' items displayed', 3);\n\t\t\n\t\tZ.debug(\"remove child items and, if not viewing trash, deleted items\", 3);\n\t\tvar displayItemsArray = [];\n\t\tfor(i = 0; i < itemsArray.length; i++){\n\t\t\tif(itemsArray[i].apiObj.data.parentItem){\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t\n\t\t\tif(params.collectionKey != 'trash' && itemsArray[i].apiObj.deleted){\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t\n\t\t\tdisplayItemsArray.push(itemsArray[i]);\n\t\t}\n\t\t\n\t\t//sort displayedItemsArray by given or configured column\n\t\tvar orderCol = params['order'] || 'title';\n\t\tvar sort = params['sort'] || 'asc';\n\t\tZ.debug(\"Sorting by \" + orderCol + \" - \" + sort, 3);\n\t\t\n\t\tvar comparer = Zotero.Library.prototype.comparer();\n\t\t\n\t\tdisplayItemsArray.sort(function(a, b){\n\t\t\tvar aval = a.get(orderCol);\n\t\t\tvar bval = b.get(orderCol);\n\t\t\t\n\t\t\treturn comparer(aval, bval);\n\t\t});\n\t\t\n\t\tif(sort == 'desc'){\n\t\t\tZ.debug(\"sort is desc - reversing array\", 4);\n\t\t\tdisplayItemsArray.reverse();\n\t\t}\n\t\t\n\t\t//publish event signalling we're done\n\t\tZ.debug(\"triggering publishing displayedItemsUpdated\", 3);\n\t\tlibrary.trigger(\"displayedItemsUpdated\");\n\t\treturn displayItemsArray;\n\t});\n};\n\nZotero.Library.prototype.trigger = function(eventType, data){\n\tvar library = this;\n\tZotero.trigger(eventType, data, library.libraryString);\n};\n\nZotero.Library.prototype.listen = function(events, handler, data){\n\tvar library = this;\n\tvar filter = library.libraryString;\n\tZotero.listen(events, handler, data, filter);\n};\n","Zotero.Container = function(){\n\t\n};\n\nZotero.Container.prototype.initSecondaryData = function(){\n\t\n};\n\nZotero.Container.prototype.addObject = function(object){\n\tZotero.debug(\"Zotero.Container.addObject\", 4);\n\tvar container = this;\n\tcontainer.objectArray.push(object);\n\tcontainer.objectMap[object.key] = object;\n\tif(container.owningLibrary){\n\t\tobject.associateWithLibrary(container.owningLibrary);\n\t}\n\t\n\treturn container;\n};\n\nZotero.Container.prototype.fieldComparer = function(field){\n\tif(window.Intl){\n\t\tvar collator = new window.Intl.Collator();\n\t\treturn function(a, b){\n\t\t\treturn collator.compare(a.apiObj.data[field], b.apiObj.data[field]);\n\t\t};\n\t} else {\n\t\treturn function(a, b){\n\t\t\tif(a.apiObj.data[field].toLowerCase() == b.apiObj.data[field].toLowerCase()){\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tif(a.apiObj.data[field].toLowerCase() < b.apiObj.data[field].toLowerCase()){\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\treturn 1;\n\t\t};\n\t}\n};\n\nZotero.Container.prototype.getObject = function(key){\n\tvar container = this;\n\tif(container.objectMap.hasOwnProperty(key)){\n\t\treturn container.objectMap[key];\n\t}\n\telse{\n\t\treturn false;\n\t}\n};\n\nZotero.Container.prototype.getObjects = function(keys){\n\tvar container = this;\n\tvar objects = [];\n\tvar object;\n\tfor(var i = 0; i < keys.length; i++){\n\t\tobject = container.getObject(keys[i]);\n\t\tif(object){\n\t\t\tobjects.push(object);\n\t\t}\n\t}\n\treturn objects;\n};\n\nZotero.Container.prototype.removeObject = function(key){\n\tvar container = this;\n\tif(container.objectMap.hasOwnProperty(key)){\n\t\tdelete container.objectmap[key];\n\t\tcontainer.initSecondaryData();\n\t}\n};\n\nZotero.Container.prototype.removeObjects = function(keys){\n\tvar container = this;\n\t//delete Objects from objectMap;\n\tfor(var i = 0; i < keys.length; i++){\n\t\tdelete container.objectMap[keys[i]];\n\t}\n\t\n\t//rebuild array\n\tcontainer.initSecondaryData();\n};\n\nZotero.Container.prototype.writeObjects = function(objects){\n\t//TODO:implement\n};\n\n//generate keys for objects about to be written if they are new\nZotero.Container.prototype.assignKeys = function(objectsArray){\n\tvar object;\n\tfor(var i = 0; i < objectsArray.length; i++){\n\t\tobject = objectsArray[i];\n\t\tvar key = object.get('key');\n\t\tif(!key) {\n\t\t\tvar newObjectKey = Zotero.utils.getKey();\n\t\t\tobject.set(\"key\", newObjectKey);\n\t\t\tobject.set(\"version\", 0);\n\t\t}\n\t}\n\treturn objectsArray;\n};\n\n//split an array of objects into chunks to write over multiple api requests\nZotero.Container.prototype.chunkObjectsArray = function(objectsArray){\n\tvar chunkSize = 50;\n\tvar writeChunks = [];\n\t\n\tfor(var i = 0; i < objectsArray.length; i = i + chunkSize){\n\t\twriteChunks.push(objectsArray.slice(i, i+chunkSize));\n\t}\n\t\n\treturn writeChunks;\n};\n\nZotero.Container.prototype.rawChunks = function(chunks){\n\tvar rawChunkObjects = [];\n\t\n\tfor(var i = 0; i < chunks.length; i++){\n\t\trawChunkObjects[i] = [];\n\t\tfor(var j = 0; j < chunks[i].length; j++){\n\t\t\trawChunkObjects[i].push(chunks[i][j].writeApiObj());\n\t\t}\n\t}\n\treturn rawChunkObjects;\n};\n\n/**\n * Update syncState property on container to keep track of updates that occur during sync process.\n * Set earliestVersion to MIN(earliestVersion, version).\n * Set latestVersion to MAX(latestVersion, version).\n * This should be called with the modifiedVersion header for each response tied to this container\n * during a sync process.\n * @param  {Zotero.Container} container\n * @param  {int} version\n * @return {null}\n */\nZotero.Container.prototype.updateSyncState = function(version) {\n\tvar container = this;\n\tZ.debug(\"updateSyncState: \" + version, 3);\n\tif(!container.hasOwnProperty('syncState')){\n\t\tZ.debug(\"no syncState property\");\n\t\tthrow new Error(\"Attempt to update sync state of object with no syncState property\");\n\t}\n\tif(container.syncState.earliestVersion === null){\n\t\tcontainer.syncState.earliestVersion = version;\n\t}\n\tif(container.syncState.latestVersion === null){\n\t\tcontainer.syncState.latestVersion = version;\n\t}\n\tif(version < container.syncState.earliestVersion){\n\t\tcontainer.syncState.earliestVersion = version;\n\t}\n\tif(version > container.syncState.latestVersion){\n\t\tcontainer.syncState.latestVersion = version;\n\t}\n\tZ.debug(\"done updating sync state\", 3);\n};\n\nZotero.Container.prototype.updateSyncedVersion = function(versionField) {\n\tvar container = this;\n\tif(container.syncState.earliestVersion !== null &&\n\t\t(container.syncState.earliestVersion == container.syncState.latestVersion) ){\n\t\tcontainer.version = container.syncState.latestVersion;\n\t\tcontainer.synced = true;\n\t}\n\telse if(container.syncState.earliestVersion !== null) {\n\t\tcontainer.version = container.syncState.earliestVersion;\n\t}\n};\n\nZotero.Container.prototype.processDeletions = function(deletedKeys) {\n\tvar container = this;\n\tfor(var i = 0; i < deletedKeys.length; i++){\n\t\tvar localObject = container.get(deletedKeys[i]);\n\t\tif(localObject !== false){\n\t\t\t//still have object locally\n\t\t\tif(localObject.synced === true){\n\t\t\t\t//our object is not modified, so delete it as the server thinks we should\n\t\t\t\tcontainer.removeObjects([deletedKeys[i]]);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t//TODO: conflict resolution\n\t\t\t}\n\t\t}\n\t}\n};\n\n//update items appropriately based on response to multi-write request\n//for success:\n//  update objectKey if item doesn't have one yet (newly created item)\n//  update itemVersion to response's Last-Modified-Version header\n//  mark as synced\n//for unchanged:\n//  don't need to do anything? itemVersion should remain the same?\n//  mark as synced if not already?\n//for failed:\n//  add the failure to the object under writeFailure\n//  don't mark as synced\n//  calling code should check for writeFailure after the written objects\n//  are returned\nZotero.Container.prototype.updateObjectsFromWriteResponse = function(objectsArray, response){\n\tZ.debug(\"Zotero.Container.updateObjectsFromWriteResponse\", 3);\n\tZ.debug(\"statusCode: \" + response.status, 3);\n\tvar data = response.data;\n\tif(response.status == 200){\n\t\tZ.debug(\"newLastModifiedVersion: \" + response.lastModifiedVersion, 3);\n\t\t//make sure writes were actually successful and\n\t\t//update the itemKey for the parent\n\t\tif(data.hasOwnProperty('success')){\n\t\t\t//update each successfully written item, possibly with new itemKeys\n\t\t\tObject.keys(data.success).forEach(function(ind){\n\t\t\t\tvar i = parseInt(ind, 10);\n\t\t\t\tvar key = data.success[ind];\n\t\t\t\tvar object = objectsArray[i];\n\t\t\t\t//throw error if objectKey mismatch\n\t\t\t\tif(object.key !== \"\" && object.key !== key){\n\t\t\t\t\tthrow new Error(\"object key mismatch in multi-write response\");\n\t\t\t\t}\n\t\t\t\tif(object.key === ''){\n\t\t\t\t\tobject.updateObjectKey(key);\n\t\t\t\t}\n\t\t\t\tobject.set('version', response.lastModifiedVersion);\n\t\t\t\tobject.synced = true;\n\t\t\t\tobject.writeFailure = false;\n\t\t\t});\n\t\t}\n\t\tif(data.hasOwnProperty('failed')){\n\t\t\tZ.debug(\"updating objects with failed writes\", 3);\n\t\t\tObject.keys(data.failed).forEach(function(ind){\n\t\t\t\tvar failure = data.failed[ind];\n\t\t\t\tZ.error(\"failed write \" + ind + \" - \" + failure);\n\t\t\t\tvar i = parseInt(ind, 10);\n\t\t\t\tvar object = objectsArray[i];\n\t\t\t\tobject.writeFailure = failure;\n\t\t\t});\n\t\t}\n\t}\n\telse if(response.status == 204){\n\t\t//single item put response, this probably should never go to this function\n\t\tobjectsArray[0].synced = true;\n\t}\n};\n\n//return the key as a string when passed an argument that \n//could be either a string key or an object with a key property\nZotero.Container.prototype.extractKey = function(object){\n\tif(typeof object == 'string'){\n\t\treturn object;\n\t}\n\treturn object.get('key');\n};\n","Zotero.Collections = function(jsonBody){\n\tvar collections = this;\n\tthis.instance = \"Zotero.Collections\";\n\tthis.version = 0;\n\tthis.syncState = {\n\t\tearliestVersion: null,\n\t\tlatestVersion: null\n\t};\n\tthis.collectionObjects = {};\n\tthis.collectionsArray = [];\n\tthis.objectMap = this.collectionObjects;\n\tthis.objectArray = this.collectionsArray;\n\tthis.dirty = false;\n\tthis.loaded = false;\n\t\n\tif(jsonBody){\n\t\tthis.addCollectionsFromJson(jsonBody);\n\t\tthis.initSecondaryData();\n\t}\n};\n\nZotero.Collections.prototype = new Zotero.Container();\n//build up secondary data necessary to rendering and easy operations but that\n//depend on all collections already being present\nZotero.Collections.prototype.initSecondaryData = function(){\n\tZ.debug(\"Zotero.Collections.initSecondaryData\", 3);\n\tvar collections = this;\n\t\n\t//rebuild collectionsArray\n\tcollections.collectionsArray = [];\n\tObject.keys(collections.collectionObjects).forEach(function(key){\n\t\tvar collection = collections.collectionObjects[key];\n\t\tcollections.collectionsArray.push(collection);\n\t});\n\t\n\tcollections.collectionsArray.sort(Zotero.ApiObject.prototype.fieldComparer('name'));\n\tcollections.nestCollections();\n\tcollections.assignDepths(0, collections.collectionsArray);\n};\n\n//take Collection XML and insert a Collection object\nZotero.Collections.prototype.addCollection = function(collection){\n\tthis.addObject(collection);\n\treturn this;\n};\n\nZotero.Collections.prototype.addCollectionsFromJson = function(jsonBody){\n\tZ.debug(\"addCollectionsFromJson\");\n\tZ.debug(jsonBody);\n\tvar collections = this;\n\tvar collectionsAdded = [];\n\tjsonBody.forEach(function(collectionObj){\n\t\tvar collection = new Zotero.Collection(collectionObj);\n\t\tcollections.addObject(collection);\n\t\tcollectionsAdded.push(collection);\n\t});\n\treturn collectionsAdded;\n};\n\nZotero.Collections.prototype.assignDepths = function(depth, cArray){\n\tZ.debug(\"Zotero.Collections.assignDepths\", 3);\n\tvar collections = this;\n\tvar insertchildren = function(depth, children){\n\t\tchildren.forEach(function(col){\n\t\t\tcol.nestingDepth = depth;\n\t\t\tif(col.hasChildren){\n\t\t\t\tinsertchildren((depth + 1), col.children);\n\t\t\t}\n\t\t});\n\t};\n\tcollections.collectionsArray.forEach(function(collection){\n\t\tif(collection.topLevel){\n\t\t\tcollection.nestingDepth = 1;\n\t\t\tif(collection.hasChildren){\n\t\t\t\tinsertchildren(2, collection.children);\n\t\t\t}\n\t\t}\n\t});\n};\n\nZotero.Collections.prototype.nestedOrderingArray = function(){\n\tZ.debug(\"Zotero.Collections.nestedOrderingArray\", 3);\n\tvar collections = this;\n\tvar nested = [];\n\tvar insertchildren = function(a, children){\n\t\tchildren.forEach(function(col){\n\t\t\ta.push(col);\n\t\t\tif(col.hasChildren){\n\t\t\t\tinsertchildren(a, col.children);\n\t\t\t}\n\t\t});\n\t};\n\tcollections.collectionsArray.forEach(function(collection){\n\t\tif(collection.topLevel){\n\t\t\tnested.push(collection);\n\t\t\tif(collection.hasChildren){\n\t\t\t\tinsertchildren(nested, collection.children);\n\t\t\t}\n\t\t}\n\t});\n\tZ.debug(\"Done with nestedOrderingArray\", 3);\n\treturn nested;\n};\n\nZotero.Collections.prototype.getCollection = function(key){\n\treturn this.getObject(key);\n};\n\nZotero.Collections.prototype.remoteDeleteCollection = function(collectionKey){\n\tvar collections = this;\n\treturn collections.removeLocalCollection(collectionKey);\n};\n\nZotero.Collections.prototype.removeLocalCollection = function(collectionKey){\n\tvar collections = this;\n\treturn collections.removeLocalCollections([collectionKey]);\n};\n\nZotero.Collections.prototype.removeLocalCollections = function(collectionKeys){\n\tvar collections = this;\n\t//delete Collection from collectionObjects\n\tfor(var i = 0; i < collectionKeys.length; i++){\n\t\tdelete collections.collectionObjects[collectionKeys[i]];\n\t}\n\t\n\t//rebuild collectionsArray\n\tcollections.initSecondaryData();\n};\n\n//reprocess all collections to add references to children inside their parents\nZotero.Collections.prototype.nestCollections = function(){\n\tvar collections = this;\n\t//clear out all child references so we don't duplicate\n\tcollections.collectionsArray.forEach(function(collection){\n\t\tcollection.children = [];\n\t});\n\t\n\tcollections.collectionsArray.sort(Zotero.ApiObject.prototype.fieldComparer('name'));\n\tcollections.collectionsArray.forEach(function(collection){\n\t\tcollection.nestCollection(collections.collectionObjects);\n\t});\n};\n\nZotero.Collections.prototype.writeCollections = function(collectionsArray){\n\tZ.debug('Zotero.Collections.writeCollections', 3);\n\tvar collections = this;\n\tvar library = collections.owningLibrary;\n\tvar i;\n\t\n\tvar config = {\n\t\t'target':'collections',\n\t\t'libraryType':collections.owningLibrary.libraryType,\n\t\t'libraryID':collections.owningLibrary.libraryID\n\t};\n\tvar requestUrl = Zotero.ajax.apiRequestString(config);\n\t\n\t//add collectionKeys to collections if they don't exist yet\n\tfor(i = 0; i < collectionsArray.length; i++){\n\t\tvar collection = collectionsArray[i];\n\t\t//generate a collectionKey if the collection does not already have one\n\t\tvar collectionKey = collection.get('key');\n\t\tif(collectionKey === \"\" || collectionKey === null) {\n\t\t\tvar newCollectionKey = Zotero.utils.getKey();\n\t\t\tcollection.set(\"key\", newCollectionKey);\n\t\t\tcollection.set(\"version\", 0);\n\t\t}\n\t}\n\n\tvar writeChunks = collections.chunkObjectsArray(collectionsArray);\n\tvar rawChunkObjects = collections.rawChunks(writeChunks);\n\t//update collections with server response if successful\n\tvar writeCollectionsSuccessCallback = function(response){\n\t\tZ.debug(\"writeCollections successCallback\", 3);\n\t\tvar library = this.library;\n\t\tvar writeChunk = this.writeChunk;\n\t\tlibrary.collections.updateObjectsFromWriteResponse(this.writeChunk, response);\n\t\t//save updated collections to collections\n\t\tfor(var i = 0; i < writeChunk.length; i++){\n\t\t\tvar collection = writeChunk[i];\n\t\t\tif(collection.synced && (!collection.writeFailure)) {\n\t\t\t\tlibrary.collections.addCollection(collection);\n\t\t\t\t//save updated collections to IDB\n\t\t\t\tif(Zotero.config.useIndexedDB){\n\t\t\t\t\tZ.debug(\"updating indexedDB collections\");\n\t\t\t\t\tlibrary.idbLibrary.updateCollections(writeChunk);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tresponse.returnCollections = writeChunk;\n\t\treturn response;\n\t};\n\t\n\tZ.debug(\"collections.version: \" + collections.version, 3);\n\tZ.debug(\"collections.libraryVersion: \" + collections.libraryVersion, 3);\n\t\n\tvar requestObjects = [];\n\tfor(i = 0; i < writeChunks.length; i++){\n\t\tvar successContext = {\n\t\t\twriteChunk: writeChunks[i],\n\t\t\tlibrary: library\n\t\t};\n\t\t\n\t\tvar requestData = JSON.stringify(rawChunkObjects[i]);\n\t\trequestObjects.push({\n\t\t\turl: requestUrl,\n\t\t\ttype: 'POST',\n\t\t\tdata: requestData,\n\t\t\tprocessData: false,\n\t\t\theaders:{\n\t\t\t\t//'If-Unmodified-Since-Version': collections.version,\n\t\t\t\t//'Content-Type': 'application/json'\n\t\t\t},\n\t\t\tsuccess: writeCollectionsSuccessCallback.bind(successContext)\n\t\t});\n\t}\n\n\treturn library.sequentialRequests(requestObjects)\n\t.then(function(responses){\n\t\tZ.debug(\"Done with writeCollections sequentialRequests promise\", 3);\n\t\tcollections.initSecondaryData();\n\t\t\n\t\tresponses.forEach(function(response){\n\t\t\tif(response.isError || (response.data.hasOwnProperty('failed') && Object.keys(response.data.failed).length > 0) ){\n\t\t\t\tthrow new Error(\"failure when writing collections\");\n\t\t\t}\n\t\t});\n\t\treturn responses;\n\t})\n\t.catch(function(err){\n\t\tZ.error(err);\n\t\t//rethrow so widget doesn't report success\n\t\tthrow(err);\n\t});\n};\n","Zotero.Items = function(jsonBody){\n\tthis.instance = \"Zotero.Items\";\n\t//represent items as array for ordering purposes\n\tthis.itemsVersion = 0;\n\tthis.syncState = {\n\t\tearliestVersion: null,\n\t\tlatestVersion: null\n\t};\n\tthis.itemObjects = {};\n\tthis.objectMap = this.itemObjects;\n\tthis.objectArray = [];\n\tthis.unsyncedItemKeys = [];\n\t\n\tif(jsonBody){\n\t\tthis.addItemsFromJson(jsonBody);\n\t}\n};\n\nZotero.Items.prototype = new Zotero.Container();\n\nZotero.Items.prototype.getItem = function(key){\n\treturn this.getObject(key);\n};\n\nZotero.Items.prototype.getItems = function(keys){\n\treturn this.getObjects(keys);\n};\n\nZotero.Items.prototype.addItem = function(item){\n\tthis.addObject(item);\n\treturn this;\n};\n\nZotero.Items.prototype.addItemsFromJson = function(jsonBody){\n\tZ.debug(\"addItemsFromJson\", 3);\n\tvar items = this;\n\tvar parsedItemJson = jsonBody;\n\tvar itemsAdded = [];\n\tZ.debug(\"looping\");\n\tparsedItemJson.forEach(function(itemObj){\n\t\tZ.debug(\"creating new Item\");\n\t\tvar item = new Zotero.Item(itemObj);\n\t\titems.addItem(item);\n\t\titemsAdded.push(item);\n\t});\n\treturn itemsAdded;\n};\n\n//Remove item from local set if it has been marked as deleted by the server\nZotero.Items.prototype.removeLocalItem = function(key){\n\treturn this.removeObject(key);\n};\n\nZotero.Items.prototype.removeLocalItems = function(keys){\n\treturn this.removeObjects(keys);\n};\n\nZotero.Items.prototype.deleteItem = function(itemKey){\n\tZ.debug(\"Zotero.Items.deleteItem\", 3);\n\tvar items = this;\n\tvar item;\n\t\n\tif(!itemKey) return false;\n\titemKey = items.extractKey(itemKey);\n\titem = items.getItem(itemKey);\n\t\n\tvar urlconfig = {\n\t\t'target':'item',\n\t\t'libraryType':items.owningLibrary.libraryType,\n\t\t'libraryID':items.owningLibrary.libraryID,\n\t\t'itemKey':item.key\n\t};\n\tvar requestConfig = {\n\t\turl: Zotero.ajax.apiRequestString(urlconfig),\n\t\ttype: 'DELETE',\n\t\theaders:{\"If-Unmodified-Since-Version\":item.get('version')}\n\t};\n\t\n\treturn Zotero.net.ajaxRequest(requestConfig);\n};\n\nZotero.Items.prototype.deleteItems = function(deleteItems, version){\n\t//TODO: split into multiple requests if necessary\n\tZ.debug(\"Zotero.Items.deleteItems\", 3);\n\tvar items = this;\n\tvar deleteKeys = [];\n\tvar i;\n\tif((!version) && (items.itemsVersion !== 0)){\n\t\tversion = items.itemsVersion;\n\t}\n\t\n\t//make sure we're working with item keys, not items\n\tvar key;\n\tfor(i = 0; i < deleteItems.length; i++){\n\t\tif(!deleteItems[i]) continue;\n\t\tkey = items.extractKey(deleteItems[i]);\n\t\tif(key){\n\t\t\tdeleteKeys.push(key);\n\t\t}\n\t}\n\t\n\t//split keys into chunks of 50 per request\n\tvar deleteChunks = items.chunkObjectsArray(deleteKeys);\n\t/*\n\tvar successCallback = function(response){\n\t\tvar deleteProgress = index / deleteChunks.length;\n\t\tZotero.trigger(\"deleteProgress\", {'progress': deleteProgress});\n\t\treturn response;\n\t};\n\t*/\n\tvar requestObjects = [];\n\tfor(i = 0; i < deleteChunks.length; i++){\n\t\tvar deleteKeysString = deleteChunks[i].join(',');\n\t\tvar urlconfig = {\n\t\t\t'target':'items',\n\t\t\t'libraryType':items.owningLibrary.libraryType,\n\t\t\t'libraryID':items.owningLibrary.libraryID,\n\t\t\t'itemKey': deleteKeysString\n\t\t};\n\t\t//headers['If-Unmodified-Since-Version'] = version;\n\t\t\n\t\tvar requestConfig = {\n\t\t\turl: urlconfig,\n\t\t\ttype: 'DELETE'\n\t\t};\n\t\trequestObjects.push(requestConfig);\n\t}\n\t\n\treturn Zotero.net.queueRequest(requestObjects);\n};\n\nZotero.Items.prototype.trashItems = function(itemsArray){\n\tvar items = this;\n\tvar i;\n\tfor(i = 0; i < itemsArray.length; i++){\n\t\tvar item = itemsArray[i];\n\t\titem.set('deleted', 1);\n\t}\n\treturn items.writeItems(itemsArray);\n};\n\nZotero.Items.prototype.untrashItems = function(itemsArray){\n\tvar items = this;\n\tvar i;\n\tfor(i = 0; i < itemsArray.length; i++){\n\t\tvar item = itemsArray[i];\n\t\titem.set('deleted', 0);\n\t}\n\treturn items.writeItems(itemsArray);\n};\n\nZotero.Items.prototype.findItems = function(config){\n\tvar items = this;\n\tvar matchingItems = [];\n\tObject.keys(items.itemObjects).forEach(function(key){\n\t\tvar item = item.itemObjects[key];\n\t\tif(config.collectionKey && (item.apiObj.collections.indexOf(config.collectionKey) === -1) ){\n\t\t\treturn;\n\t\t}\n\t\tmatchingItems.push(items.itemObjects[key]);\n\t});\n\treturn matchingItems;\n};\n\n//take an array of items and extract children into their own items\n//for writing\nZotero.Items.prototype.atomizeItems = function(itemsArray){\n\t//process the array of items, pulling out child notes/attachments to write\n\t//separately with correct parentItem set and assign generated itemKeys to\n\t//new items\n\tvar writeItems = [];\n\tvar item;\n\tfor(var i = 0; i < itemsArray.length; i++){\n\t\titem = itemsArray[i];\n\t\t//generate an itemKey if the item does not already have one\n\t\tvar itemKey = item.get('key');\n\t\tif(itemKey === \"\" || itemKey === null) {\n\t\t\tvar newItemKey = Zotero.utils.getKey();\n\t\t\titem.set(\"key\", newItemKey);\n\t\t\titem.set(\"version\", 0);\n\t\t}\n\t\t//items that already have item key always in first pass, as are their children\n\t\twriteItems.push(item);\n\t\tif(item.hasOwnProperty('notes') && item.notes.length > 0){\n\t\t\tfor(var j = 0; j < item.notes.length; j++){\n\t\t\t\titem.notes[j].set('parentItem', item.get('key'));\n\t\t\t}\n\t\t\twriteItems = writeItems.concat(item.notes);\n\t\t}\n\t\tif(item.hasOwnProperty('attachments') && item.attachments.length > 0){\n\t\t\tfor(var k = 0; k < item.attachments.length; k++){\n\t\t\t\titem.attachments[k].set('parentItem', item.get('key'));\n\t\t\t}\n\t\t\twriteItems = writeItems.concat(item.attachments);\n\t\t}\n\t}\n\treturn writeItems;\n};\n\n//accept an array of 'Zotero.Item's\nZotero.Items.prototype.writeItems = function(itemsArray){\n\tvar items = this;\n\tvar library = items.owningLibrary;\n\tvar i;\n\tvar writeItems = items.atomizeItems(itemsArray);\n\t\n\tvar config = {\n\t\t'target':'items',\n\t\t'libraryType':items.owningLibrary.libraryType,\n\t\t'libraryID':items.owningLibrary.libraryID\n\t};\n\tvar requestUrl = Zotero.ajax.apiRequestString(config);\n\t\n\tvar writeChunks = items.chunkObjectsArray(writeItems);\n\tvar rawChunkObjects = items.rawChunks(writeChunks);\n\t\n\t//update item with server response if successful\n\tvar writeItemsSuccessCallback = function(response){\n\t\tZ.debug(\"writeItem successCallback\", 3);\n\t\titems.updateObjectsFromWriteResponse(this.writeChunk, response);\n\t\t//save updated items to IDB\n\t\tif(Zotero.config.useIndexedDB){\n\t\t\tthis.library.idbLibrary.updateItems(this.writeChunk);\n\t\t}\n\t\t\n\t\tZotero.trigger(\"itemsChanged\", {library:this.library});\n\t\tresponse.returnItems = this.writeChunk;\n\t\treturn response;\n\t};\n\t\n\tZ.debug(\"items.itemsVersion: \" + items.itemsVersion, 3);\n\tZ.debug(\"items.libraryVersion: \" + items.libraryVersion, 3);\n\t\n\tvar requestObjects = [];\n\tfor(i = 0; i < writeChunks.length; i++){\n\t\tvar successContext = {\n\t\t\twriteChunk: writeChunks[i],\n\t\t\tlibrary: library\n\t\t};\n\t\t\n\t\tvar requestData = JSON.stringify(rawChunkObjects[i]);\n\t\trequestObjects.push({\n\t\t\turl: requestUrl,\n\t\t\ttype: 'POST',\n\t\t\tdata: requestData,\n\t\t\tprocessData: false,\n\t\t\tsuccess: writeItemsSuccessCallback.bind(successContext)\n\t\t});\n\t}\n\t\n\treturn library.sequentialRequests(requestObjects)\n\t.then(function(responses){\n\t\tZ.debug(\"Done with writeItems sequentialRequests promise\", 3);\n\t\treturn responses;\n\t});\n};\n","Zotero.Tags = function(jsonBody){\n\tthis.instance = \"Zotero.Tags\";\n\t//represent collections as array for ordering purposes\n\tthis.tagsVersion = 0;\n\tthis.syncState = {\n\t\tearliestVersion: null,\n\t\tlatestVersion: null\n\t};\n\tthis.displayTagsArray = [];\n\tthis.displayTagsUrl = '';\n\tthis.tagObjects = {};\n\tthis.tagsArray = [];\n\tthis.loaded = false;\n\tif(jsonBody){\n\t\tthis.addTagsFromJson(jsonBody);\n\t}\n};\n\nZotero.Tags.prototype = new Zotero.Container();\n\nZotero.Tags.prototype.addTag = function(tag){\n\tvar tags = this;\n\ttags.tagObjects[tag.apiObj.tag] = tag;\n\ttags.tagsArray.push(tag);\n\tif(tags.owningLibrary){\n\t\ttag.associateWithLibrary(tags.owningLibrary);\n\t}\n};\n\nZotero.Tags.prototype.getTag = function(tagname){\n\tvar tags = this;\n\tif(tags.tagObjects.hasOwnProperty(tagname)){\n\t\treturn this.tagObjects[tagname];\n\t}\n\treturn null;\n};\n\nZotero.Tags.prototype.removeTag = function(tagname){\n\tvar tags = this;\n\tdelete tags.tagObjects[tagname];\n\ttags.updateSecondaryData();\n};\n\nZotero.Tags.prototype.removeTags = function(tagnames){\n\tvar tags = this;\n\ttagnames.forEach(function(tagname){\n\t\tdelete tags.tagObjects[tagname];\n\t});\n\ttags.updateSecondaryData();\n};\n\nZotero.Tags.prototype.plainTagsList = function(tagsArray){\n\tZ.debug(\"Zotero.Tags.plainTagsList\", 3);\n\tvar plainList = [];\n\ttagsArray.forEach(function(tag){\n\t\tplainList.push(tag.apiObj.tag);\n\t});\n\treturn plainList;\n};\n\nZotero.Tags.prototype.clear = function(){\n\tZ.debug(\"Zotero.Tags.clear\", 3);\n\tthis.tagsVersion = 0;\n\tthis.syncState.earliestVersion = null;\n\tthis.syncState.latestVersion = null;\n\tthis.displayTagsArray = [];\n\tthis.displayTagsUrl = '';\n\tthis.tagObjects = {};\n\tthis.tagsArray = [];\n};\n\nZotero.Tags.prototype.updateSecondaryData = function(){\n\tZ.debug(\"Zotero.Tags.updateSecondaryData\", 3);\n\tvar tags = this;\n\ttags.tagsArray = [];\n\tObject.keys(tags.tagObjects).forEach(function(key){\n\t\tvar val = tags.tagObjects[key];\n\t\ttags.tagsArray.push(val);\n\t});\n\ttags.tagsArray.sort(Zotero.Tag.prototype.tagComparer());\n\tvar plainList = tags.plainTagsList(tags.tagsArray);\n\tplainList.sort(Zotero.Library.prototype.comparer());\n\ttags.plainList = plainList;\n};\n\nZotero.Tags.prototype.updateTagsVersion = function(tagsVersion) {\n\tvar tags = this;\n\tObject.keys(tags.tagObjects).forEach(function(key){\n\t\tvar tag = tags.tagObjects[key];\n\t\ttag.set('version', tagsVersion);\n\t});\n};\n\nZotero.Tags.prototype.rebuildTagsArray = function() {\n\tvar tags = this;\n\ttags.tagsArray = [];\n\tObject.keys(tags.tagObjects).forEach(function(key){\n\t\tvar tag = tags.tagObjects[key];\n\t\ttags.tagsArray.push(tag);\n\t});\n};\n\nZotero.Tags.prototype.addTagsFromJson = function(jsonBody){\n\tZ.debug('Zotero.Tags.addTagsFromJson', 3);\n\tvar tags = this;\n\tvar tagsAdded = [];\n\tjsonBody.forEach(function(tagObj){\n\t\tvar tag = new Zotero.Tag(tagObj);\n\t\ttags.addTag(tag);\n\t\ttagsAdded.push(tag);\n\t});\n\treturn tagsAdded;\n};\n","Zotero.Groups = function(){\n\tthis.instance = 'Zotero.Groups';\n\tthis.groupsArray = [];\n};\n/*\nZotero.Groups.prototype.fetchGroup = function(groupID, apikey){\n\t//TODO: implement\n};\n*/\nZotero.Groups.prototype.addGroupsFromJson = function(jsonBody){\n\tvar groups = this;\n\tvar groupsAdded = [];\n\tjsonBody.forEach(function(groupObj){\n\t\tZ.debug(groupObj, 3);\n\t\tvar group = new Zotero.Group(groupObj);\n\t\tgroups.groupsArray.push(group);\n\t\tgroupsAdded.push(group);\n\t});\n\treturn groupsAdded;\n};\n\nZotero.Groups.prototype.fetchUserGroups = function(userID, apikey){\n\tvar groups = this;\n\tvar aparams = {\n\t\t'target':'userGroups',\n\t\t'libraryType':'user',\n\t\t'libraryID': userID,\n\t\t'order':'title'\n\t};\n\t\n\tif(apikey){\n\t\taparams['key'] = apikey;\n\t}\n\telse if(groups.owningLibrary) {\n\t\taparams['key'] = groups.owningLibrary._apiKey;\n\t}\n\t\n\treturn Zotero.ajaxRequest(aparams)\n\t.then(function(response){\n\t\tZ.debug('fetchUserGroups proxied callback', 3);\n\t\tvar fetchedGroups = groups.addGroupsFromJson(response.data);\n\t\tresponse.fetchedGroups = fetchedGroups;\n\t\treturn response;\n\t});\n};\n\n","Zotero.Searches = function(){\n\tthis.instance = \"Zotero.Searches\";\n\tthis.searchObjects = {};\n\tthis.syncState = {\n\t\tearliestVersion: null,\n\t\tlatestVersion: null\n\t};\n};\n","Zotero.Deleted = function(data){\n\tthis.instance = \"Zotero.Deleted\";\n\tif(typeof data === 'string'){\n\t\tthis.deletedData = JSON.parse(data);\n\t}\n\telse {\n\t\tthis.deletedData = data;\n\t}\n\tthis.untilVersion = null;\n\tthis.sinceVersion = null;\n\tthis.waitingPromises = [];\n\tthis.pending = false;\n};\n\n//create, save referece, and return a Promise that will be resolved\n//the next time we finish a deleted request\nZotero.Deleted.prototype.addWaiter = function(){\n\t\n};\n","Zotero.Collection = function(collectionObj){\n\tthis.instance = \"Zotero.Collection\";\n\tthis.libraryUrlIdentifier = '';\n\tthis.itemKeys = false;\n\tthis.key = '';\n\tthis.version = 0;\n\tthis.synced = false;\n\tthis.pristineData = null;\n\tthis.apiObj = {\n\t\t'key': '',\n\t\t'version': 0,\n\t\t'library':{},\n\t\t'links':{},\n\t\t'meta':{},\n\t\t'data':{\n\t\t\t'key': '',\n\t\t\t'version': 0,\n\t\t\t'name': '',\n\t\t\t'parentCollection': false,\n\t\t\t'relations':{}\n\t\t}\n\t};\n\tthis.children = [];\n\tthis.topLevel = true;\n\tif(collectionObj){\n\t\tthis.parseJsonCollection(collectionObj);\n\t}\n};\n\nZotero.Collection.prototype = new Zotero.ApiObject();\nZotero.Collection.prototype.instance = \"Zotero.Collection\";\n\nZotero.Collection.prototype.updateObjectKey = function(collectionKey){\n\tthis.updateCollectionKey(collectionKey);\n};\n\nZotero.Collection.prototype.updateCollectionKey = function(collectionKey){\n\tvar collection = this;\n\tcollection.key = collectionKey;\n\tcollection.apiObj.key = collectionKey;\n\tcollection.apiObj.data.key = collectionKey;\n\treturn collection;\n};\n\nZotero.Collection.prototype.parseJsonCollection = function(apiObj) {\n\tZ.debug(\"parseJsonCollection\", 4);\n\tvar collection = this;\n\tcollection.key = apiObj.key;\n\tcollection.version = apiObj.version;\n\tcollection.apiObj = Z.extend({}, apiObj);\n\tcollection.pristineData = Z.extend({}, apiObj.data);\n\n\tcollection.parentCollection = false;\n\tcollection.topLevel = true;\n\tcollection.synced = true;\n\tcollection.initSecondaryData();\n};\n\nZotero.Collection.prototype.initSecondaryData = function() {\n\tvar collection = this;\n\t\n\tif(collection.apiObj.data['parentCollection']){\n\t\tcollection.topLevel = false;\n\t} else {\n\t\tcollection.topLevel = true;\n\t}\n\t\n\tif(Zotero.config.librarySettings.libraryPathString){\n\t\tcollection.websiteCollectionLink = Zotero.config.librarySettings.libraryPathString + \n\t\t'/collectionKey/' + collection.apiObj.key;\n\t}\n\telse {\n\t\tcollection.websiteCollectionLink = '';\n\t}\n\tcollection.hasChildren = (collection.apiObj.meta.numCollections) ? true : false;\n\t\n};\n\nZotero.Collection.prototype.nestCollection = function(collectionsObject) {\n\tZ.debug(\"Zotero.Collection.nestCollection\", 4);\n\tvar collection = this;\n\tvar parentCollectionKey = collection.get('parentCollection');\n\tif(parentCollectionKey !== false){\n\t\tif(collectionsObject.hasOwnProperty(parentCollectionKey)) {\n\t\t\tvar parentOb = collectionsObject[parentCollectionKey];\n\t\t\tparentOb.children.push(collection);\n\t\t\tparentOb.hasChildren = true;\n\t\t\tcollection.topLevel = false;\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nZotero.Collection.prototype.addItems = function(itemKeys){\n\tZ.debug('Zotero.Collection.addItems', 3);\n\tvar collection = this;\n\tvar config = {\n\t\t'target':'items',\n\t\t'libraryType':collection.apiObj.library.type,\n\t\t'libraryID':collection.apiObj.library.id,\n\t\t'collectionKey':collection.key\n\t};\n\tvar requestData = itemKeys.join(' ');\n\t\n\treturn Zotero.ajaxRequest(config, 'POST', {\n\t\tdata: requestData\n\t});\n};\n\nZotero.Collection.prototype.getMemberItemKeys = function(){\n\tZ.debug('Zotero.Collection.getMemberItemKeys', 3);\n\tvar collection = this;\n\tvar config = {\n\t\t'target':'items',\n\t\t'libraryType':collection.apiObj.library.type,\n\t\t'libraryID':collection.apiObj.library.id,\n\t\t'collectionKey':collection.key,\n\t\t'format':'keys'\n\t};\n\t\n\treturn Zotero.ajaxRequest(config, 'GET', {processData: false} )\n\t.then(function(response){\n\t\tZ.debug('getMemberItemKeys proxied callback', 3);\n\t\tvar result = response.data;\n\t\tvar keys = result.trim().split(/[\\s]+/);\n\t\tcollection.itemKeys = keys;\n\t\treturn keys;\n\t});\n};\n\nZotero.Collection.prototype.removeItem = function(itemKey){\n\tvar collection = this;\n\tvar config = {\n\t\t'target':'item',\n\t\t'libraryType':collection.apiObj.library.type,\n\t\t'libraryID':collection.apiObj.library.id,\n\t\t'collectionKey':collection.key,\n\t\t'itemKey':itemKey\n\t};\n\treturn Zotero.ajaxRequest(config, 'DELETE', {\n\t\tprocessData: false,\n\t\tcache:false\n\t});\n};\n\nZotero.Collection.prototype.update = function(name, parentKey){\n\tvar collection = this;\n\tif(!parentKey) parentKey = false;\n\tvar config = {\n\t\t'target':'collection',\n\t\t'libraryType':collection.apiObj.library.type,\n\t\t'libraryID':collection.apiObj.library.id,\n\t\t'collectionKey':collection.key\n\t};\n\t\n\tcollection.set('name', name);\n\tcollection.set('parentCollection', parentKey);\n\t\n\tvar writeObject = collection.writeApiObj();\n\tvar requestData = JSON.stringify(writeObject);\n\t\n\treturn Zotero.ajaxRequest(config, 'PUT', {\n\t\tdata: requestData,\n\t\tprocessData: false,\n\t\theaders:{\n\t\t\t'If-Unmodified-Since-Version': collection.version\n\t\t},\n\t\tcache:false\n\t});\n};\n\nZotero.Collection.prototype.writeApiObj = function(){\n\tvar collection = this;\n\tvar writeObj = Z.extend({}, collection.pristineData, collection.apiObj.data);\n\treturn writeObj;\n};\n\nZotero.Collection.prototype.remove = function(){\n\tZ.debug(\"Zotero.Collection.delete\", 3);\n\tvar collection = this;\n\tvar owningLibrary = collection.owningLibrary;\n\tvar config = {\n\t\t'target':'collection',\n\t\t'libraryType':collection.apiObj.library.type,\n\t\t'libraryID':collection.apiObj.library.id,\n\t\t'collectionKey':collection.key\n\t};\n\t\n\treturn Zotero.ajaxRequest(config, 'DELETE', {\n\t\tprocessData: false,\n\t\theaders:{\n\t\t\t'If-Unmodified-Since-Version': collection.version\n\t\t},\n\t\tcache:false\n\t}).then(function(){\n\t\tZ.debug(\"done deleting collection. remove local copy.\", 3);\n\t\towningLibrary.collections.removeLocalCollection(collection.key);\n\t\towningLibrary.trigger(\"libraryCollectionsUpdated\");\n\t});\n};\n\nZotero.Collection.prototype.get = function(key){\n\tvar collection = this;\n\tswitch(key) {\n\t\tcase 'title':\n\t\tcase 'name':\n\t\t\treturn collection.apiObj.data.name;\n\t\tcase 'collectionKey':\n\t\tcase 'key':\n\t\t\treturn collection.apiObj.key || collection.key;\n\t\tcase 'collectionVersion':\n\t\tcase 'version':\n\t\t\treturn collection.apiObj.version;\n\t\tcase 'parentCollection':\n\t\t\treturn collection.apiObj.data.parentCollection;\n\t}\n\t\n\tif(key in collection.apiObj.data){\n\t\treturn collection.apiObj.data[key];\n\t}\n\telse if(collection.apiObj.meta.hasOwnProperty(key)){\n\t\treturn collection.apiObj.meta[key];\n\t}\n\telse if(collection.hasOwnProperty(key)){\n\t\treturn collection[key];\n\t}\n\t\n\treturn null;\n};\n/*\nZotero.Collection.prototype.get = function(key){\n\tvar collection = this;\n\tswitch(key) {\n\t\tcase 'title':\n\t\tcase 'name':\n\t\t\treturn collection.apiObj.data['name'];\n\t\tcase 'collectionKey':\n\t\tcase 'key':\n\t\t\treturn collection.apiObj.key;\n\t\tcase 'parentCollection':\n\t\t\treturn collection.apiObj.data['parentCollection'];\n\t\tcase 'collectionVersion':\n\t\tcase 'version':\n\t\t\treturn collection.apiObj.version;\n\t}\n\t\n\tif(key in collection.apiObj.data){\n\t\treturn collection.apiObj.data[key];\n\t}\n\telse if(key in collection.apiObj.meta){\n\t\treturn collection.apiObj.meta[key];\n\t}\n\telse if(collection.hasOwnProperty(key)){\n\t\treturn collection[key];\n\t}\n\t\n\treturn null;\n};\n*/\n\nZotero.Collection.prototype.set = function(key, val){\n\tvar collection = this;\n\tif(key in collection.apiObj.data){\n\t\tcollection.apiObj.data[key] = val;\n\t}\n\tswitch(key){\n\t\tcase 'title':\n\t\tcase 'name':\n\t\t\tcollection.apiObj.data['name'] = val;\n\t\t\tbreak;\n\t\tcase 'collectionKey':\n\t\tcase 'key':\n\t\t\tcollection.key = val;\n\t\t\tcollection.apiObj.key = val;\n\t\t\tcollection.apiObj.data.key = val;\n\t\t\tbreak;\n\t\tcase 'parentCollection':\n\t\t\tcollection.apiObj.data['parentCollection'] = val;\n\t\t\tbreak;\n\t\tcase 'collectionVersion':\n\t\tcase 'version':\n\t\t\tcollection.version = val;\n\t\t\tcollection.apiObj.version = val;\n\t\t\tcollection.apiObj.data.version = val;\n\t\t\tbreak;\n\t}\n\t\n\tif(collection.hasOwnProperty(key)) {\n\t\tcollection[key] = val;\n\t}\n};\n","/*\n * TODO: several functions should not work unless we build a fresh item with a template\n * or parsed an item from the api with json content (things that depend on apiObj)\n * There should be a flag to note whether this is the case and throwing on attempts to\n * use these functions when it is not.\n */\nZotero.Item = function(itemObj){\n\tthis.instance = \"Zotero.Item\";\n\tthis.version = 0;\n\tthis.key = '';\n\tthis.synced = false;\n\tthis.apiObj = {};\n\tthis.pristineData = null;\n\tthis.childItemKeys = [];\n\tthis.writeErrors = [];\n\tthis.notes = [];\n\tif(itemObj){\n\t\tthis.parseJsonItem(itemObj);\n\t} else {\n\t\tthis.parseJsonItem(this.emptyJsonItem());\n\t}\n\tthis.initSecondaryData();\n};\n\nZotero.Item.prototype = new Zotero.ApiObject();\n\nZotero.Item.prototype.parseJsonItem = function (apiObj) {\n\tZ.debug(\"parseJsonItem\", 3);\n\tvar item = this;\n\titem.version = apiObj.version;\n\titem.key = apiObj.key;\n\titem.apiObj = Z.extend({}, apiObj);\n\titem.pristineData = Z.extend({}, apiObj.data);\n\tif(!item.apiObj._supplement){\n\t\titem.apiObj._supplement = {};\n\t}\n};\n\nZotero.Item.prototype.emptyJsonItem = function(){\n\treturn {\n\t\tkey: '',\n\t\tversion: 0,\n\t\tlibrary:{},\n\t\tlinks:{},\n\t\tdata: {\n\t\t\tkey:'',\n\t\t\tversion:0,\n\t\t\ttitle:'',\n\t\t\tcreators:[],\n\t\t\tcollections:[],\n\t\t\ttags:[],\n\t\t\trelations:{}\n\t\t},\n\t\tmeta: {},\n\t\t_supplement: {}\n\t};\n};\n\n//populate property values derived from json content\nZotero.Item.prototype.initSecondaryData = function(){\n\tZ.debug(\"initSecondaryData\", 3);\n\tvar item = this;\n\t\n\titem.version = item.apiObj.version;\n\t\n\tif(item.apiObj.data.itemType == 'attachment'){\n\t\titem.mimeType = item.apiObj.data.contentType;\n\t\titem.translatedMimeType = Zotero.utils.translateMimeType(item.mimeType);\n\t}\n\tif('linkMode' in item.apiObj){\n\t\titem.linkMode = item.apiObj.data.linkMode;\n\t}\n\t\n\titem.attachmentDownloadUrl = Zotero.url.attachmentDownloadUrl(item);\n\t\n\tif(item.apiObj.meta.parsedDate){\n\t\titem.parsedDate = new Date(item.apiObj.meta.parsedDate);\n\t} else {\n\t\titem.parsedDate = false;\n\t}\n\t\n\titem.synced = false;\n\n\titem.updateTagStrings();\n\tZ.debug(\"done with initSecondaryData\", 3);\n};\n\nZotero.Item.prototype.updateTagStrings = function(){\n\tvar item = this;\n\tvar tagstrings = [];\n\tfor (var i = 0; i < item.apiObj.data.tags.length; i++) {\n\t\ttagstrings.push(item.apiObj.data.tags[i].tag);\n\t}\n\titem.apiObj._supplement.tagstrings = tagstrings;\n};\n\nZotero.Item.prototype.initEmpty = function(itemType, linkMode){\n\tvar item = this;\n\treturn item.getItemTemplate(itemType, linkMode)\n\t.then(function(template){\n\t\titem.initEmptyFromTemplate(template);\n\t\treturn item;\n\t});\n};\n\n//special case note initialization to guarentee synchronous and simplify some uses\nZotero.Item.prototype.initEmptyNote = function(){\n\tvar item = this;\n\titem.version = 0;\n\tvar noteTemplate = {\"itemType\":\"note\",\"note\":\"\",\"tags\":[],\"collections\":[],\"relations\":{}};\n\t\n\titem.initEmptyFromTemplate(noteTemplate);\n\t\n\treturn item;\n};\n\nZotero.Item.prototype.initEmptyFromTemplate = function(template){\n\tvar item = this;\n\titem.version = 0;\n\t\n\titem.key = '';\n\titem.pristineData = Z.extend({}, template);\n\titem.apiObj = {\n\t\tkey: '',\n\t\tversion: 0,\n\t\tlibrary: {},\n\t\tlinks: {},\n\t\tdata: template,\n\t\tmeta: {},\n\t\t_supplement: {}\n\t};\n\t\n\titem.initSecondaryData();\n\treturn item;\n};\n\nZotero.Item.prototype.isSupplementaryItem = function(){\n\tvar item = this;\n\tvar itemType = item.get('itemType');\n\tif(itemType == \"attachment\" || itemType == \"note\"){\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nZotero.Item.prototype.isSnapshot = function(){\n\tvar item = this;\n\tif(item.apiObj.links['enclosure']){\n\t\tvar ftype = item.apiObj.links['enclosure'].type;\n\t\tif(!item.apiObj.links['enclosure']['length'] && ftype == 'text/html'){\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nZotero.Item.prototype.updateObjectKey = function(objectKey){\n\treturn this.updateItemKey(objectKey);\n};\n\nZotero.Item.prototype.updateItemKey = function(itemKey){\n\tvar item = this;\n\titem.key = itemKey;\n\titem.apiObj.key = itemKey;\n\titem.apiObj.data.key = itemKey;\n\titem.pristineData.key = itemKey;\n\treturn item;\n};\n\n/*\n * Write updated information for the item to the api and potentiallyp\n * create new child notes (or attachments?) of this item\n */\nZotero.Item.prototype.writeItem = function(){\n\tvar item = this;\n\tif(!item.owningLibrary){\n\t\tthrow new Error(\"Item must be associated with a library\");\n\t}\n\treturn item.owningLibrary.items.writeItems([item]);\n};\n\n//get the JS object to be PUT/POSTed for write\nZotero.Item.prototype.writeApiObj = function(){\n\tvar item = this;\n\t\n\t//remove any creators that have no names\n\tif(item.apiObj.data.creators){\n\t\tvar newCreatorsArray = item.apiObj.data.creators.filter(function(c){\n\t\t\tif(c.name || c.firstName || c.lastName){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\titem.apiObj.data.creators = newCreatorsArray;\n\t}\n\t\n\t//copy apiObj, extend with pristine to make sure required fields are present\n\t//and remove unwriteable fields(?)\n\tvar writeApiObj = Z.extend({}, item.pristineData, item.apiObj.data);\n\treturn writeApiObj;\n};\n\nZotero.Item.prototype.createChildNotes = function(notes){\n\tvar item = this;\n\tvar childItems = [];\n\tvar childItemPromises = [];\n\t\n\tnotes.forEach(function(note){\n\t\tvar childItem = new Zotero.Item();\n\t\tvar p = childItem.initEmpty('note')\n\t\t.then(function(noteItem){\n\t\t\tnoteItem.set('note', note.note);\n\t\t\tnoteItem.set('parentItem', item.key);\n\t\t\tchildItems.push(noteItem);\n\t\t});\n\t\tchildItemPromises.push(p);\n\t});\n\t\n\treturn Promise.all(childItemPromises)\n\t.then(function(){\n\t\treturn item.owningLibrary.writeItems(childItems);\n\t});\n};\n\n//TODO: implement\nZotero.Item.prototype.writePatch = function(){\n\t\n};\n\nZotero.Item.prototype.getChildren = function(library){\n\tZ.debug(\"Zotero.Item.getChildren\");\n\tvar item = this;\n\treturn Promise.resolve()\n\t.then(function(){\n\t\t//short circuit if has item has no children\n\t\tif(!item.apiObj.meta.numChildren){\n\t\t\treturn [];\n\t\t}\n\t\t\n\t\tvar config = {\n\t\t\turl: {\n\t\t\t\t'target':'children',\n\t\t\t\t'libraryType':item.apiObj.library.type,\n\t\t\t\t'libraryID':item.apiObj.library.id,\n\t\t\t\t'itemKey':item.key\n\t\t\t}\n\t\t};\n\t\t\n\t\treturn Zotero.net.queueRequest(config)\n\t\t.then(function(response){\n\t\t\tZ.debug('getChildren proxied callback', 4);\n\t\t\tvar items = library.items;\n\t\t\tvar childItems = items.addItemsFromJson(response.data);\n\t\t\tfor (var i = childItems.length - 1; i >= 0; i--) {\n\t\t\t\tchildItems[i].associateWithLibrary(library);\n\t\t\t}\n\t\t\t\n\t\t\treturn childItems;\n\t\t});\n\t});\n};\n\nZotero.Item.prototype.getItemTypes = function (locale) {\n\tZ.debug(\"Zotero.Item.prototype.getItemTypes\", 3);\n\tif(!locale){\n\t\tlocale = 'en-US';\n\t}\n\tlocale = 'en-US';\n\n\tvar itemTypes = Zotero.cache.load({locale:locale, target:'itemTypes'});\n\tif(itemTypes){\n\t\tZ.debug(\"have itemTypes in localStorage\", 3);\n\t\tZotero.Item.prototype.itemTypes = itemTypes;//JSON.parse(Zotero.storage.localStorage['itemTypes']);\n\t\treturn;\n\t}\n\t\n\tvar query = Zotero.ajax.apiQueryString({locale:locale});\n\tvar url = Zotero.config.baseApiUrl + '/itemTypes' + query;\n\tZotero.net.ajax({\n\t\turl: Zotero.ajax.proxyWrapper(url, 'GET'),\n\t\ttype: 'GET'\n\t}).then(function(xhr){\n\t\tZ.debug(\"got itemTypes response\", 3);\n\t\tZ.debug(xhr.response, 4);\n\t\tZotero.Item.prototype.itemTypes = JSON.parse(xhr.responseText);\n\t\tZotero.cache.save({locale:locale, target:'itemTypes'}, Zotero.Item.prototype.itemTypes);\n\t});\n};\n\nZotero.Item.prototype.getItemFields = function (locale) {\n\tZ.debug(\"Zotero.Item.prototype.getItemFields\", 3);\n\tif(!locale){\n\t\tlocale = 'en-US';\n\t}\n\tlocale = 'en-US';\n\t\n\tvar itemFields = Zotero.cache.load({locale:locale, target:'itemFields'});\n\tif(itemFields){\n\t\tZ.debug(\"have itemFields in localStorage\", 3);\n\t\tZotero.Item.prototype.itemFields = itemFields;//JSON.parse(Zotero.storage.localStorage['itemFields']);\n\t\tObject.keys(Zotero.Item.prototype.itemFields).forEach(function(key){\n\t\t\tvar val = Zotero.Item.prototype.itemFields[key];\n\t\t\tZotero.localizations.fieldMap[val.field] = val.localized;\n\t\t});\n\t\treturn;\n\t}\n\t\n\tvar query = Zotero.ajax.apiQueryString({locale:locale});\n\tvar requestUrl = Zotero.config.baseApiUrl + '/itemFields' + query;\n\tZotero.net.ajax({\n\t\turl: Zotero.ajax.proxyWrapper(requestUrl),\n\t\ttype: 'GET'\n\t}).then(function(xhr){\n\t\tZ.debug(\"got itemTypes response\", 4);\n\t\tvar data = JSON.parse(xhr.responseText);\n\t\tZotero.Item.prototype.itemFields = data;\n\t\tZotero.cache.save({locale:locale, target:'itemFields'}, data);\n\t\t//Zotero.storage.localStorage['itemFields'] = JSON.stringify(data);\n\t\tObject.keys(Zotero.Item.prototype.itemFields).forEach(function(key){\n\t\t\tvar val = Zotero.Item.prototype.itemFields[key];\n\t\t\tZotero.localizations.fieldMap[val.field] = val.localized;\n\t\t});\n\t});\n};\n\nZotero.Item.prototype.getItemTemplate = function (itemType=\"document\", linkMode=\"\") {\n\tZ.debug(\"Zotero.Item.prototype.getItemTemplate\", 3);\n\tif(itemType == 'attachment' && linkMode == ''){\n\t\tthrow new Error(\"attachment template requested with no linkMode\");\n\t}\n\t\n\tvar query = Zotero.ajax.apiQueryString({itemType:itemType, linkMode:linkMode});\n\tvar requestUrl = Zotero.config.baseApiUrl + '/items/new' + query;\n\t\n\tvar cacheConfig = {itemType:itemType, target:'itemTemplate'};\n\tvar itemTemplate = Zotero.cache.load(cacheConfig);\n\tif(itemTemplate){\n\t\tZ.debug(\"have itemTemplate in localStorage\", 3);\n\t\tvar template = itemTemplate;// JSON.parse(Zotero.storage.localStorage[url]);\n\t\treturn Promise.resolve(template);\n\t}\n\t\n\treturn Zotero.ajaxRequest(requestUrl, 'GET', {dataType:'json'})\n\t.then(function(response){\n\t\tZ.debug(\"got itemTemplate response\", 3);\n\t\tZotero.cache.save(cacheConfig, response.data);\n\t\treturn response.data;\n\t});\n};\n\nZotero.Item.prototype.getUploadAuthorization = function(fileinfo){\n\t//fileInfo: md5, filename, filesize, mtime, zip, contentType, charset\n\tZ.debug(\"Zotero.Item.getUploadAuthorization\", 3);\n\tvar item = this;\n\t\n\tvar config = {\n\t\t'target':'item',\n\t\t'targetModifier':'file',\n\t\t'libraryType':item.owningLibrary.type,\n\t\t'libraryID':item.owningLibrary.libraryID,\n\t\t'itemKey':item.key\n\t};\n\tvar headers = {\n\t\t'Content-Type': 'application/x-www-form-urlencoded'\n\t};\n\tvar oldmd5 = item.get('md5');\n\tif(oldmd5){\n\t\theaders['If-Match'] = oldmd5;\n\t}\n\telse{\n\t\theaders['If-None-Match'] = '*';\n\t}\n\t\n\treturn Zotero.ajaxRequest(config, 'POST',\n\t\t{\n\t\t\tprocessData: true,\n\t\t\tdata:fileinfo,\n\t\t\theaders:headers\n\t\t}\n\t);\n};\n\nZotero.Item.prototype.registerUpload = function(uploadKey){\n\tZ.debug(\"Zotero.Item.registerUpload\", 3);\n\tvar item = this;\n\tvar config = {\n\t\t'target':'item',\n\t\t'targetModifier':'file',\n\t\t'libraryType':item.owningLibrary.type,\n\t\t'libraryID':item.owningLibrary.libraryID,\n\t\t'itemKey':item.key\n\t};\n\tvar headers = {\n\t\t'Content-Type': 'application/x-www-form-urlencoded'\n\t};\n\tvar oldmd5 = item.get('md5');\n\tif(oldmd5){\n\t\theaders['If-Match'] = oldmd5;\n\t}\n\telse{\n\t\theaders['If-None-Match'] = '*';\n\t}\n\t\n\treturn Zotero.ajaxRequest(config, 'POST',\n\t{\n\t\tprocessData: true,\n\t\tdata:{upload: uploadKey},\n\t\theaders: headers\n\t});\n};\n\nZotero.Item.prototype.fullUpload = function(file){\n\n};\n\nZotero.Item.prototype.creatorTypes = {};\n\nZotero.Item.prototype.getCreatorTypes = function (itemType) {\n\tZ.debug(\"Zotero.Item.prototype.getCreatorTypes: \" + itemType, 3);\n\tif(!itemType){\n\t\titemType = 'document';\n\t}\n\t\n\t//parse stored creatorTypes object if it exists\n\t//creatorTypes maps itemType to the possible creatorTypes\n\tvar creatorTypes = Zotero.cache.load({target:'creatorTypes'});\n\tif(creatorTypes){\n\t\tZ.debug(\"have creatorTypes in localStorage\", 3);\n\t\tZotero.Item.prototype.creatorTypes = creatorTypes;//JSON.parse(Zotero.storage.localStorage['creatorTypes']);\n\t}\n\t\n\tif(Zotero.Item.prototype.creatorTypes[itemType]){\n\t\tZ.debug(\"creatorTypes of requested itemType available in localStorage\", 3);\n\t\tZ.debug(Zotero.Item.prototype.creatorTypes, 4);\n\t\treturn Promise.resolve(Zotero.Item.prototype.creatorTypes[itemType]);\n\t}\n\telse{\n\t\tZ.debug(\"sending request for creatorTypes\", 3);\n\t\tvar query = Zotero.ajax.apiQueryString({itemType:itemType});\n\t\t//TODO: this probably shouldn't be using baseApiUrl directly\n\t\tvar requestUrl = Zotero.config.baseApiUrl + '/itemTypeCreatorTypes' + query;\n\t\t\n\t\treturn Zotero.ajaxRequest(requestUrl, 'GET', {dataType:'json'})\n\t\t.then(function(response){\n\t\t\tZ.debug(\"got creatorTypes response\", 4);\n\t\t\tZotero.Item.prototype.creatorTypes[itemType] = response.data;\n\t\t\t//Zotero.storage.localStorage['creatorTypes'] = JSON.stringify(Zotero.Item.prototype.creatorTypes);\n\t\t\tZotero.cache.save({target:'creatorTypes'}, Zotero.Item.prototype.creatorTypes);\n\t\t\treturn Zotero.Item.prototype.creatorTypes[itemType];\n\t\t});\n\t}\n};\n\nZotero.Item.prototype.getCreatorFields = function (locale) {\n\tZ.debug(\"Zotero.Item.prototype.getCreatorFields\", 3);\n\tvar creatorFields = Zotero.cache.load({target:'creatorFields'});\n\tif(creatorFields){\n\t\tZ.debug(\"have creatorFields in localStorage\", 3);\n\t\tZotero.Item.prototype.creatorFields = creatorFields;// JSON.parse(Zotero.storage.localStorage['creatorFields']);\n\t\treturn Promise.resolve(creatorFields);\n\t}\n\t\n\tvar requestUrl = Zotero.config.baseApiUrl + '/creatorFields';\n\treturn Zotero.ajaxRequest(requestUrl, 'GET', {dataType:'json'})\n\t.then(function(response){\n\t\tZ.debug(\"got itemTypes response\", 4);\n\t\tZotero.Item.prototype.creatorFields = response.data;\n\t\tZotero.cache.save({target:'creatorFields'}, response.data);\n\t});\n};\n\n//---Functions to manually add Zotero format data instead of fetching it from the API ---\n//To be used first with cached data for offline, could also maybe be used for custom types\nZotero.Item.prototype.addItemTypes = function(itemTypes, locale){\n\t\n};\n\nZotero.Item.prototype.addItemFields = function(itemType, itemFields){\n\t\n};\n\nZotero.Item.prototype.addCreatorTypes = function(itemType, creatorTypes){\n\t\n};\n\nZotero.Item.prototype.addCreatorFields = function(itemType, creatorFields){\n\t\n};\n\nZotero.Item.prototype.addItemTemplates = function(templates){\n\t\n};\n\nZotero.Item.prototype.itemTypeImageClass = function(){\n\t//linkModes: imported_file,imported_url,linked_file,linked_url\n\tvar item = this;\n\tif(item.apiObj.data.itemType == 'attachment'){\n\t\tswitch(item.apiObj.data.linkMode){\n\t\t\tcase 'imported_file':\n\t\t\t\tif(item.translatedMimeType == 'pdf'){\n\t\t\t\t\treturn item.itemTypeImageSrc['attachmentPdf'];\n\t\t\t\t}\n\t\t\t\treturn item.itemTypeImageSrc['attachmentFile'];\n\t\t\tcase 'imported_url':\n\t\t\t\tif(item.translatedMimeType == 'pdf'){\n\t\t\t\t\treturn item.itemTypeImageSrc['attachmentPdf'];\n\t\t\t\t}\n\t\t\t\treturn item.itemTypeImageSrc['attachmentSnapshot'];\n\t\t\tcase 'linked_file':\n\t\t\t\treturn item.itemTypeImageSrc['attachmentLink'];\n\t\t\tcase 'linked_url':\n\t\t\t\treturn item.itemTypeImageSrc['attachmentWeblink'];\n\t\t\tdefault:\n\t\t\t\treturn item.itemTypeImageSrc['attachment'];\n\t\t}\n\t}\n\telse {\n\t\treturn item.apiObj.data.itemType;\n\t}\n};\n\nZotero.Item.prototype.itemTypeIconClass = function(){\n\t//linkModes: imported_file,imported_url,linked_file,linked_url\n\tvar item = this;\n\tvar defaultIcon = 'fa fa-file-text-o';\n\tswitch(item.apiObj.data.itemType){\n\t\tcase 'attachment':\n\t\t\tswitch(item.apiObj.data.linkMode){\n\t\t\t\tcase 'imported_file':\n\t\t\t\t\tif(item.translatedMimeType == 'pdf'){\n\t\t\t\t\t\treturn 'fa fa-file-pdf-o';\n\t\t\t\t\t}\n\t\t\t\t\treturn 'glyphicons glyphicons-file';\n\t\t\t\tcase 'imported_url':\n\t\t\t\t\tif(item.translatedMimeType == 'pdf'){\n\t\t\t\t\t\treturn 'fa fa-file-pdf-o';\n\t\t\t\t\t}\n\t\t\t\t\treturn 'glyphicons glyphicons-file';\n\t\t\t\tcase 'linked_file':\n\t\t\t\t\treturn 'glyphicons glyphicons-link';\n\t\t\t\t\t//return item.itemTypeImageSrc['attachmentLink'];\n\t\t\t\tcase 'linked_url':\n\t\t\t\t\treturn 'glyphicons glyphicons-link';\n\t\t\t\t\t//return item.itemTypeImageSrc['attachmentWeblink'];\n\t\t\t\tdefault:\n\t\t\t\t\treturn 'glyphicons glyphicons-paperclip';\n\t\t\t\t\t//return item.itemTypeImageSrc['attachment'];\n\t\t\t}\n\t\t\treturn 'glyphicons file';\n\t\tcase 'artwork':\n\t\t\treturn 'glyphicons glyphicons-picture';\n\t\tcase 'audioRecording':\n\t\t\treturn 'glyphicons glyphicons-microphone';\n\t\tcase 'bill':\n\t\t\treturn defaultIcon;\n\t\tcase 'blogPost':\n\t\t\treturn 'glyphicons glyphicons-blog';\n\t\tcase 'book':\n\t\t\treturn 'glyphicons glyphicons-book';\n\t\tcase 'bookSection':\n\t\t\treturn 'glyphicons glyphicons-book-open';\n\t\tcase 'case':\n\t\t\treturn defaultIcon;\n\t\tcase 'computerProgram':\n\t\t\treturn 'glyphicons glyphicons-floppy-disk';\n\t\tcase 'conferencePaper':\n\t\t\treturn defaultIcon;\n\t\tcase 'dictionaryEntry':\n\t\t\treturn 'glyphicons glyphicons-translate';\n\t\tcase 'document':\n\t\t\treturn 'glyphicons glyphicons-file';\n\t\tcase 'email':\n\t\t\treturn 'glyphicons glyphicons-envelope';\n\t\tcase 'encyclopediaArticle':\n\t\t\treturn 'glyphicons glyphicons-bookmark';\n\t\tcase 'film':\n\t\t\treturn 'glyphicons glyphicons-film';\n\t\tcase 'forumPost':\n\t\t\treturn 'glyphicons glyphicons-bullhorn';\n\t\tcase 'hearing':\n\t\t\treturn 'fa fa-gavel';\n\t\tcase 'instantMessage':\n\t\t\treturn 'fa fa-comment-o';\n\t\tcase 'interview':\n\t\t\treturn 'fa fa-comments-o';\n\t\tcase 'journalArticle':\n\t\t\treturn 'fa fa-file-text-o';\n\t\tcase 'letter':\n\t\t\treturn 'glyphicons glyphicons-message-full';\n\t\tcase 'magazineArticle':\n\t\t\treturn defaultIcon;\n\t\tcase 'manuscript':\n\t\t\treturn 'glyphicons glyphicons-pen';\n\t\tcase 'map':\n\t\t\treturn 'glyphicons glyphicons-google-maps';\n\t\tcase 'newspaperArticle':\n\t\t\treturn 'fa fa-newspaper-o';\n\t\tcase 'note':\n\t\t\treturn 'glyphicons glyphicons-notes noteyellow';\n\t\tcase 'patent':\n\t\t\treturn 'glyphicons glyphicons-lightbulb';\n\t\tcase 'podcast':\n\t\t\treturn 'glyphicons glyphicons-ipod';\n\t\tcase 'presentation':\n\t\t\treturn 'glyphicons glyphicons-keynote';\n\t\tcase 'radioBroadcast':\n\t\t\treturn 'glyphicons glyphicons-wifi-alt';\n\t\tcase 'report':\n\t\t\treturn 'glyphicons glyphicons-notes-2';\n\t\tcase 'statue':\n\t\t\treturn 'glyphicons glyphicons-bank';\n\t\tcase 'thesis':\n\t\t\treturn 'fa fa-graduation-cap';\n\t\tcase 'tvBroadcast':\n\t\t\treturn 'glyphicons glyphicons-display';\n\t\tcase 'videoRecording':\n\t\t\treturn 'glyphicons glyphicons-facetime-video';\n\t\tcase 'webpage':\n\t\t\treturn 'glyphicons glyphicons-embed-close';\n\t\tdefault:\n\t\t\treturn 'glyphicons file';\n\t}\n};\n\nZotero.Item.prototype.get = function(key){\n\tvar item = this;\n\tswitch(key) {\n\t\tcase 'title':\n\t\t\tvar title = '';\n\t\t\tif(item.apiObj.data.itemType == 'note'){\n\t\t\t\treturn item.noteTitle(item.apiObj.data.note);\n\t\t\t} else {\n\t\t\t\treturn item.apiObj.data.title;\n\t\t\t}\n\t\t\tif(title === ''){\n\t\t\t\treturn '[Untitled]';\n\t\t\t}\n\t\t\treturn title;\n\t\tcase 'creatorSummary':\n\t\tcase 'creator':\n\t\t\tif(typeof item.apiObj.meta.creatorSummary !== \"undefined\"){\n\t\t\t\treturn item.apiObj.meta.creatorSummary;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'year':\n\t\t\tif(item.parsedDate) {\n\t\t\t\treturn item.parsedDate.getFullYear();\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn '';\n\t\t\t}\n\t}\n\t\n\tif(key in item.apiObj.data){\n\t\treturn item.apiObj.data[key];\n\t}\n\telse if(key in item.apiObj.meta){\n\t\treturn item.apiObj.meta[key];\n\t}\n\telse if(item.hasOwnProperty(key)){\n\t\treturn item[key];\n\t}\n\t\n\treturn null;\n};\n\nZotero.Item.prototype.set = function(key, val){\n\tvar item = this;\n\tif(key in item.apiObj){\n\t\titem.apiObj[key] = val;\n\t}\n\tif(key in item.apiObj.data){\n\t\titem.apiObj.data[key] = val;\n\t}\n\tif(key in item.apiObj.meta){\n\t\titem.apiObj.meta[key] = val;\n\t}\n\t\n\tswitch (key) {\n\t\tcase \"itemKey\":\n\t\tcase \"key\":\n\t\t\titem.key = val;\n\t\t\titem.apiObj.data.key = val;\n\t\t\tbreak;\n\t\tcase \"itemVersion\":\n\t\tcase \"version\":\n\t\t\titem.version = val;\n\t\t\titem.apiObj.data.version = val;\n\t\t\tbreak;\n\t\tcase \"itemType\":\n\t\t\titem.itemType = val;\n\t\t\t//TODO: translate api object to new item type\n\t\t\tbreak;\n\t\tcase \"linkMode\":\n\t\t\tbreak;\n\t\tcase \"deleted\":\n\t\t\titem.apiObj.data.deleted = val;\n\t\t\tbreak;\n\t\tcase \"parentItem\":\n\t\t\tif( val === '' ){ val = false; }\n\t\t\titem.apiObj.data.parentItem = val;\n\t\t\tbreak;\n\t}\n\t\n//    item.synced = false;\n\treturn item;\n};\n\nZotero.Item.prototype.noteTitle = function(note){\n\tvar len = 120;\n\tvar notetext = J(note).text();\n\tvar firstNewline = notetext.indexOf(\"\\n\");\n\tif((firstNewline != -1) && firstNewline < len){\n\t\treturn notetext.substr(0, firstNewline);\n\t}\n\telse {\n\t\treturn notetext.substr(0, len);\n\t}\n};\n\nZotero.Item.prototype.setParent = function(parentItemKey){\n\tvar item = this;\n\t//pull out itemKey string if we were passed an item object\n\tif(typeof parentItemKey != 'string' &&\n\t\tparentItemKey.hasOwnProperty('instance') &&\n\t\tparentItemKey.instance == 'Zotero.Item'){\n\t\tparentItemKey = parentItemKey.key;\n\t}\n\titem.set('parentItem', parentItemKey);\n\treturn item;\n};\n\nZotero.Item.prototype.addToCollection = function(collectionKey){\n\tvar item = this;\n\t//take out the collection key if we're passed a collection object instead\n\tif(typeof collectionKey != 'string'){\n\t\tif(collectionKey.instance == 'Zotero.Collection'){\n\t\t\tcollectionKey = collectionKey.key;\n\t\t}\n\t}\n\tif(item.apiObj.data.collections.indexOf(collectionKey) === -1){\n\t\titem.apiObj.data.collections.push(collectionKey);\n\t}\n\treturn;\n};\n\nZotero.Item.prototype.removeFromCollection = function(collectionKey){\n\tvar item = this;\n\t//take out the collection key if we're passed a collection object instead\n\tif(typeof collectionKey != 'string'){\n\t\tif(collectionKey.instance == 'Zotero.Collection'){\n\t\t\tcollectionKey = collectionKey.key;\n\t\t}\n\t}\n\tvar index = item.apiObj.data.collections.indexOf(collectionKey);\n\tif(index != -1){\n\t\titem.apiObj.data.collections.splice(index, 1);\n\t}\n\treturn;\n};\n\nZotero.Item.prototype.uploadChildAttachment = function(childItem, fileInfo, progressCallback){\n\t/*\n\t * write child item so that it exists\n\t * get upload authorization for actual file\n\t * perform full upload\n\t */\n\tvar item = this;\n\tZ.debug(\"uploadChildAttachment\", 3);\n\tif(!item.owningLibrary){\n\t\treturn Promise.reject(new Error(\"Item must be associated with a library\"));\n\t}\n\n\t//make sure childItem has parent set\n\tchildItem.set('parentItem', item.key);\n\tchildItem.associateWithLibrary(item.owningLibrary);\n\t\n\treturn childItem.writeItem()\n\t.then(function(response){\n\t\t//successful attachmentItemWrite\n\t\titem.numChildren++;\n\t\treturn childItem.uploadFile(fileInfo, progressCallback);\n\t}, function(response){\n\t\t//failure during attachmentItem write\n\t\tthrow {\n\t\t\t\"message\":\"Failure during attachmentItem write.\",\n\t\t\t\"code\": response.status,\n\t\t\t\"serverMessage\": response.jqxhr.responseText,\n\t\t\t\"response\": response\n\t\t};\n\t});\n};\n\nZotero.Item.prototype.uploadFile = function(fileInfo, progressCallback){\n\tvar item = this;\n\tZ.debug(\"Zotero.Item.uploadFile\", 3);\n\tvar uploadAuthFileData = {\n\t\tmd5:fileInfo.md5,\n\t\tfilename: item.get('title'),\n\t\tfilesize: fileInfo.filesize,\n\t\tmtime:fileInfo.mtime,\n\t\tcontentType:fileInfo.contentType,\n\t\tparams:1\n\t};\n\tif(fileInfo.contentType === \"\"){\n\t\tuploadAuthFileData.contentType = \"application/octet-stream\";\n\t}\n\treturn item.getUploadAuthorization(uploadAuthFileData)\n\t.then(function(response){\n\t\tZ.debug(\"uploadAuth callback\", 3);\n\t\tvar upAuthOb;\n\t\tif(typeof response.data == \"string\"){upAuthOb = JSON.parse(response.data);}\n\t\telse{upAuthOb = response.data;}\n\t\tif(upAuthOb.exists == 1){\n\t\t\treturn {'message':\"File Exists\"};\n\t\t}\n\t\telse{\n\t\t\t//TODO: add progress\n\t\t\treturn Zotero.file.uploadFile(upAuthOb, fileInfo)\n\t\t\t.then(function(){\n\t\t\t\t//upload was successful: register it\n\t\t\t\treturn item.registerUpload(upAuthOb.uploadKey)\n\t\t\t\t.then(function(response){\n\t\t\t\t\tif(response.isError){\n\t\t\t\t\t\tvar e = {\n\t\t\t\t\t\t\t\"message\":\"Failed to register uploaded file.\",\n\t\t\t\t\t\t\t\"code\": response.status,\n\t\t\t\t\t\t\t\"serverMessage\": response.jqxhr.responseText,\n\t\t\t\t\t\t\t'response': response\n\t\t\t\t\t\t};\n\t\t\t\t\t\tZ.error(e);\n\t\t\t\t\t\tthrow e;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn {'message': 'Upload Successful'};\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}).catch(function(response){\n\t\tZ.debug(\"Failure caught during upload\", 3);\n\t\tZ.debug(response, 3);\n\t\tthrow {\n\t\t\t\"message\":\"Failure during upload.\",\n\t\t\t\"code\": response.status,\n\t\t\t\"serverMessage\": response.jqxhr.responseText,\n\t\t\t'response': response\n\t\t};\n\t});\n};\n\nZotero.Item.prototype.cslItem = function(){\n\tvar zoteroItem = this;\n\t\n\t// don't return URL or accessed information for journal articles if a\n\t// pages field exists\n\tvar itemType = zoteroItem.get(\"itemType\");//Zotero_ItemTypes::getName($zoteroItem->itemTypeID);\n\tvar cslType = zoteroItem.cslTypeMap.hasOwnProperty(itemType) ? zoteroItem.cslTypeMap[itemType] : false;\n\tif (!cslType) cslType = \"article\";\n\tvar ignoreURL = ((zoteroItem.get(\"accessDate\") || zoteroItem.get(\"url\")) &&\n\t\t\titemType in {\"journalArticle\":1, \"newspaperArticle\":1, \"magazineArticle\":1} &&\n\t\t\tzoteroItem.get(\"pages\") &&\n\t\t\tzoteroItem.citePaperJournalArticleURL);\n\t\n\tvar cslItem = {'type': cslType};\n\tif(zoteroItem.owningLibrary){\n\t\tcslItem['id'] = zoteroItem.apiObj.library.id + \"/\" + zoteroItem.get(\"key\");\n\t} else {\n\t\tcslItem['id'] = Zotero.utils.getKey();\n\t}\n\t\n\t// get all text variables (there must be a better way)\n\t// TODO: does citeproc-js permit short forms?\n\tObject.keys(zoteroItem.cslFieldMap).forEach(function(variable){\n\t\tvar fields = zoteroItem.cslFieldMap[variable];\n\t\tif (variable == \"URL\" && ignoreURL) return;\n\t\tfields.forEach(function(field){\n\t\t\tvar value = zoteroItem.get(field);\n\t\t\tif(value){\n\t\t\t\t//TODO: strip enclosing quotes? necessary when not pulling from DB?\n\t\t\t\tcslItem[variable] = value;\n\t\t\t}\n\t\t});\n\t});\n\t\n\t// separate name variables\n\tvar creators = zoteroItem.get('creators');\n\tcreators.forEach(function(creator){\n\t\tvar creatorType = creator['creatorType'];// isset(self::$zoteroNameMap[$creatorType]) ? self::$zoteroNameMap[$creatorType] : false;\n\t\tif (!creatorType) return;\n\t\t\n\t\tvar nameObj;\n\t\tif(creator.hasOwnProperty(\"name\")){\n\t\t\tnameObj = {'literal': creator['name']};\n\t\t}\n\t\telse {\n\t\t\tnameObj = {'family': creator['lastName'], 'given': creator['firstName']};\n\t\t}\n\t\t\n\t\tif (cslItem.hasOwnProperty(creatorType)) {\n\t\t\tcslItem[creatorType].push(nameObj);\n\t\t}\n\t\telse {\n\t\t\tcslItem[creatorType] = [nameObj];\n\t\t}\n\t});\n\t\n\t// get date variables\n\tObject.keys(zoteroItem.cslDateMap).forEach(function(key){\n\t\tvar val = zoteroItem.cslDateMap[key];\n\t\tvar date = zoteroItem.get(val);\n\t\tif (date) {\n\t\t\tcslItem[key] = {\"raw\": date};\n\t\t}\n\t});\n\t\n\treturn cslItem;\n};\n","Zotero.Item.prototype.fieldMap = {\n\t\"itemType\"\t\t\t\t: \"Item Type\",\n\t\"title\"\t\t\t\t\t: \"Title\",\n\t\"dateAdded\"\t\t\t\t: \"Date Added\",\n\t\"dateModified\"\t\t\t: \"Date Modified\",\n\t\"source\"\t\t\t\t: \"Source\",\n\t\"notes\"\t\t\t\t\t: \"Notes\",\n\t\"tags\"\t\t\t\t\t: \"Tags\",\n\t\"attachments\"\t\t\t: \"Attachments\",\n\t\"related\"\t\t\t\t: \"Related\",\n\t\"url\"\t\t\t\t\t: \"URL\",\n\t\"rights\"\t\t\t\t: \"Rights\",\n\t\"series\"\t\t\t\t: \"Series\",\n\t\"volume\"\t\t\t\t: \"Volume\",\n\t\"issue\"\t\t\t\t\t: \"Issue\",\n\t\"edition\"\t\t\t\t: \"Edition\",\n\t\"place\"\t\t\t\t\t: \"Place\",\n\t\"publisher\"\t\t\t\t: \"Publisher\",\n\t\"pages\"\t\t\t\t\t: \"Pages\",\n\t\"ISBN\"\t\t\t\t\t: \"ISBN\",\n\t\"publicationTitle\"\t\t: \"Publication\",\n\t\"ISSN\"\t\t\t\t\t: \"ISSN\",\n\t\"date\"\t\t\t\t\t: \"Date\",\n\t\"year\"\t\t\t\t\t: \"Year\",\n\t\"section\"\t\t\t\t: \"Section\",\n\t\"callNumber\"\t\t\t: \"Call Number\",\n\t\"archive\"\t\t\t\t: \"Archive\",\n\t\"archiveLocation\"\t\t: \"Loc. in Archive\",\n\t\"libraryCatalog\"\t\t: \"Library Catalog\",\n\t\"distributor\"\t\t\t: \"Distributor\",\n\t\"extra\"\t\t\t\t\t: \"Extra\",\n\t\"journalAbbreviation\"\t: \"Journal Abbr\",\n\t\"DOI\"\t\t\t\t\t: \"DOI\",\n\t\"accessDate\"\t\t\t: \"Accessed\",\n\t\"seriesTitle\"\t\t\t: \"Series Title\",\n\t\"seriesText\"\t\t\t: \"Series Text\",\n\t\"seriesNumber\"\t\t\t: \"Series Number\",\n\t\"institution\"\t\t\t: \"Institution\",\n\t\"reportType\"\t\t\t: \"Report Type\",\n\t\"code\"\t\t\t\t\t: \"Code\",\n\t\"session\"\t\t\t\t: \"Session\",\n\t\"legislativeBody\"\t\t: \"Legislative Body\",\n\t\"history\"\t\t\t\t: \"History\",\n\t\"reporter\"\t\t\t\t: \"Reporter\",\n\t\"court\"\t\t\t\t\t: \"Court\",\n\t\"numberOfVolumes\"\t\t: \"# of Volumes\",\n\t\"committee\"\t\t\t\t: \"Committee\",\n\t\"assignee\"\t\t\t\t: \"Assignee\",\n\t\"patentNumber\"\t\t\t: \"Patent Number\",\n\t\"priorityNumbers\"\t\t: \"Priority Numbers\",\n\t\"issueDate\"\t\t\t\t: \"Issue Date\",\n\t\"references\"\t\t\t: \"References\",\n\t\"legalStatus\"\t\t\t: \"Legal Status\",\n\t\"codeNumber\"\t\t\t: \"Code Number\",\n\t\"artworkMedium\"\t\t\t: \"Medium\",\n\t\"number\"\t\t\t\t: \"Number\",\n\t\"artworkSize\"\t\t\t: \"Artwork Size\",\n\t\"repository\"\t\t\t: \"Repository\",\n\t\"videoRecordingType\"\t: \"Recording Type\",\n\t\"interviewMedium\"\t\t: \"Medium\",\n\t\"letterType\"\t\t\t: \"Type\",\n\t\"manuscriptType\"\t\t: \"Type\",\n\t\"mapType\"\t\t\t\t: \"Type\",\n\t\"scale\"\t\t\t\t\t: \"Scale\",\n\t\"thesisType\"\t\t\t: \"Type\",\n\t\"websiteType\"\t\t\t: \"Website Type\",\n\t\"audioRecordingType\"\t: \"Recording Type\",\n\t\"label\"\t\t\t\t\t: \"Label\",\n\t\"presentationType\"\t\t: \"Type\",\n\t\"meetingName\"\t\t\t: \"Meeting Name\",\n\t\"studio\"\t\t\t\t: \"Studio\",\n\t\"runningTime\"\t\t\t: \"Running Time\",\n\t\"network\"\t\t\t\t: \"Network\",\n\t\"postType\"\t\t\t\t: \"Post Type\",\n\t\"audioFileType\"\t\t\t: \"File Type\",\n\t\"versionNumber\"\t\t\t: \"Version Number\",\n\t\"system\"\t\t\t\t: \"System\",\n\t\"company\"\t\t\t\t: \"Company\",\n\t\"conferenceName\"\t\t: \"Conference Name\",\n\t\"encyclopediaTitle\"\t\t: \"Encyclopedia Title\",\n\t\"dictionaryTitle\"\t\t: \"Dictionary Title\",\n\t\"language\"\t\t\t\t: \"Language\",\n\t\"programmingLanguage\"\t: \"Language\",\n\t\"university\"\t\t\t: \"University\",\n\t\"abstractNote\"\t\t\t: \"Abstract\",\n\t\"websiteTitle\"\t\t\t: \"Website Title\",\n\t\"reportNumber\"\t\t\t: \"Report Number\",\n\t\"billNumber\"\t\t\t: \"Bill Number\",\n\t\"codeVolume\"\t\t\t: \"Code Volume\",\n\t\"codePages\"\t\t\t\t: \"Code Pages\",\n\t\"dateDecided\"\t\t\t: \"Date Decided\",\n\t\"reporterVolume\"\t\t: \"Reporter Volume\",\n\t\"firstPage\"\t\t\t\t: \"First Page\",\n\t\"documentNumber\"\t\t: \"Document Number\",\n\t\"dateEnacted\"\t\t\t: \"Date Enacted\",\n\t\"publicLawNumber\"\t\t: \"Public Law Number\",\n\t\"country\"\t\t\t\t: \"Country\",\n\t\"applicationNumber\"\t\t: \"Application Number\",\n\t\"forumTitle\"\t\t\t: \"Forum/Listserv Title\",\n\t\"episodeNumber\"\t\t\t: \"Episode Number\",\n\t\"blogTitle\"\t\t\t\t: \"Blog Title\",\n\t\"caseName\"\t\t\t\t: \"Case Name\",\n\t\"nameOfAct\"\t\t\t\t: \"Name of Act\",\n\t\"subject\"\t\t\t\t: \"Subject\",\n\t\"proceedingsTitle\"\t\t: \"Proceedings Title\",\n\t\"bookTitle\"\t\t\t\t: \"Book Title\",\n\t\"shortTitle\"\t\t\t: \"Short Title\",\n\t\"docketNumber\"\t\t\t: \"Docket Number\",\n\t\"numPages\"\t\t\t\t: \"# of Pages\",\n\t\"note\"\t\t\t\t\t: \"Note\",\n\t\"numChildren\"\t\t\t: \"# of Children\",\n\t\"addedBy\"\t\t\t\t: \"Added By\",\n\t\"creator\"\t\t\t\t: \"Creator\"\n};\n\nZotero.localizations.fieldMap = Zotero.Item.prototype.fieldMap;\n\nZotero.Item.prototype.typeMap = {\n\t\"note\"\t\t\t\t\t: \"Note\",\n\t\"attachment\"\t\t\t: \"Attachment\",\n\t\"book\"\t\t\t\t\t: \"Book\",\n\t\"bookSection\"\t\t\t: \"Book Section\",\n\t\"journalArticle\"\t\t: \"Journal Article\",\n\t\"magazineArticle\"\t\t: \"Magazine Article\",\n\t\"newspaperArticle\"\t\t: \"Newspaper Article\",\n\t\"thesis\"\t\t\t\t: \"Thesis\",\n\t\"letter\"\t\t\t\t: \"Letter\",\n\t\"manuscript\"\t\t\t: \"Manuscript\",\n\t\"interview\"\t\t\t\t: \"Interview\",\n\t\"film\"\t\t\t\t\t: \"Film\",\n\t\"artwork\"\t\t\t\t: \"Artwork\",\n\t\"webpage\"\t\t\t\t: \"Web Page\",\n\t\"report\"\t\t\t\t: \"Report\",\n\t\"bill\"\t\t\t\t\t: \"Bill\",\n\t\"case\"\t\t\t\t\t: \"Case\",\n\t\"hearing\"\t\t\t\t: \"Hearing\",\n\t\"patent\"\t\t\t\t: \"Patent\",\n\t\"statute\"\t\t\t\t: \"Statute\",\n\t\"email\"\t\t\t\t\t: \"E-mail\",\n\t\"map\"\t\t\t\t\t: \"Map\",\n\t\"blogPost\"\t\t\t\t: \"Blog Post\",\n\t\"instantMessage\"\t\t: \"Instant Message\",\n\t\"forumPost\"\t\t\t\t: \"Forum Post\",\n\t\"audioRecording\"\t\t: \"Audio Recording\",\n\t\"presentation\"\t\t\t: \"Presentation\",\n\t\"videoRecording\"\t\t: \"Video Recording\",\n\t\"tvBroadcast\"\t\t\t: \"TV Broadcast\",\n\t\"radioBroadcast\"\t\t: \"Radio Broadcast\",\n\t\"podcast\"\t\t\t\t: \"Podcast\",\n\t\"computerProgram\"\t\t: \"Computer Program\",\n\t\"conferencePaper\"\t\t: \"Conference Paper\",\n\t\"document\"\t\t\t\t: \"Document\",\n\t\"encyclopediaArticle\"\t: \"Encyclopedia Article\",\n\t\"dictionaryEntry\"\t\t: \"Dictionary Entry\"\n};\n\nZotero.localizations.typeMap = Zotero.Item.prototype.typeMap;\n\nZotero.Item.prototype.creatorMap = {\n\t\"author\"\t\t\t: \"Author\",\n\t\"contributor\"\t\t: \"Contributor\",\n\t\"editor\"\t\t\t: \"Editor\",\n\t\"translator\"\t\t: \"Translator\",\n\t\"seriesEditor\"\t\t: \"Series Editor\",\n\t\"interviewee\"\t\t: \"Interview With\",\n\t\"interviewer\"\t\t: \"Interviewer\",\n\t\"director\"\t\t\t: \"Director\",\n\t\"scriptwriter\"\t\t: \"Scriptwriter\",\n\t\"producer\"\t\t\t: \"Producer\",\n\t\"castMember\"\t\t: \"Cast Member\",\n\t\"sponsor\"\t\t\t: \"Sponsor\",\n\t\"counsel\"\t\t\t: \"Counsel\",\n\t\"inventor\"\t\t\t: \"Inventor\",\n\t\"attorneyAgent\"\t\t: \"Attorney/Agent\",\n\t\"recipient\"\t\t\t: \"Recipient\",\n\t\"performer\"\t\t\t: \"Performer\",\n\t\"composer\"\t\t\t: \"Composer\",\n\t\"wordsBy\"\t\t\t: \"Words By\",\n\t\"cartographer\"\t\t: \"Cartographer\",\n\t\"programmer\"\t\t: \"Programmer\",\n\t\"reviewedAuthor\"\t: \"Reviewed Author\",\n\t\"artist\"\t\t\t: \"Artist\",\n\t\"commenter\"\t\t\t: \"Commenter\",\n\t\"presenter\"\t\t\t: \"Presenter\",\n\t\"guest\"\t\t\t\t: \"Guest\",\n\t\"podcaster\"\t\t\t: \"Podcaster\"\n};\n\nZotero.Item.prototype.hideFields = [\n\t\"mimeType\",\n\t\"linkMode\",\n\t\"charset\",\n\t\"md5\",\n\t\"mtime\",\n\t\"version\",\n\t\"key\",\n\t\"collections\",\n\t\"relations\",\n\t\"parentItem\",\n\t\"contentType\",\n\t\"filename\",\n\t\"tags\"\n];\n\nZotero.Item.prototype.noEditFields = [\n\t\"accessDate\",\n\t\"modified\",\n\t\"filename\",\n\t\"dateAdded\",\n\t\"dateModified\"\n];\n\nZotero.localizations.creatorMap = Zotero.Item.prototype.creatorMap;\n\nZotero.Item.prototype.itemTypeImageSrc = {\n\t\"note\"\t\t\t\t\t: \"note\",\n\t\"attachment\"\t\t\t: \"attachment-pdf\",\n\t\"attachmentPdf\"\t\t\t: \"attachment-pdf\",\n\t\"attachmentWeblink\"\t\t: \"attachment-web-link\",\n\t\"attachmentSnapshot\"\t: \"attachment-snapshot\",\n\t\"attachmentFile\"\t\t: \"attachment-file\",\n\t\"attachmentLink\"\t\t: \"attachment-link\",\n\t\"book\"\t\t\t\t\t: \"book\",\n\t\"bookSection\"\t\t\t: \"book_open\",\n\t\"journalArticle\"\t\t: \"page_white_text\",\n\t\"magazineArticle\"\t\t: \"layout\",\n\t\"newspaperArticle\"\t\t: \"newspaper\",\n\t\"thesis\"\t\t\t\t: \"report\",\n\t\"letter\"\t\t\t\t: \"email_open\",\n\t\"manuscript\"\t\t\t: \"script\",\n\t\"interview\"\t\t\t\t: \"comments\",\n\t\"film\"\t\t\t\t\t: \"film\",\n\t\"artwork\"\t\t\t\t: \"picture\",\n\t\"webpage\"\t\t\t\t: \"page\",\n\t\"report\"\t\t\t\t: \"report\",\n\t\"bill\"\t\t\t\t\t: \"page_white\",\n\t\"case\"\t\t\t\t\t: \"page_white\",\n\t\"hearing\"\t\t\t\t: \"page_white\",\n\t\"patent\"\t\t\t\t: \"page_white\",\n\t\"statute\"\t\t\t\t: \"page_white\",\n\t\"email\"\t\t\t\t\t: \"email\",\n\t\"map\"\t\t\t\t\t: \"map\",\n\t\"blogPost\"\t\t\t\t: \"layout\",\n\t\"instantMessage\"\t\t: \"page_white\",\n\t\"forumPost\"\t\t\t\t: \"page\",\n\t\"audioRecording\"\t\t: \"ipod\",\n\t\"presentation\"\t\t\t: \"page_white\",\n\t\"videoRecording\"\t\t: \"film\",\n\t\"tvBroadcast\"\t\t\t: \"television\",\n\t\"radioBroadcast\"\t\t: \"transmit\",\n\t\"podcast\"\t\t\t\t: \"ipod_cast\",\n\t\"computerProgram\"\t\t: \"page_white_code\",\n\t\"conferencePaper\"\t\t: \"treeitem-conferencePaper\",\n\t\"document\"\t\t\t\t: \"page_white\",\n\t\"encyclopediaArticle\"\t: \"page_white\",\n\t\"dictionaryEntry\"\t\t: \"page_white\"\n};\n\nZotero.Item.prototype.cslNameMap = {\n\t\"author\": \"author\",\n\t\"editor\": \"editor\",\n\t\"bookAuthor\": \"container-author\",\n\t\"composer\": \"composer\",\n\t\"interviewer\": \"interviewer\",\n\t\"recipient\": \"recipient\",\n\t\"seriesEditor\": \"collection-editor\",\n\t\"translator\": \"translator\"\n};\n\nZotero.Item.prototype.cslFieldMap = {\n\t\"title\": [\"title\"],\n\t\"container-title\": [\"publicationTitle\",  \"reporter\", \"code\"], /* reporter and code should move to SQL mapping tables */\n\t\"collection-title\": [\"seriesTitle\", \"series\"],\n\t\"collection-number\": [\"seriesNumber\"],\n\t\"publisher\": [\"publisher\", \"distributor\"], /* distributor should move to SQL mapping tables */\n\t\"publisher-place\": [\"place\"],\n\t\"authority\": [\"court\"],\n\t\"page\": [\"pages\"],\n\t\"volume\": [\"volume\"],\n\t\"issue\": [\"issue\"],\n\t\"number-of-volumes\": [\"numberOfVolumes\"],\n\t\"number-of-pages\": [\"numPages\"],\n\t\"edition\": [\"edition\"],\n\t\"versionNumber\": [\"version\"],\n\t\"section\": [\"section\"],\n\t\"genre\": [\"type\", \"artworkSize\"], /* artworkSize should move to SQL mapping tables, or added as a CSL variable */\n\t\"medium\": [\"medium\", \"system\"],\n\t\"archive\": [\"archive\"],\n\t\"archive_location\": [\"archiveLocation\"],\n\t\"event\": [\"meetingName\", \"conferenceName\"], /* these should be mapped to the same base field in SQL mapping tables */\n\t\"event-place\": [\"place\"],\n\t\"abstract\": [\"abstractNote\"],\n\t\"URL\": [\"url\"],\n\t\"DOI\": [\"DOI\"],\n\t\"ISBN\": [\"ISBN\"],\n\t\"call-number\": [\"callNumber\"],\n\t\"note\": [\"extra\"],\n\t\"number\": [\"number\"],\n\t\"references\": [\"history\"],\n\t\"shortTitle\": [\"shortTitle\"],\n\t\"journalAbbreviation\": [\"journalAbbreviation\"],\n\t\"language\": [\"language\"]\n};\n\nZotero.Item.prototype.cslDateMap = {\n\t\"issued\": \"date\",\n\t\"accessed\": \"accessDate\"\n};\n\nZotero.Item.prototype.cslTypeMap = {\n\t'book': \"book\",\n\t'bookSection': \"chapter\",\n\t'journalArticle': \"article-journal\",\n\t'magazineArticle': \"article-magazine\",\n\t'newspaperArticle': \"article-newspaper\",\n\t'thesis': \"thesis\",\n\t'encyclopediaArticle': \"entry-encyclopedia\",\n\t'dictionaryEntry': \"entry-dictionary\",\n\t'conferencePaper': \"paper-conference\",\n\t'letter': \"personal_communication\",\n\t'manuscript': \"manuscript\",\n\t'interview': \"interview\",\n\t'film': \"motion_picture\",\n\t'artwork': \"graphic\",\n\t'webpage': \"webpage\",\n\t'report': \"report\",\n\t'bill': \"bill\",\n\t'case': \"legal_case\",\n\t'hearing': \"bill\",                // ??\n\t'patent': \"patent\",\n\t'statute': \"bill\",                // ??\n\t'email': \"personal_communication\",\n\t'map': \"map\",\n\t'blogPost': \"webpage\",\n\t'instantMessage': \"personal_communication\",\n\t'forumPost': \"webpage\",\n\t'audioRecording': \"song\",     // ??\n\t'presentation': \"speech\",\n\t'videoRecording': \"motion_picture\",\n\t'tvBroadcast': \"broadcast\",\n\t'radioBroadcast': \"broadcast\",\n\t'podcast': \"song\",            // ??\n\t'computerProgram': \"book\"     // ??\n};\n\nZotero.Item.prototype.citePaperJournalArticleURL = false;\n","Zotero.Tag = function (tagObj) {\n\tthis.instance = \"Zotero.Tag\";\n\tthis.color = null;\n\tthis.version = 0;\n\tif( typeof tagObj == 'object'){\n\t\tthis.parseJsonTag(tagObj);\n\t} else if(typeof tagObj == 'string') {\n\t\tthis.parseJsonTag(this.templateApiObj(tagObj));\n\t} else {\n\t\tthis.parseJsonTag(this.tamplateApiObj(''));\n\t}\n};\n\nZotero.Tag.prototype = new Zotero.ApiObject();\n\nZotero.Tag.prototype.parseJsonTag = function(tagObj) {\n\tvar tag = this;\n\ttag.apiObj = Z.extend({}, tagObj);\n\ttag.urlencodedtag = encodeURIComponent(tag.apiObj.tag);\n\ttag.version = tag.apiObj.version;\n};\n\nZotero.Tag.prototype.templateApiObj = function(tagString) {\n\treturn {\n\t\ttag: tagString,\n\t\tlinks: {},\n\t\tmeta: {\n\t\t\ttype:0,\n\t\t\tnumItems:1\n\t\t}\n\t};\n};\n\nZotero.Tag.prototype.tagComparer = function(){\n\tif(window.Intl){\n\t\tvar collator = new window.Intl.Collator();\n\t\treturn function(a, b){\n\t\t\treturn collator.compare(a.apiObj.tag, b.apiObj.tag);\n\t\t};\n\t} else {\n\t\treturn function(a, b) {\n\t\t\tif(a.apiObj.tag.toLocaleLowerCase() == b.apiObj.tag.toLocaleLowerCase()){\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tif(a.apiObj.tag.toLocaleLowerCase() < b.apiObj.tag.toLocaleLowerCase()){\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\treturn 1;\n\t\t};\n\t}\n};\n\nZotero.Tag.prototype.set = function(key, val){\n\tvar tag = this;\n\t\n\tif(key in tag.apiObj){\n\t\ttag.apiObj[key] = val;\n\t}\n\tif(key in tag.apiObj.meta){\n\t\ttag.apiObj.meta[key] = val;\n\t}\n\t\n\tswitch (key) {\n\t\tcase \"tagVersion\":\n\t\tcase \"version\":\n\t\t\ttag.version = val;\n\t\t\ttag.apiObj.version = val;\n\t\t\tbreak;\n\t}\n\t\n\treturn tag;\n};\n\n","Zotero.Search = function(){\n\tthis.instance = \"Zotero.Search\";\n\tthis.searchObject = {};\n};\n","Zotero.Group = function (groupObj) {\n\tvar group = this;\n\tgroup.instance = \"Zotero.Group\";\n\tif(groupObj){\n\t\tthis.parseJsonGroup(groupObj);\n\t}\n};\n\nZotero.Group.prototype = new Zotero.ApiObject();\n\nZotero.Group.prototype.parseJsonGroup = function(groupObj) {\n\tvar group = this;\n\tgroup.apiObj = groupObj;\n};\n\nZotero.Group.prototype.get = function(key) {\n\tvar group = this;\n\tswitch(key) {\n\t\tcase 'title':\n\t\tcase 'name':\n\t\t\treturn group.apiObj.data.name;\n\t}\n\t\n\tif(key in group.apiObj){\n\t\treturn group.apiObj[key];\n\t}\n\tif(key in group.apiObj.data){\n\t\treturn group.apiObj.data[key];\n\t}\n\tif(key in group.apiObj.meta){\n\t\treturn group.apiObj.meta[key];\n\t}\n\tif(group.hasOwnProperty(key)){\n\t\treturn group[key];\n\t}\n\t\n\treturn null;\n};\n\nZotero.Group.prototype.isWritable = function(userID){\n\tvar group = this;\n\tswitch(true){\n\t\tcase group.get('owner') == userID:\n\t\t\treturn true;\n\t\tcase (group.apiObj.data.admins && (group.apiObj.data.admins.indexOf(userID) != -1) ):\n\t\t\treturn true;\n\t\tcase ((group.apiObj.data.libraryEditing == 'members') &&\n\t\t\t(group.apiObj.data.members) &&\n\t\t\t(group.apiObj.data.members.indexOf(userID) != -1)):\n\t\t\treturn true;\n\t\tdefault:\n\t\t\treturn false;\n\t}\n};\n\nZotero.Group.prototype.typeMap = {\n\t'Private': 'Private',\n\t'PublicOpen': 'Public, Open Membership',\n\t'PublicClosed': 'Public, Closed Membership'\n};\n\nZotero.Group.prototype.accessMap = {\n\t'all'     : {\n\t\t'members' : 'Anyone can view, only members can edit',\n\t\t'admins'  : 'Anyone can view, only admins can edit'\n\t},\n\t'members' : {\n\t\t'members' : 'Only members can view and edit',\n\t\t'admins'  : 'Only members can view, only admins can edit'\n\t},\n\t'admins'  : {\n\t\t'members' : 'Only admins can view, only members can edit',\n\t\t'admins'  : 'Only admins can view and edit'\n\t}\n};\n\n","Zotero.User = function () {this.instance = \"Zotero.User\";};\nZotero.User.prototype = new Zotero.ApiObject();\nZotero.User.prototype.loadObject = function(ob){\n\tthis.title = ob.title;\n\tthis.author = ob.author;\n\tthis.tagID = ob.tagID;\n\tthis.published = ob.published;\n\tthis.updated = ob.updated;\n\tthis.links = ob.links;\n\tthis.numItems = ob.numItems;\n\tthis.items = ob.items;\n\tthis.tagType = ob.tagType;\n\tthis.modified = ob.modified;\n\tthis.added = ob.added;\n\tthis.key = ob.key;\n};\n\nZotero.User.prototype.parseXmlUser = function (tel) {\n\tthis.parseXmlEntry(tel);\n\t\n\tvar tagEl = tel.find('content>tag');\n\tif(tagEl.length !== 0){\n\t\tthis.tagKey = tagEl.attr('key');// find(\"zapi\\\\:itemID\").text();\n\t\tthis.libraryID = tagEl.attr(\"libraryID\");\n\t\tthis.tagName = tagEl.attr(\"name\");\n\t\tthis.dateAdded = tagEl.attr('dateAdded');\n\t\tthis.dateModified = tagEl.attr('dateModified');\n\t}\n\t\n};\n","Zotero.utils = {\n\trandomString:function(len, chars) {\n\t\tif (!chars) {\n\t\t\tchars = \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\";\n\t\t}\n\t\tif (!len) {\n\t\t\tlen = 8;\n\t\t}\n\t\tvar randomstring = '';\n\t\tfor (var i=0; i<len; i++) {\n\t\t\tvar rnum = Math.floor(Math.random() * chars.length);\n\t\t\trandomstring += chars.substring(rnum,rnum+1);\n\t\t}\n\t\treturn randomstring;\n\t},\n\t\n\tgetKey: function() {\n\t\tvar baseString = \"23456789ABCDEFGHIJKMNPQRSTUVWXZ\";\n\t\treturn Zotero.utils.randomString(8, baseString);\n\t},\n\t\n\tslugify: function(name){\n\t\tvar slug = name.trim();\n\t\tslug = slug.toLowerCase();\n\t\tslug = slug.replace( /[^a-z0-9 ._-]/g , \"\");\n\t\tslug = slug.replace(/\\s/g, \"_\");\n\t\t\n\t\treturn slug;\n\t},\n\t\n\tprependAutocomplete: function(pre, source){\n\t\tZ.debug('Zotero.utils.prependAutocomplete', 3);\n\t\tZ.debug(\"prepend match: \" + pre);\n\t\tvar satisfy;\n\t\tif(!source){\n\t\t\tZ.debug(\"source is not defined\");\n\t\t}\n\t\tif(pre === ''){\n\t\t\tsatisfy = source.slice(0);\n\t\t\treturn satisfy;\n\t\t}\n\t\tvar plen = pre.length;\n\t\tvar plower = pre.toLowerCase();\n\t\tsatisfy = source.map(function(n){\n\t\t\tif(n.substr(0, plen).toLowerCase() == plower){\n\t\t\t\treturn n;\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t});\n\t\treturn satisfy;\n\t},\n\t\n\tmatchAnyAutocomplete: function(pre, source){\n\t\tZ.debug('Zotero.utils.matchAnyAutocomplete', 3);\n\t\tZ.debug(\"matchAny match: \" + pre);\n\t\tvar satisfy;\n\t\tif(!source){\n\t\t\tZ.debug(\"source is not defined\");\n\t\t}\n\t\tif(pre === ''){\n\t\t\tsatisfy = source.slice(0);\n\t\t\treturn satisfy;\n\t\t}\n\t\tvar plen = pre.length;\n\t\tvar plower = pre.toLowerCase();\n\t\tsatisfy = source.map(function(n){\n\t\t\tif(n.toLowerCase().indexOf(plower) != -1){\n\t\t\t\treturn n;\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t});\n\t\treturn satisfy;\n\t},\n\t\n\tlibraryString: function(type, libraryID){\n\t\tvar lstring = '';\n\t\tif(type == 'user') lstring = 'u';\n\t\telse if(type == 'group') lstring = 'g';\n\t\tlstring += libraryID;\n\t\treturn lstring;\n\t},\n\t\n\tparseLibString: function(libraryString){\n\t\tvar type;\n\t\tvar libraryID;\n\t\tif(libraryString.charAt(0) == 'u'){\n\t\t\ttype = 'user';\n\t\t}\n\t\telse if(libraryString.charAt(0) == 'g'){\n\t\t\ttype = 'group';\n\t\t}\n\t\telse{\n\t\t\tthrow new Error(\"unexpected type character in libraryString\");\n\t\t}\n\t\tlibraryID = parseInt(libraryString.substring(1));\n\t\treturn {libraryType:type, libraryID: libraryID};\n\t},\n\t\n\t//return true if retrieved more than lifetime minutes ago\n\tstale: function(retrievedDate, lifetime){\n\t\tvar now = Date.now(); //current local time\n\t\tvar elapsed = now.getTime() - retrievedDate.getTime();\n\t\tif((elapsed / 60000) > lifetime){\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\t\n\tentityify: function(str){\n\t\tvar character = {\n\t\t\t'<' : '&lt;',\n\t\t\t'>' : '&gt;',\n\t\t\t'&' : '&amp;',\n\t\t\t'\"' : '&quot;'\n\t\t};\n\t\treturn str.replace(/[<>&\"]/g, function(c) {\n\t\t\treturn character[c];\n\t\t});\n\t},\n\t\n\tparseApiDate: function(datestr, date){\n\t\t//var parsems = Date.parse(datestr);\n\t\t\n\t\tvar re = /([0-9]+)-([0-9]+)-([0-9]+)T([0-9]+):([0-9]+):([0-9]+)Z/;\n\t\tvar matches = re.exec(datestr);\n\t\tif(matches === null){\n\t\t\tZ.error(\"error parsing api date: \" + datestr);\n\t\t\treturn null;\n\t\t}\n\t\telse{\n\t\t\tdate = new Date(Date.UTC(matches[1], matches[2]-1, matches[3], matches[4], matches[5], matches[6]));\n\t\t\treturn date;\n\t\t}\n\t\t\n\t\treturn date;\n\t},\n\t\n\treadCookie: function(name) {\n\t\tvar nameEQ = name + \"=\";\n\t\tvar ca = document.cookie.split(';');\n\t\tfor(var i=0;i < ca.length;i++) {\n\t\t\tvar c = ca[i];\n\t\t\twhile (c.charAt(0)==' ') c = c.substring(1,c.length);\n\t\t\tif (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length,c.length);\n\t\t}\n\t\treturn null;\n\t},\n\t\n\t/**\n\t * Translate common mimetypes to user friendly versions\n\t *\n\t * @param string $mimeType\n\t * @return string\n\t */\n\ttranslateMimeType: function(mimeType)\n\t{\n\t\tswitch (mimeType) {\n\t\t\tcase 'text/html':\n\t\t\t\treturn 'html';\n\t\t\t\n\t\t\tcase 'application/pdf':\n\t\t\tcase 'application/x-pdf':\n\t\t\tcase 'application/acrobat':\n\t\t\tcase 'applications/vnd.pdf':\n\t\t\tcase 'text/pdf':\n\t\t\tcase 'text/x-pdf':\n\t\t\t\treturn 'pdf';\n\t\t\t\n\t\t\tcase 'image/jpg':\n\t\t\tcase 'image/jpeg':\n\t\t\t\treturn 'jpg';\n\t\t\t\n\t\t\tcase 'image/gif':\n\t\t\t\treturn 'gif';\n\t\t\t\n\t\t\tcase 'application/msword':\n\t\t\tcase 'application/doc':\n\t\t\tcase 'application/vnd.msword':\n\t\t\tcase 'application/vnd.ms-word':\n\t\t\tcase 'application/winword':\n\t\t\tcase 'application/word':\n\t\t\tcase 'application/x-msw6':\n\t\t\tcase 'application/x-msword':\n\t\t\t\treturn 'doc';\n\t\t\t\n\t\t\tcase 'application/vnd.oasis.opendocument.text':\n\t\t\tcase 'application/x-vnd.oasis.opendocument.text':\n\t\t\t\treturn 'odt';\n\t\t\t\n\t\t\tcase 'video/flv':\n\t\t\tcase 'video/x-flv':\n\t\t\t\treturn 'flv';\n\t\t\t\n\t\t\tcase 'image/tif':\n\t\t\tcase 'image/tiff':\n\t\t\tcase 'image/x-tif':\n\t\t\tcase 'image/x-tiff':\n\t\t\tcase 'application/tif':\n\t\t\tcase 'application/x-tif':\n\t\t\tcase 'application/tiff':\n\t\t\tcase 'application/x-tiff':\n\t\t\t\treturn 'tiff';\n\t\t\t\n\t\t\tcase 'application/zip':\n\t\t\tcase 'application/x-zip':\n\t\t\tcase 'application/x-zip-compressed':\n\t\t\tcase 'application/x-compress':\n\t\t\tcase 'application/x-compressed':\n\t\t\tcase 'multipart/x-zip':\n\t\t\t\treturn 'zip';\n\t\t\t\t\n\t\t\tcase 'video/quicktime':\n\t\t\tcase 'video/x-quicktime':\n\t\t\t\treturn 'mov';\n\t\t\t\t\n\t\t\tcase 'video/avi':\n\t\t\tcase 'video/msvideo':\n\t\t\tcase 'video/x-msvideo':\n\t\t\t\treturn 'avi';\n\t\t\t\t\n\t\t\tcase 'audio/wav':\n\t\t\tcase 'audio/x-wav':\n\t\t\tcase 'audio/wave':\n\t\t\t\treturn 'wav';\n\t\t\t\t\n\t\t\tcase 'audio/aiff':\n\t\t\tcase 'audio/x-aiff':\n\t\t\tcase 'sound/aiff':\n\t\t\t\treturn 'aiff';\n\t\t\t\n\t\t\tcase 'text/plain':\n\t\t\t\treturn 'plain text';\n\t\t\tcase 'application/rtf':\n\t\t\t\treturn 'rtf';\n\t\t\t\t\n\t\t\tdefault:\n\t\t\t\treturn mimeType;\n\t\t}\n\t},\n\n\t/**\n\t * Get the permissions a key has for a library\n\t * if no key is passed use the currently set key for the library\n\t *\n\t * @param int|string $userID\n\t * @param string $key\n\t * @return array $keyPermissions\n\t */\n\tgetKeyPermissions: function(userID, key) {\n\t\tif(!userID){\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tif(!key){\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tvar urlconfig = {'target':'key', 'libraryType':'user', 'libraryID':userID, 'apiKey':key};\n\t\tvar requestUrl = Zotero.ajax.apiRequestString(urlconfig);\n\t\t\n\t\treturn Zotero.ajaxRequest(requestUrl)\n\t\t.then(function(response){\n\t\t\tvar keyObject = JSON.parse(response.data);\n\t\t\treturn keyObject;\n\t\t});\n\t},\n\n\tparseQuery: function(query) {\n\t\tvar params = {};\n\t\tvar match;\n\t\tvar pl = /\\+/g;  // Regex for replacing addition symbol with a space\n\t\tvar search = /([^&=]+)=?([^&]*)/g;\n\t\tvar decode = function (s) {\n\t\t\treturn decodeURIComponent(s.replace(pl, \" \"));\n\t\t};\n\n\t\twhile(match = search.exec(query)) {\n\t\t\tparams[decode(match[1])] = decode(match[2]);\n\t\t}\n\t\treturn params;\n\t},\n\n\tquerystring: function(href) {\n\t\tvar hashindex = (href.indexOf('#') != -1) ? href.indexOf('#') : undefined;\n\t\tvar q = href.substring(href.indexOf('?') + 1, hashindex);\n\t\treturn q;\n\t}\n};\n\nZotero.extend = function() {\n\tvar res = {};\n\tfor(var i = 0; i < arguments.length; i++){\n\t\tvar a = arguments[i];\n\t\tif(typeof a != \"object\"){\n\t\t\tcontinue;\n\t\t}\n\t\tObject.keys(a).forEach(function(key){\n\t\t\tres[key] = a[key];\n\t\t});\n\t}\n\treturn res;\n};\n","// Url.js - construct certain urls and links locally that may depend on the\n// current website's routing scheme etc. Not necessarily pointing to zotero.org\n// - href for a particular item's local representation\n// - link with appropriate text, to download file or view framed snapshot\n// - href for file download/view, depending on whether config says to download\n// directly from the api, or to proxy it\n// - displayable string describing the attachment file (attachmentFileDetails)\n// - list of urls for supported export formats\n// \n\n//locally construct a url for the item on the current website\nZotero.url.itemHref = function(item){\n\tvar href = '';\n\thref += Zotero.config.librarySettings.libraryPathString + '/itemKey/' + item.get('key');\n\treturn href;\n};\n\n//construct a download link for an item's enclosure file that takes into\n//account size and whether the file is a snapshot\nZotero.url.attachmentDownloadLink = function(item){\n\tvar retString = '';\n\tvar downloadUrl = item.attachmentDownloadUrl;\n\tvar contentType = item.get('contentType');\n\t\n\tif(item.apiObj.links && item.apiObj.links['enclosure']){\n\t\tif(!item.apiObj.links['enclosure']['length'] && item.isSnapshot()){\n\t\t\t//snapshot: redirect to view\n\t\t\tretString += '<a href=\"' + downloadUrl + '\">' + 'View Snapshot</a>';\n\t\t}\n\t\telse{\n\t\t\t//file: offer download\n\t\t\tvar enctype = Zotero.utils.translateMimeType(item.apiObj.links['enclosure'].type);\n\t\t\tvar enc = item.apiObj.links['enclosure'];\n\t\t\tvar filesize = parseInt(enc['length'], 10);\n\t\t\tvar filesizeString = \"\" + filesize + \" B\";\n\t\t\tif(filesize > 1073741824){\n\t\t\t\tfilesizeString = \"\" + (filesize / 1073741824).toFixed(1) + \" GB\";\n\t\t\t}\n\t\t\telse if(filesize > 1048576){\n\t\t\t\tfilesizeString = \"\" + (filesize / 1048576).toFixed(1) + \" MB\";\n\t\t\t}\n\t\t\telse if(filesize > 1024){\n\t\t\t\tfilesizeString = \"\" + (filesize / 1024).toFixed(1) + \" KB\";\n\t\t\t}\n\t\t\tZ.debug(enctype, 3);\n\t\t\tretString += '<a href=\"' + downloadUrl + '\">';\n\t\t\tif(enctype == 'undefined' || enctype === '' || typeof enctype == 'undefined'){\n\t\t\t\tretString += filesizeString + '</a>';\n\t\t\t}\n\t\t\telse{\n\t\t\t\tretString += enctype + ', ' + filesizeString + '</a>';\n\t\t\t}\n\t\t\treturn retString;\n\t\t}\n\t}\n\treturn retString;\n};\n\nZotero.url.attachmentDownloadUrl = function(item){\n\tif(item.apiObj.links && item.apiObj.links['enclosure']){\n\t\tif(Zotero.config.proxyDownloads){\n\t\t\t//we have a proxy for downloads at baseDownloadUrl so just pass an itemkey to that\n\t\t\treturn Zotero.url.wwwDownloadUrl(item);\n\t\t}\n\t\telse {\n\t\t\treturn Zotero.url.apiDownloadUrl(item);\n\t\t}\n\t}\n\treturn false;\n};\n\nZotero.url.apiDownloadUrl = function(item){\n\tif(item.apiObj.links['enclosure']){\n\t\treturn item.apiObj.links['enclosure']['href'];\n\t}\n\treturn false;\n};\n\nZotero.url.proxyDownloadUrl = function(item){\n\tif(item.apiObj.links['enclosure']){\n\t\tif(Zotero.config.proxyDownloads){\n\t\t\treturn Zotero.config.baseDownloadUrl + \"?itemkey=\" + item.get('key');\n\t\t}\n\t\telse{\n\t\t\treturn Zotero.url.apiDownloadUrl(item);\n\t\t}\n\t}\n\telse {\n\t\treturn false;\n\t}\n};\n\nZotero.url.wwwDownloadUrl = function(item){\n\tif(item.apiObj.links['enclosure']){\n\t\treturn Zotero.config.baseZoteroWebsiteUrl + Zotero.config.librarySettings.libraryPathString + \"/\" + item.get('key') + \"/file/view\";\n\t}\n\telse {\n\t\treturn false;\n\t}\n};\n\nZotero.url.publicationsDownloadUrl = function(item){\n\tif(item.apiObj.links['enclosure']){\n\t\treturn item.apiObj.links['enclosure']['href'];\n\t}\n\treturn false;\n};\n\nZotero.url.attachmentFileDetails = function(item){\n\t//file: offer download\n\tif(!item.apiObj.links['enclosure']) return '';\n\tvar enctype = Zotero.utils.translateMimeType(item.apiObj.links['enclosure'].type);\n\tvar enc = item.apiObj.links['enclosure'];\n\tvar filesizeString = '';\n\tif(enc['length']){\n\t\tvar filesize = parseInt(enc['length'], 10);\n\t\tfilesizeString = \"\" + filesize + \" B\";\n\t\tif(filesize > 1073741824){\n\t\t\tfilesizeString = \"\" + (filesize / 1073741824).toFixed(1) + \" GB\";\n\t\t}\n\t\telse if(filesize > 1048576){\n\t\t\tfilesizeString = \"\" + (filesize / 1048576).toFixed(1) + \" MB\";\n\t\t}\n\t\telse if(filesize > 1024){\n\t\t\tfilesizeString = \"\" + (filesize / 1024).toFixed(1) + \" KB\";\n\t\t}\n\t\treturn '(' + enctype + ', ' + filesizeString + ')';\n\t}\n\telse {\n\t\treturn '(' + enctype + ')';\n\t}\n};\n\nZotero.url.userWebLibrary = function(slug) {\n\treturn [Zotero.config.baseWebsiteUrl, slug, \"items\"].join(\"/\");\n};\n\nZotero.url.groupWebLibrary = function(group) {\n\tif(group.type == 'Private'){\n\t\treturn [Zotero.config.baseWebsiteUrl, \"groups\", group.get('id'), \"items\"].join(\"/\");\n\t}\n\telse {\n\t\treturn [Zotero.config.baseWebsiteUrl, \"groups\", Zotero.utils.slugify(group.get('name')), \"items\"].join(\"/\");\n\t}\n};\n\nZotero.url.exportUrls = function(config){\n\tZ.debug(\"Zotero.url.exportUrls\", 3);\n\tvar exportUrls = {};\n\tvar exportConfig = {};\n\tZotero.config.exportFormats.forEach(function(format){\n\t\texportConfig = Z.extend(config, {'format':format});\n\t\texportUrls[format] = Zotero.ajax.apiRequestUrl(exportConfig) + Zotero.ajax.apiQueryString({format:format, limit:'25'});\n\t});\n\treturn exportUrls;\n};\n\nZotero.url.relationUrl = function(libraryType, libraryID, itemKey){\n\treturn \"http://zotero.org/\" + libraryType + \"s/\" + libraryID + \"/items/\" + itemKey;\n};\n","Zotero.file = {};\n\nZotero.file.getFileInfo = function(file){\n\t//fileInfo: md5, filename, filesize, mtime, zip, contentType, charset\n\tif(typeof FileReader === 'undefined'){\n\t\treturn Promise.reject(new Error(\"FileReader not supported\"));\n\t}\n\t\n\treturn new Promise(function(resolve, reject){\n\t\tvar fileInfo = {};\n\t\tvar reader = new FileReader();\n\t\treader.onload = function(e){\n\t\t\tZ.debug('Zotero.file.getFileInfo onloadFunc', 3);\n\t\t\tvar result = e.target.result;\n\t\t\tZotero.debug(result, 3);\n\t\t\tfileInfo.md5 = SparkMD5.ArrayBuffer.hash(result);\n\t\t\tfileInfo.filename = file.name;\n\t\t\tfileInfo.filesize = file.size;\n\t\t\tfileInfo.mtime = Date.now();\n\t\t\tfileInfo.contentType = file.type;\n\t\t\t//fileInfo.reader = reader;\n\t\t\tfileInfo.filedata = result;\n\t\t\tresolve(fileInfo);\n\t\t};\n\t\t\n\t\treader.readAsArrayBuffer(file);\n\t});\n};\n\nZotero.file.uploadFile = function(uploadInfo, fileInfo){\n\tZ.debug(\"Zotero.file.uploadFile\", 3);\n\tZ.debug(uploadInfo, 4);\n\t\n\tvar formData = new FormData();\n\tObject.keys(uploadInfo.params).forEach(function(key){\n\t\tvar val = uploadInfo.params[key];\n\t\tformData.append(key, val);\n\t});\n\t\n\tvar blobData = new Blob([fileInfo.filedata], {type : fileInfo.contentType});\n\tformData.append('file', blobData);\n\t\n\tvar xhr = new XMLHttpRequest();\n\t\n\txhr.open('POST', uploadInfo.url, true);\n\t\n\treturn new Promise(function(resolve, reject){\n\t\txhr.onload = function(evt){\n\t\t\tZ.debug('uploadFile onload event', 3);\n\t\t\tif(this.status == 201){\n\t\t\t\tZ.debug(\"successful upload - 201\", 3);\n\t\t\t\tresolve();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tZ.error('uploadFile failed - ' + xhr.status);\n\t\t\t\treject({\n\t\t\t\t\t\"message\": \"Failure uploading file.\",\n\t\t\t\t\t\"code\": xhr.status,\n\t\t\t\t\t\"serverMessage\": xhr.responseText\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\t\n\t\txhr.onprogress = function(evt){\n\t\t\tZ.debug('progress event');\n\t\t\tZ.debug(evt);\n\t\t};\n\t\txhr.send(formData);\n\t});\n\t\n\t//If CORS is not enabled on s3 this XHR will not have the normal status\n\t//information, but will still fire readyStateChanges so you can tell\n\t//when the upload has finished (even if you can't tell if it was successful\n\t//from JS)\n};\n\n","Zotero.Idb = {};\n\n//Initialize an indexedDB for the specified library user or group + id\n//returns a promise that is resolved with a Zotero.Idb.Library instance when successful\n//and rejected onerror\nZotero.Idb.Library = function(libraryString){\n\tZ.debug(\"Zotero.Idb.Library\", 3);\n\tZ.debug(\"Initializing Zotero IDB\", 3);\n\tthis.libraryString = libraryString;\n\tthis.owningLibrary = null;\n\tthis.initialized = false;\n};\n\nZotero.Idb.Library.prototype.init = function(){\n\tvar idbLibrary = this;\n\treturn new Promise(function(resolve, reject){\n\t\t//Don't bother with the prefixed names because they should all be irrelevant by now\n\t\tvar indexedDB = window.indexedDB;\n\t\tidbLibrary.indexedDB = indexedDB;\n\t\t\n\t\t// Now we can open our database\n\t\tZ.debug(\"requesting indexedDb from browser\", 3);\n\t\tvar request = indexedDB.open(\"Zotero_\" + idbLibrary.libraryString, 4);\n\t\trequest.onerror = function(e){\n\t\t\tZotero.error(\"ERROR OPENING INDEXED DB\");\n\t\t\treject();\n\t\t};\n\t\t\n\t\tvar upgradeCallback = function(event){\n\t\t\tZ.debug(\"Zotero.Idb onupgradeneeded or onsuccess\", 3);\n\t\t\tvar oldVersion = event.oldVersion;\n\t\t\tZ.debug(\"oldVersion: \" + event.oldVersion, 3);\n\t\t\tvar db = event.target.result;\n\t\t\tidbLibrary.db = db;\n\t\t\t\n\t\t\tif(oldVersion < 4){\n\t\t\t\t//delete old versions of object stores\n\t\t\t\tZ.debug(\"Existing object store names:\", 3);\n\t\t\t\tZ.debug(JSON.stringify(db.objectStoreNames), 3);\n\t\t\t\tZ.debug(\"Deleting old object stores\", 3);\n\t\t\t\tif(db.objectStoreNames[\"items\"]){\n\t\t\t\t\tdb.deleteObjectStore(\"items\");\n\t\t\t\t}\n\t\t\t\tif(db.objectStoreNames[\"tags\"]){\n\t\t\t\t\tdb.deleteObjectStore(\"tags\");\n\t\t\t\t}\n\t\t\t\tif(db.objectStoreNames[\"collections\"]){\n\t\t\t\t\tdb.deleteObjectStore(\"collections\");\n\t\t\t\t}\n\t\t\t\tif(db.objectStoreNames[\"files\"]){\n\t\t\t\t\tdb.deleteObjectStore(\"files\");\n\t\t\t\t}\n\t\t\t\tif(db.objectStoreNames[\"versions\"]){\n\t\t\t\t\tdb.deleteObjectStore(\"versions\");\n\t\t\t\t}\n\t\t\t\tZ.debug(\"Existing object store names:\", 3);\n\t\t\t\tZ.debug(JSON.stringify(db.objectStoreNames), 3);\n\t\t\t\t\n\t\t\t\t// Create object stores to hold items, collections, and tags.\n\t\t\t\t// IDB keys are just the zotero object keys\n\t\t\t\tvar itemStore = db.createObjectStore(\"items\", { keyPath: \"key\" });\n\t\t\t\tvar collectionStore = db.createObjectStore(\"collections\", { keyPath: \"key\" });\n\t\t\t\tvar tagStore = db.createObjectStore(\"tags\", { keyPath: \"tag\" });\n\t\t\t\tvar fileStore = db.createObjectStore(\"files\");\n\t\t\t\tvar versionStore = db.createObjectStore(\"versions\");\n\t\t\t\t\n\t\t\t\tZ.debug(\"itemStore index names:\", 3);\n\t\t\t\tZ.debug(JSON.stringify(itemStore.indexNames), 3);\n\t\t\t\tZ.debug(\"collectionStore index names:\", 3);\n\t\t\t\tZ.debug(JSON.stringify(collectionStore.indexNames), 3);\n\t\t\t\tZ.debug(\"tagStore index names:\", 3);\n\t\t\t\tZ.debug(JSON.stringify(tagStore.indexNames), 3);\n\t\t\t\t\n\t\t\t\t// Create index to search/sort items by each attribute\n\t\t\t\tObject.keys(Zotero.Item.prototype.fieldMap).forEach(function(key){\n\t\t\t\t\tZ.debug(\"Creating index on \" + key, 3);\n\t\t\t\t\titemStore.createIndex(key, \"data.\" + key, { unique: false });\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t//itemKey index was created above with all other item fields\n\t\t\t\t//itemStore.createIndex(\"itemKey\", \"itemKey\", { unique: false });\n\t\t\t\t\n\t\t\t\t//create multiEntry indices on item collectionKeys and tags\n\t\t\t\titemStore.createIndex(\"collectionKeys\", \"data.collections\", {unique: false, multiEntry:true});\n\t\t\t\t//index on extra tagstrings array since tags are objects and we can't index them directly\n\t\t\t\titemStore.createIndex(\"itemTagStrings\", \"_supplement.tagstrings\", {unique: false, multiEntry:true});\n\t\t\t\t//example filter for tag: Zotero.Idb.filterItems(\"itemTagStrings\", \"Unread\");\n\t\t\t\t//example filter collection: Zotero.Idb.filterItems(\"collectionKeys\", \"<collectionKey>\");\n\t\t\t\t\n\t\t\t\t//itemStore.createIndex(\"itemType\", \"itemType\", { unique: false });\n\t\t\t\titemStore.createIndex(\"parentItemKey\", \"data.parentItem\", { unique: false });\n\t\t\t\titemStore.createIndex(\"libraryKey\", \"libraryKey\", { unique: false });\n\t\t\t\titemStore.createIndex(\"deleted\", \"data.deleted\", { unique: false });\n\t\t\t\t\n\t\t\t\tcollectionStore.createIndex(\"name\", \"data.name\", { unique: false });\n\t\t\t\tcollectionStore.createIndex(\"key\", \"key\", { unique: false });\n\t\t\t\tcollectionStore.createIndex(\"parentCollection\", \"data.parentCollection\", { unique: false });\n\t\t\t\t//collectionStore.createIndex(\"libraryKey\", \"libraryKey\", { unique: false });\n\t\t\t\t\n\t\t\t\ttagStore.createIndex(\"tag\", \"tag\", { unique: false });\n\t\t\t\t//tagStore.createIndex(\"libraryKey\", \"libraryKey\", { unique: false });\n\t\t\t}\n\t\t};\n\t\t\n\t\trequest.onupgradeneeded = upgradeCallback;\n\t\t\n\t\trequest.onsuccess = function(){\n\t\t\tZ.debug(\"IDB success\", 3);\n\t\t\tidbLibrary.db = request.result;\n\t\t\tidbLibrary.initialized = true;\n\t\t\tresolve(idbLibrary);\n\t\t};\n\t});\n};\n\nZotero.Idb.Library.prototype.deleteDB = function(){\n\tvar idbLibrary = this;\n\tidbLibrary.db.close();\n\treturn new Promise(function(resolve, reject){\n\t\tvar deleteRequest = idbLibrary.indexedDB.deleteDatabase(\"Zotero_\" + idbLibrary.libraryString);\n\t\tdeleteRequest.onerror = function(){\n\t\t\tZ.error(\"Error deleting indexedDB\");\n\t\t\treject();\n\t\t};\n\t\tdeleteRequest.onsuccess = function(){\n\t\t\tZ.debug(\"Successfully deleted indexedDB\", 2);\n\t\t\tresolve();\n\t\t};\n\t});\n};\n\n/**\n* @param {string} store_name\n* @param {string} mode either \"readonly\" or \"readwrite\"\n*/\nZotero.Idb.Library.prototype.getObjectStore = function (store_name, mode) {\n\tvar idbLibrary = this;\n\tvar tx = idbLibrary.db.transaction(store_name, mode);\n\treturn tx.objectStore(store_name);\n};\n\nZotero.Idb.Library.prototype.clearObjectStore = function (store_name) {\n\tvar idbLibrary = this;\n\tvar store = idbLibrary.getObjectStore(store_name, 'readwrite');\n\treturn new Promise(function(resolve, reject){\n\t\tvar req = store.clear();\n\t\treq.onsuccess = function(evt) {\n\t\t\tZ.debug(\"Store cleared\", 3);\n\t\t\tresolve();\n\t\t};\n\t\treq.onerror = function (evt) {\n\t\t\tZ.error(\"clearObjectStore:\", evt.target.errorCode);\n\t\t\treject();\n\t\t};\n\t});\n};\n\n/**\n* Add array of items to indexedDB\n* @param {array} items\n*/\nZotero.Idb.Library.prototype.addItems = function(items){\n\treturn this.addObjects(items, 'item');\n};\n\n/**\n* Update/add array of items to indexedDB\n* @param {array} items\n*/\nZotero.Idb.Library.prototype.updateItems = function(items){\n\treturn this.updateObjects(items, 'item');\n};\n\n/**\n* Remove array of items to indexedDB. Just references itemKey and does no other checks that items match\n* @param {array} items\n*/\nZotero.Idb.Library.prototype.removeItems = function(items){\n\treturn this.removeObjects(items, 'item');\n};\n\n/**\n* Get item from indexedDB that has given itemKey\n* @param {string} itemKey\n*/\nZotero.Idb.Library.prototype.getItem = function(itemKey){\n\tvar idbLibrary = this;\n\treturn new Promise(function(resolve, reject){\n\t\tvar success = function(event){\n\t\t\tresolve(event.target.result);\n\t\t};\n\t\tidbLibrary.db.transaction(\"items\").objectStore([\"items\"], \"readonly\").get(itemKey).onsuccess = success;\n\t});\n};\n\n/**\n* Get all the items in this indexedDB\n* @param {array} items\n*/\nZotero.Idb.Library.prototype.getAllItems = function(){\n\treturn this.getAllObjects('item');\n};\n\nZotero.Idb.Library.prototype.getOrderedItemKeys = function(field, order){\n\tvar idbLibrary = this;\n\tZ.debug(\"Zotero.Idb.getOrderedItemKeys\", 3);\n\tZ.debug(\"\" + field + \" \" + order, 3);\n\treturn new Promise(function(resolve, reject){\n\t\tvar objectStore = idbLibrary.db.transaction(['items'], 'readonly').objectStore('items');\n\t\tvar index = objectStore.index(field);\n\t\tif(!index){\n\t\t\tthrow new Error(\"Index for requested field '\" + field + \"'' not found\");\n\t\t}\n\t\t\n\t\tvar cursorDirection = \"next\";\n\t\tif(order == \"desc\"){\n\t\t\tcursorDirection = \"prev\";\n\t\t}\n\t\t\n\t\tvar cursorRequest = index.openKeyCursor(null, cursorDirection);\n\t\tvar itemKeys = [];\n\t\tcursorRequest.onsuccess = function(event) {\n\t\t\tvar cursor = event.target.result;\n\t\t\tif (cursor) {\n\t\t\t\titemKeys.push(cursor.primaryKey);\n\t\t\t\tcursor.continue();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tZ.debug(\"No more cursor: done. Resolving deferred.\", 3);\n\t\t\t\tresolve(itemKeys);\n\t\t\t}\n\t\t}.bind(this);\n\t\t\n\t\tcursorRequest.onfailure = function(event){\n\t\t\treject();\n\t\t}.bind(this);\n\t});\n};\n\n//filter the items in indexedDB by value in field\nZotero.Idb.Library.prototype.filterItems = function(field, value){\n\tvar idbLibrary = this;\n\tZ.debug(\"Zotero.Idb.filterItems \" + field + \" - \" + value, 3);\n\treturn new Promise(function(resolve, reject){\n\t\tvar itemKeys = [];\n\t\tvar objectStore = idbLibrary.db.transaction(['items'], 'readonly').objectStore('items');\n\t\tvar index = objectStore.index(field);\n\t\tif(!index){\n\t\t\tthrow new Error(\"Index for requested field '\" + field + \"'' not found\");\n\t\t}\n\t\t\n\t\tvar cursorDirection = \"next\";\n\t\t/*if(order == \"desc\"){\n\t\t\tcursorDirection = \"prev\";\n\t\t}*/\n\t\t\n\t\tvar range = IDBKeyRange.only(value);\n\t\tvar cursorRequest = index.openKeyCursor(range, cursorDirection);\n\t\tcursorRequest.onsuccess = function(event) {\n\t\t\tvar cursor = event.target.result;\n\t\t\tif (cursor) {\n\t\t\t\titemKeys.push(cursor.primaryKey);\n\t\t\t\tcursor.continue();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tZ.debug(\"No more cursor: done. Resolving deferred.\", 3);\n\t\t\t\tresolve(itemKeys);\n\t\t\t}\n\t\t}.bind(this);\n\t\t\n\t\tcursorRequest.onfailure = function(event){\n\t\t\treject();\n\t\t}.bind(this);\n\t});\n};\n\nZotero.Idb.Library.prototype.inferType = function(object){\n\tif(!object){\n\t\treturn false;\n\t}\n\tif(!object.instance){\n\t\treturn false;\n\t}\n\tswitch(object.instance){\n\t\tcase 'Zotero.Item':\n\t\t\treturn 'item';\n\t\tcase 'Zotero.Collection':\n\t\t\treturn 'collection';\n\t\tcase 'Zotero.Tag':\n\t\t\treturn 'tag';\n\t\tdefault:\n\t\t\treturn false;\n\t}\n};\n\nZotero.Idb.Library.prototype.getTransactionAndStore = function(type, access){\n\tvar idbLibrary = this;\n\tvar transaction;\n\tvar objectStore;\n\tswitch(type){\n\t\tcase 'item':\n\t\t\ttransaction = idbLibrary.db.transaction(['items'], access);\n\t\t\tobjectStore = transaction.objectStore('items');\n\t\t\tbreak;\n\t\tcase 'collection':\n\t\t\ttransaction = idbLibrary.db.transaction(['collections'], access);\n\t\t\tobjectStore = transaction.objectStore('collections');\n\t\t\tbreak;\n\t\tcase 'tag':\n\t\t\ttransaction = idbLibrary.db.transaction(['tags'], access);\n\t\t\tobjectStore = transaction.objectStore('tags');\n\t\t\tbreak;\n\t\tdefault:\n\t\t\treturn Promise.reject();\n\t}\n\treturn [transaction, objectStore];\n};\n\nZotero.Idb.Library.prototype.addObjects = function(objects, type){\n\tZ.debug(\"Zotero.Idb.Library.addObjects\", 3);\n\tvar idbLibrary = this;\n\tif(!type){\n\t\ttype = idbLibrary.inferType(objects[0]);\n\t}\n\tvar TS = idbLibrary.getTransactionAndStore(type, 'readwrite');\n\tvar transaction = TS[0];\n\tvar objectStore = TS[1];\n\t\n\treturn new Promise(function(resolve, reject){\n\t\ttransaction.oncomplete = function(event){\n\t\t\tZotero.debug(\"Add Objects transaction completed.\", 3);\n\t\t\tresolve();\n\t\t};\n\t\t\n\t\ttransaction.onerror = function(event){\n\t\t\tZotero.error(\"Add Objects transaction failed.\");\n\t\t\treject();\n\t\t};\n\t\t\n\t\tvar reqSuccess = function(event){\n\t\t\tZotero.debug(\"Added Object \" + event.target.result, 4);\n\t\t};\n\t\tfor (var i in objects) {\n\t\t\tvar request = objectStore.add(objects[i].apiObj);\n\t\t\trequest.onsuccess = reqSuccess;\n\t\t}\n\t});\n};\n\nZotero.Idb.Library.prototype.updateObjects = function(objects, type){\n\tZ.debug(\"Zotero.Idb.Library.updateObjects\", 3);\n\tvar idbLibrary = this;\n\tif(!type){\n\t\ttype = idbLibrary.inferType(objects[0]);\n\t}\n\tvar TS = idbLibrary.getTransactionAndStore(type, 'readwrite');\n\tvar transaction = TS[0];\n\tvar objectStore = TS[1];\n\t\n\treturn new Promise(function(resolve, reject){\n\t\ttransaction.oncomplete = function(event){\n\t\t\tZotero.debug(\"Update Objects transaction completed.\", 3);\n\t\t\tresolve();\n\t\t};\n\t\t\n\t\ttransaction.onerror = function(event){\n\t\t\tZotero.error(\"Update Objects transaction failed.\");\n\t\t\treject();\n\t\t};\n\t\t\n\t\tvar reqSuccess = function(event){\n\t\t\tZotero.debug(\"Updated Object \" + event.target.result, 4);\n\t\t};\n\t\tfor (var i in objects) {\n\t\t\tvar request = objectStore.put(objects[i].apiObj);\n\t\t\trequest.onsuccess = reqSuccess;\n\t\t}\n\t});\n};\n\nZotero.Idb.Library.prototype.removeObjects = function(objects, type){\n\tvar idbLibrary = this;\n\tif(!type){\n\t\ttype = idbLibrary.inferType(objects[0]);\n\t}\n\tvar TS = idbLibrary.getTransactionAndStore(type, 'readwrite');\n\tvar transaction = TS[0];\n\tvar objectStore = TS[1];\n\t\n\treturn new Promise(function(resolve, reject){\n\t\ttransaction.oncomplete = function(event){\n\t\t\tZotero.debug(\"Remove Objects transaction completed.\", 3);\n\t\t\tresolve();\n\t\t};\n\t\t\n\t\ttransaction.onerror = function(event){\n\t\t\tZotero.error(\"Remove Objects transaction failed.\");\n\t\t\treject();\n\t\t};\n\t\t\n\t\tvar reqSuccess = function(event){\n\t\t\tZotero.debug(\"Removed Object \" + event.target.result, 4);\n\t\t};\n\t\tfor (var i in objects) {\n\t\t\tvar request = objectStore.delete(objects[i].key);\n\t\t\trequest.onsuccess = reqSuccess;\n\t\t}\n\t});\n};\n\nZotero.Idb.Library.prototype.getAllObjects = function(type){\n\tvar idbLibrary = this;\n\treturn new Promise(function(resolve, reject){\n\t\tvar objects = [];\n\t\tvar objectStore = idbLibrary.db.transaction(type + 's').objectStore(type + 's');\n\t\t\n\t\tobjectStore.openCursor().onsuccess = function(event) {\n\t\t\tvar cursor = event.target.result;\n\t\t\tif (cursor) {\n\t\t\t\tobjects.push(cursor.value);\n\t\t\t\tcursor.continue();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tresolve(objects);\n\t\t\t}\n\t\t};\n\t});\n};\n\nZotero.Idb.Library.prototype.addCollections = function(collections){\n\treturn this.addObjects(collections, 'collection');\n};\n\nZotero.Idb.Library.prototype.updateCollections = function(collections){\n\tZ.debug(\"Zotero.Idb.Library.updateCollections\", 3);\n\treturn this.updateObjects(collections, 'collection');\n};\n\n/**\n* Get collection from indexedDB that has given collectionKey\n* @param {string} collectionKey\n*/\nZotero.Idb.Library.prototype.getCollection = function(collectionKey){\n\tvar idbLibrary = this;\n\treturn new Promise(function(resolve, reject){\n\t\tvar success = function(event){\n\t\t\tresolve(event.target.result);\n\t\t};\n\t\tidbLibrary.db.transaction(\"collections\").objectStore([\"collections\"], \"readonly\").get(collectionKey).onsuccess = success;\n\t});\n};\n\nZotero.Idb.Library.prototype.removeCollections = function(collections){\n\tZ.debug(\"Zotero.Idb.Library.removeCollections\", 3);\n\treturn this.removeObjects(collections, 'collection');\n};\n\nZotero.Idb.Library.prototype.getAllCollections = function(){\n\tZ.debug('Zotero.Idb.Library.getAllCollections', 3);\n\treturn this.getAllObjects('collection');\n};\n\nZotero.Idb.Library.prototype.addTags = function(tags){\n\treturn this.addObjects(tags, 'tag');\n};\n\nZotero.Idb.Library.prototype.updateTags = function(tags){\n\tZ.debug(\"Zotero.Idb.Library.updateTags\", 3);\n\treturn this.updateObjects(tags, 'tag');\n};\n\nZotero.Idb.Library.prototype.getAllTags = function(){\n\tZ.debug('getAllTags', 3);\n\treturn this.getAllObjects('tag');\n};\n\nZotero.Idb.Library.prototype.setVersion = function(type, version){\n\tZ.debug(\"Zotero.Idb.Library.setVersion\", 3);\n\tvar idbLibrary = this;\n\treturn new Promise(function(resolve, reject){\n\t\tvar transaction = idbLibrary.db.transaction([\"versions\"], \"readwrite\");\n\t\t\n\t\ttransaction.oncomplete = function(event){\n\t\t\tZotero.debug(\"set version transaction completed.\", 3);\n\t\t\tresolve();\n\t\t};\n\t\t\n\t\ttransaction.onerror = function(event){\n\t\t\tZotero.error(\"set version transaction failed.\");\n\t\t\treject();\n\t\t};\n\t\t\n\t\tvar versionStore = transaction.objectStore(\"versions\");\n\t\tvar reqSuccess = function(event){\n\t\t\tZotero.debug(\"Set Version\" + event.target.result, 3);\n\t\t};\n\t\tvar request = versionStore.put(version, type);\n\t\trequest.onsuccess = reqSuccess;\n\t});\n};\n\n/**\n* Get version data from indexedDB\n* @param {string} type\n*/\nZotero.Idb.Library.prototype.getVersion = function(type){\n\tZ.debug(\"Zotero.Idb.Library.getVersion\", 3);\n\tvar idbLibrary = this;\n\treturn new Promise(function(resolve, reject){\n\t\tvar success = function(event){\n\t\t\tZ.debug(\"done getting version\");\n\t\t\tresolve(event.target.result);\n\t\t};\n\t\tidbLibrary.db.transaction([\"versions\"], \"readonly\").objectStore(\"versions\").get(type).onsuccess = success;\n\t});\n};\n\nZotero.Idb.Library.prototype.setFile = function(itemKey, fileData){\n\tZ.debug(\"Zotero.Idb.Library.setFile\", 3);\n\tvar idbLibrary = this;\n\treturn new Promise(function(resolve, reject){\n\t\tvar transaction = idbLibrary.db.transaction([\"files\"], \"readwrite\");\n\t\t\n\t\ttransaction.oncomplete = function(event){\n\t\t\tZotero.debug(\"set file transaction completed.\", 3);\n\t\t\tresolve();\n\t\t};\n\t\t\n\t\ttransaction.onerror = function(event){\n\t\t\tZotero.error(\"set file transaction failed.\");\n\t\t\treject();\n\t\t};\n\t\t\n\t\tvar fileStore = transaction.objectStore(\"files\");\n\t\tvar reqSuccess = function(event){\n\t\t\tZotero.debug(\"Set File\" + event.target.result, 3);\n\t\t};\n\t\tvar request = fileStore.put(fileData, itemKey);\n\t\trequest.onsuccess = reqSuccess;\n\t});\n};\n\n/**\n* Get item from indexedDB that has given itemKey\n* @param {string} itemKey\n*/\nZotero.Idb.Library.prototype.getFile = function(itemKey){\n\tZ.debug(\"Zotero.Idb.Library.getFile\", 3);\n\tvar idbLibrary = this;\n\treturn new Promise(function(resolve, reject){\n\t\tvar success = function(event){\n\t\t\tZ.debug(\"done getting file\");\n\t\t\tresolve(event.target.result);\n\t\t};\n\t\tidbLibrary.db.transaction([\"files\"], \"readonly\").objectStore(\"files\").get(itemKey).onsuccess = success;\n\t});\n};\n\nZotero.Idb.Library.prototype.deleteFile = function(itemKey){\n\tZ.debug(\"Zotero.Idb.Library.deleteFile\", 3);\n\tvar idbLibrary = this;\n\treturn new Promise(function(resolve, reject){\n\t\tvar transaction = idbLibrary.db.transaction([\"files\"], \"readwrite\");\n\t\t\n\t\ttransaction.oncomplete = function(event){\n\t\t\tZotero.debug(\"delete file transaction completed.\", 3);\n\t\t\tresolve();\n\t\t};\n\t\t\n\t\ttransaction.onerror = function(event){\n\t\t\tZotero.error(\"delete file transaction failed.\");\n\t\t\treject();\n\t\t};\n\t\t\n\t\tvar fileStore = transaction.objectStore(\"files\");\n\t\tvar reqSuccess = function(event){\n\t\t\tZotero.debug(\"Deleted File\" + event.target.result, 4);\n\t\t};\n\t\tvar request = fileStore.delete(itemKey);\n\t\trequest.onsuccess = reqSuccess;\n\t});\n};\n\n\n//intersect two arrays of strings as an AND condition on index results\nZotero.Idb.Library.prototype.intersect = function(ar1, ar2){\n\tvar idbLibrary = this;\n\tvar result = [];\n\tfor(var i = 0; i < ar1.length; i++){\n\t\tif(ar2.indexOf(ar1[i]) !== -1){\n\t\t\tresult.push(ar1[i]);\n\t\t}\n\t}\n\treturn result;\n};\n\n//intersect an array of arrays of strings as an AND condition on index results\nZotero.Idb.Library.prototype.intersectAll = function(arrs) {\n\tvar idbLibrary = this;\n\tvar result = arrs[0];\n\tfor(var i = 0; i < arrs.length - 1; i++){\n\t\tresult = idbLibrary.intersect(result, arrs[i+1]);\n\t}\n\treturn result;\n};\n","Zotero.Library.prototype.processLoadedCollections = function(response){\n\tZ.debug('processLoadedCollections', 3);\n\tvar library = this;\n\t\n\t//clear out display items\n\tZ.debug(\"adding collections to library.collections\");\n\tvar collectionsAdded = library.collections.addCollectionsFromJson(response.data);\n\tfor (var i = 0; i < collectionsAdded.length; i++) {\n\t\tcollectionsAdded[i].associateWithLibrary(library);\n\t}\n\t//update sync state\n\tlibrary.collections.updateSyncState(response.lastModifiedVersion);\n\t\n\tZotero.trigger(\"loadedCollectionsProcessed\", {library:library, collectionsAdded:collectionsAdded});\n\treturn response;\n};\n\n//create+write a collection given a name and optional parentCollectionKey\nZotero.Library.prototype.addCollection = function(name, parentCollection){\n\tZ.debug(\"Zotero.Library.addCollection\", 3);\n\tvar library = this;\n\t\n\tvar collection = new Zotero.Collection();\n\tcollection.associateWithLibrary(library);\n\tcollection.set('name', name);\n\tcollection.set('parentCollection', parentCollection);\n\t\n\treturn library.collections.writeCollections([collection]);\n};\n\n","//make request for item keys and return jquery ajax promise\nZotero.Library.prototype.fetchItemKeys = function(config={}){\n\tZ.debug(\"Zotero.Library.fetchItemKeys\", 3);\n\tvar library = this;\n\tvar urlconfig = Z.extend(true, {\n\t\t'target':'items',\n\t\t'libraryType':this.libraryType,\n\t\t'libraryID':this.libraryID,\n\t\t'format':'keys'\n\t}, config);\n\t\n\treturn library.ajaxRequest(urlconfig);\n};\n\n//get keys of all items marked for deletion\nZotero.Library.prototype.getTrashKeys = function(){\n\tZ.debug(\"Zotero.Library.getTrashKeys\", 3);\n\tvar library = this;\n\tvar urlconfig = {\n\t\t'target': 'items',\n\t\t'libraryType': library.libraryType,\n\t\t'libraryID': library.libraryID,\n\t\t'format': 'keys',\n\t\t'collectionKey': 'trash'\n\t};\n\t\n\treturn library.ajaxRequest(urlconfig);\n};\n\nZotero.Library.prototype.emptyTrash = function(){\n\tZ.debug(\"Zotero.Library.emptyTrash\", 3);\n\tvar library = this;\n\treturn library.getTrashKeys()\n\t.then(function(response){\n\t\tvar trashedItemKeys = response.data.split(\"\\n\");\n\t\treturn library.items.deleteItems(trashedItemKeys, response.lastModifiedVersion);\n\t});\n};\n\nZotero.Library.prototype.loadItemKeys = function(config){\n\tZ.debug(\"Zotero.Library.loadItemKeys\", 3);\n\tvar library = this;\n\treturn this.fetchItemKeys(config)\n\t.then(function(response){\n\t\tZ.debug('loadItemKeys proxied callback', 3);\n\t\tvar keys = response.data.split(/[\\s]+/);\n\t\tlibrary.itemKeys = keys;\n\t});\n};\n\nZotero.Library.prototype.loadItems = function(config){\n\tZ.debug(\"Zotero.Library.loadItems\", 3);\n\tvar library = this;\n\tif(!config){\n\t\tconfig = {};\n\t}\n\t\n\tvar defaultConfig = {\n\t\ttarget:'items',\n\t\ttargetModifier: 'top',\n\t\tstart: 0,\n\t\tlimit: 25,\n\t\torder: Zotero.config.defaultSortColumn,\n\t\tsort: Zotero.config.defaultSortOrder\n\t};\n\t\n\t//Build config object that should be displayed next and compare to currently displayed\n\tvar newConfig = Z.extend({}, defaultConfig, config);\n\t//newConfig.start = parseInt(newConfig.limit, 10) * (parseInt(newConfig.itemPage, 10) - 1);\n\t\n\tvar urlconfig = Z.extend({\n\t\t'target':'items',\n\t\t'libraryType':library.libraryType,\n\t\t'libraryID':library.libraryID\n\t}, newConfig);\n\tvar requestUrl = Zotero.ajax.apiRequestString(urlconfig);\n\t\n\treturn library.ajaxRequest(requestUrl)\n\t.then(function(response){\n\t\tZ.debug('loadItems proxied callback', 3);\n\t\t//var library = this;\n\t\tvar items = library.items;\n\t\t//clear out display items\n\t\tvar loadedItemsArray = items.addItemsFromJson(response.data);\n\t\tZ.debug(\"Looping over loadedItemsArray\");\n\t\tfor (let i = 0; i < loadedItemsArray.length; i++) {\n\t\t\tloadedItemsArray[i].associateWithLibrary(library);\n\t\t}\n\t\t\n\t\tresponse.loadedItems = loadedItemsArray;\n\t\tZotero.trigger(\"itemsChanged\", {library:library});\n\t\treturn response;\n\t});\n};\n\nZotero.Library.prototype.loadPublications = function(config){\n\tZ.debug(\"Zotero.Library.loadPublications\", 3);\n\tvar library = this;\n\tif(!config){\n\t\tconfig = {};\n\t}\n\t\n\tvar defaultConfig = {\n\t\ttarget:'publications',\n\t\tstart: 0,\n\t\tlimit: 50,\n\t\torder: Zotero.config.defaultSortColumn,\n\t\tsort: Zotero.config.defaultSortOrder,\n\t\tinclude: 'bib'\n\t};\n\t\n\t//Build config object that should be displayed next and compare to currently displayed\n\tvar newConfig = Z.extend({}, defaultConfig, config);\n\t\n\tvar urlconfig = Z.extend({\n\t\t'target':'publications',\n\t\t'libraryType':library.libraryType,\n\t\t'libraryID':library.libraryID\n\t}, newConfig);\n\tvar requestUrl = Zotero.ajax.apiRequestString(urlconfig);\n\t\n\treturn library.ajaxRequest(requestUrl)\n\t.then(function(response){\n\t\tZ.debug('loadPublications proxied callback', 3);\n\t\tvar publicationItems = [];\n\t\tvar parsedItemJson = response.data;\n\t\tparsedItemJson.forEach(function(itemObj){\n\t\t\tvar item = new Zotero.Item(itemObj);\n\t\t\tpublicationItems.push(item);\n\t\t});\n\t\t\n\t\tresponse.publicationItems = publicationItems;\n\t\treturn response;\n\t});\n};\n\nZotero.Library.prototype.processLoadedItems = function(response){\n\tZ.debug('processLoadedItems', 3);\n\tvar library = this;\n\tvar items = library.items;\n\t//clear out display items\n\tvar loadedItemsArray = items.addItemsFromJson(response.data);\n\tfor (var i = 0; i < loadedItemsArray.length; i++) {\n\t\tloadedItemsArray[i].associateWithLibrary(library);\n\t}\n\t\n\t//update sync state\n\tlibrary.items.updateSyncState(response.lastModifiedVersion);\n\t\n\tZotero.trigger(\"itemsChanged\", {library:library, loadedItems:loadedItemsArray});\n\treturn response;\n};\n\nZotero.Library.prototype.loadItem = function(itemKey) {\n\tZ.debug(\"Zotero.Library.loadItem\", 3);\n\tvar library = this;\n\tif(!config){\n\t\tvar config = {};\n\t}\n\t\n\tvar urlconfig = {\n\t\t'target':'item',\n\t\t'libraryType':library.libraryType,\n\t\t'libraryID':library.libraryID,\n\t\t'itemKey':itemKey\n\t};\n\t\n\treturn library.ajaxRequest(urlconfig)\n\t.then(function(response){\n\t\tZ.debug(\"Got loadItem response\");\n\t\tvar item = new Zotero.Item(response.data);\n\t\titem.owningLibrary = library;\n\t\tlibrary.items.itemObjects[item.key] = item;\n\t\tZotero.trigger(\"itemsChanged\", {library:library});\n\t\treturn(item);\n\t},\n\tfunction(response){\n\t\tZ.debug(\"Error loading Item\");\n\t});\n};\n\nZotero.Library.prototype.trashItem = function(itemKey){\n\tvar library = this;\n\treturn library.items.trashItems([library.items.getItem(itemKey)]);\n};\n\nZotero.Library.prototype.untrashItem = function(itemKey){\n\tZ.debug(\"Zotero.Library.untrashItem\", 3);\n\tif(!itemKey) return false;\n\t\n\tvar item = this.items.getItem(itemKey);\n\titem.apiObj.deleted = 0;\n\treturn item.writeItem();\n};\n\nZotero.Library.prototype.deleteItem = function(itemKey){\n\tZ.debug(\"Zotero.Library.deleteItem\", 3);\n\tvar library = this;\n\treturn library.items.deleteItem(itemKey);\n};\n\nZotero.Library.prototype.deleteItems = function(itemKeys){\n\tZ.debug(\"Zotero.Library.deleteItems\", 3);\n\tvar library = this;\n\treturn library.items.deleteItems(itemKeys);\n};\n\nZotero.Library.prototype.addNote = function(itemKey, note){\n\tZ.debug('Zotero.Library.prototype.addNote', 3);\n\tvar library = this;\n\tvar config = {\n\t\t'target':'children',\n\t\t'libraryType':library.libraryType,\n\t\t'libraryID':library.libraryID,\n\t\t'itemKey':itemKey\n\t};\n\t\n\tvar requestUrl = Zotero.ajax.apiRequestString(config);\n\tvar item = this.items.getItem(itemKey);\n\t\n\treturn library.ajaxRequest(requestUrl, \"POST\", {processData: false});\n};\n\nZotero.Library.prototype.fetchGlobalItems = function(config){\n\tZ.debug(\"Zotero.Library.fetchGlobalItems\", 3);\n\tvar library = this;\n\tif(!config){\n\t\tconfig = {};\n\t}\n\t\n\tvar defaultConfig = {\n\t\ttarget:'items',\n\t\tstart: 0,\n\t\tlimit: 25\n\t};\n\t\n\t//Build config object that should be displayed next and compare to currently displayed\n\tvar newConfig = Z.extend({}, defaultConfig, config);\n\t//newConfig.start = parseInt(newConfig.limit, 10) * (parseInt(newConfig.itemPage, 10) - 1);\n\t\n\tvar urlconfig = Z.extend({'target':'items', 'libraryType': ''}, newConfig);\n\tvar requestUrl = Zotero.ajax.apiRequestString(urlconfig);\n\t\n\treturn library.ajaxRequest(requestUrl, \"GET\", {dataType:'json'})\n\t.then(function(response){\n\t\tZ.debug('globalItems callback', 3);\n\t\treturn(response.data);\n\t});\n};\n\nZotero.Library.prototype.fetchGlobalItem = function(globalKey){\n\tZ.debug(\"Zotero.Library.fetchGlobalItem\", 3);\n\tZ.debug(globalKey);\n\tvar library = this;\n\t\n\tvar defaultConfig = {target:'item'};\n\t\n\t//Build config object that should be displayed next and compare to currently displayed\n\tvar newConfig = Z.extend({}, defaultConfig);\n\tvar urlconfig = Z.extend({\n\t\t'target':'item',\n\t\t'libraryType': '',\n\t\t'itemKey': globalKey\n\t}, newConfig);\n\tvar requestUrl = Zotero.ajax.apiRequestString(urlconfig);\n\t\n\treturn library.ajaxRequest(requestUrl, \"GET\", {dataType:\"json\"})\n\t.then(function(response){\n\t\tZ.debug('globalItem callback', 3);\n\t\treturn(response.data);\n\t});\n};\n","Zotero.Library.prototype.fetchTags = function(config){\n\tZ.debug(\"Zotero.Library.fetchTags\", 3);\n\tvar library = this;\n\tvar defaultConfig = {\n\t\ttarget:'tags',\n\t\torder:'title',\n\t\tsort:'asc',\n\t\tlimit: 100\n\t};\n\tvar newConfig = Z.extend({}, defaultConfig, config);\n\tvar urlconfig = Z.extend({\n\t\t'target':'tags',\n\t\t'libraryType':this.libraryType,\n\t\t'libraryID':this.libraryID\n\t}, newConfig);\n\t\n\treturn Zotero.ajaxRequest(urlconfig);\n};\n\nZotero.Library.prototype.loadTags = function(config={}){\n\tZ.debug(\"Zotero.Library.loadTags\", 3);\n\tvar library = this;\n\t\n\tif(config.showAutomaticTags && config.collectionKey){\n\t\tdelete config.collectionKey;\n\t}\n\t\n\tlibrary.tags.displayTagsArray = [];\n\treturn library.fetchTags(config)\n\t.then(function(response){\n\t\tZ.debug('loadTags proxied callback', 3);\n\t\tvar updatedVersion = response.lastModifiedVersion;\n\t\tlibrary.tags.updateSyncState(updatedVersion);\n\t\tvar addedTags = library.tags.addTagsFromJson(response.data);\n\t\tlibrary.tags.updateTagsVersion(updatedVersion);\n\t\tlibrary.tags.rebuildTagsArray();\n\t\t\n\t\tif(response.parsedLinks.hasOwnProperty('next')){\n\t\t\tlibrary.tags.hasNextLink = true;\n\t\t\tlibrary.tags.nextLink = response.parsedLinks['next'];\n\t\t}\n\t\telse{\n\t\t\tlibrary.tags.hasNextLink = false;\n\t\t\tlibrary.tags.nextLink = null;\n\t\t}\n\t\tlibrary.trigger(\"tagsChanged\", {library:library});\n\t\treturn library.tags;\n\t});\n};\n\n\nZotero.Library.prototype.loadAllTags = function(config={}){\n\tZ.debug(\"Zotero.Library.loadAllTags\", 3);\n\tvar library = this;\n\tvar defaultConfig = {\n\t\ttarget:'tags',\n\t\torder:'title',\n\t\tsort:'asc',\n\t\tlimit: 100,\n\t\tlibraryType:library.libraryType,\n\t\tlibraryID:library.libraryID\n\t};\n\t\n\t//Build config object that should be displayed next and compare to currently displayed\n\tvar newConfig = Z.extend({}, defaultConfig, config);\n\tvar urlconfig = Z.extend({}, newConfig);\n\tvar requestUrl = Zotero.ajax.apiRequestString(urlconfig);\n\tvar tags = library.tags;\n\t\n\t//check if already loaded tags are okay to use\n\tvar loadedConfig = Z.extend({}, defaultConfig, tags.loadedConfig);\n\tvar loadedConfigRequestUrl = tags.loadedRequestUrl;\n\tZ.debug(\"requestUrl: \" + requestUrl, 4);\n\tZ.debug('loadedConfigRequestUrl: ' + loadedConfigRequestUrl, 4);\n\treturn new Promise(function(resolve, reject){\n\t\tvar continueLoadingCallback = function(tags){\n\t\t\tZ.debug(\"loadAllTags continueLoadingCallback\", 3);\n\t\t\tvar plainList = Zotero.Tags.prototype.plainTagsList(tags.tagsArray);\n\t\t\tplainList.sort(Zotero.Library.prototype.comparer());\n\t\t\ttags.plainList = plainList;\n\t\t\t\n\t\t\tif(tags.hasNextLink){\n\t\t\t\tZ.debug(\"still has next link.\", 3);\n\t\t\t\ttags.tagsArray.sort(Zotero.Tag.prototype.tagComparer());\n\t\t\t\tplainList = Zotero.Tags.prototype.plainTagsList(tags.tagsArray);\n\t\t\t\tplainList.sort(Zotero.Library.prototype.comparer());\n\t\t\t\ttags.plainList = plainList;\n\t\t\t\t\n\t\t\t\tvar nextLink = tags.nextLink;\n\t\t\t\tvar nextLinkConfig = Zotero.utils.parseQuery(Zotero.utils.querystring(nextLink));\n\t\t\t\tvar newConfig = Z.extend({}, config);\n\t\t\t\tnewConfig.start = nextLinkConfig.start;\n\t\t\t\tnewConfig.limit = nextLinkConfig.limit;\n\t\t\t\treturn library.loadTags(newConfig).then(continueLoadingCallback);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tZ.debug(\"no next in tags link\", 3);\n\t\t\t\ttags.updateSyncedVersion();\n\t\t\t\ttags.tagsArray.sort(Zotero.Tag.prototype.tagComparer());\n\t\t\t\tplainList = Zotero.Tags.prototype.plainTagsList(tags.tagsArray);\n\t\t\t\tplainList.sort(Zotero.Library.prototype.comparer());\n\t\t\t\ttags.plainList = plainList;\n\t\t\t\tZ.debug(\"resolving loadTags deferred\", 3);\n\t\t\t\tlibrary.tagsLoaded = true;\n\t\t\t\tlibrary.tags.loaded = true;\n\t\t\t\ttags.loadedConfig = config;\n\t\t\t\ttags.loadedRequestUrl = requestUrl;\n\t\t\t\t\n\t\t\t\t//update all tags with tagsVersion\n\t\t\t\tfor (var i = 0; i < library.tags.tagsArray.length; i++) {\n\t\t\t\t\ttags.tagsArray[i].apiObj.version = tags.tagsVersion;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlibrary.trigger(\"tagsChanged\", {library:library});\n\t\t\t\treturn tags;\n\t\t\t}\n\t\t};\n\t\t\n\t\tresolve( library.loadTags(urlconfig)\n\t\t.then(continueLoadingCallback));\n\t});\n};\n\n","//load objects from indexedDB\nZotero.Library.prototype.loadIndexedDBCache = function(){\n\tZotero.debug(\"Zotero.Library.loadIndexedDBCache\", 3);\n\t\n\tvar library = this;\n\t\n\tvar itemsPromise = library.idbLibrary.getAllItems();\n\tvar collectionsPromise = library.idbLibrary.getAllCollections();\n\tvar tagsPromise = library.idbLibrary.getAllTags();\n\t\n\titemsPromise.then(function(itemsArray){\n\t\tZ.debug(\"loadIndexedDBCache itemsD done\", 3);\n\t\t//create itemsDump from array of item objects\n\t\tvar latestItemVersion = 0;\n\t\tfor(var i = 0; i < itemsArray.length; i++){\n\t\t\tvar item = new Zotero.Item(itemsArray[i]);\n\t\t\tlibrary.items.addItem(item);\n\t\t\tif(item.version > latestItemVersion){\n\t\t\t\tlatestItemVersion = item.version;\n\t\t\t}\n\t\t}\n\t\tlibrary.items.itemsVersion = latestItemVersion;\n\t\t\n\t\t//TODO: add itemsVersion as last version in any of these items?\n\t\t//or store it somewhere else for indexedDB cache purposes\n\t\tlibrary.items.loaded = true;\n\t\tZ.debug(\"Done loading indexedDB items promise into library\", 3);\n\t});\n\t\n\tcollectionsPromise.then(function(collectionsArray){\n\t\tZ.debug(\"loadIndexedDBCache collectionsD done\", 3);\n\t\t//create collectionsDump from array of collection objects\n\t\tvar latestCollectionVersion = 0;\n\t\tfor(var i = 0; i < collectionsArray.length; i++){\n\t\t\tvar collection = new Zotero.Collection(collectionsArray[i]);\n\t\t\tlibrary.collections.addCollection(collection);\n\t\t\tif(collection.version > latestCollectionVersion){\n\t\t\t\tlatestCollectionVersion = collection.version;\n\t\t\t}\n\t\t}\n\t\tlibrary.collections.collectionsVersion = latestCollectionVersion;\n\t\t\n\t\t//TODO: add collectionsVersion as last version in any of these items?\n\t\t//or store it somewhere else for indexedDB cache purposes\n\t\tlibrary.collections.initSecondaryData();\n\t\tlibrary.collections.loaded = true;\n\t});\n\t\n\ttagsPromise.then(function(tagsArray){\n\t\tZ.debug(\"loadIndexedDBCache tagsD done\", 3);\n\t\tZ.debug(tagsArray);\n\t\t//create tagsDump from array of tag objects\n\t\tvar latestVersion = 0;\n\t\tvar tagsVersion = 0;\n\t\tfor(var i = 0; i < tagsArray.length; i++){\n\t\t\tvar tag = new Zotero.Tag(tagsArray[i]);\n\t\t\tlibrary.tags.addTag(tag);\n\t\t\tif(tagsArray[i].version > latestVersion){\n\t\t\t\tlatestVersion = tagsArray[i].version;\n\t\t\t}\n\t\t}\n\t\ttagsVersion = latestVersion;\n\t\tlibrary.tags.tagsVersion = tagsVersion;\n\n\t\t//TODO: add tagsVersion as last version in any of these items?\n\t\t//or store it somewhere else for indexedDB cache purposes\n\t\tlibrary.tags.loaded = true;\n\t});\n\t\n\t\n\t//resolve the overall deferred when all the child deferreds are finished\n\treturn Promise.all([itemsPromise, collectionsPromise, tagsPromise]);\n};\n\nZotero.Library.prototype.saveIndexedDB = function(){\n\tvar library = this;\n\t\n\tvar saveItemsPromise = library.idbLibrary.updateItems(library.items.itemsArray);\n\tvar saveCollectionsPromise = library.idbLibrary.updateCollections(library.collections.collectionsArray);\n\tvar saveTagsPromise = library.idbLibrary.updateTags(library.tags.tagsArray);\n\t\n\t//resolve the overall deferred when all the child deferreds are finished\n\treturn Promise.all([saveItemsPromise, saveCollectionsPromise, saveTagsPromise]);\n};","Zotero.Preferences = function(store, idString) {\n\tthis.store = store;\n\tthis.idString = idString;\n\tthis.preferencesObject = {};\n\tthis.defaults = {\n\t\tdebug_level: 3, //lower level is higher priority\n\t\tdebug_log: true,\n\t\tdebug_mock: false,\n\t\tlistDisplayedFields: ['title', 'creator', 'dateModified'],\n\t\tshowAutomaticTags: false,//tagType:1 is automatic, tagType:0 was added by user\n\t\titemsPerPage: 25,\n\t\torder: 'title',\n\t\ttitle: 'asc'\n\t};\n\tthis.load();\n};\n\nZotero.Preferences.prototype.setPref = function(key, value) {\n\tvar preferences = this;\n\tpreferences.preferencesObject[key] = value;\n\tpreferences.persist();\n};\n\nZotero.Preferences.prototype.setPrefs = function(newPrefs) {\n\tvar preferences = this;\n\tif(typeof(newPrefs) != \"object\") {\n\t\tthrow new Error(\"Preferences must be an object\");\n\t}\n\tpreferences.preferencesObject = newPrefs;\n\tpreferences.persist();\n};\n\nZotero.Preferences.prototype.getPref = function(key){\n\tvar preferences = this;\n\tif(preferences.preferencesObject[key]){\n\t\treturn preferences.preferencesObject[key];\n\t}\n\telse if(preferences.defaults[key]){\n\t\treturn preferences.defaults[key];\n\t}\n\telse {\n\t\treturn null;\n\t}\n};\n\nZotero.Preferences.prototype.getPrefs = function(){\n\tvar preferences = this;\n\treturn preferences.preferencesObject;\n};\n\nZotero.Preferences.prototype.persist = function(){\n\tvar preferences = this;\n\tvar storageString = 'preferences_' + preferences.idString;\n\tpreferences.store[storageString] = JSON.stringify(preferences.preferencesObject);\n};\n\nZotero.Preferences.prototype.load = function(){\n\tvar preferences = this;\n\tvar storageString = 'preferences_' + preferences.idString;\n\tvar storageObjectString = preferences.store[storageString];\n\tif(!storageObjectString){\n\t\tpreferences.preferencesObject = {};\n\t}\n\telse {\n\t\tpreferences.preferencesObject = JSON.parse(storageObjectString);\n\t}\n};\n","var J = jQuery.noConflict();\n\njQuery(document).ready(function() {\n    /* The Zotero web library is built on top of libZotero as a group of\n     * relatively independent widgets. They interact by listening to and\n     * triggering events (with optional filters) on the Zotero object or\n     * individual Zotero.Library objects. State is maintained by a\n     * Zotero.State object that optionally stores variables in the url\n     * using pushState as well. With pushState enabled back/forward\n     * actions trigger events for the variables that have changed so\n     * widgets listening know to update.\n     */\n    Z.debug('===== DOM READY =====', 3);\n    Zotero.state = new Zotero.State();\n    Zotero.init();\n});\n\nZotero.defaultPrefs = {\n    debug_level: 3, //lower level is higher priority\n    debug_log: true,\n    debug_mock: false,\n    javascript_enabled: false,\n};\n\nZotero.init = function(){\n    Z.debug(\"Zotero init\", 3);\n    \n    if(window.zoteroConfig){\n        Zotero.config = J.extend({}, Zotero.config, window.zoteroConfig);\n    }\n    \n    Zotero.state.rewriteAltUrl();\n    \n    //base init to setup tagline and search bar\n    if(Zotero.pages){\n        Zotero.pages.base.init();\n    }\n    \n    //run page specific init\n    if((window.zoterojsClass) && (undefined !== Zotero.pages) && Zotero.pages[zoterojsClass]) {\n        try{\n            Zotero.pages[zoterojsClass].init();\n        }\n        catch(err){\n            Z.error(\"Error running page specific init for \" + zoterojsClass);\n            Z.error(err);\n        }\n    }\n    \n    if(typeof zoteroData == 'undefined'){\n        zoteroData = {};\n    }\n    \n    if(window.nonZendPage === true){\n        return;\n    }\n    \n    Zotero.state.parseUrlVars();\n    \n    Zotero.config.startPageTitle = document.title;\n    var store;\n    if(typeof sessionStorage == 'undefined'){\n        store = {};//Zotero.storage.localStorage = {};\n    }\n    else{\n        store = sessionStorage;\n    }\n    Zotero.cache = new Zotero.Cache(store);\n    Zotero.store = store;\n    //initialize global preferences object\n    Zotero.preferences = new Zotero.Preferences(Zotero.store, 'global');\n    Zotero.preferences.defaults = J.extend({}, Zotero.preferences.defaults, Zotero.config.defaultPrefs);\n    \n    //get localized item constants if not stored in localstorage\n    var locale = \"en-US\";\n    if(zoteroData.locale){\n        locale = zoteroData.locale;\n    }\n    \n    //load general data if on library page\n    if(Zotero.config.pageClass == 'user_library' || Zotero.config.pageClass == 'group_library' || Zotero.config.pageClass == 'my_library'){\n        Z.debug(\"library page - \", 3);\n        Zotero.state.libraryString = Zotero.utils.libraryString(Zotero.config.librarySettings.libraryType,\n        Zotero.config.librarySettings.libraryID);\n        Zotero.state.filter = Zotero.state.libraryString;\n        \n        Zotero.Item.prototype.getItemTypes(locale);\n        Zotero.Item.prototype.getItemFields(locale);\n        Zotero.Item.prototype.getCreatorFields(locale);\n        Zotero.Item.prototype.getCreatorTypes();\n    } else {\n        Z.debug(\"non-library page\", 3);\n    }\n    \n    Zotero.ui.init.all();\n    \n    J.ajaxSettings.traditional = true;\n    \n    if(Zotero.state.getUrlVar('proxy') == 'false'){\n        Zotero.config.proxy = false;\n    }\n    \n    // Bind to popstate to update state when browser goes back\n    // only applicable if state is using location\n    window.onpopstate = function(){\n        Z.debug(\"popstate\", 3);\n        J(window).trigger('statechange');\n    };\n    J(window).on('statechange', J.proxy(Zotero.state.popstateCallback, Zotero.state));\n    \n    //call popstateCallback on first load since some browsers don't popstate onload\n    Zotero.state.popstateCallback();\n};\n\n","Zotero.State = function(){\n    this.q = {};\n    this.f = {};\n    this.pathVars = {};\n    this.startUrl = '';\n    this.replacePush = false;\n    \n    //keep track of where we came from\n    //update prevHref before history.pushState so we know what changed\n    //update curHref when we get a popState event\n    //difference between those two is what we need to look at to know what we should update\n    this.curHref = '';\n    this.prevHref = '';\n    //state holder that will keep \"current\" state separate from History so we can check for updates on popstate\n    //\"current\" here amounts to the state actually represented in the loaded page, so it will be updated after\n    //events fire for a browser state change\n    this.curState = {};\n    this.prevState = {};\n    \n    //setting to determine if we modify the url or not\n    this.useLocation = true;\n    \n    this.filter = null;\n    this.selectedItemKeys = [];\n};\n\n//rewrite old style urls to current urls\nZotero.State.prototype.rewriteAltUrl = function(){\n    Z.debug(\"rewriteAltUrl\");\n    var state = this;\n    var matches = false;\n    var itemKey = false;\n    var collectionKey = false;\n    var replace = false;\n    \n    var basePath = Zotero.config.nonparsedBaseUrl;\n    var pathname = window.location.pathname;\n    var baseRE = new RegExp(\".*\" + basePath + \"\\/?\");\n    var oldCollectionRE = /^.*\\/items\\/collections?\\/([A-Z0-9]{8})(?:\\/[A-Z0-9]{8})?$/;\n    var oldItemRE = /^.*\\/items\\/([A-Z0-9]{8})$/;\n\n    \n    switch(true){\n        case oldCollectionRE.test(pathname):\n            matches = oldCollectionRE.exec(pathname);\n            collectionKey = matches[1];\n            itemKey = matches[2];\n            replace = true;\n            break;\n        case oldItemRE.test(pathname):\n            matches = oldItemRE.exec(pathname);\n            itemKey = matches[1];\n            replace = true;\n            break;\n    }\n    \n    if(collectionKey){\n        state.setUrlVar('collectionKey', collectionKey);\n    }\n    if(itemKey){\n        state.setUrlVar('itemKey', itemKey);\n    }\n    \n    if(replace){\n        state.replaceState();\n    }\n};\n\nZotero.State.prototype.updateCurState = function(){\n    var state = this;\n    state.curState = J.extend({}, state.q, state.pathVars);\n    return;\n};\n\nZotero.State.prototype.savePrevState = function(){\n    var state = this;\n    state.prevState = state.curState;\n    return;\n};\n\nZotero.State.prototype.getSelectedItemKeys = function(){\n    var state = this;\n    //filter actual selected itemKeys so we only return unique list\n    //necessary because of duplicate item checkboxes, some of which\n    //may be hidden\n    var uniqueKeys = {};\n    var returnKeys = [];\n    J.each(state.selectedItemKeys, function(ind, val){\n        uniqueKeys[val] = true;\n    });\n    J.each(uniqueKeys, function(key, val){\n        returnKeys.push(key);\n    });\n    if(returnKeys.length === 0 && state.getUrlVar('itemKey')){\n        returnKeys.push(state.getUrlVar('itemKey'));\n    }\n    return returnKeys;\n};\n\n//toggle the selected state of the passed item key\nZotero.State.prototype.toggleItemSelected = function(itemKey){\n    var state = this;\n    var newselected = [];\n    var alreadySelected = false;\n    var selectedItemKeys = state.getSelectedItemKeys();\n    J.each(selectedItemKeys, function(ind, val){\n        if(val == itemKey){\n            alreadySelected = true;\n        } else {\n            newselected.push(val);\n        }\n    });\n    if(!alreadySelected){\n        newselected.push(itemKey);\n    }\n    state.selectedItemKeys = newselected;\n};\n\nZotero.State.prototype.pushTag = function(newtag){\n    Z.debug('Zotero.State.pushTag', 3);\n    var state = this;\n    if(state.pathVars['tag']){\n        if(state.pathVars['tag'] instanceof Array){\n            state.pathVars['tag'].push(newtag);\n        }\n        else{\n            var currentTag = state.pathVars['tag'];\n            state.pathVars['tag'] = [currentTag, newtag];\n        }\n    }\n    else{\n        state.pathVars['tag'] = [newtag];\n    }\n    return;\n};\n\nZotero.State.prototype.popTag = function(oldtag){\n    Z.debug('Zotero.State.popTag', 3);\n    var state = this;\n    if(!state.pathVars['tag']){\n        return;\n    }\n    else if(state.pathVars['tag'] instanceof Array){\n        var newTagArray = state.pathVars['tag'].filter(function(element, index, array){\n            return element != oldtag;\n        });\n        state.pathVars['tag'] = newTagArray;\n        return;\n    }\n    else if(state.pathVars['tag'] == oldtag){\n        state.pathVars['tag'] = [];\n        return;\n    }\n};\n\nZotero.State.prototype.toggleTag = function(tagtitle){\n    Z.debug('Zotero.State.toggleTag', 3);\n    var state = this;\n    if(!state.pathVars['tag']){\n        state.pathVars['tag'] = [tagtitle];\n        return;\n    }\n    else if(J.isArray(state.pathVars['tag'])) {\n        if(J.inArray(tagtitle, state.pathVars['tag']) != (-1) ){\n            var newTagArray = state.pathVars['tag'].filter(function(element, index, array){\n                return element != tagtitle;\n            });\n            state.pathVars['tag'] = newTagArray;\n            return;\n        }\n        else{\n            state.pathVars['tag'].push(tagtitle);\n            return;\n        }\n    }\n    else if(state.pathVars['tag'] == tagtitle){\n        state.pathVars['tag'] = [];\n        return;\n    }\n    else if(typeof state.pathVars['tag'] == 'string') {\n        var oldValue = state.pathVars['tag'];\n        state.pathVars['tag'] = [oldValue, tagtitle];\n        return;\n    }\n};\n\nZotero.State.prototype.unsetUrlVar = function(unset){\n    Z.debug(\"Zotero.State.unsetUrlVar\", 3);\n    var state = this;\n    if(state.pathVars[unset]){\n        delete(state.pathVars[unset]);\n    }\n};\n\nZotero.State.prototype.clearUrlVars = function(except){\n    Z.debug(\"Zotero.State.clearUrlVars\", 3);\n    var state = this;\n    if(!except){\n        except = [];\n    }\n    var pathVars = state.pathVars;\n    J.each(pathVars, function(key, value){\n        if(J.inArray(key, except) == (-1)){\n            delete(pathVars[key]);\n        }\n    });\n};\n\nZotero.State.prototype.parseUrlVars = function(){\n    Z.debug('Zotero.State.parseUrlVars', 3);\n    var state = this;\n    if(!state.useLocation) return;\n    state.q = Zotero.utils.parseQuery(Zotero.utils.querystring(window.location.href));\n    state.pathVars = state.parsePathVars();\n};\n\nZotero.State.prototype.parsePathVars = function(pathname){\n    Z.debug('Zotero.State.parsePathVars', 3);\n    var state = this;\n    var history = window.history;\n    //parse variables out of library urls\n    //:userslug/items/:itemKey/*\n    //:userslug/items/collection/:collectionKey\n    //groups/:groupidentifier/items/:itemKey/*\n    //groups/:groupidentifier/items/collection/:collectionKey/*\n    if(!pathname){\n        //var hstate = history.state;// History.getState();\n        pathname = window.location.pathname;\n    }\n    var basePath = Zotero.config.nonparsedBaseUrl;\n    basePath = basePath.replace(window.location.origin, \"\");\n    var split_replaced = [];\n    var re = new RegExp(\".*\" + basePath + \"\\/?\");\n    var replaced = pathname.replace(re, '');\n    \n    split_replaced = replaced.split('/');\n    \n    var pathVars = {};\n    for(var i=0; i<(split_replaced.length-1); i = i+2){\n        var pathVar = pathVars[split_replaced[i]];\n        //if var already present change to array and/or push\n        if(pathVar){\n            if(pathVar instanceof Array){\n                pathVar.push(decodeURIComponent(split_replaced[i+1]));\n            }\n            else{\n                var ar = [pathVar];\n                ar.push(decodeURIComponent(split_replaced[i+1]));\n                pathVar = ar;\n            }\n        }\n        //otherwise just set the value in the object\n        else{\n            pathVar = decodeURIComponent(split_replaced[i+1]);\n        }\n        pathVars[split_replaced[i]] = pathVar;\n    }\n    if(pathVars['itemkey']){\n        var itemKey = pathVars['itemkey'];\n        pathVars['itemKey'] = itemKey;\n        delete pathVars['itemkey'];\n    }\n    return pathVars;\n};\n\nZotero.State.prototype.buildUrl = function(urlvars, queryVars){\n    var state = this;\n    //Z.debug(\"Zotero.State.buildUrl\", 3);\n    if(typeof queryVars === 'undefined') { queryVars = false;}\n    var basePath = Zotero.config.nonparsedBaseUrl + '/';\n    \n    var urlVarsArray = [];\n    J.each(urlvars, function(index, value){\n        if(!value) { return; }\n        else if(value instanceof Array){\n            J.each(value, function(i, v){\n                urlVarsArray.push(index + '/' + encodeURIComponent(v) );\n            });\n        }\n        else{\n            urlVarsArray.push(index + '/' + encodeURIComponent(value) );\n        }\n    });\n    urlVarsArray.sort();\n    \n    var queryVarsArray = [];\n    J.each(queryVars, function(index, value){\n        if(!value) { return; }\n        else if(value instanceof Array){\n            J.each(value, function(i, v){\n                queryVarsArray.push(index + '=' + encodeURIComponent(v) );\n            });\n        }\n        else{\n            queryVarsArray.push(index + '=' + encodeURIComponent(value) );\n        }\n    });\n    queryVarsArray.sort();\n    \n    var pathVarsString = urlVarsArray.join('/');\n    var queryString = '';\n    if(queryVarsArray.length){\n        queryString = '?' + queryVarsArray.join(\"&\");\n    }\n    var url = basePath + pathVarsString + queryString;\n    \n    return url;\n};\n\n//addvars is an object mapping keys and values to add\n//removevars is an array of var keys to remove\nZotero.State.prototype.mutateUrl = function(addvars, removevars){\n    var state = this;\n    //Z.debug(\"Zotero.State.mutateUrl\", 3);\n    if(!addvars){\n        addvars = {};\n    }\n    if(!removevars){\n        removevars = [];\n    }\n    \n    var urlvars = J.extend({}, state.pathVars);\n    J.each(addvars, function(key, val){\n        urlvars[key] = val;\n    });\n    J.each(removevars, function(index, val){\n        delete urlvars[val];\n    });\n    \n    var url = state.buildUrl(urlvars, false);\n    //Z.debug(\"mutated Url:\" + url, 3);\n    \n    return url;\n};\n\nZotero.State.prototype.pushState = function(){\n    Z.debug('Zotero.State.pushState', 3);\n    var state = this;\n    var history = window.history;\n    \n    //Zotero.ui.saveFormData();\n    //make prevHref the current location before we change it\n    state.prevHref = state.curHref || window.location.href;\n    \n    //selectively add state to hint where to go\n    var s = J.extend({}, state.q, state.pathVars);\n    \n    var urlvars = state.pathVars;\n    var queryVars = state.q;\n    var url = state.buildUrl(urlvars, queryVars, false);\n    state.curHref = url;\n    Z.debug(\"about to push url: \" + url, 3);\n    //actually push state and manually call urlChangeCallback if specified\n    if(state.useLocation){\n        if(state.replacePush === true){\n            Z.debug(\"Zotero.State.pushState - replacePush\", 3);\n            state.replacePush = false;\n            history.replaceState(s, document.title, url);\n        }\n        else{\n            Z.debug(\"Zotero.State.pushState - pushState\", 3);\n            history.pushState(s, document.title, url);\n            state.stateChanged();\n        }\n    }\n    else {\n        state.stateChanged();\n    }\n    Zotero.debug(\"leaving pushstate\", 3);\n};\n\nZotero.State.prototype.replaceState = function(){\n    Z.debug(\"Zotero.State.replaceState\", 3);\n    var state = this;\n    var history = window.history;\n    //update current and leave prev alone.\n    //Zotero.ui.saveFormData();\n    state.updateCurState();\n    \n    //selectively add state to hint where to go\n    var s = J.extend({}, state.curState);\n    var urlvars = state.pathVars;\n    var url = state.buildUrl(urlvars, false);\n    \n    if(state.useLocation){\n        history.replaceState(s, null, url);\n        state.curHref = url;\n    }\n    else {\n        state.curHref = url;\n    }\n};\n\nZotero.State.prototype.updateStateTitle = function(title){\n    Zotero.debug(\"Zotero.State.updateStateTitle\", 3);\n    var state = this;\n    \n    document.title = title;\n};\n\nZotero.State.prototype.getUrlVar = function(key){\n    var state = this;\n    if(state.pathVars.hasOwnProperty(key) && (state.pathVars[key] !== '')){\n        return state.pathVars[key];\n    }\n    else if(state.q.hasOwnProperty(key)){\n        return state.q[key];\n    }\n    return undefined;\n};\n\nZotero.State.prototype.setUrlVar = function(key, val){\n    var state = this;\n    state.pathVars[key] = val;\n};\n\nZotero.State.prototype.getUrlVars = function(){\n    var state = this;\n    var params = Zotero.utils.parseQuery(Zotero.utils.querystring(window.location.href));\n    return J.extend(true,{}, state.pathVars, params);\n};\n\nZotero.State.prototype.setQueryVar = function(key, val){\n    var state = this;\n    if(val === ''){\n        delete state.q[key];\n    }\n    else{\n        state.q[key] = val;\n    }\n};\n\nZotero.State.prototype.addQueryVar = function(key, val){\n    var state = this;\n    if(state.q.hasOwnProperty(key)){\n        //property exists\n        if(J.isArray(state.q[key])){\n            state.q[key].push(val);\n        }\n        else{\n            var newArray = [state.q[key], val];\n            state.q[key] = newArray;\n        }\n    }\n    else{\n        //no value for that key yet\n        state.q[key] = val;\n    }\n    return state.q[key];\n};\n\nZotero.State.prototype.popstateCallback = function(evt){\n    var state = this;\n    Z.debug(\"===== popstateCallback =====\", 3);\n    var history = window.history;\n    state.prevHref = state.curHref;\n    \n    Z.debug(\"new href, updating href and processing urlchange\", 3);\n    state.curHref = window.location.href;// History.getState().cleanUrl;\n    \n    //reparse url to set vars in Z.ajax\n    state.parseUrlVars();\n    state.stateChanged(evt);\n};\n\nZotero.State.prototype.stateChanged = function(event){\n    var state = this;\n    Z.debug(\"stateChanged\", 3);\n    state.savePrevState();\n    state.updateCurState();\n    //check for changed variables in the url and fire events for them\n    Z.debug(\"Checking changed variables\", 3);\n    var changedVars = state.diffState(state.prevHref, state.curHref);\n    var widgetEvents = {};\n    J.each(changedVars, function(ind, val){\n        var eventString = val + \"Changed\";\n        Z.debug(eventString, 3);\n        //map var events to widget events\n        if(Zotero.eventful.eventMap.hasOwnProperty(eventString)){\n            J.each(Zotero.eventful.eventMap[eventString], function(ind, val){\n                if(!widgetEvents.hasOwnProperty(val)){\n                    widgetEvents[val] = 1;\n                }\n            });\n        }\n        Z.debug(\"State Filter: \" + state.filter, 3);\n        Zotero.trigger(eventString, {}, state.filter);\n    });\n    //TODO: is this eventMap triggering necessary?\n    \n    J.each(widgetEvents, function(ind, val){\n        Z.debug(\"State Filter: \" + state.filter, 3);\n        \n        Zotero.trigger(ind, {}, state.filter);\n    });\n    \n    Z.debug(\"===== stateChanged Done =====\", 3);\n};\n\nZotero.State.prototype.diffState = function(prevHref, curHref){\n    Z.debug(\"Zotero.State.diffState\", 3);\n    var state = this;\n    //check what has changed when a new state is pushed\n    var prevVars = J.extend({}, state.parsePathVars(prevHref) );\n    var curVars = J.extend({}, state.parsePathVars(curHref) );\n\n    var monitoredVars = ['start',\n                         'limit',\n                         'order',\n                         'sort',\n                         'content',\n                         'format',\n                         'q',\n                         'fq',\n                         'itemType',\n                         'itemKey',\n                         'collectionKey',\n                         'searchKey',\n                         'locale',\n                         'tag',\n                         'tagType',\n                         'key',\n                         'style',\n                         'session',\n                         'newer',\n                         'since',\n                         'itemPage',\n                         'mode'\n                         ];\n    var changedVars = [];\n    J.each(monitoredVars, function(ind, val){\n        if(prevVars.hasOwnProperty(val) || curVars.hasOwnProperty(val)){\n            if(prevVars[val] != curVars[val]){\n                changedVars.push(val);\n            }\n        }\n    });\n    \n    return changedVars;\n};\n\n/**\n * Bind tag links to alter current state rather than following the link\n * @return {undefined}\n */\n/*\nZotero.State.prototype.bindTagLinks = function(container){\n    return;\n    var state = this;\n    Z.debug(\"Zotero.State.bindTagLinks\", 3);\n    J(container).on('click', 'a.tag-link', function(e){\n        e.preventDefault();\n        e.stopImmediatePropagation();\n        //J(\"#tag-filter-input\").val('');\n        var tagtitle = J(this).attr('data-tagtitle');\n        state.toggleTag(tagtitle);\n        state.clearUrlVars(['tag', 'collectionKey']);\n        state.pushState();\n    });\n\n};\n*/\n/**\n * Bind item links to take alter current state instead of following link\n * @return {undefined}\n */\n/*\nZotero.State.prototype.bindItemLinks = function(container){\n    Z.debug(\"Zotero.State.bindItemLinks\", 3);\n    var state = this;\n    \n    J(container).on('click', \"a.item-select-link\", function(e){\n        e.preventDefault();\n        e.stopImmediatePropagation();\n        Z.debug(\"item-select-link clicked\", 3);\n        var itemKey = J(this).data('itemkey');\n        state.pathVars.itemKey = itemKey;\n        state.pushState();\n    });\n    J(container).on('click', 'td[data-itemkey]:not(.edit-checkbox-td)', function(e){\n        e.preventDefault();\n        Z.debug(\"item-select-td clicked\", 3);\n        var itemKey = J(this).data('itemkey');\n        if(e.ctrlKey){\n            state.toggleItemSelected(itemKey);\n            Zotero.trigger(\"selectedItemsChanged\");\n        } else {\n            state.pathVars.itemKey = itemKey;\n            state.pushState();\n        }\n    });\n};\n*/","//return a promise that will resolve after mseconds milliseconds\nZotero.Delay = function(mseconds){\n    return new Promise(function(resolve, reject){\n        setTimeout(function(){\n            resolve();\n        }, mseconds);\n    });\n};\n","Zotero.widgets = {};\nZotero.eventful = {};\n\nZotero.eventful.events = [\n    \"collectionsDirty\", //collections have been updated and should be synced\n    \"tagsChanged\", //library.tags has been updated in some way\n    \"displayedItemsChanged\", //filters for items list have changed\n    \"displayedItemChanged\", //item selected for detailed view has changed\n    \"selectedItemsChanged\", //items selected by checkbox for action have changed\n    \"showCitations\", //request to show the citations for currently selected items\n    \"showSettings\", //request to show settings panel\n    \"exportItems\", //request to export currently selected items\n    \"libraryTagsUpdated\",\n    \"uploadSuccessful\",\n    \"refreshGroups\",\n    \"clearLibraryQuery\",\n    \"libraryItemsUpdated\",\n    \"citeItems\",\n    \"itemTypeChanged\",\n    \"addTag\",\n    \"showChildren\",\n    \"selectCollection\",\n    \"selectedCollectionChanged\",\n    \"libraryCollectionsUpdated\",\n    \"loadItemsDone\",\n    \"collectionsChanged\",\n    \"tagsChanged\",\n    \"itemsChanged\",\n    \"loadedCollectionsProcessed\",\n    \"deleteProgress\",\n    \"settingsLoaded\",\n    \"cachedDataLoaded\",\n    //eventfultriggers:\n    \"createItem\",\n    \"newItem\",\n    \"addToCollectionDialog\",\n    \"removeFromCollection\",\n    \"moveToTrash\",\n    \"removeFromTrash\",\n    \"toggleEdit\",\n    \"clearLibraryQuery\",\n    \"librarySettingsDialog\",\n    \"citeItems\",\n    \"exportItemsDialog\",\n    \"syncLibrary\",\n    \"createCollectionDialog\",\n    \"updateCollectionDialog\",\n    \"deleteCollectionDialog\",\n    \"showMoreTags\",\n    \"showFewerTags\",\n    \"indexedDBError\",\n\n];\n\nZotero.eventful.eventMap = {\n    \"orderChanged\":[\"displayedItemsChanged\"],\n    \"sortChanged\":[\"displayedItemsChanged\"],\n    \"collectionKeyChanged\":[\"displayedItemsChanged\", \"selectedCollectionChanged\"],\n    \"qChanged\":[\"displayedItemsChanged\"],\n    \"tagChanged\":[\"displayedItemsChanged\", \"selectedTagsChanged\"],\n    \"itemPageChanged\":[\"displayedItemsChanged\"],\n    \"itemKeyChanged\":[\"displayedItemChanged\"]\n};\n\nZotero.eventful.initWidgets = function(){\n    Zotero.state.parsePathVars();\n    \n    J(\".eventfulwidget\").each(function(ind, el){\n        var widgetName = J(el).data(\"widget\");\n        if(widgetName && Zotero.ui.widgets[widgetName]){\n            if(Zotero.ui.widgets[widgetName]['init']){\n                Z.debug(\"eventfulwidget init: \" + widgetName, 3);\n                Zotero.ui.widgets[widgetName].init(el);\n            }\n        }\n    });\n    \n    Zotero.eventful.initTriggers();\n    \n    //TODO:set up marshalling of url var changes mapped to more specialized events\n    //this is currently done in pushstate... possibly belongs here instead?\n    \n    //trigger events that should happen for widgets on pageload\n    //mostly things that cause us to pull from the API or display something\n    //for the first time\n};\n\n//make html elements that are declared to trigger events trigger them\n//this should be called on any elements that are inserted into the DOM\n//and once on page load\nZotero.eventful.initTriggers = function(el){\n    Zotero.debug(\"Zotero.eventful.initTriggers\", 3);\n    if(!el){\n        el = J(\"html\");\n    }\n    //initialize elements that have data-triggers info to trigger that event\n    var triggerOnEvent = function(event){\n        Z.debug(\"triggerOnEvent\", 3);\n        event.preventDefault();\n        var jel = J(event.delegateTarget);\n        var eventName = jel.data(\"triggers\");\n        Z.debug(\"eventName: \" + eventName, 3);\n        var filter = jel.data('library') || \"\";\n        \n        Zotero.trigger(eventName, {triggeringElement:event.currentTarget}, filter);\n    };\n    \n    J(el).find(\".eventfultrigger\").each(function(ind, el){\n        if(J(el).data('triggerbound')){\n            return;\n        }\n        var ev = J(el).data(\"event\");\n        \n        if(ev){\n            Z.debug(\"binding \" + ev + \" on \" + el.tagName, 3);\n            J(el).on(ev, triggerOnEvent);\n        }\n        else {\n            //Z.debug(\"binding click trigger on \" + el.tagName, 3);\n            //default to triggering on click\n            J(el).on(\"click\", triggerOnEvent);\n        }\n        J(el).data('triggerbound', true);\n    });\n};\n","\n/**\n * Format an item field for display\n * @param  {string} field item field name\n * @param  {Zotero_Item} item  Zotero Item\n * @param  {boolean} trim  Trim output to limit length\n * @return {string}\n */\nZotero.ui.formatItemField = function(field, item, trim){\n    if(typeof trim == 'undefined'){\n        trim = false;\n    }\n    var intlOptions = {\n        year: \"numeric\",\n        month: \"numeric\",\n        day: \"numeric\",\n        hour: \"numeric\",\n        minute: \"numeric\",\n        second: \"numeric\",\n        hour12: false\n    };\n\n    var formatDate;\n    if(window.Intl) {\n        var dateFormatter = new window.Intl.DateTimeFormat(undefined, intlOptions);\n        formatDate = dateFormatter.format;\n    } else {\n        formatDate = function(date) {\n            return date.toLocaleString();\n        };\n    }\n\n    var trimLength = 0;\n    var formattedString = '';\n    var date;\n    if(Zotero.config.maxFieldSummaryLength[field]){\n        trimLength = Zotero.config.maxFieldSummaryLength[field];\n    }\n    switch(field){\n        case \"itemType\":\n            formattedString = Zotero.localizations.typeMap[item.apiObj.data.itemType];\n            break;\n        case \"dateModified\":\n            if(!item.apiObj.data['dateModified']){\n                formattedString = '';\n            }\n            date = Zotero.utils.parseApiDate(item.apiObj.data['dateModified']);\n            if(date){\n                formattedString = formatDate(date);\n            }\n            else{\n                formattedString = item.apiObj.data['dateModified'];\n            }\n            break;\n        case \"dateAdded\":\n            if(!item.apiObj.data['dateAdded']){\n                formattedString = '';\n            }\n            date = Zotero.utils.parseApiDate(item.apiObj.data['dateAdded']);\n            if(date){\n                formattedString = formatDate(date);\n            }\n            else{\n                formattedString = item.apiObj.data['dateAdded'];\n            }\n            break;\n        case \"title\":\n            formattedString = item.get('title');\n            break;\n        case \"creator\":\n        case \"creatorSummary\":\n            formattedString = item.get('creatorSummary');\n            break;\n        case \"addedBy\":\n            if(item.apiObj.meta.createdByUser){\n                if(item.apiObj.meta.createdByUser.name !== '') {\n                    formattedString = item.apiObj.meta.createdByUser.name;\n                }\n                else {\n                    formattedString = item.apiObj.meta.createdByUser.username;\n                }\n            }\n            break;\n        case \"modifiedBy\":\n            if(item.apiObj.meta.lastModifiedByUser){\n                if(item.apiObj.meta.lastModifiedByUser.name !== ''){\n                    formattedString = item.apiObj.meta.lastModifiedByUser.name;\n                }\n                else {\n                    formattedString = item.apiObj.meta.lastModifiedByUser.username;\n                }\n            }\n            break;\n        default:\n            var t = typeof(item.get(field));\n            if(typeof(t) !== \"undefined\") {\n                formattedString = item.get(field);\n            }\n    }\n    if(typeof formattedString == 'undefined'){\n        Z.error(\"formattedString for \" + field + \" undefined\");\n        Z.error(item);\n    }\n    if(trim) {\n        return Zotero.ui.trimString(formattedString, trimLength);\n    }\n    else{\n        return formattedString;\n    }\n};\n\n/**\n * Trim string to specified length and add ellipsis\n * @param  {string} s      string to trim\n * @param  {int} maxlen maximum length to allow for string\n * @return {string}\n */\nZotero.ui.trimString = function(s, maxlen){\n    var trimLength = 35;\n    var formattedString = s;\n    if(typeof s == 'undefined'){\n        Z.error(\"formattedString passed to trimString was undefined.\");\n        return '';\n    }\n    if(maxlen){\n        trimLength = maxlen;\n    }\n    if((trimLength > 0) && (formattedString.length > trimLength) ) {\n        return formattedString.slice(0, trimLength) + '';\n    }\n    else{\n        return formattedString;\n    }\n};\n\n/**\n * Format a date field from a Zotero Item based on locale\n * @param  {string} field field name to format\n * @param  {Zotero_Item} item  Zotero Item owning the field\n * @return {string}\n */\nZotero.ui.formatItemDateField = function(field, item){\n    var date;\n    var timeOptions = {\n        hour: \"numeric\",\n        minute: \"numeric\",\n        second: \"numeric\",\n        hour12: false\n    };\n    var intlOptions = {\n        year: \"numeric\",\n        month: \"numeric\",\n        day: \"numeric\",\n        hour: \"numeric\",\n        minute: \"numeric\",\n        second: \"numeric\",\n        hour12: false\n    };\n    \n    var formatDate;\n    var formatTime;\n    if(window.Intl) {\n        var dateFormatter = new window.Intl.DateTimeFormat(undefined, intlOptions);\n        formatDate = dateFormatter.format;\n        var timeFormatter = new window.Intl.DateTimeFormat(undefined, timeOptions);\n        formatTime = timeFormatter.format;\n    } else {\n        formatDate = function(date) {\n            return date.toLocaleDateString();\n        };\n        formatTime = function(date) {\n            return date.toLocaleTimeString();\n        };\n    }\n\n    switch(field){\n        case \"dateModified\":\n            if(!item.apiObj.data['dateModified']){\n                return '';\n            }\n            date = Zotero.utils.parseApiDate(item.apiObj.data['dateModified']);\n            if(date){\n                return \"<span class='localized-date-span'>\" + formatDate(date) + \"</span> <span class='localized-date-span'>\" + formatTime(date) + \"</span>\";\n            }\n            else{\n                return item.apiObj.data['dateModified'];\n            }\n            return date.toLocaleString();\n        case \"dateAdded\":\n            if(!item.apiObj.data['dateAdded']){\n                return '';\n            }\n            date = Zotero.utils.parseApiDate(item.apiObj.data['dateAdded']);\n            if(date){\n                return \"<span class='localized-date-span'>\" + formatDate(date) + \"</span> <span class='localized-date-span'>\" + formatTime(date) + \"</span>\";\n            }\n            else{\n                return item.apiObj.data['dateAdded'];\n            }\n            break;\n    }\n    return '';\n};\n\n/**\n * Format a content row from a Zotero Item for display\n * @param  {string} contentRow contenteRow name\n * @return {string}\n */\nZotero.ui.formatItemContentRow = function(contentRow){\n    if(contentRow.field == 'date'){\n        if(!contentRow.fieldValue){return '';}\n        var date = Zotero.utils.parseApiDate(contentRow.value);\n        if(!date){\n            return contentRow.fieldValue;\n        }\n        else{\n            return date.toLocaleString();\n        }\n    }\n    else{\n        return contentRow.fieldValue;\n    }\n};\n\nZotero.ui.groupUrl = function(group, route){\n    var groupBase;\n    if(group.groupType == 'Private'){\n        groupBase = '/groups/' + group.groupID;\n    }\n    else{\n        groupBase = '/groups/' + Zotero.utils.slugify(group.groupName);\n    }\n    var groupIDBase = '/groups/' + group.groupID;\n    Zotero.debug(\"groupBase: \" + groupBase);\n    switch(route){\n        case 'groupView':\n            return groupBase;\n        case 'groupLibrary':\n            return groupBase + '/items';\n        case 'groupSettings':\n            return groupIDBase + '/settings';\n        case 'groupMembers':\n            return groupIDBase + '/members';\n        case 'groupLibrarySettings':\n            return groupIDBase + '/settings/library';\n        case 'groupMembersSettings':\n            return groupIDBase + '/settings/members';\n    }\n};\n","Zotero.ui.init = {};\nZotero.ui.widgets = {};\n\n//initialize ui\nZotero.ui.init.all = function(){\n    //run UI initialization based on what page we're on\n    Z.debug(\"ui init based on page\", 3);\n    switch(Zotero.config.pageClass){\n        case \"my_library\":\n        case \"user_library\":\n        case \"group_library\":\n            Zotero.ui.init.library();\n            break;\n        case \"default\":\n    }\n    //Zotero.ui.init.libraryTemplates();\n    Zotero.eventful.initWidgets();\n    Zotero.ui.init.rte();\n};\n\nZotero.ui.init.library = function(){\n    /*\n    Z.debug(\"Zotero.ui.init.library\", 3);\n    \n    //initialize RTE for textareas if marked\n    var hasRTENoLinks = J('textarea.rte').filter('.nolinks').length;\n    var hasRTEReadOnly = J('textarea.rte').filter('.readonly').length;\n    var hasRTEDefault = J('textarea.rte').not('.nolinks').not('.readonly').length;\n    if(hasRTENoLinks){\n        Zotero.ui.init.rte('nolinks', false, J('body'));\n    }\n    if(hasRTEReadOnly){\n        Zotero.ui.init.rte('readonly', false, J('body'));\n    }\n    if(hasRTEDefault){\n        Zotero.ui.init.rte('default', false, J('body'));\n    }\n    */\n};\n\nZotero.ui.init.rte = function(type, autofocus, container){\n    Z.debug(\"init.rte\", 3);\n    if(Zotero.config.rte == 'ckeditor'){\n        Zotero.ui.init.ckeditor(type, autofocus, container);\n        return;\n    }\n    else {\n        Zotero.ui.init.tinyMce(type, autofocus, container);\n    }\n};\n\nZotero.ui.init.ckeditor = function(type, autofocus, container){\n    Z.debug('init.ckeditor', 3);\n    if(!type) { type = 'default'; }\n    if(!container) { container = J('body');}\n    \n    var ckconfig = {};\n    ckconfig.toolbarGroups = [\n        { name: 'clipboard',   groups: [ 'clipboard', 'undo' ] },\n        //{ name: 'editing',     groups: [ 'find', 'selection' ] },\n        { name: 'links' },\n        { name: 'insert' },\n        { name: 'forms' },\n        { name: 'tools' },\n        { name: 'document',    groups: [ 'mode', 'document', 'doctools' ] },\n        { name: 'others' },\n        '/',\n        { name: 'basicstyles', groups: [ 'basicstyles', 'cleanup' ] },\n        { name: 'paragraph',   groups: [ 'list', 'indent', 'blocks', 'align' ] },\n        { name: 'styles' },\n        { name: 'colors' },\n        { name: 'about' }\n    ];\n    \n    var nolinksckconfig = {};\n    nolinksckconfig.toolbarGroups = [\n        { name: 'clipboard',   groups: [ 'clipboard', 'undo' ] },\n        { name: 'editing',     groups: [ 'find', 'selection' ] },\n        { name: 'insert' },\n        { name: 'forms' },\n        { name: 'tools' },\n        { name: 'document',    groups: [ 'mode', 'document', 'doctools' ] },\n        { name: 'others' },\n        '/',\n        { name: 'basicstyles', groups: [ 'basicstyles', 'cleanup' ] },\n        { name: 'paragraph',   groups: [ 'list', 'indent', 'blocks', 'align' ] },\n        { name: 'styles' },\n        { name: 'colors' },\n        { name: 'about' }\n    ];\n    var readonlyckconfig = {};\n    readonlyckconfig.toolbarGroups = [];\n    readonlyckconfig.readOnly = true;\n    \n    var config;\n    if(type == 'nolinks'){\n        config = J.extend(true, {}, nolinksckconfig);\n    }\n    else if(type == 'readonly'){\n        config = J.extend(true, {}, readonlyckconfig);\n    }\n    else {\n        config = J.extend(true, {}, ckconfig);\n    }\n    if(autofocus){\n        config.startupFocus = true;\n    }\n    \n    Z.debug(\"initializing CK editors\", 3);\n    if(J(container).is('.rte')){\n        Z.debug(\"RTE textarea - \" + \" - \" + J(container).attr('name'), 3);\n        var edName = J(container).attr('name');\n        if(!CKEDITOR.instances[edName]){\n            var editor = CKEDITOR.replace(J(container), config );\n        }\n    }\n    else{\n        Z.debug(\"not a direct rte init\");\n        Z.debug(container);\n        J(container).find(\"textarea.rte\").each(function(ind, el){\n            Z.debug(\"RTE textarea - \" + ind + \" - \" + J(el).attr('name'), 3);\n            var edName = J(el).attr('name');\n            if(!CKEDITOR.instances[edName]){\n                var editor = CKEDITOR.replace(el, config );\n            }\n        });\n    }\n};\n\nZotero.ui.init.tinyMce = function(type, autofocus, elements){\n    Z.debug('init.tinyMce', 3);\n    if(!type){\n        type = 'default';\n    }\n    var mode = 'specific_textareas';\n    if(elements){\n        mode = 'exact';\n    }\n    else{\n        elements = '';\n    }\n    \n    var tmceConfig = {\n        //script_url : '/static/library/tinymce_jquery/jscripts/tiny_mce/tiny_mce.js',\n        mode : mode,\n        elements:elements,\n        theme: \"advanced\",\n        //plugins : \"pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,visualchars,nonbreaking,xhtmlxtras,template\",\n        //plugins : \"pagebreak,style,layer,table,advhr,advimage,advlink,preview,searchreplace,paste\",\n        \n        theme_advanced_toolbar_location : \"top\",\n        theme_advanced_buttons1 : \"bold,italic,underline,strikethrough,separator,sub,sup,separator,forecolorpicker,backcolorpicker,separator,blockquote,separator,link,unlink\",\n        theme_advanced_buttons2 : \"formatselect,separator,justifyleft,justifycenter,justifyright,separator,bullist,numlist,outdent,indent,separator,removeformat,code,\",\n        theme_advanced_buttons3 : \"\",\n        theme_advanced_toolbar_align : \"left\",\n        theme_advanced_statusbar_location: 'bottom',\n        theme_advanced_resizing: true,\n        relative_urls: false,\n        //width: '500',\n        //height: '300',\n        editor_selector: 'default'\n    };\n    \n    if(autofocus){\n        tmceConfig.init_instance_callback = function(inst){\n            Z.debug(\"inited \" + inst.editorId);\n            inst.focus();\n        };\n    }\n    \n    if(type != 'nolinks'){\n        tmceConfig.theme_advanced_buttons1 += ',link';\n    }\n    \n    if(type == 'nolinks'){\n        tmceConfig.editor_selector = 'nolinks';\n    }\n    \n    if(type == 'readonly'){\n        tmceConfig.readonly = 1;\n        tmceConfig.editor_selector = 'readonly';\n    }\n    \n    tinymce.init(tmceConfig);\n    return tmceConfig;\n};\n\nZotero.ui.init.libraryTemplates = function(){\n    /*\n    J.views.helpers({\n        Zotero: Zotero,\n        J: J,\n        Modernizr: Modernizr,\n        zoteroFieldMap: Zotero.localizations.fieldMap,\n        formatItemField: Zotero.ui.formatItemField,\n        formatItemDateField: Zotero.ui.formatItemDateField,\n        trimString: Zotero.ui.trimString,\n        multiplyChar: function(char, num) {\n            return Array(num).join(char);\n        },\n        displayInDetails: function(field, item) {\n            if( ( (J.inArray(field, item.hideFields) == -1) && (item.fieldMap.hasOwnProperty(field))) &&\n                (J.inArray(field, ['itemType', 'title', 'creators', 'notes']) == -1)) {\n                return true;\n            }\n            return false;\n        },\n        nonEditable: function(field, item) {\n            if( J.inArray(field, item.noEditFields) !== -1) {\n                return true;\n            }\n        },\n    });\n    J.views.tags({\n        'coloredTags': {\n            'template': \"{{for ~tag.tagCtx.args[0].matchColoredTags(~tag.tagCtx.args[1]) tmpl='#coloredtagTemplate' /}}\"\n        }\n    });\n    */\n    /*\n    J('#tagrowTemplate').template('tagrowTemplate');\n    J('#tagslistTemplate').template('tagslistTemplate');\n    J('#collectionlistTemplate').template('collectionlistTemplate');\n    J('#collectionrowTemplate').template('collectionrowTemplate');\n    J('#itemrowTemplate').template('itemrowTemplate');\n    J('#itemstableTemplate').template('itemstableTemplate');\n    J('#itemdetailsTemplate').template('itemdetailsTemplate');\n    J('#itemnotedetailsTemplate').template('itemnotedetailsTemplate');\n    J('#itemformTemplate').template('itemformTemplate');\n    J('#citeitemformTemplate').template('citeitemformTemplate');\n    J('#attachmentformTemplate').template('attachmentformTemplate');\n    J('#attachmentuploadTemplate').template('attachmentuploadTemplate');\n    J('#editnoteformTemplate').template('editnoteformTemplate');\n    J('#itemtagTemplate').template('itemtagTemplate');\n    J('#itemtypeselectTemplate').template('itemtypeselectTemplate');\n    J('#authorelementssingleTemplate').template('authorelementssingleTemplate');\n    J('#authorelementsdoubleTemplate').template('authorelementsdoubleTemplate');\n    J('#childitemsTemplate').template('childitemsTemplate');\n    J('#editcollectionbuttonsTemplate').template('editcollectionbuttonsTemplate');\n    J('#choosecollectionformTemplate').template('choosecollectionformTemplate');\n    J('#breadcrumbsTemplate').template('breadcrumbsTemplate');\n    J('#breadcrumbstitleTemplate').template('breadcrumbstitleTemplate');\n    J('#newcollectionformTemplate').template('newcollectionformTemplate');\n    J('#updatecollectionformTemplate').template('updatecollectionformTemplate');\n    J('#deletecollectionformTemplate').template('deletecollectionformTemplate');\n    J('#tagunorderedlistTemplate').template('tagunorderedlistTemplate');\n    J('#librarysettingsTemplate').template('librarysettingsTemplate');\n    J('#addtocollectionformTemplate').template('addtocollectionformTemplate');\n    J('#exportformatsTemplate').template('exportformatsTemplate');\n    */\n};\n\n","\n/**\n * Update a Zotero_Item object from the current values of an edit item form\n * @param  {Zotero_Item} item   Zotero item to update\n * @param  {Dom Form} formEl edit item form to take values from\n * @return {bool}\n */\n/*\nZotero.ui.updateItemFromForm = function(item, formEl){\n    Z.debug(\"Zotero.ui.updateItemFromForm\", 3);\n    \n    var base = J(formEl);\n    base.closest('.eventfulwidget').data('ignoreformstorage', true);\n    var library = Zotero.ui.getAssociatedLibrary(base);\n    \n    var itemKey = '';\n    if(item.get('key')) itemKey = item.get('key');\n    else {\n        //new item - associate with library and add to collection if appropriate\n        if(library){\n            item.associateWithLibrary(library);\n        }\n        var collectionKey = Zotero.state.getUrlVar('collectionKey');\n        if(collectionKey){\n            item.addToCollection(collectionKey);\n        }\n    }\n    //update current representation of the item with form values\n    J.each(item.apiObj.data, function(field, value){\n        var selector, inputValue, noteElID;\n        if(field == 'note'){\n            selector = \"textarea[data-itemkey='\" + itemKey + \"'].rte\";\n            Z.debug(selector, 4);\n            noteElID = base.find(selector).attr('id');\n            Z.debug(noteElID, 4);\n            inputValue = Zotero.ui.getRte(noteElID);\n        }\n        else{\n            selector = \"[data-itemkey='\" + itemKey + \"'][name='\" + field + \"']\";\n            inputValue = base.find(selector).val();\n        }\n        \n        if(typeof inputValue !== 'undefined'){\n            Z.debug(\"updating item \" + field + \": \" + inputValue);\n            item.set(field, inputValue);\n        }\n    });\n    var creators = [];\n    base.find(\"tr.creator\").each(function(index, el){\n        var creator = Zotero.ui.creatorFromElement(el);\n        if(creator !== null){\n            creators.push(creator);\n        }\n    });\n    \n    var tags = [];\n    base.find(\"input.taginput\").each(function(index, el){\n        var tagString = J(el).val();\n        if(tagString !== ''){\n            tags.push({tag: tagString});\n        }\n    });\n    \n    //grab all the notes from the form and add to item\n    //in the case of new items we can add notes in the creation request\n    //in the case of existing items we need to post notes to /children, but we still\n    //have that interface here for consistency\n    var notes = [];\n    base.find(\"textarea.note-text\").each(function(index, el){\n        var noteid = J(el).attr('id');\n        var noteContent = Zotero.ui.getRte(noteid);\n        \n        var noteItem = new Zotero.Item();\n        if(library){\n            noteItem.associateWithLibrary(library);\n        }\n        noteItem.initEmptyNote();\n        noteItem.set('note', noteContent);\n        noteItem.setParent(item.get('key'));\n        notes.push(noteItem);\n    });\n    \n    item.notes = notes;\n    if(creators.length){\n        item.apiObj.data.creators = creators;\n    }\n    item.apiObj.data.tags = tags;\n    item.synced = false;\n    item.dirty = true;\n    Z.debug(item);\n};\n*/\n\n/*\nZotero.ui.creatorFromElement = function(el){\n    var name, creator, firstName, lastName;\n    var jel = J(el);\n    var creatorType = jel.find(\"select.creator-type-select\").val();\n    if(jel.hasClass('singleCreator')){\n        name = jel.find(\"input.creator-name\");\n        if(!name.val()){\n            //can't submit authors with empty names\n            return null;\n        }\n        creator = {creatorType: creatorType,\n                        name: name.val()\n                    };\n    }\n    else if(jel.hasClass('doubleCreator')){\n        firstName = jel.find(\"input.creator-first-name\").val();\n        lastName = J(el).find(\"input.creator-last-name\").val();\n        if((firstName === '') && (lastName === '')){\n            return null;\n        }\n        creator = {creatorType: creatorType,\n                        firstName: firstName,\n                        lastName: lastName\n                        };\n    }\n    return creator;\n};\n*/\n\nZotero.ui.saveItem = function(item) {\n    //var requestData = JSON.stringify(item.apiObj);\n    Z.debug(\"pre writeItem debug\", 4);\n    Z.debug(item, 4);\n    //show spinner before making ajax write call\n    var library = item.owningLibrary;\n    var writeResponse = item.writeItem()\n    .then(function(writtenItems){\n        Z.debug(\"item write finished\", 3);\n        //check for errors, update nav\n        if(item.writeFailure){\n            Z.error(\"Error writing item:\" + item.writeFailure.message);\n            Zotero.ui.jsNotificationMessage('Error writing item', 'error');\n            throw new Error(\"Error writing item:\" + item.writeFailure.message);\n        }\n    });\n    \n    //update list of tags we have if new ones added\n    Z.debug('adding new tags to library tags', 3);\n    var libTags = library.tags;\n    var tags = item.apiObj.data.tags;\n    J.each(tags, function(index, tagOb){\n        var tagString = tagOb.tag;\n        if(!libTags.tagObjects.hasOwnProperty(tagString)){\n            var tag = new Zotero.Tag(tagOb);\n            libTags.addTag(tag);\n        }\n    });\n    libTags.updateSecondaryData();\n\n    return writeResponse;\n};\n\n/**\n * Temporarily store the data in a form so it can be reloaded\n * @return {undefined}\n */\n/*\nZotero.ui.saveFormData = function(){\n    Z.debug(\"saveFormData\", 3);\n    J(\".eventfulwidget\").each(function(){\n        var formInputs = J(this).find('input');\n        J(this).data('tempformstorage', formInputs);\n    });\n};\n*/\n/**\n * Reload previously saved form data\n * @param  {Dom Element} el DOM Form to restore data to\n * @return {undefined}\n */\n/*\nZotero.ui.loadFormData = function(el){\n    Z.debug(\"loadFormData\", 3);\n    var formData = J(el).data('tempformstorage');\n    if(J(el).data(\"ignoreformstorage\")){\n        Z.debug(\"ignoring stored form data\", 3);\n        J(el).removeData('tempFormStorage');\n        J(el).removeData('ignoreFormStorage');\n        return;\n    }\n    Z.debug('formData: ', 4);\n    Z.debug(formData, 4);\n    if(formData){\n        formData.each(function(index){\n            var idstring = '#' + J(this).attr('id');\n            Z.debug('idstring:' + idstring, 4);\n            if(J(idstring).length){\n                Z.debug('setting value of ' + idstring, 4);\n                J(idstring).val(J(this).val());\n            }\n        });\n    }\n};\n*/\n/**\n * Get the class for an itemType to display an appropriate icon\n * @param  {Zotero_Item} item Zotero item to get the class for\n * @return {string}\n */\nZotero.ui.itemTypeClass = function(item) {\n    var itemTypeClass = item.apiObj.data.itemType;\n    if (item.apiObj.data.itemType == 'attachment') {\n        if (item.mimeType == 'application/pdf') {\n            itemTypeClass += '-pdf';\n        }\n        else {\n            switch (item.linkMode) {\n                case 0: itemTypeClass += '-file'; break;\n                case 1: itemTypeClass += '-file'; break;\n                case 2: itemTypeClass += '-snapshot'; break;\n                case 3: itemTypeClass += '-web-link'; break;\n            }\n        }\n    }\n    return \"img-\" + itemTypeClass;\n};\n\n/**\n * Get the Zotero Library associated with an element (generally a .eventfulwidget element)\n * @param  {Dom Element} el Dom element\n * @return {Zotero_Library}\n */\nZotero.ui.getAssociatedLibrary = function(el){\n    Z.debug(\"Zotero.ui.getAssociatedLibrary\", 3);\n    var jel;\n    if(typeof el == 'undefined'){\n        jel = J(\".zotero-library\").first();\n    }\n    else {\n        jel = J(el);\n        if(jel.length === 0 || jel.is(\"#eventful\") ){\n            jel = J(\".zotero-library\").first();\n            if(jel.length === 0){\n                Z.debug(\"No element passed and no default found for getAssociatedLibrary.\");\n                throw new Error(\"No element passed and no default found for getAssociatedLibrary.\");\n            }\n        }\n    }\n    //get Zotero.Library object if already bound to element\n    var library = jel.data('zoterolibrary');\n    var libString;\n    if(!library){\n        //try getting it from a libraryString included on DOM element\n        libString = J(el).data('library');\n        if(libString){\n            library = Zotero.ui.libStringLibrary(libString);\n        }\n        jel.data('zoterolibrary', library);\n    }\n    //if we still don't have a library, look for the default library for the page\n    if(!library){\n        jel = J(\".zotero-library\").first();\n        libString = jel.data('library');\n        if(libString){\n            library = Zotero.ui.libStringLibrary(libString);\n        }\n    }\n    if(!library){Z.error(\"No associated library found\");}\n    return library;\n};\n\nZotero.ui.libStringLibrary = function(libString){\n    var library;\n    if(Zotero.libraries.hasOwnProperty(libString)){\n        library = Zotero.libraries[libString];\n    }\n    else{\n        var libConfig = Zotero.utils.parseLibString(libString);\n        library = new Zotero.Library(libConfig.libraryType, libConfig.libraryID);\n        Zotero.libraries[libString] = library;\n    }\n    return library;\n};\n\nZotero.ui.getEventLibrary = function(e){\n    var tel = J(e.triggeringElement);\n    if(e.library){\n        return e.library;\n    }\n    if(e.data && e.data.library){\n        return e.data.library;\n    }\n    Z.debug(e);\n    var libString = tel.data('library');\n    if(!libString){\n        throw \"no library on event or libString on triggeringElement\";\n    }\n    if(Zotero.libraries.hasOwnProperty(libString)){\n        return Zotero.libraries[libString];\n    }\n    \n    var libConfig = Zotero.ui.parseLibString(libString);\n    var library = new Zotero.Library(libConfig.libraryType, libConfig.libraryID, '');\n    Zotero.libraries[Zotero.utils.libraryString(libConfig.libraryType, libConfig.libraryID)] = library;\n};\n/*\nZotero.ui.parseLibString = function(s){\n    var libraryType, libraryID;\n    if(s[0] == \"u\"){\n        libraryType = \"user\";\n    }\n    else {\n        libraryType = \"group\";\n    }\n    libraryID = s.slice(1);\n    return {libraryType:libraryType, libraryID:libraryID};\n};\n*/\n/**\n * Get the highest priority variable named key set from various configs\n * @param  {[type]} key [description]\n * @return {[type]}     [description]\n */\nZotero.ui.getPrioritizedVariable = function(key, defaultVal){\n    var val = Zotero.state.getUrlVar(key) || Zotero.preferences.getPref(key) || Zotero.config.defaultApiArgs[key] || defaultVal;\n    return val;\n};\n\n/**\n * Scroll to the top of the window\n * @return {undefined}\n */\nZotero.ui.scrollToTop = function(){\n    window.scrollBy(0, -5000);\n};\n\n//get the nearest ancestor that is eventfulwidget\nZotero.ui.parentWidgetEl = function(el){\n    var matching;\n    if(el.hasOwnProperty('data') && el.data.hasOwnProperty('widgetEl')){\n        Z.debug(\"event had widgetEl associated with it\");\n        return J(el.data.widgetEl);\n    } else if(el.hasOwnProperty('currentTarget')){\n        Z.debug(\"event currentTarget set\");\n        matching = J(el.currentTarget).closest(\".eventfulwidget\");\n        if(matching.length > 0){\n            return matching.first();\n        } else {\n            Z.debug(\"no matching closest to currentTarget\");\n            Z.debug(el.currentTarget);\n            Z.debug(el.currentTarget);\n        }\n    }\n    \n    matching = J(el).closest(\".eventfulwidget\");\n    if(matching.length > 0){\n        Z.debug(\"returning first closest widget\");\n        return matching.first();\n    }\n    return null;\n};\n","\n/**\n * get a list of the itemKeys for items checked off in a form to know what items to operate on\n * if a single item is being displayed the form selections will be overridden\n * otherwise this function returns the data-itemkey values associated with input.itemKey-checkbox:checked\n * @param  {DOM element} container Container DOM Element to pull itemkey values from\n * @return {array}\n */\nZotero.ui.getSelectedItemKeys = function(container){\n    Z.debug(\"Zotero.ui.getSelectedItemKeys\", 3);\n    if(!container){\n        container = J(\"body\");\n    }\n    else {\n        container = J(container);\n    }\n    var itemKeys = [];\n    var curItemKey = Zotero.state.getUrlVar('itemKey');\n    if(curItemKey && (Zotero.config.preferUrlItem !== false) ){\n        itemKeys.push(curItemKey);\n    }\n    else{\n        container.find(\"input.itemKey-checkbox:checked\").each(function(index, val){\n            itemKeys.push(J(val).data('itemkey'));\n        });\n    }\n    return itemKeys;\n};\n\nZotero.ui.getAllFormItemKeys = function(container){\n    Z.debug(\"Zotero.ui.getAllFormItemKeys\", 3);\n    if(!container){\n        container = J(\"body\");\n    }\n    else {\n        container = J(container);\n    }\n    var itemKeys = [];\n    var curItemKey = Zotero.state.getUrlVar('itemKey');\n    container.find(\"input.itemKey-checkbox\").each(function(index, val){\n        itemKeys.push(J(val).data('itemkey'));\n    });\n    return itemKeys;\n};\n\nZotero.ui.getRte = function(el){\n    Z.debug(\"getRte\", 3);\n    Z.debug(\"getRte\", 3);\n    Z.debug(el);\n    switch(Zotero.config.rte){\n        case \"ckeditor\":\n            //var elid = \"#\" + el;\n            //var edname = J(elid).attr('id');\n            //Z.debug(\"EdName: \" + edname, 3);\n            return CKEDITOR.instances[el].getData();\n        default:\n            return tinyMCE.get(el).getContent();\n    }\n};\n\nZotero.ui.updateRte = function(el){\n    Z.debug(\"updateRte\", 3);\n    switch(Zotero.config.rte){\n        case \"ckeditor\":\n            var elid = \"#\" + el;\n            var data = CKEDITOR.instances[el].getData();\n            J(elid).val(data);\n            break;\n        default:\n            tinyMCE.updateContent(el);\n    }\n};\n\nZotero.ui.deactivateRte = function(el){\n    Z.debug(\"deactivateRte\", 3);\n    switch(Zotero.config.rte){\n        case \"ckeditor\":\n            //var elid = \"#\" + el;\n            if(CKEDITOR.instances[el]){\n                Z.debug(\"deactivating \" + el, 3);\n                var data = CKEDITOR.instances[el].destroy();\n            }\n            break;\n        default:\n            tinymce.execCommand('mceRemoveControl', true, el);\n    }\n};\n\nZotero.ui.cleanUpRte = function(container){\n    Z.debug(\"cleanUpRte\", 3);\n    J(container).find(\"textarea.rte\").each(function(ind, el){\n        Zotero.ui.deactivateRte(J(el).attr('name') );\n    });\n};\n","\n/**\n * Display a JS notification message to the user\n * @param  {string} message Notification message\n * @param  {string} type    confirm, notice, or error\n * @param  {int} timeout seconds to display notification\n * @return {undefined}\n */\nZotero.ui.jsNotificationMessage = function(message, type, timeout){\n    Z.debug(\"notificationMessage: \" + type + \" : \" + message, 3);\n    if(Zotero.config.suppressErrorNotifications) return;\n    \n    if(!timeout && (timeout !== false)){\n        timeout = 5;\n    }\n    var alertType = \"alert-info\";\n    if(type){\n        switch(type){\n            case 'error':\n            case 'danger':\n                alertType = 'alert-danger';\n                timeout = false;\n                break;\n            case 'success':\n            case 'confirm':\n                alertType = 'alert-success';\n                break;\n            case 'info':\n                alertType = 'alert-info';\n                break;\n            case 'warning':\n            case 'warn':\n                alertType = 'alert-warning';\n                break;\n        }\n    }\n    \n    if(timeout){\n        J(\"#js-message\").append(\"<div class='alert alert-dismissable \" + alertType + \"'><button type='button' class='close' data-dismiss='alert'><span aria-hidden='true'>&times;</span><span class='sr-only'>Close</span></button>\" + message + \"</div>\").children(\"div\").delay(parseInt(timeout, 10) * 1000).slideUp().delay(300).queue(function(){\n            J(this).remove();\n        });\n    } else {\n        J(\"#js-message\").append(\"<div class='alert alert-dismissable \" + alertType + \"'><button type='button' class='close' data-dismiss='alert'><span aria-hidden='true'>&times;</span><span class='sr-only'>Close</span></button>\" + message + \"</div>\");\n    }\n};\n\n/**\n * Display an error message on ajax failure\n * @param  {jQuery XHR Promise} jqxhr jqxhr returned from jquery.ajax\n * @return {undefined}\n */\nZotero.ui.ajaxErrorMessage = function(jqxhr){\n    Z.debug(\"Zotero.ui.ajaxErrorMessage\", 3);\n    if(typeof jqxhr == 'undefined'){\n        Z.debug('ajaxErrorMessage called with undefined argument');\n        return '';\n    }\n    Z.debug(jqxhr, 3);\n    switch(jqxhr.status){\n        case 403:\n            //don't have permission to view\n            if(Zotero.config.loggedIn || Zotero.config.ignoreLoggedInStatus){\n                return \"You do not have permission to view this library.\";\n            }\n            else{\n                Zotero.config.suppressErrorNotifications = true;\n                window.location = \"/user/login\";\n                return \"\";\n            }\n            break;\n        case 404:\n            Zotero.ui.jsNotificationMessage(\"A requested resource could not be found.\", 'error');\n            break;\n        case 400:\n            Zotero.ui.jsNotificationMessage(\"Bad Request\", 'error');\n            break;\n        case 405:\n            Zotero.ui.jsNotificationMessage(\"Method not allowed\", 'error');\n            break;\n        case 412:\n            Zotero.ui.jsNotificationMessage(\"Precondition failed\", 'error');\n            break;\n        case 500:\n            Zotero.ui.jsNotificationMessage(\"Something went wrong but we're not sure what.\", 'error');\n            break;\n        case 501:\n            Zotero.ui.jsNotificationMessage(\"We can't do that yet.\", 'error');\n            break;\n        case 503:\n            Zotero.ui.jsNotificationMessage(\"We've gone away for a little while. Please try again in a few minutes.\", 'error');\n            break;\n        default:\n            Z.debug(\"jqxhr status did not match any expected case\");\n            Z.debug(jqxhr.status);\n            //Zotero.ui.jsNotificationMessage(\"An error occurred performing the requested action.\", 'error');\n    }\n    return '';\n};\n\n\n/**\n * Empty conatiner and show preloader spinner\n * @param  {Dom Element} el   container\n * @param  {string} type type of preloader to show\n * @return {undefined}\n */\nZotero.ui.showSpinner = function(el, type){\n    var spinnerUrl = Zotero.config.baseWebsiteUrl + '/static/images/theme/broken-circle-spinner.gif';\n    if(!type){\n        J(el).html(\"<img class='spinner' src='\" + spinnerUrl + \"'/>\");\n    }\n    else if(type == 'horizontal'){\n        J(el).html(\"<img class='spinner' src='\" + spinnerUrl + \"'/>\");\n    }\n};\n\n/**\n * Append a preloader spinner to an element\n * @param  {Dom Element} el container\n * @return {undefined}\n */\nZotero.ui.appendSpinner = function(el){\n    var spinnerUrl = Zotero.config.baseWebsiteUrl + 'static/images/theme/broken-circle-spinner.gif';\n    J(el).append(\"<img class='spinner' src='\" + spinnerUrl + \"'/>\");\n};\n\n//Take a table that is present in the DOM, save the widths of the headers and the offset of the body,\n//set the widths of the columns explicitly, set the header to position:fixed, set the offset of the body explictly\n//this has the effect of fixed table headers with scrollable data\nZotero.ui.fixTableHeaders = function(tableEl) {\n    var tel = J(tableEl);\n    var colWidths = [];\n    tel.find(\"thead th\").each(function(ind, th){\n        var width = J(th).width();\n        colWidths.push(width);\n        J(th).width(width);\n    });\n\n    tel.find(\"tbody>tr:first>td\").each(function(ind, td){\n        J(td).width(colWidths[ind]);\n    });\n\n    var bodyOffset = tel.find(\"thead\").height();\n\n    tel.find(\"thead\").css('position', 'fixed').css('margin-top', -bodyOffset).css('background-color', 'white').css('z-index', 10);\n    tel.find(\"tbody\").css('margin-top', bodyOffset);\n    tel.css(\"margin-top\", bodyOffset);\n\n};\n\n","/**\n * Trigger a ZoteroItemUpdated event on the document for zotero translators\n * @return {undefined}\n */\nZotero.ui.zoteroItemUpdated = function(){\n    try{\n        //trigger event for Zotero translator detection\n        var ev = document.createEvent('HTMLEvents');\n        ev.initEvent('ZoteroItemUpdated', true, true);\n        document.dispatchEvent(ev);\n    }\n    catch(e){\n        Zotero.debug(\"Error triggering ZoteroItemUpdated event\");\n    }\n};\n\n","//Bootstrap version\nZotero.ui.dialog = function(el, options){\n    Z.debug(\"Zotero.ui.dialog\", 3);\n    options.show = true;\n    options.backdrop = false;\n    J(el).modal(options);\n    J(el).modal('show');\n    Z.debug(\"exiting Zotero.ui.dialog\", 3);\n};\n\nZotero.ui.closeDialog = function(el){\n    J(el).modal('hide');\n};\n\n","// @preserve jQuery.floatThead 1.3.2 - http://mkoryak.github.io/floatThead/ - Copyright (c) 2012 - 2015 Misha Koryak\n// @license MIT\n\n/* @author Misha Koryak\n * @projectDescription lock a table header in place while scrolling - without breaking styles or events bound to the header\n *\n * Dependencies:\n * jquery 1.9.0 + [required] OR jquery 1.7.0 + jquery UI core\n *\n * http://mkoryak.github.io/floatThead/\n *\n * Tested on FF13+, Chrome 21+, IE8, IE9, IE10, IE11\n *\n */\n(function( $ ) {\n  /**\n   * provides a default config object. You can modify this after including this script if you want to change the init defaults\n   * @type {Object}\n   */\n  $.floatThead = $.floatThead || {};\n  $.floatThead.defaults = {\n    headerCellSelector: 'tr:visible:first>*:visible', //thead cells are this.\n    zIndex: 1001, //zindex of the floating thead (actually a container div)\n    position: 'auto', // 'fixed', 'absolute', 'auto'. auto picks the best for your table scrolling type.\n    top: 0, //String or function($table) - offset from top of window where the header should not pass above\n    bottom: 0, //String or function($table) - offset from the bottom of the table where the header should stop scrolling\n    scrollContainer: function($table){\n      return $([]); //if the table has horizontal scroll bars then this is the container that has overflow:auto and causes those scroll bars\n    },\n    getSizingRow: function($table, $cols, $fthCells){ // this is only called when using IE,\n      // override it if the first row of the table is going to contain colgroups (any cell spans greater than one col)\n      // it should return a jquery object containing a wrapped set of table cells comprising a row that contains no col spans and is visible\n      return $table.find('tbody tr:visible:first>*:visible');\n    },\n    floatTableClass: 'floatThead-table',\n    floatWrapperClass: 'floatThead-wrapper',\n    floatContainerClass: 'floatThead-container',\n    copyTableClass: true, //copy 'class' attribute from table into the floated table so that the styles match.\n    enableAria: false, //will copy header text from the floated header back into the table for screen readers. Might cause the css styling to be off. beware!\n    autoReflow: false, //(undocumented) - use MutationObserver api to reflow automatically when internal table DOM changes\n    debug: false //print possible issues (that don't prevent script loading) to console, if console exists.\n  };\n\n  var util = window._;\n\n  var canObserveMutations = typeof MutationObserver !== 'undefined';\n\n\n  //browser stuff\n  var ieVersion = function(){for(var a=3,b=document.createElement(\"b\"),c=b.all||[];a = 1+a,b.innerHTML=\"<!--[if gt IE \"+ a +\"]><i><![endif]-->\",c[0];);return 4<a?a:document.documentMode}();\n  var isFF = /Gecko\\//.test(navigator.userAgent);\n  var isWebkit = /WebKit\\//.test(navigator.userAgent);\n\n  //safari 7 (and perhaps others) reports table width to be parent container's width if max-width is set on table. see: https://github.com/mkoryak/floatThead/issues/108\n  var isTableWidthBug = function(){\n    if(isWebkit) {\n      var $test = $('<div style=\"width:0px\"><table style=\"max-width:100%\"><tr><th><div style=\"min-width:100px;\">X</div></th></tr></table></div>');\n      $(\"body\").append($test);\n      var ret = ($test.find(\"table\").width() == 0);\n      $test.remove();\n      return ret;\n    }\n    return false;\n  };\n\n  var createElements = !isFF && !ieVersion; //FF can read width from <col> elements, but webkit cannot\n\n  var $window = $(window);\n\n  /**\n   * @param debounceMs\n   * @param cb\n   */\n  function windowResize(eventName, cb){\n    if(ieVersion == 8){ //ie8 is crap: https://github.com/mkoryak/floatThead/issues/65\n      var winWidth = $window.width();\n      var debouncedCb = util.debounce(function(){\n        var winWidthNew = $window.width();\n        if(winWidth != winWidthNew){\n          winWidth = winWidthNew;\n          cb();\n        }\n      }, 1);\n      $window.on(eventName, debouncedCb);\n    } else {\n      $window.on(eventName, util.debounce(cb, 1));\n    }\n  }\n\n\n  function debug(str){\n    window && window.console && window.console.error && window.console.error(\"jQuery.floatThead: \" + str);\n  }\n\n  //returns fractional pixel widths\n  function getOffsetWidth(el) {\n    var rect = el.getBoundingClientRect();\n    return rect.width || rect.right - rect.left;\n  }\n\n  /**\n   * try to calculate the scrollbar width for your browser/os\n   * @return {Number}\n   */\n  function scrollbarWidth() {\n    var $div = $( //borrowed from anti-scroll\n        '<div style=\"width:50px;height:50px;overflow-y:scroll;'\n        + 'position:absolute;top:-200px;left:-200px;\"><div style=\"height:100px;width:100%\">'\n        + '</div>'\n    );\n    $('body').append($div);\n    var w1 = $div.innerWidth();\n    var w2 = $('div', $div).innerWidth();\n    $div.remove();\n    return w1 - w2;\n  }\n  /**\n   * Check if a given table has been datatableized (http://datatables.net)\n   * @param $table\n   * @return {Boolean}\n   */\n  function isDatatable($table){\n    if($table.dataTableSettings){\n      for(var i = 0; i < $table.dataTableSettings.length; i++){\n        var table = $table.dataTableSettings[i].nTable;\n        if($table[0] == table){\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  function tableWidth($table, $fthCells, isOuter){\n    // see: https://github.com/mkoryak/floatThead/issues/108\n    var fn = isOuter ? \"outerWidth\": \"width\";\n    if(isTableWidthBug && $table.css(\"max-width\")){\n      var w = 0;\n      if(isOuter) {\n        w += parseInt($table.css(\"borderLeft\"), 10);\n        w += parseInt($table.css(\"borderRight\"), 10);\n      }\n      for(var i=0; i < $fthCells.length; i++){\n        w += $fthCells.get(i).offsetWidth;\n      }\n      return w;\n    } else {\n      return $table[fn]();\n    }\n  }\n  $.fn.floatThead = function(map){\n    map = map || {};\n    if(!util){ //may have been included after the script? lets try to grab it again.\n      util = window._ || $.floatThead._;\n      if(!util){\n        throw new Error(\"jquery.floatThead-slim.js requires underscore. You should use the non-lite version since you do not have underscore.\");\n      }\n    }\n\n    if(ieVersion < 8){\n      return this; //no more crappy browser support.\n    }\n\n    var mObs = null; //mutation observer lives in here if we can use it / make it\n\n    if(util.isFunction(isTableWidthBug)) {\n      isTableWidthBug = isTableWidthBug();\n    }\n\n    if(util.isString(map)){\n      var command = map;\n      var ret = this;\n      this.filter('table').each(function(){\n        var $this = $(this);\n        var opts = $this.data('floatThead-lazy');\n        if(opts){\n          $this.floatThead(opts);\n        }\n        var obj = $this.data('floatThead-attached');\n        if(obj && util.isFunction(obj[command])){\n          var r = obj[command]();\n          if(typeof r !== 'undefined'){\n            ret = r;\n          }\n        }\n      });\n      return ret;\n    }\n    var opts = $.extend({}, $.floatThead.defaults || {}, map);\n\n    $.each(map, function(key, val){\n      if((!(key in $.floatThead.defaults)) && opts.debug){\n        debug(\"Used [\"+key+\"] key to init plugin, but that param is not an option for the plugin. Valid options are: \"+ (util.keys($.floatThead.defaults)).join(', '));\n      }\n    });\n    if(opts.debug){\n      var v = $.fn.jquery.split(\".\");\n      if(parseInt(v[0], 10) == 1 && parseInt(v[1], 10) <= 7){\n        debug(\"jQuery version \"+$.fn.jquery+\" detected! This plugin supports 1.8 or better, or 1.7.x with jQuery UI 1.8.24 -> http://jqueryui.com/resources/download/jquery-ui-1.8.24.zip\")\n      }\n    }\n\n    this.filter(':not(.'+opts.floatTableClass+')').each(function(){\n      var floatTheadId = util.uniqueId();\n      var $table = $(this);\n      if($table.data('floatThead-attached')){\n        return true; //continue the each loop\n      }\n      if(!$table.is('table')){\n        throw new Error('jQuery.floatThead must be run on a table element. ex: $(\"table\").floatThead();');\n      }\n      canObserveMutations = opts.autoReflow && canObserveMutations; //option defaults to false!\n      var $header = $table.children('thead:first');\n      var $tbody = $table.children('tbody:first');\n      if($header.length == 0 || $tbody.length == 0){\n        $table.data('floatThead-lazy', opts);\n        $table.unbind(\"reflow\").one('reflow', function(){\n          $table.floatThead(opts);\n        });\n        return;\n      }\n      if($table.data('floatThead-lazy')){\n        $table.unbind(\"reflow\");\n      }\n      $table.data('floatThead-lazy', false);\n\n      var headerFloated = true;\n      var scrollingTop, scrollingBottom;\n      var scrollbarOffset = {vertical: 0, horizontal: 0};\n      var scWidth = scrollbarWidth();\n      var lastColumnCount = 0; //used by columnNum()\n      var $scrollContainer = opts.scrollContainer($table) || $([]); //guard against returned nulls\n      var locked = $scrollContainer.length > 0;\n\n      var useAbsolutePositioning = null;\n      if(typeof opts.useAbsolutePositioning !== 'undefined'){\n        opts.position = 'auto';\n        if(opts.useAbsolutePositioning){\n          opts.position = opts.useAbsolutePositioning ? 'absolute' : 'fixed';\n        }\n        debug(\"option 'useAbsolutePositioning' has been removed in v1.3.0, use `position:'\"+opts.position+\"'` instead. See docs for more info: http://mkoryak.github.io/floatThead/#options\")\n      }\n      if(typeof opts.scrollingTop !== 'undefined'){\n        opts.top = opts.scrollingTop;\n        debug(\"option 'scrollingTop' has been renamed to 'top' in v1.3.0. See docs for more info: http://mkoryak.github.io/floatThead/#options\");\n      }\n      if(typeof opts.scrollingBottom !== 'undefined'){\n          opts.bottom = opts.scrollingBottom;\n          debug(\"option 'scrollingBottom' has been renamed to 'bottom' in v1.3.0. See docs for more info: http://mkoryak.github.io/floatThead/#options\");\n      }\n\n\n      if (opts.position == 'auto') {\n        useAbsolutePositioning = null;\n      } else if (opts.position == 'fixed') {\n        useAbsolutePositioning = false;\n      } else if (opts.position == 'absolute'){\n        useAbsolutePositioning = true;\n      } else if (opts.debug) {\n        debug('Invalid value given to \"position\" option, valid is \"fixed\", \"absolute\" and \"auto\". You passed: ', opts.position);\n      }\n\n      if(useAbsolutePositioning == null){ //defaults: locked=true, !locked=false\n        useAbsolutePositioning = locked;\n      }\n      var $caption = $table.find(\"caption\");\n      var haveCaption = $caption.length == 1;\n      if(haveCaption){\n        var captionAlignTop = ($caption.css(\"caption-side\") || $caption.attr(\"align\") || \"top\") === \"top\";\n      }\n\n      var $fthGrp = $('<fthfoot style=\"display:table-footer-group;border-spacing:0;height:0;border-collapse:collapse;visibility:hidden\"/>');\n\n      var wrappedContainer = false; //used with absolute positioning enabled. did we need to wrap the scrollContainer/table with a relative div?\n      var $wrapper = $([]); //used when absolute positioning enabled - wraps the table and the float container\n      var absoluteToFixedOnScroll = ieVersion <= 9 && !locked && useAbsolutePositioning; //on IE using absolute positioning doesn't look good with window scrolling, so we change position to fixed on scroll, and then change it back to absolute when done.\n      var $floatTable = $(\"<table/>\");\n      var $floatColGroup = $(\"<colgroup/>\");\n      var $tableColGroup = $table.children('colgroup:first');\n      var existingColGroup = true;\n      if($tableColGroup.length == 0){\n        $tableColGroup = $(\"<colgroup/>\");\n        existingColGroup = false;\n      }\n      var $fthRow = $('<fthtr style=\"display:table-row;border-spacing:0;height:0;border-collapse:collapse\"/>'); //created unstyled elements (used for sizing the table because chrome can't read <col> width)\n      var $floatContainer = $('<div style=\"overflow: hidden;\" aria-hidden=\"true\"></div>');\n      var floatTableHidden = false; //this happens when the table is hidden and we do magic when making it visible\n      var $newHeader = $(\"<thead/>\");\n      var $sizerRow = $('<tr class=\"size-row\"/>');\n      var $sizerCells = $([]);\n      var $tableCells = $([]); //used for sizing - either $sizerCells or $tableColGroup cols. $tableColGroup cols are only created in chrome for borderCollapse:collapse because of a chrome bug.\n      var $headerCells = $([]);\n      var $fthCells = $([]); //created elements\n\n      $newHeader.append($sizerRow);\n      $table.prepend($tableColGroup);\n      if(createElements){\n        $fthGrp.append($fthRow);\n        $table.append($fthGrp);\n      }\n\n      $floatTable.append($floatColGroup);\n      $floatContainer.append($floatTable);\n      if(opts.copyTableClass){\n        $floatTable.attr('class', $table.attr('class'));\n      }\n      $floatTable.attr({ //copy over some deprecated table attributes that people still like to use. Good thing people don't use colgroups...\n        'cellpadding': $table.attr('cellpadding'),\n        'cellspacing': $table.attr('cellspacing'),\n        'border': $table.attr('border')\n      });\n      var tableDisplayCss = $table.css('display');\n      $floatTable.css({\n        'borderCollapse': $table.css('borderCollapse'),\n        'border': $table.css('border'),\n        'display': tableDisplayCss\n      });\n      if(tableDisplayCss == 'none'){\n        floatTableHidden = true;\n      }\n\n      $floatTable.addClass(opts.floatTableClass).css({'margin': 0, 'border-bottom-width': 0}); //must have no margins or you won't be able to click on things under floating table\n\n      if(useAbsolutePositioning){\n        var makeRelative = function($container, alwaysWrap){\n          var positionCss = $container.css('position');\n          var relativeToScrollContainer = (positionCss == \"relative\" || positionCss == \"absolute\");\n          var $containerWrap = $container;\n          if(!relativeToScrollContainer || alwaysWrap){\n            var css = {\"paddingLeft\": $container.css('paddingLeft'), \"paddingRight\": $container.css('paddingRight')};\n            $floatContainer.css(css);\n            $containerWrap = $container.data('floatThead-containerWrap') || $container.wrap(\"<div class='\"+opts.floatWrapperClass+\"' style='position: relative; clear:both;'></div>\").parent();\n            $container.data('floatThead-containerWrap', $containerWrap); //multiple tables inside one scrolling container - #242\n            wrappedContainer = true;\n          }\n          return $containerWrap;\n        };\n        if(locked){\n          $wrapper = makeRelative($scrollContainer, true);\n          $wrapper.prepend($floatContainer);\n        } else {\n          $wrapper = makeRelative($table);\n          $table.before($floatContainer);\n        }\n      } else {\n        $table.before($floatContainer);\n      }\n\n\n      $floatContainer.css({\n        position: useAbsolutePositioning ? 'absolute' : 'fixed',\n        marginTop: 0,\n        top:  useAbsolutePositioning ? 0 : 'auto',\n        zIndex: opts.zIndex\n      });\n      $floatContainer.addClass(opts.floatContainerClass);\n      updateScrollingOffsets();\n\n      var layoutFixed = {'table-layout': 'fixed'};\n      var layoutAuto = {'table-layout': $table.css('tableLayout') || 'auto'};\n      var originalTableWidth = $table[0].style.width || \"\"; //setting this to auto is bad: #70\n      var originalTableMinWidth = $table.css('minWidth') || \"\";\n\n      function eventName(name){\n        return name+'.fth-'+floatTheadId+'.floatTHead'\n      }\n\n      function setHeaderHeight(){\n        var headerHeight = 0;\n        $header.children(\"tr:visible\").each(function(){\n          headerHeight += $(this).outerHeight(true);\n        });\n        if($table.css('border-collapse') == 'collapse') {\n          var tableBorderTopHeight = parseInt($table.css('border-top-width'), 10);\n          var cellBorderTopHeight = parseInt($table.find(\"thead tr:first\").find(\">*:first\").css('border-top-width'), 10);\n          if(tableBorderTopHeight > cellBorderTopHeight) {\n            headerHeight -= (tableBorderTopHeight / 2); //id love to see some docs where this magic recipe is found..\n          }\n        }\n        $sizerRow.outerHeight(headerHeight);\n        $sizerCells.outerHeight(headerHeight);\n      }\n\n\n      function setFloatWidth(){\n        var tw = tableWidth($table, $fthCells, true);\n        var width = $scrollContainer.width() || tw;\n        var floatContainerWidth = $scrollContainer.css(\"overflow-y\") != 'hidden' ? width - scrollbarOffset.vertical : width;\n        $floatContainer.width(floatContainerWidth);\n        if(locked){\n          var percent = 100 * tw / (floatContainerWidth);\n          $floatTable.css('width', percent+'%');\n        } else {\n          $floatTable.outerWidth(tw);\n        }\n      }\n\n      function updateScrollingOffsets(){\n        scrollingTop = (util.isFunction(opts.top) ? opts.top($table) : opts.top) || 0;\n        scrollingBottom = (util.isFunction(opts.bottom) ? opts.bottom($table) : opts.bottom) || 0;\n      }\n\n      /**\n       * get the number of columns and also rebuild resizer rows if the count is different than the last count\n       */\n      function columnNum(){\n        var count;\n        var $headerColumns = $header.find(opts.headerCellSelector);\n        if(existingColGroup){\n          count = $tableColGroup.find('col').length;\n        } else {\n          count = 0;\n          $headerColumns.each(function () {\n              count += parseInt(($(this).attr('colspan') || 1), 10);\n          });\n        }\n        if(count != lastColumnCount){\n          lastColumnCount = count;\n          var cells = [], cols = [], psuedo = [], content;\n          for(var x = 0; x < count; x++){\n            if (opts.enableAria && (content = $headerColumns.eq(x).text()) ) {\n              cells.push('<th scope=\"col\" class=\"floatThead-col\">' + content + '</th>');\n            } else {\n              cells.push('<th class=\"floatThead-col\"/>');\n            }\n            cols.push('<col/>');\n            psuedo.push(\"<fthtd style='display:table-cell;height:0;width:auto;'/>\");\n          }\n\n          cols = cols.join('');\n          cells = cells.join('');\n\n          if(createElements){\n            psuedo = psuedo.join('');\n            $fthRow.html(psuedo);\n            $fthCells = $fthRow.find('fthtd');\n          }\n\n          $sizerRow.html(cells);\n          $sizerCells = $sizerRow.find(\"th\");\n          if(!existingColGroup){\n            $tableColGroup.html(cols);\n          }\n          $tableCells = $tableColGroup.find('col');\n          $floatColGroup.html(cols);\n          $headerCells = $floatColGroup.find(\"col\");\n\n        }\n        return count;\n      }\n\n      function refloat(){ //make the thing float\n        if(!headerFloated){\n          headerFloated = true;\n          if(useAbsolutePositioning){ //#53, #56\n            var tw = tableWidth($table, $fthCells, true);\n            var wrapperWidth = $wrapper.width();\n            if(tw > wrapperWidth){\n              $table.css('minWidth', tw);\n            }\n          }\n          $table.css(layoutFixed);\n          $floatTable.css(layoutFixed);\n          $floatTable.append($header); //append because colgroup must go first in chrome\n          $tbody.before($newHeader);\n          setHeaderHeight();\n        }\n      }\n      function unfloat(){ //put the header back into the table\n        if(headerFloated){\n          headerFloated = false;\n          if(useAbsolutePositioning){ //#53, #56\n            $table.width(originalTableWidth);\n          }\n          $newHeader.detach();\n          $table.prepend($header);\n          $table.css(layoutAuto);\n          $floatTable.css(layoutAuto);\n          $table.css('minWidth', originalTableMinWidth); //this looks weird, but it's not a bug. Think about it!!\n          $table.css('minWidth', tableWidth($table, $fthCells)); //#121\n        }\n      }\n      var isHeaderFloatingLogical = false; //for the purpose of this event, the header is/isnt floating, even though the element\n                                           //might be in some other state. this is what the header looks like to the user\n      function triggerFloatEvent(isFloating){\n        if(isHeaderFloatingLogical != isFloating){\n          isHeaderFloatingLogical = isFloating;\n          $table.triggerHandler(\"floatThead\", [isFloating, $floatContainer])\n        }\n      }\n      function changePositioning(isAbsolute){\n        if(useAbsolutePositioning != isAbsolute){\n          useAbsolutePositioning = isAbsolute;\n          $floatContainer.css({\n            position: useAbsolutePositioning ? 'absolute' : 'fixed'\n          });\n        }\n      }\n      function getSizingRow($table, $cols, $fthCells, ieVersion){\n        if(createElements){\n          return $fthCells;\n        } else if(ieVersion) {\n          return opts.getSizingRow($table, $cols, $fthCells);\n        } else {\n          return $cols;\n        }\n      }\n\n      /**\n       * returns a function that updates the floating header's cell widths.\n       * @return {Function}\n       */\n      function reflow(){\n        var i;\n        var numCols = columnNum(); //if the tables columns changed dynamically since last time (datatables), rebuild the sizer rows and get a new count\n\n        return function(){\n          $tableCells = $tableColGroup.find('col');\n          var $rowCells = getSizingRow($table, $tableCells, $fthCells, ieVersion);\n\n          if($rowCells.length == numCols && numCols > 0){\n            if(!existingColGroup){\n              for(i=0; i < numCols; i++){\n                $tableCells.eq(i).css('width', '');\n              }\n            }\n            unfloat();\n            var widths = [];\n            for(i=0; i < numCols; i++){\n              widths[i] = getOffsetWidth($rowCells.get(i));\n            }\n            for(i=0; i < numCols; i++){\n              $headerCells.eq(i).width(widths[i]);\n              $tableCells.eq(i).width(widths[i]);\n            }\n            refloat();\n          } else {\n            $floatTable.append($header);\n            $table.css(layoutAuto);\n            $floatTable.css(layoutAuto);\n            setHeaderHeight();\n          }\n          $table.triggerHandler(\"reflowed\", [$floatContainer]);\n        };\n      }\n\n      function floatContainerBorderWidth(side){\n        var border = $scrollContainer.css(\"border-\"+side+\"-width\");\n        var w = 0;\n        if (border && ~border.indexOf('px')) {\n          w = parseInt(border, 10);\n        }\n        return w;\n      }\n      /**\n       * first performs initial calculations that we expect to not change when the table, window, or scrolling container are scrolled.\n       * returns a function that calculates the floating container's top and left coords. takes into account if we are using page scrolling or inner scrolling\n       * @return {Function}\n       */\n      function calculateFloatContainerPosFn(){\n        var scrollingContainerTop = $scrollContainer.scrollTop();\n\n        //this floatEnd calc was moved out of the returned function because we assume the table height doesn't change (otherwise we must reinit by calling calculateFloatContainerPosFn)\n        var floatEnd;\n        var tableContainerGap = 0;\n        var captionHeight = haveCaption ? $caption.outerHeight(true) : 0;\n        var captionScrollOffset = captionAlignTop ? captionHeight : -captionHeight;\n\n        var floatContainerHeight = $floatContainer.height();\n        var tableOffset = $table.offset();\n        var tableLeftGap = 0; //can be caused by border on container (only in locked mode)\n        var tableTopGap = 0;\n        if(locked){\n          var containerOffset = $scrollContainer.offset();\n          tableContainerGap = tableOffset.top - containerOffset.top + scrollingContainerTop;\n          if(haveCaption && captionAlignTop){\n            tableContainerGap += captionHeight;\n          }\n          tableLeftGap = floatContainerBorderWidth('left');\n          tableTopGap = floatContainerBorderWidth('top');\n          tableContainerGap -= tableTopGap;\n        } else {\n          floatEnd = tableOffset.top - scrollingTop - floatContainerHeight + scrollingBottom + scrollbarOffset.horizontal;\n        }\n        var windowTop = $window.scrollTop();\n        var windowLeft = $window.scrollLeft();\n        var scrollContainerLeft =  $scrollContainer.scrollLeft();\n\n        return function(eventType){\n          var isTableHidden = $table[0].offsetWidth <= 0 && $table[0].offsetHeight <= 0;\n          if(!isTableHidden && floatTableHidden) {\n            floatTableHidden = false;\n            setTimeout(function(){\n              $table.triggerHandler(\"reflow\");\n            }, 1);\n            return null;\n          }\n          if(isTableHidden){ //it's hidden\n            floatTableHidden = true;\n            if(!useAbsolutePositioning){\n              return null;\n            }\n          }\n\n          if(eventType == 'windowScroll'){\n            windowTop = $window.scrollTop();\n            windowLeft = $window.scrollLeft();\n          } else if(eventType == 'containerScroll'){\n            scrollingContainerTop = $scrollContainer.scrollTop();\n            scrollContainerLeft =  $scrollContainer.scrollLeft();\n          } else if(eventType != 'init') {\n            windowTop = $window.scrollTop();\n            windowLeft = $window.scrollLeft();\n            scrollingContainerTop = $scrollContainer.scrollTop();\n            scrollContainerLeft =  $scrollContainer.scrollLeft();\n          }\n          if(isWebkit && (windowTop < 0 || windowLeft < 0)){ //chrome overscroll effect at the top of the page - breaks fixed positioned floated headers\n            return;\n          }\n\n          if(absoluteToFixedOnScroll){\n            if(eventType == 'windowScrollDone'){\n              changePositioning(true); //change to absolute\n            } else {\n              changePositioning(false); //change to fixed\n            }\n          } else if(eventType == 'windowScrollDone'){\n            return null; //event is fired when they stop scrolling. ignore it if not 'absoluteToFixedOnScroll'\n          }\n\n          tableOffset = $table.offset();\n          if(haveCaption && captionAlignTop){\n            tableOffset.top += captionHeight;\n          }\n          var top, left;\n          var tableHeight = $table.outerHeight();\n\n          if(locked && useAbsolutePositioning){ //inner scrolling, absolute positioning\n            if (tableContainerGap >= scrollingContainerTop) {\n              var gap = tableContainerGap - scrollingContainerTop + tableTopGap;\n              top = gap > 0 ? gap : 0;\n              triggerFloatEvent(false);\n            } else {\n              top = wrappedContainer ? tableTopGap : scrollingContainerTop;\n              //headers stop at the top of the viewport\n              triggerFloatEvent(true);\n            }\n            left = tableLeftGap;\n          } else if(!locked && useAbsolutePositioning) { //window scrolling, absolute positioning\n            if(windowTop > floatEnd + tableHeight + captionScrollOffset){\n              top = tableHeight - floatContainerHeight + captionScrollOffset; //scrolled past table\n            } else if (tableOffset.top >= windowTop + scrollingTop) {\n              top = 0; //scrolling to table\n              unfloat();\n              triggerFloatEvent(false);\n            } else {\n              top = scrollingTop + windowTop - tableOffset.top + tableContainerGap + (captionAlignTop ? captionHeight : 0);\n              refloat(); //scrolling within table. header floated\n              triggerFloatEvent(true);\n            }\n            left =  0;\n          } else if(locked && !useAbsolutePositioning){ //inner scrolling, fixed positioning\n            if (tableContainerGap > scrollingContainerTop || scrollingContainerTop - tableContainerGap > tableHeight) {\n              top = tableOffset.top - windowTop;\n              unfloat();\n              triggerFloatEvent(false);\n            } else {\n              top = tableOffset.top + scrollingContainerTop  - windowTop - tableContainerGap;\n              refloat();\n              triggerFloatEvent(true);\n              //headers stop at the top of the viewport\n            }\n            left = tableOffset.left + scrollContainerLeft - windowLeft;\n          } else if(!locked && !useAbsolutePositioning) { //window scrolling, fixed positioning\n            if(windowTop > floatEnd + tableHeight + captionScrollOffset){\n              top = tableHeight + scrollingTop - windowTop + floatEnd + captionScrollOffset;\n              //scrolled past the bottom of the table\n            } else if (tableOffset.top > windowTop + scrollingTop) {\n              top = tableOffset.top - windowTop;\n              refloat();\n              triggerFloatEvent(false); //this is a weird case, the header never gets unfloated and i have no no way to know\n              //scrolled past the top of the table\n            } else {\n              //scrolling within the table\n              top = scrollingTop;\n              triggerFloatEvent(true);\n            }\n            left = tableOffset.left - windowLeft;\n          }\n          return {top: top, left: left};\n        };\n      }\n      /**\n       * returns a function that caches old floating container position and only updates css when the position changes\n       * @return {Function}\n       */\n      function repositionFloatContainerFn(){\n        var oldTop = null;\n        var oldLeft = null;\n        var oldScrollLeft = null;\n        return function(pos, setWidth, setHeight){\n          if(pos != null && (oldTop != pos.top || oldLeft != pos.left)){\n            $floatContainer.css({\n              top: pos.top,\n              left: pos.left\n            });\n            oldTop = pos.top;\n            oldLeft = pos.left;\n          }\n          if(setWidth){\n            setFloatWidth();\n          }\n          if(setHeight){\n            setHeaderHeight();\n          }\n          var scrollLeft = $scrollContainer.scrollLeft();\n          if(!useAbsolutePositioning || oldScrollLeft != scrollLeft){\n            $floatContainer.scrollLeft(scrollLeft);\n            oldScrollLeft = scrollLeft;\n          }\n        }\n      }\n\n      /**\n       * checks if THIS table has scrollbars, and finds their widths\n       */\n      function calculateScrollBarSize(){ //this should happen after the floating table has been positioned\n        if($scrollContainer.length){\n          if($scrollContainer.data().perfectScrollbar){\n            scrollbarOffset = {horizontal:0, vertical:0};\n          } else {\n            var sw = $scrollContainer.width(), sh = $scrollContainer.height(), th = $table.height(), tw = tableWidth($table, $fthCells);\n            var offseth = sw < tw ? scWidth : 0;\n            var offsetv = sh < th ? scWidth : 0;\n            scrollbarOffset.horizontal = sw - offsetv < tw ? scWidth : 0;\n            scrollbarOffset.vertical = sh - offseth < th ? scWidth : 0;\n          }\n        }\n      }\n      //finish up. create all calculation functions and bind them to events\n      calculateScrollBarSize();\n\n      var flow;\n\n      var ensureReflow = function(){\n        flow = reflow();\n        flow();\n      };\n\n      ensureReflow();\n\n      var calculateFloatContainerPos = calculateFloatContainerPosFn();\n      var repositionFloatContainer = repositionFloatContainerFn();\n\n      repositionFloatContainer(calculateFloatContainerPos('init'), true); //this must come after reflow because reflow changes scrollLeft back to 0 when it rips out the thead\n\n      var windowScrollDoneEvent = util.debounce(function(){\n        repositionFloatContainer(calculateFloatContainerPos('windowScrollDone'), false);\n      }, 1);\n\n      var windowScrollEvent = function(){\n        repositionFloatContainer(calculateFloatContainerPos('windowScroll'), false);\n        if(absoluteToFixedOnScroll){\n          windowScrollDoneEvent();\n        }\n      };\n      var containerScrollEvent = function(){\n        repositionFloatContainer(calculateFloatContainerPos('containerScroll'), false);\n      };\n\n\n      var windowResizeEvent = function(){\n        if($table.is(\":hidden\")){\n          return;\n        }\n        updateScrollingOffsets();\n        calculateScrollBarSize();\n        ensureReflow();\n        calculateFloatContainerPos = calculateFloatContainerPosFn();\n        repositionFloatContainer = repositionFloatContainerFn();\n        repositionFloatContainer(calculateFloatContainerPos('resize'), true, true);\n      };\n      var reflowEvent = util.debounce(function(){\n        if($table.is(\":hidden\")){\n          return;\n        }\n        calculateScrollBarSize();\n        updateScrollingOffsets();\n        ensureReflow();\n        calculateFloatContainerPos = calculateFloatContainerPosFn();\n        repositionFloatContainer(calculateFloatContainerPos('reflow'), true);\n      }, 1);\n      if(locked){ //internal scrolling\n        if(useAbsolutePositioning){\n          $scrollContainer.on(eventName('scroll'), containerScrollEvent);\n        } else {\n          $scrollContainer.on(eventName('scroll'), containerScrollEvent);\n          $window.on(eventName('scroll'), windowScrollEvent);\n        }\n      } else { //window scrolling\n        $window.on(eventName('scroll'), windowScrollEvent);\n      }\n\n      $window.on(eventName('load'), reflowEvent); //for tables with images\n\n      windowResize(eventName('resize'), windowResizeEvent);\n      $table.on('reflow', reflowEvent);\n      if(isDatatable($table)){\n        $table\n          .on('filter', reflowEvent)\n          .on('sort',   reflowEvent)\n          .on('page',   reflowEvent);\n      }\n\n      $window.on(eventName('shown.bs.tab'), reflowEvent); // people cant seem to figure out how to use this plugin with bs3 tabs... so this :P\n      $window.on(eventName('tabsactivate'), reflowEvent); // same thing for jqueryui\n\n\n      if (canObserveMutations) {\n        var mutationElement = null;\n        if(util.isFunction(opts.autoReflow)){\n          mutationElement = opts.autoReflow($table, $scrollContainer)\n        }\n        if(!mutationElement) {\n          mutationElement = $scrollContainer.length ? $scrollContainer[0] : $table[0]\n        }\n        mObs = new MutationObserver(function(e){\n          var wasTableRelated = function(nodes){\n            return nodes && nodes[0] && (nodes[0].nodeName == \"THEAD\" || nodes[0].nodeName == \"TD\"|| nodes[0].nodeName == \"TH\");\n          };\n          for(var i=0; i < e.length; i++){\n            if(!(wasTableRelated(e[i].addedNodes) || wasTableRelated(e[i].removedNodes))){\n              reflowEvent();\n              break;\n            }\n          }\n        });\n        mObs.observe(mutationElement, {\n            childList: true,\n            subtree: true\n        });\n      }\n\n      //attach some useful functions to the table.\n      $table.data('floatThead-attached', {\n        destroy: function(){\n          var ns = '.fth-'+floatTheadId;\n          unfloat();\n          $table.css(layoutAuto);\n          $tableColGroup.remove();\n          createElements && $fthGrp.remove();\n          if($newHeader.parent().length){ //only if it's in the DOM\n            $newHeader.replaceWith($header);\n          }\n          if(canObserveMutations){\n            mObs.disconnect();\n            mObs = null;\n          }\n          $table.off('reflow reflowed');\n          $scrollContainer.off(ns);\n          if (wrappedContainer) {\n            if ($scrollContainer.length) {\n              $scrollContainer.unwrap();\n            }\n            else {\n              $table.unwrap();\n            }\n          }\n          if(locked){\n            $scrollContainer.data('floatThead-containerWrap', false);\n          } else {\n            $table.data('floatThead-containerWrap', false);\n          }\n          $table.css('minWidth', originalTableMinWidth);\n          $floatContainer.remove();\n          $table.data('floatThead-attached', false);\n          $window.off(ns);\n        },\n        reflow: function(){\n          reflowEvent();\n        },\n        setHeaderHeight: function(){\n          setHeaderHeight();\n        },\n        getFloatContainer: function(){\n          return $floatContainer;\n        },\n        getRowGroups: function(){\n          if(headerFloated){\n            return $floatContainer.find('>table>thead').add($table.children(\"tbody,tfoot\"));\n          } else {\n            return $table.children(\"thead,tbody,tfoot\");\n          }\n        }\n      });\n    });\n    return this;\n  };\n})(jQuery);\n\n/* jQuery.floatThead.utils - http://mkoryak.github.io/floatThead/ - Copyright (c) 2012 - 2014 Misha Koryak\n * License: MIT\n *\n * This file is required if you do not use underscore in your project and you want to use floatThead.\n * It contains functions from underscore that the plugin uses.\n *\n * YOU DON'T NEED TO INCLUDE THIS IF YOU ALREADY INCLUDE UNDERSCORE!\n *\n */\n\n(function($){\n\n  $.floatThead = $.floatThead || {};\n\n  $.floatThead._  = window._ || (function(){\n    var that = {};\n    var hasOwnProperty = Object.prototype.hasOwnProperty, isThings = ['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp'];\n    that.has = function(obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n    that.keys = function(obj) {\n      if (obj !== Object(obj)) throw new TypeError('Invalid object');\n      var keys = [];\n      for (var key in obj) if (that.has(obj, key)) keys.push(key);\n      return keys;\n    };\n    var idCounter = 0;\n    that.uniqueId = function(prefix) {\n      var id = ++idCounter + '';\n      return prefix ? prefix + id : id;\n    };\n    $.each(isThings, function(){\n      var name = this;\n      that['is' + name] = function(obj) {\n        return Object.prototype.toString.call(obj) == '[object ' + name + ']';\n      };\n    });\n    that.debounce = function(func, wait, immediate) {\n      var timeout, args, context, timestamp, result;\n      return function() {\n        context = this;\n        args = arguments;\n        timestamp = new Date();\n        var later = function() {\n          var last = (new Date()) - timestamp;\n          if (last < wait) {\n            timeout = setTimeout(later, wait - last);\n          } else {\n            timeout = null;\n            if (!immediate) result = func.apply(context, args);\n          }\n        };\n        var callNow = immediate && !timeout;\n        if (!timeout) {\n          timeout = setTimeout(later, wait);\n        }\n        if (callNow) result = func.apply(context, args);\n        return result;\n      };\n    };\n    return that;\n  })();\n})(jQuery);\n\n","Zotero.ui.widgets.reactaddToCollectionDialog = {};\n\nZotero.ui.widgets.reactaddToCollectionDialog.init = function(el){\n\tZ.debug(\"addtocollectionsdialog widget init\", 3);\n\tvar library = Zotero.ui.getAssociatedLibrary(el);\n\tvar reactInstance = ReactDOM.render(\n\t\t<AddToCollectionDialog library={library} />,\n\t\tdocument.getElementById('add-to-collection-dialog')\n\t);\n};\n\nvar AddToCollectionDialog = React.createClass({\n\tcomponentWillMount: function() {\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\n\t\tlibrary.listen(\"addToCollectionDialog\", function(){\n\t\t\treactInstance.setState({});\n\t\t\treactInstance.openDialog();\n\t\t}, {});\n\t},\n\tgetInitialState: function() {\n\t\treturn {\n\t\t\tcollectionKey: null\n\t\t};\n\t},\n\thandleCollectionChange: function(evt) {\n\t\tthis.setState({'collectionKey': evt.target.value});\n\t},\n\topenDialog: function() {\n\t\t//this.setState({open:true});\n\t\tthis.refs.modal.open();\n\t},\n\tcloseDialog: function(evt) {\n\t\t//this.setState({open:false});\n\t\tthis.refs.modal.close();\n\t},\n\taddToCollection: function(evt) {\n\t\tZ.debug(\"add-to-collection clicked\", 3);\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\tvar itemKeys = Zotero.state.getSelectedItemKeys();\n\t\tvar collectionKey = this.state.collectionKey;\n\t\tif(!collectionKey){\n\t\t\tZotero.ui.jsNotificationMessage(\"No collection selected\", 'error');\n\t\t\treturn false;\n\t\t}\n\t\tif(itemKeys.length === 0){\n\t\t\tZotero.ui.jsNotificationMessage(\"No items selected\", 'notice');\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tlibrary.collections.getCollection(collectionKey).addItems(itemKeys)\n\t\t.then(function(response){\n\t\t\tlibrary.dirty = true;\n\t\t\tZotero.ui.jsNotificationMessage(\"Items added to collection\", 'success');\n\t\t\treactInstance.closeDialog();\n\t\t}).catch(Zotero.catchPromiseError);\n\t\treturn false;\n\t},\n\trender: function() {\n\t\tvar library = this.props.library;\n\t\tvar ncollections = library.collections.nestedOrderingArray();\n\n\t\tvar collectionOptions = ncollections.map(function(collection, index){\n\t\t\treturn (\n\t\t\t\t<option key={collection.get('key')} value={collection.get('key')}>{'-'.repeat(collection.nestingDepth)} {collection.get('name')}</option>\n\t\t\t);\n\t\t});\n\t\t\n\t\treturn (\n\t\t\t<BootstrapModalWrapper ref=\"modal\">\n\t\t\t\t<div id=\"add-to-collection-dialog\" className=\"add-to-collection-dialog\" role=\"dialog\" title=\"Add to Collection\" data-keyboard=\"true\">\n\t\t\t\t\t<div className=\"modal-dialog\">\n\t\t\t\t\t\t<div className=\"modal-content\">\n\t\t\t\t\t\t\t<div className=\"modal-header\">\n\t\t\t\t\t\t\t\t<button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\"></button>\n\t\t\t\t\t\t\t\t<h3>Add To Collection</h3>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"add-to-collection-div modal-body\" data-role=\"content\">\n\t\t\t\t\t\t\t\t<form method=\"POST\">\n\t\t\t\t\t\t\t\t\t<div data-role=\"fieldcontain\">\n\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"new-collection-parent\">Collection</label>\n\t\t\t\t\t\t\t\t\t\t<select onChange={this.handleCollectionChange} className='collectionKey-select target-collection form-control'>\n\t\t\t\t\t\t\t\t\t\t\t{collectionOptions}\n\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"modal-footer\">\n\t\t\t\t\t\t\t\t<button onClick={this.closeDialog} className=\"btn\" data-dismiss=\"modal\" aria-hidden=\"true\">Close</button>\n\t\t\t\t\t\t\t\t<button onClick={this.addToCollection} className=\"btn btn-primary addButton\">Add</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</BootstrapModalWrapper>\n\t\t);\n\t}\n});\n\n\nvar BootstrapModalWrapper = React.createClass({\n\t// The following two methods are the only places we need to\n\t// integrate Bootstrap or jQuery with the components lifecycle methods.\n\tcomponentDidMount: function() {\n\t\t// When the component is added, turn it into a modal\n\t\tZ.debug(\"BootstrapModalWrapper componentDidMount\");\n\t\tJ(this.refs.root).modal({backdrop: 'static', keyboard: false, show: false});\n\t},\n\tcomponentWillUnmount: function() {\n\t\tZ.debug(\"BootstrapModalWrapper componentWillUnmount\");\n\t\tJ(this.refs.root).off('hidden', this.handleHidden);\n\t},\n\tclose: function() {\n\t\tZ.debug(\"BootstrapModalWrapper close\");\n\t\tJ(this.refs.root).modal('hide');\n\t},\n\topen: function() {\n\t\tZ.debug(\"BootstrapModalWrapper open\");\n\t\tJ(this.refs.root).modal('show');\n\t},\n\trender: function() {\n\t\treturn (\n\t\t\t<div className=\"modal\" ref=\"root\">\n\t\t\t\t{this.props.children}\n\t\t\t</div>\n\t\t);\n\t}\n});","Zotero.ui.widgets.reactbreadcrumbs = {};\n\nZotero.ui.widgets.reactbreadcrumbs.init = function(el){\n\tvar library = Zotero.ui.getAssociatedLibrary(el);\n\tvar reactInstance = ReactDOM.render(\n\t\t<BreadCrumbs library={library} />,\n\t\tdocument.getElementById('breadcrumbs')\n\t);\n};\n\nvar BreadCrumb = React.createClass({\n\tgetInitialProps: function() {\n\t\treturn {\n\t\t\tlabel: \"\",\n\t\t\tpath: \"\"\n\t\t};\n\t},\n\trender: function(){\n\t\tif(this.props.path != \"\") {\n\t\t\treturn (\n\t\t\t\t<a href={this.props.path}>{this.props.label}</a>\n\t\t\t);\n\t\t} else {\n\t\t\treturn (\n\t\t\t\tthis.props.label\n\t\t\t);\n\t\t}\n\t}\n});\n\nvar BreadCrumbs = React.createClass({\n\tcomponentWillMount: function() {\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\n\t\tlibrary.listen(\"displayedItemsChanged displayedItemChanged selectedCollectionChanged\", function(){\n\t\t\treactInstance.forceUpdate();\n\t\t});\n\t},\n\tgetInitialProps: function(){\n\t\treturn {library:null};\n\t},\n\trender:function(){\n\t\tvar library = this.props.library;\n\t\tif(library === null){\n\t\t\treturn null;\n\t\t}\n\t\t\n\t\tvar crumbs = [];\n\t\tvar config = Zotero.state.getUrlVars();\n\t\tif(Zotero.config.breadcrumbsBase){\n\t\t\tZotero.config.breadcrumbsBase.forEach(function(crumb){\n\t\t\t\tcrumbs.push(crumb);\n\t\t\t});\n\t\t} else if(library.libraryType == 'user'){\n\t\t\tcrumbs = [\n\t\t\t\t{label:'Home', path:'/'},\n\t\t\t\t{label:'People', path:'/people'},\n\t\t\t\t{label:(library.libraryLabel || library.libraryUrlIdentifier), path:'/' + library.libraryUrlIdentifier},\n\t\t\t\t{label:'Library', path:'/' + library.libraryUrlIdentifier + '/items'}\n\t\t\t];\n\t\t} else{\n\t\t\tcrumbs = [\n\t\t\t\t{label:'Home', path:'/'},\n\t\t\t\t{label:'Groups', path:'/groups'},\n\t\t\t\t{label:(library.libraryLabel || library.libraryUrlIdentifier), path:'/groups/' + library.libraryUrlIdentifier},\n\t\t\t\t{label:'Library', path:'/groups/' + library.libraryUrlIdentifier + '/items'}\n\t\t\t];\n\t\t}\n\n\t\tif(config.collectionKey){\n\t\t\tZ.debug(\"have collectionKey\", 4);\n\t\t\tvar curCollection = library.collections.getCollection(config.collectionKey);\n\t\t\tif( curCollection ){\n\t\t\t\tcrumbs.push({label:curCollection.get('name'), path:Zotero.state.buildUrl({collectionKey:config.collectionKey})});\n\t\t\t}\n\t\t}\n\t\tif(config.itemKey){\n\t\t\tZ.debug(\"have itemKey\", 4);\n\t\t\tcrumbs.push({label:library.items.getItem(config.itemKey).title, path:Zotero.state.buildUrl({collectionKey:config.collectionKey, itemKey:config.itemKey})});\n\t\t}\n\t\t\n\t\tvar crumbNodes = [];\n\t\tvar titleString = \"\";\n\t\tcrumbs.forEach(function(crumb, index){\n\t\t\tcrumbNodes.push(\n\t\t\t\t<BreadCrumb label={crumb.label} path={crumb.path} />\n\t\t\t);\n\t\t\tif(crumb.label == \"Home\") {\n\t\t\t\ttitleString += \"Zotero | \";\n\t\t\t} else {\n\t\t\t\ttitleString += crumb.label;\n\t\t\t}\n\t\t\tif(index < crumbs.length){\n\t\t\t\tcrumbNodes.push(\" > \");\n\t\t\t\ttitleString += \" > \";\n\t\t\t}\n\t\t});\n\t\t\n\t\t//set window title\n\t\tif(titleString != \"\"){\n\t\t\tZotero.state.updateStateTitle(titleString);\n\t\t}\n\n\t\treturn (\n\t\t\t<span>\n\t\t\t\t{crumbNodes}\n\t\t\t</span>\n\t\t);\n\t}\n});\n","Zotero.ui.widgets.library = {};\n\nZotero.ui.widgets.library.init = function(el){\n\tZ.debug(\"Zotero.ui.widgets.library.init\");\n\tvar library = Zotero.ui.getAssociatedLibrary(el);\n\tvar reactInstance = ReactDOM.render(\n\t\t<ReactZoteroLibrary library={library} />,\n\t\tdocument.getElementById('library-widget')\n\t);\n};\n\nvar ReactZoteroLibrary = React.createClass({\n\tcomponentWillMount: function() {\n\t\t//preload library\n\t\tZ.debug(\"ReactZoteroLibrary componentWillMount\", 3);\n\t\tvar reactInstance = this;\n\t\tZotero.reactLibraryInstance = reactInstance;\n\t\tvar library = this.props.library;\n\t\tlibrary.loadSettings();\n\t\tlibrary.listen(\"deleteIdb\", function(){\n\t\t\tlibrary.idbLibrary.deleteDB();\n\t\t});\n\t\tlibrary.listen(\"indexedDBError\", function(){\n\t\t\tZotero.ui.jsNotificationMessage(\"There was an error initializing your library. Some data may not load properly.\", 'notice');\n\t\t});\n\t\tlibrary.listen(\"cachedDataLoaded\", function() {\n\n\t\t});\n\t\t\n\t\tJ(window).on('resize', function(){\n\t\t\tif(!window.matchMedia(\"(min-width: 768px)\").matches){\n\t\t\t\tif(reactInstance.state.narrow != true){\n\t\t\t\t\treactInstance.setState({narrow:true});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif(reactInstance.state.narrow != false){\n\t\t\t\t\treactInstance.setState({narrow:false});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\tcomponentDidMount: function() {\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\tlibrary.listen(\"displayedItemsChanged\", function() {\n\t\t\tZ.debug(\"ReactZoteroLibrary displayedItemsChanged\");\n\t\t\treactInstance.refs.itemsWidget.loadItems();\n\t\t}, {});\n\t\n\t\tlibrary.listen(\"tagsChanged libraryTagsUpdated selectedTagsChanged\", function(){\n\t\t\tZ.debug(\"setting tags on tagsWidget from Library\");\n\t\t\treactInstance.refs.tagsWidget.setState({tags:library.tags});\n\t\t});\n\n\t\t//trigger loading of more items on scroll reaching bottom\n\t\tJ(reactInstance.refs.itemsPanel).on('scroll', function(){\n\t\t\tvar jel = J(reactInstance.refs.itemsPanel);\n\t\t\tif(jel.scrollTop() + jel.innerHeight() >= jel[0].scrollHeight){\n\t\t\t\treactInstance.refs.itemsWidget.loadMoreItems();\n\t\t\t}\n\t\t});\n\t},\n\tgetInitialState: function() {\n\t\tvar narrow;\n\t\tif(!window.matchMedia(\"(min-width: 768px)\").matches){\n\t\t\tZ.debug(\"Library set to narrow\", 3);\n\t\t\tnarrow = true;\n\t\t} else {\n\t\t\tnarrow = false;\n\t\t}\n\n\t\treturn {\n\t\t\tnarrow: narrow,\n\t\t\tactivePanel: \"items\",\n\t\t\tdeviceSize: \"xs\"\n\t\t};\n\t},\n\tshowFiltersPanel: function(evt) {\n\t\tevt.preventDefault();\n\t\tthis.setState({activePanel: \"filters\"});\n\t},\n\tshowItemsPanel: function(evt) {\n\t\tevt.preventDefault();\n\t\tthis.setState({activePanel: \"items\"});\n\t},\n\treflowPanelContainer: function() {\n\n\t},\n\trender: function(){\n\t\tZ.debug(\"react library render\");\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\tvar user = Zotero.config.loggedInUser;\n\t\tvar userDisplayName = user ? user.displayName : null;\n\t\tvar base = Zotero.config.baseWebsiteUrl;\n\t\tvar settingsUrl = base + \"/settings\";\n\t\tvar inboxUrl = base + \"/messages/inbox\"; //TODO\n\t\tvar downloadUrl = base + \"/download\";\n\t\tvar documentationUrl = base + \"/support\";\n\t\tvar forumsUrl = Zotero.config.baseForumsUrl; //TODO\n\t\tvar logoutUrl = base + \"/user/logout\";\n\t\tvar loginUrl = base + \"/user/login\";\n\t\tvar homeUrl = base;\n\t\tvar staticUrl = function(path){\n\t\t\treturn base + \"/static\" + path;\n\t\t};\n\n\t\tvar inboxText = user.unreadMessages > 0 ? (<strong>Inbox ({user.unreadMessages})</strong>) : \"Inbox\";\n\t\tvar siteActionsMenu;\n\n\t\tif(user) {\n\t\t\tsiteActionsMenu = [\n\t\t\t\t(<button key=\"button\" type=\"button\" href=\"#\" className=\"btn btn-default navbar-btn dropdown-toggle\" data-toggle=\"dropdown\" role=\"button\" aria-expanded=\"false\">\n\t\t\t\t\t{userDisplayName}\n\t\t\t\t\t<span className=\"caret\"></span>\n\t\t\t\t\t<span className=\"sr-only\">Toggle Dropdown</span>\n\t\t\t\t</button>),\n\t\t\t\t(<ul key=\"listEntries\" className=\"dropdown-menu\" role=\"menu\">\n\t\t\t\t\t<li><a href={settingsUrl}>Settings</a></li>\n\t\t\t\t\t<li><a href={inboxUrl}>{inboxText}</a></li>\n\t\t\t\t\t<li><a href={downloadUrl}>Download</a></li>\n\t\t\t\t\t<li className=\"divider\"></li>\n\t\t\t\t\t<li><a href={documentationUrl} className=\"documentation\">Documentation</a></li>\n\t\t\t\t\t<li><a href={forumsUrl} className=\"forums\">Forums</a></li>\n\t\t\t\t\t<li className=\"divider\"></li>\n\t\t\t\t\t<li><a href={logoutUrl}>Log Out</a></li>\n\t\t\t\t</ul>)\n\t\t\t];\n\t\t} else {\n\t\t\tsiteActionsMenu = (\n\t\t\t\t<div className=\"btn-group\">\n\t\t\t\t\t<a href={loginUrl} className=\"btn btn-default navbar-btn\" role=\"button\">\n\t\t\t\t\t\tLog In\n\t\t\t\t\t</a>\n\t\t\t\t\t<button type=\"button\" href=\"#\" className=\"btn btn-default navbar-btn dropdown-toggle\" data-toggle=\"dropdown\" role=\"button\" aria-haspopup=\"true\" aria-expanded=\"false\">\n\t\t\t\t\t\t<span className=\"caret\"></span>\n\t\t\t\t\t\t<span className=\"sr-only\">Toggle Dropdown</span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<ul className=\"dropdown-menu\" role=\"menu\">\n\t\t\t\t\t\t<li><a href={downloadUrl}>Download</a></li>\n\t\t\t\t\t\t<li><a href={documentationUrl} className=\"documentation\">Documentation</a></li>\n\t\t\t\t\t\t<li><a href={forumsUrl} className=\"forums\">Forums</a></li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\t//figure out panel visibility based on state.activePanel\n\t\tvar narrow = reactInstance.state.narrow;\n\t\tvar leftPanelVisible = !narrow;\n\t\tvar rightPanelVisible = !narrow;\n\t\tvar itemsPanelVisible = !narrow;\n\t\tvar itemPanelVisible = !narrow;\n\t\tvar tagsPanelVisible = !narrow;\n\t\tvar collectionsPanelVisible = !narrow;\n\t\tif(narrow){\n\t\t\tswitch(reactInstance.state.activePanel){\n\t\t\t\tcase \"items\":\n\t\t\t\t\trightPanelVisible = true;\n\t\t\t\t\titemsPanelVisible = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"item\":\n\t\t\t\t\trightPanelVisible = true;\n\t\t\t\t\titemPanelVisible = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"tags\":\n\t\t\t\t\tleftPanelVisible = true;\n\t\t\t\t\ttagsPanelVisible = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"collections\":\n\t\t\t\t\tleftPanelVisible = true;\n\t\t\t\t\tcollectionsPanelVisible = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"filters\":\n\t\t\t\t\tleftPanelVisible = true;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t<nav id=\"primarynav\" className=\"navbar navbar-default\" role=\"navigation\">\n\t\t\t\t<div className=\"container-fluid\">\n\t\t\t\t\t<div className=\"navbar-header\">\n\t\t\t\t\t\t<button type=\"button\" className=\"navbar-toggle collapsed\" data-toggle=\"collapse\" data-target=\"#primary-nav-linklist\">\n\t\t\t\t\t\t\t{userDisplayName}\n\t\t\t\t\t\t\t<span className=\"sr-only\">Toggle navigation</span>\n\t\t\t\t\t\t\t<span className=\"glyphicons fonticon glyphicons-menu-hamburger\"></span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<a className=\"navbar-brand hidden-sm hidden-xs\" href={homeUrl}><img src={staticUrl('/images/theme/zotero.png')} alt=\"Zotero\" height=\"20px\" /></a>\n\t\t\t\t\t\t<a className=\"navbar-brand visible-sm-block visible-xs-block\" href={homeUrl}>\n\t\t\t\t\t\t\t<img src={staticUrl('/images/theme/zotero_theme/zotero_48.png')} alt=\"Zotero\" height=\"24px\" />\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"collapse navbar-collapse\" id=\"primary-nav-linklist\">\n\t\t\t\t\t\t<ControlPanel library={library} ref=\"controlPanel\" />\n\t\t\t\t\t\t\n\t\t\t\t\t\t<ul className=\"nav navbar-nav navbar-right\">\n\t\t\t\t\t\t\t{siteActionsMenu}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div className=\"eventfulwidget btn-toolbar hidden-xs navbar-right\">\n\t\t\t\t\t\t\t<LibrarySearchBox library={library} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</nav>\n\n\t\t\t<div id=\"js-message\" >\n\t\t\t\t<ul id=\"js-message-list\">\n\t\t\t\t</ul>\n\t\t\t</div>\n\n\t\t\t{/*<!-- Main Content -->*/}\n\t\t\t<div id=\"library\" className=\"row\">\n\n\t\t\t<div id=\"panel-container\">\n\t\t\t\t<div id=\"left-panel\" hidden={!leftPanelVisible} className=\"panelcontainer-panelcontainer col-xs-12 col-sm-4 col-md-3\">\n\t\t\t\t\t<FilterGuide ref=\"filterGuide\" library={library} />\n\t\t\t\t\t\n\t\t\t\t\t<div role=\"tabpanel\">\n\t\t\t\t\t\t{/*<!-- Nav tabs -->*/}\n\t\t\t\t\t\t<ul className=\"nav nav-tabs\" role=\"tablist\">\n\t\t\t\t\t\t\t<li role=\"presentation\" className=\"active\"><a href=\"#collections-panel\" aria-controls=\"collections-panel\" role=\"tab\" data-toggle=\"tab\">Collections</a></li>\n\t\t\t\t\t\t\t<li role=\"presentation\"><a  href=\"#tags-panel\" aria-controls=\"tags-panel\" role=\"tab\" data-toggle=\"tab\">Tags</a></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t{/*<!-- Tab panes -->*/}\n\t\t\t\t\t\t<div className=\"tab-content\">\n\t\t\t\t\t\t\t<div id=\"collections-panel\" role=\"tabpanel\" className=\"tab-pane active\">\n\t\t\t\t\t\t\t\t<Collections ref=\"collectionsWidget\" library={library} />\n\t\t\t\t\t\t\t</div>{/*<!-- /collections panel -->*/}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<div id=\"tags-panel\" role=\"tabpanel\" className=\"tab-pane\">\n\t\t\t\t\t\t\t\t{/*<!-- tags browser section -->*/}\n\t\t\t\t\t\t\t\t<Tags ref=\"tagsWidget\" library={library} />\n\t\t\t\t\t\t\t\t<FeedLink ref=\"feedLinkWidget\" library={library} />\n\t\t\t\t\t\t\t</div>{/*<!-- /tags panel -->*/}\n\t\t\t\t\t\t</div>{/*<!-- /tabcontent -->*/}\n\t\t\t\t\t</div>{/*<!-- /tab-panel -->*/}\n\t\t\t\t</div>{/*<!-- /left-panel -->*/}\n\t\t\t\t\n\t\t\t\t<div id=\"right-panel\" hidden={!rightPanelVisible} className=\"panelcontainer-panelcontainer col-xs-12 col-sm-8 col-md-9\">\n\t\t\t\t\t<div hidden={!itemsPanelVisible} ref=\"itemsPanel\" id=\"items-panel\" className=\"panelcontainer-panel col-sm-12 col-md-7\">\n\t\t\t\t\t\t<LibrarySearchBox library={library} />\n\t\t\t\t\t\t<Items ref=\"itemsWidget\" library={library} narrow={narrow} />\n\t\t\t\t\t\n\t\t\t\t\t\t<div id=\"load-more-items-div\" className=\"row\">\n\t\t\t\t\t\t\t<button onClick={function(){library.trigger('loadMoreItems');}} type=\"button\" id=\"load-more-items-button\" className=\"btn btn-default\">\n\t\t\t\t\t\t\tLoad More Items\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>{/*<!-- /items panel -->*/}\n\t\t\t\t\t\n\t\t\t\t\t<div hidden={!itemPanelVisible} id=\"item-panel\" className=\"panelcontainer-panel col-sm-12 col-md-5\">\n\t\t\t\t\t\t<div id=\"item-widget-div\" className=\"item-details-div\">\n\t\t\t\t\t\t\t<ItemDetails ref=\"itemWidget\" library={library} />\n\t\t\t\t\t\t</div>{/*<!-- /item widget -->*/}\n\t\t\t\t\t</div>{/*<!-- /item panel -->*/}\n\t\t\t\t</div>{/*<!-- /right-panel -->*/}\n\t\t\t\t\n\t\t\t\t{/*<!-- panelContainer nav footer -->*/}\n\t\t\t\t<nav id=\"panelcontainer-nav\" className=\"navbar navbar-default navbar-fixed-bottom visible-xs-block\" role=\"navigation\">\n\t\t\t\t\t<div className=\"container-fluid\">\n\t\t\t\t\t\t<ul className=\"nav navbar-nav\">\n\t\t\t\t\t\t\t<li onClick={reactInstance.showFiltersPanel} className=\"filters-nav\"><a href=\"#\">Filters</a></li>\n\t\t\t\t\t\t\t<li onClick={reactInstance.showItemsPanel} className=\"items-nav\"><a href=\"#\">Items</a></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t</nav>\n\t\t\t\t\n\t\t\t\t<CiteItemDialog library={library} />\n\t\t\t\t\n\t\t\t\t<ExportItemsDialog library={library} />\n\t\t\t\t\n\t\t\t\t<LibrarySettingsDialog library={library} />\n\t\t\t\t\n\t\t\t\t<ChooseSortingDialog library={library} />\n\t\t\t</div>\n\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n});\n","Zotero.ui.widgets.reactchooseSortingDialog = {};\n\nZotero.ui.widgets.reactchooseSortingDialog.init = function(el){\n\tZ.debug(\"chooseSortingDialog widget init\", 3);\n\tvar library = Zotero.ui.getAssociatedLibrary(el);\n\tvar reactInstance = ReactDOM.render(\n\t\t<ChooseSortingDialog library={library} />,\n\t\tdocument.getElementById('choose-sorting-dialog')\n\t);\n};\n\nvar ChooseSortingDialog = React.createClass({\n\tcomponentWillMount: function() {\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\n\t\tvar currentSortField = Zotero.ui.getPrioritizedVariable('order', 'title');\n\t\tvar currentSortOrder = Zotero.ui.getPrioritizedVariable('sort', 'asc');\n\t\treactInstance.setState({\n\t\t\tsortField: currentSortField,\n\t\t\tsortOrder: currentSortOrder\n\t\t});\n\n\t\tlibrary.listen(\"chooseSortingDialog\", reactInstance.openDialog, {});\n\t},\n\tgetInitialState: function() {\n\t\treturn {\n\t\t\tsortField: \"\",\n\t\t\tsortOrder: \"asc\"\n\t\t};\n\t},\n\thandleFieldChange: function(evt) {\n\t\tthis.setState({sortField: evt.target.value});\n\t},\n\thandleOrderChange: function(evt) {\n\t\tthis.setState({sortOrder: evt.target.value});\n\t},\n\tsaveSorting: function() {\n\t\tvar library = this.props.library;\n\t\tlibrary.trigger(\"changeItemSorting\", {newSortField:this.state.sortField, newSortOrder:this.state.sortOrder});\n\t\tthis.closeDialog();\n\t},\n\topenDialog: function() {\n\t\tthis.refs.modal.open();\n\t},\n\tcloseDialog: function(evt) {\n\t\tthis.refs.modal.close();\n\t},\n\trender: function() {\n\t\tvar library = this.props.library;\n\t\tvar sortableOptions = library.sortableColumns.map(function(col){\n\t\t\treturn (\n\t\t\t\t<option key={col} label={Zotero.localizations.fieldMap[col]} value={col}>{Zotero.localizations.fieldMap[col]}</option>\n\t\t\t);\n\t\t});\n\n\t\treturn (\n\t\t\t<BootstrapModalWrapper ref=\"modal\">\n\t\t\t\t<div id=\"choose-sorting-dialog\" className=\"choose-sorting-dialog\" role=\"dialog\" title=\"Sort Order\" data-keyboard=\"true\">\n\t\t\t\t\t<div  className=\"modal-dialog\">\n\t\t\t\t\t\t<div className=\"modal-content\">\n\t\t\t\t\t\t\t<div className=\"modal-header\">\n\t\t\t\t\t\t\t\t<button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\"></button>\n\t\t\t\t\t\t\t\t<h3>Sort Items By</h3>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"choose-sorting-div modal-body\" data-role=\"content\">\n\t\t\t\t\t\t\t\t<form className=\"form-horizontal\" role=\"form\">\n\t\t\t\t\t\t\t\t\t<select defaultValue={this.state.sortField} onChange={this.handleFieldChange} id=\"sort-column-select\" className=\"sort-column-select form-control\" name=\"sort-column-select\">\n\t\t\t\t\t\t\t\t\t\t{sortableOptions}\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<select defaultValue={this.state.sortOrder} onChange={this.handleOrderChange} id=\"sort-order-select\" className=\"sort-order-select form-control\" name=\"sort-order-select\">\n\t\t\t\t\t\t\t\t\t\t<option label=\"Ascending\" value=\"asc\">Ascending</option>\n\t\t\t\t\t\t\t\t\t\t<option label=\"Descending\" value=\"desc\">Descending</option>\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"modal-footer\">\n\t\t\t\t\t\t\t\t<button className=\"btn\" data-dismiss=\"modal\" aria-hidden=\"true\">Cancel</button>\n\t\t\t\t\t\t\t\t<button onClick={this.saveSorting} className=\"btn btn-primary saveSortButton\">Save</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</BootstrapModalWrapper>\n\t\t);\n\t}\n});\n","Zotero.ui.widgets.reactciteItemDialog = {};\n\nZotero.ui.widgets.reactciteItemDialog.init = function(el){\n\tZ.debug(\"citeItemDialog widget init\", 3);\n\tvar library = Zotero.ui.getAssociatedLibrary(el);\n\tvar reactInstance = ReactDOM.render(\n\t\t<CiteItemDialog library={library} />,\n\t\tdocument.getElementById('cite-item-dialog')\n\t);\n};\n\nvar CiteItemDialog = React.createClass({\n\tcomponentWillMount: function() {\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\n\t\treactInstance.getAvailableStyles();\n\t\tlibrary.listen(\"citeItems\", reactInstance.openDialog, {});\n\t},\n\tgetDefaultProps: function() {\n\t\treturn {\n\t\t\tfreeStyleInput: false\n\t\t};\n\t},\n\tgetInitialState: function() {\n\t\treturn {\n\t\t\tstyles: [],\n\t\t\tcurrentStyle: \"\",\n\t\t\tcitationString:\"\"\n\t\t};\n\t},\n\thandleStyleChange: function(evt) {\n\t\tthis.setState({'collectionKey': evt.target.value});\n\t},\n\topenDialog: function() {\n\t\t//this.setState({open:true});\n\t\tthis.refs.modal.open();\n\t},\n\tcloseDialog: function(evt) {\n\t\t//this.setState({open:false});\n\t\tthis.refs.modal.close();\n\t},\n\tcite: function(evt) {\n\t\tZ.debug(\"citeFunction\", 3);\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\tvar style = this.state.currentStyle;\n\n\t\t//get the selected item keys from the items widget\n\t\tvar itemKeys = Zotero.state.getSelectedItemKeys();\n\t\t\n\t\tlibrary.loadFullBib(itemKeys, style)\n\t\t.then(function(bibContent){\n\t\t\treactInstance.setState({\n\t\t\t\tcitationString: bibContent\n\t\t\t});\n\t\t\t//dialogEl.find(\".cite-box-div\").html(bibContent);\n\t\t}).catch(Zotero.catchPromiseError);\n\t},\n\tgetAvailableStyles: function(){\n\t\tif(!Zotero.styleList){\n\t\t\tZotero.styleList = [];\n\t\t\tJ.getJSON(Zotero.config.styleListUrl, function(data){\n\t\t\t\tZotero.styleList = data;\n\t\t\t});\n\t\t}\n\t},\n\tdirectCite: function(cslItems, style){\n\t\tvar data = {};\n\t\tdata.items = cslItems;\n\t\tvar url = Zotero.config.citationEndpoint + '?linkwrap=1&style=' + style;\n\t\treturn J.post(url, JSON.stringify(data) );\n\t},\n\tbuildBibString: function(bib) {\n\t\tvar bibMeta = bib.bibliography[0];\n\t\tvar bibEntries = bib.bibliography[1];\n\t\tvar bibString = bibMeta.bibstart;\n\t\tfor(var i = 0; i < bibEntries.length; i++){\n\t\t\tbibString += bibEntries[i];\n\t\t}\n\t\tbibString += bibMeta.bibend;\n\t\treturn bibString;\n\t},\n\trender: function() {\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\t\n\t\tvar freeStyleInput = null;\n\t\tif(this.props.freeStyleInput){\n\t\t\tfreeStyleInput = (<input type=\"text\" className=\"free-text-style-input form-control\" placeholder=\"style\" />);\n\t\t}\n\t\tvar citationHtml = {\"__html\": this.state.citationString};\n\n\t\treturn (\n\t\t\t<BootstrapModalWrapper ref=\"modal\">\n\t\t\t\t<div id=\"cite-item-dialog\" className=\"cite-item-dialog\" role=\"dialog\" title=\"Cite\" data-keyboard=\"true\">\n\t\t\t\t\t<div  className=\"modal-dialog\">\n\t\t\t\t\t\t<div className=\"modal-content\">\n\t\t\t\t\t\t\t<div className=\"modal-header\">\n\t\t\t\t\t\t\t\t<button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\"></button>\n\t\t\t\t\t\t\t\t<h3>Cite Items</h3>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"cite-item-div modal-body\" data-role=\"content\">\n\t\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t\t<select onChange={this.cite} className='cite-item-select form-control' id='cite-item-select'>\n\t\t\t\t\t\t\t\t\t\t<option value=''>Select Style</option>\n\t\t\t\t\t\t\t\t\t\t<option value='apsa'>American Political Science Association</option>\n\t\t\t\t\t\t\t\t\t\t<option value='apa'>American Psychological Association</option>\n\t\t\t\t\t\t\t\t\t\t<option value='asa'>American Sociological Association</option>\n\t\t\t\t\t\t\t\t\t\t<option value='chicago-author-date'>Chicago Manual of Style (Author-Date format)</option>\n\t\t\t\t\t\t\t\t\t\t<option value='chicago-fullnote-bibliography'>Chicago Manual of Style (Full Note with Bibliography)</option>\n\t\t\t\t\t\t\t\t\t\t<option value='chicago-note-bibliography'>Chicago Manual of Style (Note with Bibliography)</option>\n\t\t\t\t\t\t\t\t\t\t<option value='harvard1'>Harvard Reference format 1</option>\n\t\t\t\t\t\t\t\t\t\t<option value='ieee'>IEEE</option>\n\t\t\t\t\t\t\t\t\t\t<option value='mhra'>Modern Humanities Research Association</option>\n\t\t\t\t\t\t\t\t\t\t<option value='mla'>Modern Language Association</option>\n\t\t\t\t\t\t\t\t\t\t<option value='nlm'>National Library of Medicine</option>\n\t\t\t\t\t\t\t\t\t\t<option value='nature'>Nature</option>\n\t\t\t\t\t\t\t\t\t\t<option value='vancouver'>Vancouver</option>\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t{freeStyleInput}\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t\t<div id=\"cite-box-div\" className=\"cite-box-div\" dangerouslySetInnerHTML={citationHtml}>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"modal-footer\">\n\t\t\t\t\t\t\t\t<button className=\"btn btn-default\" data-dismiss=\"modal\" aria-hidden=\"true\">Close</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</BootstrapModalWrapper>\n\t\t);\n\t}\n});\n\n","Zotero.ui.widgets.reactcollections = {};\n\nZotero.ui.widgets.reactcollections.init = function(el){\n\tvar library = Zotero.ui.getAssociatedLibrary(el);\n\n\tvar reactInstance = ReactDOM.render(\n\t\t<Collections library={library} />,\n\t\tdocument.getElementById('collection-list-div')\n\t);\n};\n\nvar CollectionRow = React.createClass({\n\tgetDefaultProps: function(){\n\t\treturn {\n\t\t\tcollection:null,\n\t\t\tselectedCollection:\"\",\n\t\t\tdepth:0,\n\t\t\texpandedCollections: {}\n\t\t};\n\t},\n\thandleCollectionClick: function(evt){\n\t\tevt.preventDefault();\n\t\tvar collectionKey = this.props.collection.get('collectionKey');\n\t\t//if current collect\n\t\tZotero.state.clearUrlVars();\n\t\tZotero.state.pathVars['collectionKey'] = collectionKey;\n\t\tZotero.state.pushState();\n\t},\n\thandleTwistyClick: function(evt){\n\t\tZ.debug(\"handleTwistyClick\");\n\t\t//toggle expanded state for this collection\n\t\tevt.preventDefault();\n\t\tvar collectionKey = this.props.collection.get('collectionKey');\n\t\tvar exp = this.props.expandedCollections;\n\t\tif(exp[collectionKey]) {\n\t\t\tdelete exp[collectionKey];\n\t\t} else {\n\t\t\texp[collectionKey] = true;\n\t\t}\n\t\tthis.props.parentCollectionsInstance.setState({expandedCollections:exp});\n\t\t\n\t},\n\trender: function() {\n\t\t//Z.debug(\"CollectionRow render\");\n\t\tif(this.props.collection == null){\n\t\t\treturn null;\n\t\t}\n\t\tvar collection = this.props.collection;\n\t\tvar collectionKey = collection.get('key');\n\t\tvar selectedCollection = this.props.selectedCollection;\n\t\tvar expandedCollections = this.props.expandedCollections;\n\t\tvar expanded = expandedCollections[collectionKey] === true;\n\t\tvar isSelectedCollection = (this.props.selectedCollection == collectionKey);\n\t\t\n\t\tvar childRows = [];\n\t\tcollection.children.forEach(function(collection) {\n\t\t\tchildRows.push(\n\t\t\t\t<CollectionRow \n\t\t\t\t\tkey={collection.get('key')}\n\t\t\t\t\tcollection={collection}\n\t\t\t\t\tselectedCollection={selectedCollection}\n\t\t\t\t\texpandedCollections={expandedCollections} />\n\t\t\t);\n\t\t});\n\t\tvar childrenList = null;\n\t\tif(collection.hasChildren){\n\t\t\tchildrenList = (\n\t\t\t\t<ul hidden={!expanded}>\n\t\t\t\t\t{childRows}\n\t\t\t\t</ul>\n\t\t\t);\n\t\t}\n\t\t\n\t\tvar placeholderClasses = \"placeholder small-icon light-icon pull-left\";\n\t\tif(expandedCollections[collectionKey] === true) {\n\t\t\tplaceholderClasses += \" glyphicon glyphicon-chevron-down clickable\";\n\t\t} else if(childRows.length > 0) {\n\t\t\tplaceholderClasses += \" glyphicon glyphicon-chevron-right clickable\";\n\t\t}\n\n\t\treturn (\n\t\t\t<li className=\"collection-row\">\n\t\t\t\t<div className=\"folder-toggle\">\n\t\t\t\t\t<span className={placeholderClasses} onClick={this.handleTwistyClick}></span>\n\t\t\t\t\t<span className=\"fonticon glyphicons glyphicons-folder-open barefonticon\"></span>\n\t\t\t\t</div>\n\t\t\t\t<a href={collection.websiteCollectionLink} className={isSelectedCollection ? \"current-collection\" : \"\"} onClick={this.handleCollectionClick}>\n\t\t\t\t\t{collection.get('name')}\n\t\t\t\t</a>\n\t\t\t\t{childrenList}\n\t\t\t</li>\n\t\t);\n\t}\n});\n\nvar TrashRow = React.createClass({\n\tgetDefaultProps: function(){\n\t\treturn {\n\t\t\tcollectionKey:\"trash\",\n\t\t\tselectedCollection:\"\"\n\t\t};\n\t},\n\thandleClick: function() {\n\t\tZotero.state.clearUrlVars();\n\t\tZotero.state.pathVars['collectionKey'] = this.props.collectionKey;\n\t\tZotero.state.pushState();\n\t},\n\trender: function() {\n\t\tZ.debug(\"TrashRow render\");\n\t\tvar className = (this.props.selectedCollection == this.props.collectionKey ? \"collection-row current-collection\" : \"collection-row\" );\n\t\t\n\t\treturn (\n\t\t\t<li className={className}>\n\t\t\t\t<div className=\"folder-toggle\">\n\t\t\t\t\t<span className=\"sprite-placeholder sprite-icon-16 pull-left dui-icon\"></span>\n\t\t\t\t\t<span className=\"glyphicons fonticon glyphicons-bin barefonticon\"></span>\n\t\t\t\t</div>\n\t\t\t\tTrash\n\t\t\t</li>\n\t\t);\n\t}\n});\n\nvar Collections = React.createClass({\n\tgetDefaultProps: function() {\n\t},\n\tgetInitialState: function() {\n\t\tvar initialCollectionKey = Zotero.state.getUrlVar('collectionKey');\n\t\treturn {\n\t\t\tcollections: null,\n\t\t\tcurrentCollectionKey:initialCollectionKey,\n\t\t\texpandedCollections: {},\n\t\t\tloading:false\n\t\t};\n\t},\n\tcomponentWillMount: function() {\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\t\n\t\tlibrary.listen(\"collectionsDirty\", reactInstance.syncCollections, {});\n\t\tlibrary.listen(\"libraryCollectionsUpdated\", function(){\n\t\t\treactInstance.setState({collections:library.collections});\n\t\t}, {});\n\t\tlibrary.listen(\"selectedCollectionChanged\", function(){\n\t\t\tvar collectionKey = Zotero.state.getUrlVar('collectionKey');\n\t\t\treactInstance.setState({currentCollectionKey:collectionKey});\n\t\t}, {});\n\t\t\n\t\tlibrary.listen(\"cachedDataLoaded\", reactInstance.syncCollections, {});\n\t},\n\treturnToLibrary: function(evt) {\n\t\tevt.preventDefault();\n\t\tthis.setState({currentCollectionKey:null});\n\t\tZotero.state.clearUrlVars();\n        Zotero.state.pushState();\n\t},\n\tsyncCollections: function(evt) {\n\t\tZotero.debug(\"react collections syncCollections\", 3);\n\t\tvar reactInstance = this;\n\t\tif(this.state.loading){\n\t\t\treturn;\n\t\t}\n\t\tvar library = this.props.library;\n\n\t\t//update the widget as soon as we have the cached collections\n\t\tthis.setState({collections:library.collections, loading:true});\n\n\t\t//sync collections if loaded from cache but not synced\n\t\treturn library.loadUpdatedCollections()\n\t\t.then(function(){\n\t\t\treactInstance.setState({collections:library.collections, loading:false});\n\t\t\tlibrary.trigger(\"libraryCollectionsUpdated\");\n\t\t},\n\t\tfunction(err){\n\t\t\t//sync failed, but we already had some data, so show that\n\t\t\tZ.error(\"Error syncing collections\");\n\t\t\tZ.error(err);\n\t\t\treactInstance.setState({collections:library.collections, loading:false});\n\t\t\tlibrary.trigger(\"libraryCollectionsUpdated\");\n\t\t\tZotero.ui.jsNotificationMessage(\"Error loading collections. Collections list may not be up to date\", 'error');\n\t\t});\n\t},\n\trender: function() {\n\t\tZ.debug(\"Collections render\");\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\tvar collections = this.state.collections;\n\t\tif(collections == null){\n\t\t\treturn null;\n\t\t}\n\t\t\n\t\tvar collectionsArray = this.state.collections.collectionsArray;\n\t\tvar currentCollectionKey = this.state.currentCollectionKey;\n\t\tvar libraryUrlIdentifier = \"\";\n\t\t//var libraryUrlIdentifier = (collections == null ? \"\" : collections.libraryUrlIdentifier);\n\t\t\n\t\t//Set of collections in an expanded state\n\t\tvar expandedCollections = this.state.expandedCollections;\n\n\t\t//path from top level collection to currently selected collection, to ensure that we expand\n\t\t//them all and the current collection is visible\n\t\tvar currentCollectionPath = [];\n\t\tif(currentCollectionKey !== null){\n\t\t\tvar currentCollection = collections.getCollection(currentCollectionKey);\n\t\t\tvar c = currentCollection;\n\t\t\twhile(true){\n\t\t\t\tif(c && !c.topLevel){\n\t\t\t\t\tvar parentCollectionKey = c.get('parentCollection');\n\t\t\t\t\tc = collections.getCollection(parentCollectionKey);\n\t\t\t\t\tcurrentCollectionPath.push(parentCollectionKey);\n\t\t\t\t\texpandedCollections[parentCollectionKey] = true;\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar collectionRows = [];\n\t\tcollectionsArray.forEach(function(collection){\n\t\t\tif(collection.topLevel){\n\t\t\t\tcollectionRows.push(<CollectionRow\n\t\t\t\t\tkey={collection.get('key')}\n\t\t\t\t\tcollection={collection}\n\t\t\t\t\tselectedCollection={currentCollectionKey}\n\t\t\t\t\texpandedCollections={expandedCollections}\n\t\t\t\t\tparentCollectionsInstance={reactInstance} />\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t\t\n\t\tvar libraryClassName = \"my-library \" + (currentCollectionKey == null ? \"current-collection\" : \"\");\n\t\treturn (\n\t\t\t<div id=\"collection-list-div\" className=\"collection-list-container\">\n\t\t\t\t{/*<LoadingSpinner loading={this.state.loading} />*/}\n\t\t\t\t<ul id=\"collection-list\">\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<span className=\"glyphicons fonticon glyphicons-inbox barefonticon\"></span>\n\t\t\t\t\t\t<a onClick={this.returnToLibrary} className={libraryClassName} href={library.libraryBaseWebsiteUrl}>Library</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t{collectionRows}\n\t\t\t\t\t\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t);\n\t}\n});\n","Zotero.ui.widgets.reactcontrolPanel = {};\n\nZotero.ui.widgets.reactcontrolPanel.init = function(el){\n\tZ.debug(\"Zotero.eventful.init.controlPanel\", 3);\n\tvar library = Zotero.ui.getAssociatedLibrary(el);\n\n\tvar reactInstance = ReactDOM.render(\n\t\t<ControlPanel library={library} />,\n\t\tdocument.getElementById('control-panel')\n\t);\n};\n\nvar GroupsButton = React.createClass({\n\trender: function(){\n\t\tvar groupsUrl = \"/groups\";\n\t\treturn (\n\t\t\t<a className=\"btn btn-default navbar-btn navbar-left\" href={groupsUrl} title=\"Groups\">\n\t\t\t\t<span className=\"glyphicons fonticon glyphicons-group\"></span>\n\t\t\t</a>\n\t\t);\n\t}\n});\n\nvar LibraryDropdown = React.createClass({\n\tgetDefaultProps: function() {\n\t\treturn {\n\t\t\tlibrary: null,\n\t\t\tuser:false\n\t\t};\n\t},\n\tgetInitialState: function() {\n\t\treturn {\n\t\t\taccessibleLibraries: [],\n\t\t\tloading:false,\n\t\t\tloaded:false\n\t\t};\n\t},\n\tpopulateDropdown: function() {\n\t\tZ.debug(\"populateDropdown\");\n\t\tvar reactInstance = this;\n\t\tif(this.state.loading || this.state.loaded){\n\t\t\treturn;\n\t\t}\n\n\t\tvar library = this.props.library;\n\t\tif(library == null){\n\t\t\treturn;\n\t\t}\n\t\tif(!Zotero.config.loggedIn){\n\t\t\tthrow new Error(\"no logged in userID. Required for libraryDropdown widget\");\n\t\t}\n\t\t\n\t\tvar user = Zotero.config.loggedInUser;\n\t\tvar personalLibraryString = 'u' + user.userID;\n\t\tvar personalLibraryUrl = Zotero.url.userWebLibrary(user.slug);\n\t\tvar currentLibraryName = Zotero.config.librarySettings.name;\n\t\t\n\t\tthis.setState({loading: true});\n\n\t\tvar memberGroups = library.groups.fetchUserGroups(user.userID)\n\t\t.then(function(response){\n\t\t\tZ.debug(\"got member groups\", 3);\n\t\t\tvar memberGroups = response.fetchedGroups;\n\t\t\tvar accessibleLibraries = [];\n\t\t\tif(!(Zotero.config.librarySettings.libraryType == 'user' && Zotero.config.librarySettings.libraryID == user.userID)){\n\t\t\t\taccessibleLibraries.push({\n\t\t\t\t\tname:'My Library',\n\t\t\t\t\tlibraryString:personalLibraryString,\n\t\t\t\t\twebUrl:personalLibraryUrl\n\t\t\t\t});\n\t\t\t}\n\t\t\t\t\n\t\t\tfor(var i = 0; i < memberGroups.length; i++){\n\t\t\t\tif(Zotero.config.librarySettings.libraryType == 'group' && memberGroups[i].get('id') == Zotero.config.librarySettings.libraryID){\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tvar libraryString = 'g' + memberGroups[i].get('id');\n\t\t\t\taccessibleLibraries.push({\n\t\t\t\t\tname: memberGroups[i].get('name'),\n\t\t\t\t\tlibraryString: libraryString,\n\t\t\t\t\twebUrl: Zotero.url.groupWebLibrary(memberGroups[i])\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\treactInstance.setState({accessibleLibraries: accessibleLibraries, loading:false, loaded:true});\n\t\t}).catch(function(err){\n\t\t\tZ.error(err);\n\t\t\tZ.error(err.message);\n\t\t});\n\t},\n\trender: function() {\n\t\tif(this.props.user == false){\n\t\t\treturn null;\n\t\t}\n\t\t\n\t\tvar currentLibraryName = Zotero.config.librarySettings.name;\n\n\t\tvar accessibleLibraries = this.state.accessibleLibraries;\n\t\tvar libraryEntries = accessibleLibraries.map(function(lib){\n\t\t\treturn (\n\t\t\t\t<li key={lib.libraryString}><a role=\"menuitem\" href={lib.webUrl}>{lib.name}</a></li>\n\t\t\t);\n\t\t});\n\t\t\n\t\treturn (\n\t\t\t<div id=\"library-dropdown\" className=\"btn-group\"\n\t\t\t\tdata-widget='libraryDropdown' data-library={this.props.library.libraryString}>\n\t\t\t\t<button className=\"btn btn-default navbar-btn dropdown-toggle\" onClick={this.populateDropdown} data-toggle=\"dropdown\" href=\"#\" title=\"Libraries\">\n\t\t\t\t\t<span className=\"glyphicons fonticon glyphicons-inbox\"></span>\n\t\t\t\t\t<span className=\"current-library-name\">{currentLibraryName}</span>\n\t\t\t\t\t<span className=\"caret\"></span>\n\t\t\t\t</button>\n\t\t\t\t<ul className=\"library-dropdown-list dropdown-menu actions-menu\">\n\t\t\t\t\t<li hidden={!this.state.loading}><a role=\"menuitem\" className=\"clickable\">Loading...</a></li>\n\t\t\t\t\t{libraryEntries}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t);\n\t}\n});\n\nvar ActionsDropdown = React.createClass({\n\tgetDefaultProps: function() {\n\t\treturn {\n\t\t\titemSelected: false,\n\t\t\tselectedCollection: null,\n\t\t\tlibrary: null,\n\t\t\teditable:false\n\t\t};\n\t},\n\ttrashOrDeleteItems: function(evt){\n\t\t//move currently displayed item or list of selected items to trash\n\t\t//or permanently delete items if already in trash\n\t\tevt.preventDefault();\n\t\tZ.debug('move-to-trash clicked', 3);\n\t\t\n\t\tvar library = this.props.library;\n\t\tvar itemKeys = Zotero.state.getSelectedItemKeys();\n\t\tvar response;\n\t\tvar trashingItems = library.items.getItems(itemKeys);\n\t\tvar deletingItems = []; //potentially deleting instead of trashing\n\t\t\n\t\t//show spinner before making the possibly many the ajax requests\n\t\t//Zotero.ui.showSpinner(J('#library-items-div'));\n\t\t\n\t\tif(Zotero.state.getUrlVar('collectionKey') == 'trash'){\n\t\t\t//items already in trash. delete them\n\t\t\tvar i;\n\t\t\tfor(i = 0; i < trashingItems.length; i++ ){\n\t\t\t\tvar item = trashingItems[i];\n\t\t\t\tif(item.get('deleted')){\n\t\t\t\t\t//item is already in trash, schedule for actual deletion\n\t\t\t\t\tdeletingItems.push(item);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t//make request to permanently delete items\n\t\t\tresponse = library.items.deleteItems(deletingItems);\n\t\t}\n\t\telse{\n\t\t\t//items are not in trash already so just add them to it\n\t\t\tresponse = library.items.trashItems(trashingItems);\n\t\t}\n\t\t\n\t\tlibrary.dirty = true;\n\t\tresponse.catch(function(){\n\t\t\tZ.error(\"Error trashing items\");\n\t\t}).then(function(){\n\t\t\tZotero.state.clearUrlVars(['collectionKey', 'tag', 'q']);\n\t\t\tZotero.state.pushState(true);\n\t\t\tlibrary.trigger(\"displayedItemsChanged\");\n\t\t}).catch(Zotero.catchPromiseError);\n\t\t\n\t\treturn false; //stop event bubbling\n\t},\n\tremoveFromTrash: function(evt){\n\t\t//Remove currently displayed single item or checked list of items from trash\n\t\t//when remove-from-trash link clicked\n\t\tZ.debug('remove-from-trash clicked', 3);\n\t\tvar library = this.props.library;\n\t\tvar itemKeys = Zotero.state.getSelectedItemKeys();\n\t\t\n\t\tvar untrashingItems = library.items.getItems(itemKeys);\n\t\t\n\t\t//show spinner before making the possibly many the ajax requests\n\t\t//Zotero.ui.showSpinner(J('#library-items-div'));\n\t\t\n\t\tvar response = library.items.untrashItems(untrashingItems);\n\t\t\n\t\tlibrary.dirty = true;\n\t\tresponse.catch(function(){\n\t\t\t\n\t\t}).then(function(){\n\t\t\tZ.debug(\"post-removeFromTrash always execute: clearUrlVars\", 3);\n\t\t\tZotero.state.clearUrlVars(['collectionKey', 'tag', 'q']);\n\t\t\tZotero.state.pushState();\n\t\t\tlibrary.trigger(\"displayedItemsChanged\");\n\t\t}).catch(Zotero.catchPromiseError);\n\t\t\n\t\treturn false;\n\t},\n\tremoveFromCollection: function(evt) {\n\t\t//Remove currently displayed single item or checked list of items from\n\t\t//currently selected collection\n\t\tZ.debug('remove-from-collection clicked', 3);\n\t\tvar library = this.props.library;\n\t\tvar itemKeys = Zotero.state.getSelectedItemKeys();\n\t\tvar collectionKey = Zotero.state.getUrlVar('collectionKey');\n\t\t\n\t\tvar modifiedItems = [];\n\t\tvar responses = [];\n\t\titemKeys.forEach(function(itemKey, index){\n\t\t\tvar item = library.items.getItem(itemKey);\n\t\t\titem.removeFromCollection(collectionKey);\n\t\t\tmodifiedItems.push(item);\n\t\t});\n\t\t\n\t\tlibrary.dirty = true;\n\t\t\n\t\tlibrary.items.writeItems(modifiedItems)\n\t\t.then(function(){\n\t\t\tZ.debug('removal responses finished. forcing reload', 3);\n\t\t\tZotero.state.clearUrlVars(['collectionKey', 'tag']);\n\t\t\tZotero.state.pushState(true);\n\t\t\tlibrary.trigger(\"displayedItemsChanged\");\n\t\t}).catch(Zotero.catchPromiseError);\n\t\t\n\t\treturn false;\n\t},\n\ttriggerLibraryEvent: function(evt) {\n\t\tvar eventType = J(evt.target).data('triggers');\n\t\tthis.props.library.trigger(eventType);\n\t},\n\ttriggerSync: function() {\n\t\tthis.props.library.trigger(\"syncLibary\");\n\t},\n\ttriggerDeleteIdb: function() {\n\t\tthis.props.library.trigger(\"deleteIdb\");\n\t},\n\trender: function() {\n\t\tvar library = this.props.library;\n\t\tvar editable = this.props.editable;\n\t\tvar itemSelected = this.props.itemSelected;\n\t\tvar selectedCollection = this.props.selectedCollection;\n\t\tvar collectionSelected = (selectedCollection != null);\n\n\t\tvar showTrashActions = (editable && itemSelected && (selectedCollection == \"trash\"));\n\t\tvar showNonTrashActions = (editable && itemSelected && (selectedCollection != \"trash\"));\n\t\tvar showItemAction = editable && itemSelected;\n\t\tvar showCollectionAction = editable && collectionSelected;\n\n\t\treturn (\n\t\t\t<div className=\"btn-group\">\n\t\t\t\t<button className=\"btn btn-default navbar-btn dropdown-toggle\" data-toggle=\"dropdown\" href=\"#\" title=\"Actions\">\n\t\t\t\t\tActions\n\t\t\t\t\t<span className=\"caret\"></span>\n\t\t\t\t</button>\n\t\t\t\t<ul className=\"dropdown-menu actions-menu\">\n\t\t\t\t\t<li hidden={!showItemAction}><a href=\"#\" role=\"menuitem\" className=\"add-to-collection-button\" onClick={this.triggerLibraryEvent} data-triggers=\"addToCollectionDialog\" title=\"Add to Collection\">Add to Collection</a></li>\n\t\t\t\t\t<li hidden={!(showItemAction && showCollectionAction)}><a onClick={this.removeFromCollection} href=\"#\" className=\"remove-from-collection-button\" title=\"Remove from Collection\">Remove from Collection</a></li>\n\t\t\t\t\t<li hidden={!showNonTrashActions}><a onClick={this.trashOrDeleteItems} href=\"#\" className=\"move-to-trash-button\" title=\"Move to Trash\">Move to Trash</a></li>\n\t\t\t\t\t<li hidden={!showTrashActions}><a onClick={this.trashOrDeleteItems} href=\"#\" className=\"permanently-delete-button\" title=\"Move to Trash\">Permanently Delete</a></li>\n\t\t\t\t\t<li hidden={!showTrashActions}><a onClick={this.removeFromTrash} href=\"#\" className=\"remove-from-trash-button\" title=\"Remove from Trash\">Remove from Trash</a></li>\n\t\t\t\t\t<li className=\"divider\" hidden={!showItemAction}></li>\n\t\t\t\t\t<li><a className=\"create-collection-button\" href=\"#\" onClick={this.triggerLibraryEvent} data-triggers=\"createCollectionDialog\" title=\"New Collection\">Create Collection</a></li>\n\t\t\t\t\t<li hidden={!showCollectionAction}><a href=\"#\" className=\"update-collection-button\" onClick={this.triggerLibraryEvent} data-triggers=\"updateCollectionDialog\" title=\"Change Collection\">Rename Collection</a></li>\n\t\t\t\t\t<li hidden={!showCollectionAction}><a href=\"#\" className=\"delete-collection-button\" onClick={this.triggerLibraryEvent} data-triggers=\"deleteCollectionDialog\" title=\"Delete Collection\">Delete Collection</a></li>\n\t\t\t\t\t<li className=\"divider\"></li>\n\t\t\t\t\t<li><a href=\"#\" onClick={this.triggerLibraryEvent} data-triggers=\"librarySettingsDialog\">Library Settings</a></li>\n\t\t\t\t\t<li><a href=\"#\" className=\"cite-button\" onClick={this.triggerLibraryEvent} data-triggers=\"citeItems\">Cite</a></li>\n\t\t\t\t\t<li><a href=\"#\" className=\"export-button\" onClick={this.triggerLibraryEvent} data-triggers=\"exportItemsDialog\">Export</a></li>\n\t\t\t\t\t<li className=\"divider selected-item-action\"></li>\n\t\t\t\t\t<li className=\"selected-item-action\" hidden={!showItemAction}><a href=\"#\" className=\"send-to-library-button\" onClick={this.triggerLibraryEvent} data-triggers=\"sendToLibraryDialog\" title=\"Copy to Library\">Copy to Library</a></li>\n\t\t\t\t\t<li className=\"divider\" hidden={!showItemAction}></li>\n\t\t\t\t\t<li><a href=\"#\" data-triggers=\"syncLibrary\" onClick={this.triggerLibraryEvent} >Sync</a></li>\n\t\t\t\t\t<li><a href=\"#\" data-triggers=\"deleteIdb\" onClick={this.triggerLibraryEvent} >Delete IDB</a></li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t);\n\t}\n});\n\nvar CreateItemDropdown = React.createClass({\n\tgetDefaultProps: function() {\n\t\treturn {\n\t\t\teditable: false\n\t\t};\n\t},\n\tcreateItem: function(evt){\n\t\t//clear path vars and send to new item page with current collection when create-item-link clicked\n\t\tZ.debug(\"create-item-Link clicked\", 3);\n\t\tevt.preventDefault();\n\t\tvar library = this.props.library;\n\t\tvar itemType = J(evt.target).data('itemtype');\n\t\tlibrary.trigger(\"createItem\", {itemType:itemType});\n\t\treturn false;\n\t},\n\trender: function() {\n\t\tvar reactInstance = this;\n\t\tvar itemTypes = Object.keys(Zotero.Item.prototype.typeMap);\n\t\titemTypes = itemTypes.sort();\n\t\tvar nodes = itemTypes.map(function(itemType, ind){\n\t\t\treturn (\n\t\t\t\t<li key={itemType}>\n\t\t\t\t\t<a onClick={reactInstance.createItem} href=\"#\" data-itemtype={itemType}>\n\t\t\t\t\t\t{Zotero.Item.prototype.typeMap[itemType]}\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t);\n\t\t});\n\n\t\tvar buttonClass = \"create-item-button btn btn-default navbar-btn dropdown-toggle\";\n\t\tif(Zotero.state.getUrlVar('collectionKey') == 'trash'){\n\t\t\tbuttonClass += \" disabled\";\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"btn-group create-item-dropdown\" hidden={!this.props.editable}>\n\t\t\t\t<button type=\"button\" className={buttonClass} data-toggle=\"dropdown\" title=\"New Item\"><span className=\"glyphicons fonticon glyphicons-plus\"></span></button>\n\t\t\t\t<ul className=\"dropdown-menu\" role=\"menu\" style={{maxHeight:\"300px\", overflow:\"auto\"}}>\n\t\t\t\t\t{nodes}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t);\n\t}\n});\n\nvar ControlPanel = React.createClass({\n\tcomponentWillMount: function() {\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\t\n\t\treactInstance.setState({user: Zotero.config.loggedInUser});\n\t\t\n\t\tlibrary.listen(\"selectedItemsChanged\", function(evt){\n\t\t\tZ.debug(\"got selectedItemsChanged event in ControlPanel - setting selectedItems\");\n\t\t\tZ.debug(evt);\n\t\t\tvar selectedItemKeys = evt.data.selectedItemKeys;\n\t\t\treactInstance.setState({selectedItems: selectedItemKeys});\n\t\t}, {});\n\t\t\n\t\tlibrary.listen(\"selectedCollectionChanged\", function(evt){\n\t\t\tvar selectedCollection = Zotero.state.getUrlVar('collectionKey');\n\t\t\tvar selectedItemKeys = Zotero.state.getSelectedItemKeys();\n\t\t\treactInstance.setState({\n\t\t\t\tselectedCollection: selectedCollection,\n\t\t\t\tselectedItems: selectedItemKeys\n\t\t\t});\n\t\t}, {});\n\t},\n\tgetDefaultProps: function(){\n\t\treturn {\n\t\t\teditable: false\n\t\t};\n\t},\n\tgetInitialState: function() {\n\t\tvar selectedItems = Zotero.state.getSelectedItemKeys();\n\t\treturn {\n\t\t\tuser: false,\n\t\t\tselectedItems: selectedItems,\n\t\t\tselectedCollection: null\n\t\t};\n\t},\n\trender: function(){\n\t\treturn (\n\t\t\t<div id=\"control-panel\" className=\"nav navbar-nav\" role=\"navigation\">\n\t\t\t\t<div className=\"btn-toolbar navbar-left\">\n\t\t\t\t\t<GroupsButton library={this.props.library} />\n\t\t\t\t\t<LibraryDropdown user={this.state.user} library={this.props.library} />\n\t\t\t\t\t<ActionsDropdown library={this.props.library} itemSelected={this.state.selectedItems.length > 0} selectedCollection={this.state.selectedCollection} editable={this.props.editable} />\n\t\t\t\t\t<CreateItemDropdown library={this.props.library} editable={this.props.editable} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n});\n","Zotero.ui.widgets.reactcreateCollectionDialog = {};\n\nZotero.ui.widgets.reactcreateCollectionDialog.init = function(el){\n\tZ.debug(\"createcollectionsdialog widget init\", 3);\n\tvar library = Zotero.ui.getAssociatedLibrary(el);\n\tvar reactInstance = ReactDOM.render(\n\t\t<CreateCollectionDialog library={library} />,\n\t\tdocument.getElementById('create-collection-dialog')\n\t);\n};\n\nvar CreateCollectionDialog = React.createClass({\n\tcomponentWillMount: function() {\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\n\t\tlibrary.listen(\"createCollectionDialog\", function(){\n\t\t\treactInstance.forceUpdate();\n\t\t\treactInstance.openDialog();\n\t\t}, {});\n\t},\n\tgetInitialState: function() {\n\t\treturn {\n\t\t\tcollectionName: \"\",\n\t\t\tparentCollection: null,\n\t\t}\n\t},\n\thandleCollectionChange: function(evt) {\n\t\tZ.debug(evt);\n\t\tZ.debug(evt.target.value);\n\t\tthis.setState({'parentCollection': evt.target.value});\n\t},\n\thandleNameChange: function(evt) {\n\t\tthis.setState({'collectionName': evt.target.value});\n\t},\n\topenDialog: function() {\n\t\tthis.refs.modal.open();\n\t},\n\tcloseDialog: function(evt) {\n\t\tthis.refs.modal.close();\n\t},\n\tcreateCollection: function() {\n\t\tZ.debug(\"react createCollection\");\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\tvar parentKey = this.state.parentCollection;\n\t\tvar name = this.state.collectionName;\n\t\tif(name == \"\"){\n\t\t\tname = \"Untitled\";\n\t\t}\n\t\t\n\t\tlibrary.addCollection(name, parentKey)\n\t\t.then(function(responses){\n\t\t\tlibrary.collections.initSecondaryData();\n\t\t\tlibrary.trigger('libraryCollectionsUpdated');\n\t\t\tZotero.state.pushState();\n\t\t\treactInstance.closeDialog();\n\t\t\tZotero.ui.jsNotificationMessage(\"Collection Created\", 'success');\n\t\t}).catch(function(error){\n\t\t\tZotero.ui.jsNotificationMessage(\"There was an error creating the collection.\", \"error\");\n\t\t\treactInstance.closeDialog();\n\t\t});\n\t},\n\trender: function() {\n\t\tvar library = this.props.library;\n\t\tvar ncollections = library.collections.nestedOrderingArray();\n\t\t\n\t\tvar collectionOptions = ncollections.map(function(collection, index){\n\t\t\treturn (\n\t\t\t\t<option key={collection.get('key')} value={collection.get('key')}>{'-'.repeat(collection.nestingDepth)} {collection.get('name')}</option>\n\t\t\t);\n\t\t});\n\t\tcollectionOptions.unshift(\n\t\t\t<option key=\"emptyvalue\" value=''>None</option>\n\t\t);\n\n\t\treturn (\n\t\t\t<BootstrapModalWrapper ref=\"modal\">\n\t\t\t<div id=\"create-collection-dialog\" className=\"create-collection-dialog\" role=\"dialog\" title=\"Create Collection\" data-keyboard=\"true\">\n\t\t\t\t<div  className=\"modal-dialog\">\n\t\t\t\t\t<div className=\"modal-content\">\n\t\t\t\t\t\t<div className=\"modal-header\">\n\t\t\t\t\t\t\t<button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\"></button>\n\t\t\t\t\t\t\t<h3>Create Collection</h3>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"new-collection-div modal-body\" data-role=\"content\">\n\t\t\t\t\t\t\t<form method=\"POST\">\n\t\t\t\t\t\t\t\t<div data-role=\"fieldcontain\">\n\t\t\t\t\t\t\t\t\t<label htmlFor=\"new-collection-title-input\">Collection Name</label>\n\t\t\t\t\t\t\t\t\t<input onChange={this.handleNameChange} className=\"new-collection-title-input form-control\" type=\"text\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div data-role=\"fieldcontain\">\n\t\t\t\t\t\t\t\t<label htmlFor=\"new-collection-parent\">Parent Collection</label>\n\t\t\t\t\t\t\t\t<select onChange={this.handleCollectionChange} className='collectionKey-select new-collection-parent form-control' defaultValue=\"\">\n\t\t\t\t\t\t\t\t\t{collectionOptions}\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"modal-footer\">\n\t\t\t\t\t\t\t<button onClick={this.closeDialog} className=\"btn\" data-dismiss=\"modal\" aria-hidden=\"true\">Close</button>\n\t\t\t\t\t\t\t<button onClick={this.createCollection} className=\"btn btn-primary createButton\">Create</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t</BootstrapModalWrapper>\n\t\t);\n\t}\n});\n","Zotero.ui.widgets.reactcreateItemDialog = {};\n\nZotero.ui.widgets.reactcreateItemDialog.init = function(el){\n\tZ.debug(\"createItemDialog widget init\", 3);\n\tvar library = Zotero.ui.getAssociatedLibrary(el);\n\tvar reactInstance = ReactDOM.render(\n\t\t<CreateItemDialog library={library} />,\n\t\tdocument.getElementById('create-item-dialog')\n\t);\n};\n\nvar CreateItemDialog = React.createClass({\n\tcomponentWillMount: function() {\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\tlibrary.listen(\"createItem\", function(evt){\n\t\t\tvar itemType = evt.data.itemType;\n\t\t\treactInstance.setState({itemType: itemType});\n\t\t\treactInstance.openDialog();\n\t\t}, {});\n\t},\n\tgetInitialState: function() {\n\t\treturn {\n\t\t\ttitle:\"\",\n\t\t\titemType: \"document\"\n\t\t};\n\t},\n\thandleTitleChange: function(evt) {\n\t\tthis.setState({'title': evt.target.value});\n\t},\n\tcreateItem: function(evt) {\n\t\tevt.preventDefault();\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\tvar itemType = this.state.itemType;\n\t\tvar currentCollectionKey = Zotero.state.getUrlVar('collectionKey');\n\t\tvar title = reactInstance.state.title;\n\t\tif(title == \"\"){\n\t\t\ttitle = \"Untitled\";\n\t\t}\n\t\t\n\t\tvar item = new Zotero.Item();\n\t\titem.initEmpty(itemType).then(function(){\n\t\t\titem.associateWithLibrary(library);\n\t\t\titem.set('title', title);\n\t\t\tif(currentCollectionKey){\n\t\t\t\titem.addToCollection(currentCollectionKey);\n\t\t\t}\n\t\t\treturn Zotero.ui.saveItem(item);\n\t\t}).then(function(responses){\n\t\t\tvar itemKey = item.get('key');\n\t\t\tZotero.state.setUrlVar('itemKey', itemKey);\n\t\t\tZotero.state.pushState();\n\t\t\tlibrary.trigger(\"displayedItemsChanged\");\n\t\t\treactInstance.closeDialog();\n\t\t}).catch(function(error){\n\t\t\tZotero.error(error);\n\t\t\tZotero.ui.jsNotificationMessage(\"There was an error creating the item.\", \"error\");\n\t\t\treactInstance.closeDialog();\n\t\t});\n\t},\n\topenDialog: function() {\n\t\tthis.refs.modal.open();\n\t},\n\tcloseDialog: function(evt) {\n\t\tthis.refs.modal.close();\n\t},\n\trender: function() {\n\t\treturn (\n\t\t\t<BootstrapModalWrapper ref=\"modal\">\n\t\t\t\t<div id=\"create-item-dialog\" className=\"create-item-dialog\" role=\"dialog\" title=\"Create Item\" data-keyboard=\"true\">\n\t\t\t\t\t<div  className=\"modal-dialog\">\n\t\t\t\t\t\t<div className=\"modal-content\">\n\t\t\t\t\t\t\t<div className=\"modal-header\">\n\t\t\t\t\t\t\t\t<button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\"></button>\n\t\t\t\t\t\t\t\t<h3>Create Item</h3>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"new-item-div modal-body\" data-role=\"content\">\n\t\t\t\t\t\t\t\t<form onSubmit={this.createItem} method=\"POST\"> \n\t\t\t\t\t\t\t\t\t<div data-role=\"fieldcontain\">\n\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"new-item-title-input\">Title</label>\n\t\t\t\t\t\t\t\t\t\t<input onChange={this.handleTitleChange} id=\"new-item-title-input\" className=\"new-item-title-input form-control\" type=\"text\" />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"modal-footer\">\n\t\t\t\t\t\t\t\t<button className=\"btn\" data-dismiss=\"modal\" aria-hidden=\"true\">Close</button>\n\t\t\t\t\t\t\t\t<button onClick={this.createItem} className=\"btn btn-primary createButton\">Create</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</BootstrapModalWrapper>\n\t\t);\n\t}\n});\n","Zotero.ui.widgets.reactdeleteCollectionDialog = {};\n\nZotero.ui.widgets.reactdeleteCollectionDialog.init = function(el){\n\tZ.debug(\"deletecollectionsdialog widget init\", 3);\n\tvar library = Zotero.ui.getAssociatedLibrary(el);\n\tvar reactInstance = ReactDOM.render(\n\t\t<DeleteCollectionDialog library={library} />,\n\t\tdocument.getElementById('delete-collection-dialog')\n\t);\n};\n\nvar DeleteCollectionDialog = React.createClass({\n\tcomponentWillMount: function() {\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\n\t\tlibrary.listen(\"deleteCollectionDialog\", function(){\n\t\t\treactInstance.setState({collectionKey:Zotero.state.getUrlVar(\"collectionKey\")});\n\t\t\treactInstance.openDialog();\n\t\t});\n\t},\n\tgetInitialState: function() {\n\t\treturn {\n\t\t\tcollectionKey: null,\n\t\t}\n\t},\n\thandleCollectionChange: function(evt) {\n\t\tthis.setState({'parentCollection': evt.target.value});\n\t},\n\tdeleteCollection: function() {\n\t\tZ.debug(\"DeleteCollectionDialog.deleteCollection\", 3);\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\tvar collection = library.collections.getCollection(this.state.collectionKey);\n\t\tif(!collection){\n\t\t\tZotero.ui.jsNotificationMessage(\"Selected collection not found\", 'error');\n\t\t\treturn false;\n\t\t}\n\t\tcollection.remove()\n\t\t.then(function(){\n\t\t\tdelete Zotero.state.pathVars['collectionKey'];\n\t\t\tlibrary.collections.dirty = true;\n\t\t\tlibrary.collections.initSecondaryData();\n\t\t\tZotero.state.pushState();\n\t\t\tZotero.ui.jsNotificationMessage(collection.get('title') + \" removed\", 'confirm');\n\t\t\treactInstance.closeDialog();\n\t\t}).catch(Zotero.catchPromiseError);\n\t\treturn false;\n\t},\n\topenDialog: function() {\n\t\tif(!this.state.collectionKey){\n\t\t\tZ.error(\"DeleteCollectionDialog opened with no collectionKey\");\n\t\t}\n\t\tthis.refs.modal.open();\n\t},\n\tcloseDialog: function(evt) {\n\t\tthis.refs.modal.close();\n\t},\n\trender: function() {\n\t\tvar library = this.props.library;\n\t\tvar collection = library.collections.getCollection(this.state.collectionKey);\n\t\tif(!collection){\n\t\t\treturn null;\n\t\t}\n\t\t\n\t\treturn (\n\t\t\t<BootstrapModalWrapper ref=\"modal\">\n\t\t\t\t<div id=\"delete-collection-dialog\" className=\"delete-collection-dialog\" role=\"dialog\" title=\"Delete Collection\" data-keyboard=\"true\">\n\t\t\t\t\t<div  className=\"modal-dialog\">\n\t\t\t\t\t\t<div className=\"modal-content\">\n\t\t\t\t\t\t\t<div className=\"modal-header\">\n\t\t\t\t\t\t\t\t<button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\"></button>\n\t\t\t\t\t\t\t\t<h3>Delete Collection</h3>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"delete-collection-div modal-body\">\n\t\t\t\t\t\t\t\t<p>Really delete collection \"{collection.get('title')}\"?</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"modal-footer\">\n\t\t\t\t\t\t\t\t<button className=\"btn\" data-dismiss=\"modal\" aria-hidden=\"true\">Close</button>\n\t\t\t\t\t\t\t\t<button onClick={this.deleteCollection} className=\"btn btn-primary deleteButton\">Delete</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</BootstrapModalWrapper>\n\t\t);\n\t}\n});\n","Zotero.ui.widgets.reactexportItemsDialog = {};\n\nZotero.ui.widgets.reactexportItemsDialog.init = function(el){\n\tZ.debug(\"exportItemDialog widget init\", 3);\n\tvar library = Zotero.ui.getAssociatedLibrary(el);\n\tvar reactInstance = ReactDOM.render(\n\t\t<ExportItemsDialog library={library} />,\n\t\tdocument.getElementById('export-dialog')\n\t);\n};\n\nvar ExportItemsDialog = React.createClass({\n\tcomponentWillMount: function() {\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\n\t\tlibrary.listen(\"exportItemsDialog\", function(){\n\t\t\tZ.debug(\"opening export dialog\");\n\t\t\treactInstance.openDialog();\n\t\t}, {});\n\t\tlibrary.listen(\"displayedItemsChanged\", function(){\n\t\t\treactInstance.forceUpdate();\n\t\t}, {});\n\t},\n\tgetInitialState: function() {\n\t\treturn {\n\t\t};\n\t},\n\topenDialog: function() {\n\t\tthis.refs.modal.open();\n\t},\n\tcloseDialog: function(evt) {\n\t\tthis.refs.modal.close();\n\t},\n\trender: function() {\n\t\tvar library = this.props.library;\n\t\tvar urlconfig = Zotero.ui.getItemsConfig(library);\n\t\tvar exportUrls = Zotero.url.exportUrls(urlconfig);\n\t\t\n\t\tvar exportNodes = Object.keys(exportUrls).map(function(key){\n\t\t\tvar exportUrl = exportUrls[key];\n\t\t\treturn (\n\t\t\t\t<li key={key}>\n\t\t\t\t\t<a href={exportUrl} target=\"_blank\" className=\"export-link\" title={key} data-exportformat={key}>{Zotero.config.exportFormatsMap[key]}</a>\n\t\t\t\t</li>\n\t\t\t);\n\t\t});\n\t\t\n\t\treturn (\n\t\t\t<BootstrapModalWrapper ref=\"modal\">\n\t\t\t\t<div id=\"export-items-dialog\" className=\"export-items-dialog\" role=\"dialog\" title=\"Export\" data-keyboard=\"true\">\n\t\t\t\t\t<div  className=\"modal-dialog\">\n\t\t\t\t\t\t<div className=\"modal-content\">\n\t\t\t\t\t\t\t<div className=\"modal-header\">\n\t\t\t\t\t\t\t\t<button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\"></button>\n\t\t\t\t\t\t\t\t<h3>Export</h3>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"modal-body\" data-role=\"content\">\n\t\t\t\t\t\t\t\t<div className=\"export-list\">\n\t\t\t\t\t\t\t\t\t<ul id=\"export-formats-ul\">\n\t\t\t\t\t\t\t\t\t\t{exportNodes}\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"modal-footer\">\n\t\t\t\t\t\t\t\t<button className=\"btn btn-default\" data-dismiss=\"modal\" aria-hidden=\"true\">Close</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</BootstrapModalWrapper>\n\t\t);\n\t}\n});\n\n","var FeedLink = React.createClass({\n\trender: function() {\n\t\tvar library = this.props.library;\n\t\tvar urlconfig = Zotero.ui.getItemsConfig(library);\n\t\tvar requestUrl = Zotero.ajax.apiRequestUrl(urlconfig) + Zotero.ajax.apiQueryString(urlconfig, false);\n\t\tvar feedUrl = requestUrl.replace(Zotero.config.baseApiUrl, Zotero.config.baseFeedUrl);\n\t\tvar newkeyurl = Zotero.url.requestReadApiKeyUrl(library.libraryType, library.libraryID, feedUrl);\n\t\tvar feedHref;\n\t\tif(!Zotero.config.librarySettings.publish){\n\t\t\tfeedHref = newkeyurl;\n\t\t} else {\n\t\t\tfeedHref = feedUrl;\n\t\t}\n\n\t\treturn (\n\t\t\t<p>\n\t\t\t\t<a href={feedHref} type=\"application/atom+xml\" rel=\"alternate\" className=\"feed-link\">\n\t\t\t\t\t<span className=\"sprite-icon sprite-feed\"></span>Subscribe to this feed\n\t\t\t\t</a>\n\t\t\t</p>\n\t\t);\n\t}\n});","Zotero.ui.widgets.reactfilterGuide = {};\n\nZotero.ui.widgets.reactfilterGuide.init = function(el){\n\tZ.debug('widgets.filterGuide.init', 3);\n\tvar library = Zotero.ui.getAssociatedLibrary(el);\n\tvar reactInstance = ReactDOM.render(\n\t\t<FilterGuide library={library} />,\n\t\tdocument.getElementById('filter-guide')\n\t);\n};\n\nvar FilterGuide = React.createClass({\n\tcomponentWillMount: function() {\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\n\t\tlibrary.listen(\"displayedItemsChanged\", reactInstance.refreshFilters, {});\n\t\tlibrary.listen(\"displayedItemChanged\", reactInstance.refreshFilters, {});\n\t\tlibrary.listen(\"updateFilterGuide\", reactInstance.refreshFilters, {});\n\t\tlibrary.listen(\"selectedCollectionChanged\", reactInstance.refreshFilters, {});\n\t\tlibrary.listen(\"cachedDataLoaded\", reactInstance.refreshFilters, {});\n\t\tlibrary.listen(\"libraryCollectionsUpdated\", reactInstance.refreshFilters, {});\n\t},\n\tgetInitialState: function() {\n\t\treturn {\n\t\t\tcollectionKey: \"\",\n\t\t\ttags: [],\n\t\t\tquery: \"\"\n\t\t};\n\t},\n\trefreshFilters: function(evt){\n\t\tvar library = this.props.library;\n\t\tvar displayConfig = Zotero.ui.getItemsConfig(library);\n\t\tthis.setState({\n\t\t\tcollectionKey: displayConfig['collectionKey'],\n\t\t\ttags: displayConfig['tag'],\n\t\t\tquery: displayConfig['q']\n\t\t});\n\t},\n\tclearFilter: function(evt){\n\t\tevt.preventDefault();\n\t\tZ.debug('widgets.filterGuide.clearFilter', 3);\n\t\tvar library = this.props.library;\n\t\tvar target = J(evt.currentTarget);\n\t\tvar collectionKey = target.data('collectionkey');\n\t\tvar tag = target.data('tag');\n\t\tvar query = target.data('query');\n\t\tif(collectionKey){\n\t\t\tZotero.state.unsetUrlVar('collectionKey');\n\t\t\tthis.setState({collectionKey:\"\"});\n\t\t}\n\t\tif(tag){\n\t\t\tZotero.state.toggleTag(tag);\n\t\t\tthis.setState({tags:Zotero.state.getUrlVar('tag')});\n\t\t}\n\t\tif(query){\n\t\t\tlibrary.trigger('clearLibraryQuery');\n\t\t\tthis.setState({query:\"\"});\n\t\t\treturn;\n\t\t}\n\t\tZotero.state.pushState();\n\t},\n\trender: function() {\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\tvar collectionNodes = null;\n\t\tvar tagNodes = null;\n\t\tvar searchNodes = null;\n\n\t\tif(this.state.collectionKey != \"\"){\n\t\t\tvar collection = library.collections.getCollection(this.state.collectionKey);\n\t\t\tif(collection){\n\t\t\t\tcollectionNodes = (\n\t\t\t\t\t<li key={\"collection_\" + reactInstance.state.collectionKey} className=\"filterguide-entry\">\n\t\t\t\t\t\t<a onClick={reactInstance.clearFilter} href=\"#\" data-collectionkey={reactInstance.state.collectionKey}>\n\t\t\t\t\t\t\t<span className=\"glyphicons fonticon glyphicons-folder-open\"></span>\n\t\t\t\t\t\t\t<span className=\"filterguide-label\">{collection.get('name')}</span>\n\t\t\t\t\t\t\t<span className=\"glyphicons fonticon glyphicons-remove\"></span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar tags = this.state.tags;\n\t\tif(typeof tags == 'string'){\n\t\t\ttags = [tags];\n\t\t}\n\t\tif(tags){\n\t\t\ttagNodes = tags.map(function(tag){\n\t\t\t\treturn (\n\t\t\t\t\t<li key={\"tag_\" + tag} className=\"filterguide-entry\">\n\t\t\t\t\t\t<a onClick={reactInstance.clearFilter} href=\"#\" data-tag={tag}>\n\t\t\t\t\t\t\t<span className=\"glyphicons fonticon glyphicons-tag\"></span>\n\t\t\t\t\t\t\t<span className=\"filterguide-label\">{tag}</span>\n\t\t\t\t\t\t\t<span className=\"glyphicons fonticon glyphicons-remove\"></span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t\tif(this.state.query){\n\t\t\tsearchNodes = (\n\t\t\t\t<li key={\"query_\"+reactInstance.state.query} className=\"filterguide-entry\">\n\t\t\t\t\t<a onClick={reactInstance.clearFilter} href=\"#\" data-query={reactInstance.state.query}>\n\t\t\t\t\t\t<span className=\"glyphicons fonticon glyphicons-search\"></span>\n\t\t\t\t\t\t<span className=\"filterguide-label\">{reactInstance.state.query}</span>\n\t\t\t\t\t\t<span className=\"glyphicons fonticon glyphicons-remove\"></span>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div id=\"filter-guide\" className=\"filter-guide col-12\">\n\t\t\t\t<ul className=\"filterguide-list\">\n\t\t\t\t\t{collectionNodes}\n\t\t\t\t\t{tagNodes}\n\t\t\t\t\t{searchNodes}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t);\n\t}\n});\n","Zotero.ui.widgets.inviteToGroup = {};\n\nZotero.ui.widgets.inviteToGroup.init = function(el){\n\tZ.debug(\"Zotero.ui.widgets.inviteToGroup\");\n\t//var library = Zotero.ui.getAssociatedLibrary(el);\n\tvar reactInstance = ReactDOM.render(\n\t\t<InviteButton />,\n\t\tdocument.getElementById('invite-to-group-div')\n\t);\n};\n\nvar InviteButton = React.createClass({\n\thandleClick: function(evt){\n\t\tvar invDialog = ReactDOM.render(\n\t\t\t<InviteDialog />,\n\t\t\tdocument.getElementById('invite-to-group-dialog')\n\t\t);\n\t\tinvDialog.openDialog();\n\t},\n\trender: function() {\n\t\tvar reactInstance = this;\n\t\tif(!Zotero.config.loggedIn){\n\t\t\treturn null;\n\t\t}\n\t\tif(zoteroData.profileUserID == Zotero.config.loggedInUserID) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<button className=\"btn btn-primary\" onClick={reactInstance.handleClick}>Invite to group</button>\n\t\t);\n\t}\n});\n\nvar InviteDialog = React.createClass({\n\tcomponentWillMount: function() {\n\t\tvar reactInstance = this;\n\t\tvar groups = new Zotero.Groups();\n\t\tif(Zotero.config.loggedIn && Zotero.config.loggedInUserID && (zoteroData.profileUserID != Zotero.config.loggedInUserID)){\n\t\t\treactInstance.setState({loading:true});\n\t\t\tvar groupsPromise = groups.fetchUserGroups(Zotero.config.loggedInUserID)\n\t\t\t.then(function(response){\n\t\t\t\tvar groups = response.fetchedGroups;\n\t\t\t\treactInstance.setState({groups:groups, loading:false});\n\t\t\t}).catch(Zotero.catchPromiseError);\n\t\t}\n\t},\n\tgetInitialState: function() {\n\t\treturn {\n\t\t\tgroups: [],\n\t\t\tloading:false\n\t\t};\n\t},\n\topenDialog: function() {\n\t\t//this.setState({open:true});\n\t\tthis.refs.modal.open();\n\t},\n\tcloseDialog: function(evt) {\n\t\t//this.setState({open:false});\n\t\tthis.refs.modal.close();\n\t},\n\tinviteToGroup: function(evt) {\n\t\tvar reactInstance = this;\n\t\tZ.debug(evt);\n\t\tvar groupID = J(evt.currentTarget).data('groupid');\n\t\t\n\t\tJ.ajax({\n\t\t\t'type': 'POST',\n\t\t\t'url': \"/groups/inviteuser\",\n\t\t\t'data': {\n\t\t\t\t'groupID': groupID,\n\t\t\t\t'userID': zoteroData.profileUserID\n\t\t\t},\n\t\t\t'processData': true\n\t\t}).then(function(data){\n\t\t\tZ.debug(\"got response from inviteuser\");\n            if(data == 'true'){\n                Zotero.ui.jsNotificationMessage(\"User has been invited\", 'success');\n            }\n\t\t});\n\t},\n\trender: function() {\n\t\tvar reactInstance = this;\n\t\tvar invitedGroupIDs = zoteroData.invitedGroupIDs;\n\n\t\tvar groupNodes = reactInstance.state.groups.map(function(group){\n\t\t\tif(invitedGroupIDs.indexOf(group.get('id').toString() ) != -1){\n\t\t\t\treturn (\n\t\t\t\t\t<li key={group.get('id')}>\n\t\t\t\t\t\tInvitation pending to '{group.get('name')}'\n\t\t\t\t\t</li>\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\treturn (\n\t\t\t\t\t<li key={group.get('id')}>\n\t\t\t\t\t\t<button className=\"btn btn-default\" onClick={reactInstance.inviteToGroup} data-groupid={group.get('id')}>{group.get('name')}</button>\n\t\t\t\t\t</li>\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\n\t\treturn (\n\t\t\t<BootstrapModalWrapper ref=\"modal\">\n\t\t\t\t<div id=\"invite-user-dialog\" className=\"invite-user-dialog\" role=\"dialog\" title=\"Invite User\" data-keyboard=\"true\">\n\t\t\t\t\t<div  className=\"modal-dialog\">\n\t\t\t\t\t\t<div className=\"modal-content\">\n\t\t\t\t\t\t\t<div className=\"modal-header\">\n\t\t\t\t\t\t\t\t<button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\"></button>\n\t\t\t\t\t\t\t\t<h3>Invite User</h3>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"modal-body\" data-role=\"content\">\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t{groupNodes}\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</BootstrapModalWrapper>\n\t\t);\n\t}\n});\n","Zotero.ui.widgets.reactitem = {};\n//TODO: trigger showChildren with an extra itemID filter so quick clicks back and forth\n//between items don't overwrite with the wrong children?\nZotero.ui.widgets.reactitem.init = function(el){\n\tvar library = Zotero.ui.getAssociatedLibrary(el);\n\t\n\tvar reactInstance = ReactDOM.render(\n\t\t<ItemDetails library={library} />,\n\t\tdocument.getElementById('item-widget-div')\n\t);\n};\n\nZotero.ui.editMatches = function(props, edit) {\n\tif(props === null || edit === null){\n\t\treturn false;\n\t}\n\tif(edit.field != props.field) {\n\t\treturn false;\n\t}\n\t//field is the same, make sure index matches if set\n\tif(edit.creatorIndex != props.creatorIndex) {\n\t\t//Z.debug(\"creatorIndex mismatch\");\n\t\treturn false;\n\t}\n\tif(props.tagIndex != edit.tagIndex) {\n\t\t//Z.debug(\"tagIndex mismatch\");\n\t\treturn false;\n\t}\n\treturn true;\n};\n\nZotero.ui.genericDisplayedFields = function(item) {\n\tvar genericDisplayedFields = Object.keys(item.apiObj.data).filter(function(field){\n\t\tif(item.hideFields.indexOf(field) != -1) {\n\t\t\treturn false;\n\t\t}\n\t\tif(!item.fieldMap.hasOwnProperty(field)){\n\t\t\treturn false;\n\t\t}\n\t\tif(field == \"title\" || field == \"creators\" || field == \"itemType\"){\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t});\n\treturn genericDisplayedFields;\n};\n\nZotero.ui.widgets.reactitem.editFields = function(item) {\n\tvar fields = [\n\t\t{field:\"itemType\"},\n\t\t{field:\"title\"}\n\t];\n\tvar creators = item.get('creators');\n\tcreators.forEach(function(k, i) {\n\t\tfields.push({field:\"creatorType\", creatorIndex:i});\n\t\tif(k.name){\n\t\t\tfields.push({field:\"name\", creatorIndex:i});\n\t\t} else {\n\t\t\tfields.push({field:\"lastName\", creatorIndex:i});\n\t\t\tfields.push({field:\"firstName\", creatorIndex:i});\n\t\t}\n\t});\n\t\n\tvar genericFields = Zotero.ui.genericDisplayedFields(item);\n\tgenericFields.forEach(function(k){\n\t\tfields.push({field:k});\n\t});\n\treturn fields;\n};\n\n//take an edit object and return the edit object selecting the next field of the item\nZotero.ui.widgets.reactitem.nextEditField = function(item, edit) {\n\tif(!edit || !edit.field){\n\t\treturn null;\n\t}\n\tvar editFields = Zotero.ui.widgets.reactitem.editFields(item);\n\tvar curFieldIndex;\n\tfor(var i = 0; i < editFields.length; i++){\n\t\tif(editFields[i].field == edit.field){\n\t\t\tif(editFields[i].creatorIndex == edit.creatorIndex){\n\t\t\t\tcurFieldIndex = i;\n\t\t\t}\n\t\t}\n\t}\n\tif(curFieldIndex == editFields.length){\n\t\treturn editFields[0];\n\t} else {\n\t\treturn editFields[i+1];\n\t}\n};\n\nvar CreatorRow = React.createClass({\n\tgetDefaultProps: function() {\n\t\treturn {\n\t\t\titem:null,\n\t\t\tlibrary:null,\n\t\t\tcreatorIndex: 0,\n\t\t\tedit: null\n\t\t};\n\t},\n\trender: function() {\n\t\t//Z.debug(\"CreatorRow render\");\n\t\tif(this.props.item == null){\n\t\t\treturn null;\n\t\t}\n\t\tvar item = this.props.item;\n\t\tvar creator = item.get('creators')[this.props.creatorIndex];\n\t\tvar nameSpans = null;\n\t\tif(creator.name && creator.name != \"\") {\n\t\t\tnameSpans = (\n\t\t\t\t<ItemField {... this.props} key=\"name\" field=\"name\" />\n\t\t\t);\n\t\t} else {\n\t\t\tnameSpans = [\n\t\t\t\t(<ItemField {... this.props} key=\"lastName\" field=\"lastName\" />),\n\t\t\t\t\", \",\n\t\t\t\t(<ItemField {... this.props} key=\"firstName\" field=\"firstName\" />)\n\t\t\t];\n\t\t}\n\t\treturn (\n\t\t\t<tr className=\"creator-row\" >\n\t\t\t\t<th>\n\t\t\t\t\t<ItemField {... this.props} field=\"creatorType\" />\n\t\t\t\t</th>\n\t\t\t\t<td>\n\t\t\t\t\t{nameSpans}\n\t\t\t\t\t<div className=\"btn-toolbar\" role=\"toolbar\">\n\t\t\t\t\t\t<ToggleCreatorFieldButton {...this.props} />\n\t\t\t\t\t\t<AddRemoveCreatorFieldButtons {...this.props} />\n\t\t\t\t\t</div>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t);\n\t}\n});\n\nvar ToggleCreatorFieldButton = React.createClass({\n\trender: function() {\n\t\t//Z.debug(\"ToggleCreatorFieldButton render\");\n\t\treturn (\n\t\t\t<div className=\"btn-group\">\n\t\t\t\t<button type=\"button\"\n\t\t\t\t\tclassName=\"switch-two-field-creator-link btn btn-default\"\n\t\t\t\t\ttitle=\"Toggle single field creator\"\n\t\t\t\t\tdata-itemkey={this.props.item.get('key')}\n\t\t\t\t\tdata-creatorindex={this.props.creatorIndex}\n\t\t\t\t\tonClick={this.switchCreatorFields}>\n\t\t\t\t\t<span className=\"fonticon glyphicons glyphicons-unchecked\"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t);\n\t},\n\tswitchCreatorFields: function(evt) {\n\t\t//Z.debug(\"CreatorRow switchCreatorFields\");\n\t\tvar creatorIndex = this.props.creatorIndex;\n\t\tvar item = this.props.item;\n\t\tvar creators = item.get('creators');\n\t\tvar creator = creators[creatorIndex];\n\n\t\t//split a single name creator into first/last, or combine first/last\n\t\t//into a single name\n\t\tif(creator.name !== undefined){\n\t\t\tvar split = creator.name.split(' ');\n\t\t\tif(split.length > 1){\n\t\t\t\tcreator.lastName = split.splice(-1, 1)[0];\n\t\t\t\tcreator.firstName = split.join(' ');\n\t\t\t}\n\t\t\telse{\n\t\t\t\tcreator.lastName = creator.name;\n\t\t\t\tcreator.firstName = '';\n\t\t\t}\n\t\t\tdelete creator.name;\n\t\t} else {\n\t\t\tif(creator.firstName === \"\" && creator.lastName === \"\") {\n\t\t\t\tcreator.name = \"\";\n\t\t\t} else {\n\t\t\t\tcreator.name = creator.firstName + ' ' + creator.lastName;\n\t\t\t}\n\t\t\tdelete creator.firstName;\n\t\t\tdelete creator.lastName;\n\t\t}\n\n\t\tcreators[creatorIndex] = creator;\n\t\tZotero.ui.saveItem(item);\n\t\tthis.props.parentItemDetailsInstance.setState({item:item});\n\t}\n});\n\nvar AddRemoveCreatorFieldButtons = React.createClass({\n\trender: function() {\n\t\t//Z.debug(\"AddRemoveCreatorFieldButtons render\");\n\t\treturn (\n\t\t\t<div className=\"btn-group\">\n\t\t\t\t<button type=\"button\"\n\t\t\t\t\tclassName=\"btn btn-default\"\n\t\t\t\t\tdata-creatorindex={this.props.creatorIndex}\n\t\t\t\t\tonClick={this.removeCreator}>\n\t\t\t\t\t<span className=\"fonticon glyphicons glyphicons-minus\"></span>\n\t\t\t\t</button>\n\t\t\t\t<button type=\"button\"\n\t\t\t\t\tclassName=\"btn btn-default\"\n\t\t\t\t\tdata-creatorindex={this.props.creatorIndex}\n\t\t\t\t\tonClick={this.addCreator}>\n\t\t\t\t\t<span className=\"fonticon glyphicons glyphicons-plus\"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t);\n\t},\n\taddCreator: function(evt) {\n\t\tZ.debug(\"addCreator\");\n\t\tvar item = this.props.item;\n\t\tvar creatorIndex = this.props.creatorIndex;\n\t\tvar creators = item.get('creators');\n\t\tvar newCreator = {creatorType:\"author\", firstName:\"\", lastName:\"\"};\n\t\tcreators.splice(creatorIndex + 1, 0, newCreator);\n\t\tthis.props.parentItemDetailsInstance.setState({\n\t\t\titem:item,\n\t\t\tedit: {\n\t\t\t\tfield:\"lastName\",\n\t\t\t\tcreatorIndex:creatorIndex+1\n\t\t\t}\n\t\t});\n\t},\n\tremoveCreator: function(evt) {\n\t\tZ.debug(\"removeCreator\");\n\t\tvar creatorIndex = this.props.creatorIndex;\n\t\tvar item = this.props.item;\n\t\tvar creators = item.get('creators');\n\t\tcreators.splice(creatorIndex, 1);\n\t\tZotero.ui.saveItem(item);\n\t\tthis.props.parentItemDetailsInstance.setState({item:item});\n\t}\n});\n\nvar ItemNavTabs = React.createClass({\n\tgetDefaultProps: function() {\n\t\treturn {\n\t\t\titem: null\n\t\t};\n\t},\n\trender: function() {\n\t\tZ.debug(\"ItemNavTabs render\");\n\t\tif(this.props.item == null){\n\t\t\treturn null;\n\t\t}\n\t\tif(!this.props.item.isSupplementaryItem()){\n\t\t\treturn (\n\t\t\t\t<ul className=\"nav nav-tabs\" role=\"tablist\">\n\t\t\t\t\t<li role=\"presentation\" className=\"active\"><a href=\"#item-info-panel\" aria-controls=\"item-info-panel\" role=\"tab\" data-toggle=\"tab\">Info</a></li>\n\t\t\t\t\t<li role=\"presentation\"><a href=\"#item-children-panel\" aria-controls=\"item-children-panel\" role=\"tab\" data-toggle=\"tab\">Children</a></li>\n\t\t\t\t\t<li role=\"presentation\"><a href=\"#item-tags-panel\" aria-controls=\"item-tags-panel\" role=\"tab\" data-toggle=\"tab\">Tags</a></li>\n\t\t\t\t</ul>\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t}\n});\n\nvar ItemFieldRow = React.createClass({\n\tgetDefaultProps: function(){\n\t\treturn {\n\t\t\titem:null,\n\t\t\tedit:null\n\t\t};\n\t},\n\trender: function() {\n\t\t//Z.debug(\"ItemFieldRow render\");\n\t\tvar item = this.props.item;\n\t\tvar field = this.props.field;\n\t\tvar placeholderOrValue = (\n\t\t\t<ItemField item={item} field={field} edit={this.props.edit} />\n\t\t);\n\t\t\n\t\tif(field == 'url'){\n\t\t\tvar url = item.get('url');\n\t\t\treturn (\n\t\t\t\t<tr>\n\t\t\t\t\t<th><a rel='nofollow' href={url}>{item.fieldMap[field]}</a></th>\n\t\t\t\t\t<td className={field}>\n\t\t\t\t\t\t{placeholderOrValue}\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t);\n\t\t} else if(field == 'DOI') {\n\t\t\tvar doi = item.get('DOI');\n\t\t\treturn (\n\t\t\t\t<tr>\n\t\t\t\t\t<th><a rel='nofollow' href={'http://dx.doi.org/' + doi}>{item.fieldMap[field]}</a></th>\n\t\t\t\t\t<td className={field}>\n\t\t\t\t\t\t{placeholderOrValue}\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t);\n\t\t} else if(Zotero.config.richTextFields[field]) {\n\t\t\treturn (\n\t\t\t\t<tr>\n\t\t\t\t\t<th>{item.fieldMap[field]}}</th>\n\t\t\t\t\t<td className={field}>\n\t\t\t\t\t\t{placeholderOrValue}\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t);\n\t\t} else {\n\t\t\treturn (\n\t\t\t\t<tr>\n\t\t\t\t\t<th>{(item.fieldMap[field] || field)}</th>\n\t\t\t\t\t<td className={field}>\n\t\t\t\t\t\t{placeholderOrValue}\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t);\n\t\t}\n\t}\n});\n\n//set onChange\nvar ItemField = React.createClass({\n\tgetDefaultProps: function() {\n\t\treturn {\n\t\t\titem:null,\n\t\t\tfield:null,\n\t\t\tedit:null,\n\t\t\tcreatorIndex: null,\n\t\t\ttagIndex: null\n\t\t};\n\t},\n\thandleChange: function(evt) {\n\t\tZ.debug(\"change on ItemField\");\n\t\tZ.debug(evt);\n\t\t//set field to new value\n\t\tvar item = this.props.item;\n\t\tswitch(this.props.field) {\n\t\t\tcase \"creatorType\":\n\t\t\tcase \"name\":\n\t\t\tcase \"firstName\":\n\t\t\tcase \"lastName\":\n\t\t\t\tvar creators = item.get('creators');\n\t\t\t\tvar creator = creators[this.props.creatorIndex];\n\t\t\t\tcreator[this.props.field] = evt.target.value;\n\t\t\t\tbreak;\n\t\t\tcase \"tag\":\n\t\t\t\tvar tags = item.get('tags');\n\t\t\t\tvar tag = tags[this.props.tagIndex];\n\t\t\t\ttag.tag = evt.target.value;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\titem.set(this.props.field, evt.target.value);\n\t\t}\n\t\tthis.props.parentItemDetailsInstance.setState({item:item});\n\t},\n\thandleBlur: function(evt) {\n\t\tZ.debug(\"blur on ItemField\");\n\t\t//save item, move edit to next field\n\t\tZ.debug(\"handleBlur\");\n\t\tthis.handleChange(evt);\n\t\tthis.props.parentItemDetailsInstance.setState({edit:null});\n\t\tZotero.ui.saveItem(this.props.item);\n\t},\n\thandleFocus: function(evt) {\n\t\tZ.debug(\"focus on ItemField\");\n\t\tvar field = J(evt.currentTarget).data('field');\n\t\tvar creatorIndex = J(evt.target).data('creatorindex');\n\t\tvar tagIndex = J(evt.target).data('tagindex');\n\t\tvar edit = {\n\t\t\tfield: field,\n\t\t\tcreatorIndex: creatorIndex,\n\t\t\ttagIndex: tagIndex\n\t\t};\n\t\tZ.debug(edit);\n\t\tthis.props.parentItemDetailsInstance.setState({\n\t\t\tedit: edit\n\t\t});\n\t},\n\tcheckKey: function(evt) {\n\t\tZ.debug(\"ItemField checkKey\");\n\t\tevt.stopPropagation();\n\t\tif (evt.keyCode === Zotero.ui.keyCode.ENTER){\n\t\t\t//var nextEdit = Zotero.ui.widgets.reactitem.nextEditField(this.props.item, this.props.edit);\n\t\t\tJ(evt.target).blur();\n\t\t}\n\t},\n\trender: function(){\n\t\t//Z.debug(\"ItemField render\");\n\t\tvar item = this.props.item;\n\t\tvar field = this.props.field;\n\t\tvar creatorField = false;\n\t\tvar tagField = false;\n\t\tvar value;\n\t\tswitch(field){\n\t\t\tcase \"creatorType\":\n\t\t\tcase \"name\":\n\t\t\tcase \"firstName\":\n\t\t\tcase \"lastName\":\n\t\t\t\tcreatorField = true;\n\t\t\t\tvar creatorIndex = this.props.creatorIndex;\n\t\t\t\tvar creator = item.get('creators')[creatorIndex];\n\t\t\t\tvalue = creator[field];\n\t\t\t\tvar creatorPlaceHolders = {\n\t\t\t\t\t'name': '(name)',\n\t\t\t\t\t'lastName': '(Last Name)',\n\t\t\t\t\t'firstName': '(First Name)'\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tbreak;\n\t\t\tcase \"tag\":\n\t\t\t\ttagField = true;\n\t\t\t\tvar tagIndex = this.props.tagIndex;\n\t\t\t\tvar tag = item.get('tags')[tagIndex];\n\t\t\t\tvalue = tag.tag;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tvalue = item.get(field);\n\t\t}\n\n\t\tvar editThisField = Zotero.ui.editMatches(this.props, this.props.edit);\n\t\tif(!editThisField){\n\t\t\tvar spanProps = {\n\t\t\t\tclassName: \"editable-item-field\",\n\t\t\t\ttabIndex: 0,\n\t\t\t\t\"data-field\": field,\n\t\t\t\tonFocus: this.handleFocus\n\t\t\t};\n\n\t\t\tvar p = null;\n\t\t\tif(creatorField){\n\t\t\t\tspanProps.className += \" creator-field\";\n\t\t\t\tspanProps['data-creatorindex'] = this.props.creatorIndex;\n\t\t\t\tp = value == \"\" ? creatorPlaceHolders[field] : value;\n\t\t\t} else if(tagField){\n\t\t\t\tspanProps.className += \" tag-field\";\n\t\t\t\tspanProps['data-tagindex'] = this.props.tagIndex;\n\t\t\t\tp = value;\n\t\t\t} else {\n\t\t\t\tp = value == \"\" ? (<div className=\"empty-field-placeholder\"></div>) : Zotero.ui.formatItemField(field, item);\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<span {...spanProps}>\n\t\t\t\t\t{p}\n\t\t\t\t</span>\n\t\t\t);\n\t\t}\n\t\t\n\t\tvar focusEl = function(el) {\n\t\t\tif (el != null) {\n\t\t\t\tel.focus();\n\t\t\t}\n\t\t};\n\n\t\tvar inputProps = {\n\t\t\tclassName: (\"form-control item-field-control \" + this.props.field),\n\t\t\tname: field,\n\t\t\tdefaultValue: value,\n\t\t\t//onChange: this.handleChange,\n\t\t\tonKeyDown: this.checkKey,\n\t\t\tonBlur: this.handleBlur,\n\t\t\tcreatorindex: this.props.creatorIndex,\n\t\t\ttagindex: this.props.tagIndex,\n\t\t\tref: focusEl\n\t\t};\n\t\tif(creatorField){\n\t\t\tinputProps.placeholder = creatorPlaceHolders[field];\n\t\t}\n\n\t\tswitch(this.props.field) {\n\t\t\tcase null:\n\t\t\t\treturn null;\n\t\t\t\tbreak;\n\t\t\tcase 'itemType':\n\t\t\t\tvar itemTypeOptions = item.itemTypes.map(function(itemType){\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<option key={itemType.itemType}\n\t\t\t\t\t\t\tlabel={itemType.localized}\n\t\t\t\t\t\t\tvalue={itemType.itemType}>\n\t\t\t\t\t\t\t{itemType.localized}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t\treturn (\n\t\t\t\t\t<select {...inputProps}>\n\t\t\t\t\t\t{itemTypeOptions}\n\t\t\t\t\t</select>\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase 'creatorType':\n\t\t\t\tvar creatorTypeOptions = item.creatorTypes[item.get('itemType')].map(function(creatorType){\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<option key={creatorType.creatorType}\n\t\t\t\t\t\t\tlabel={creatorType.localized}\n\t\t\t\t\t\t\tvalue={creatorType.creatorType}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{creatorType.localized}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t\treturn (\n\t\t\t\t\t<select id=\"creatorType\" {...inputProps} data-creatorindex={this.props.creatorIndex}>\n\t\t\t\t\t\t{creatorTypeOptions}\n\t\t\t\t\t</select>\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tif(Zotero.config.largeFields[this.props.field]) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<textarea {...inputProps}></textarea>\n\t\t\t\t\t);\n\t\t\t\t} else if (Zotero.config.richTextFields[this.props.field]) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<textarea {...inputProps} className=\"rte default\"></textarea>\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\t//default single line input field\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<input type='text' {...inputProps} />\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t}\n\t}\n});\n\nvar ItemInfoPanel = React.createClass({\n\tgetDefaultProps: function() {\n\t\treturn {\n\t\t\titem: null,\n\t\t\tloading: false,\n\t\t\tedit:null\n\t\t};\n\t},\n\trender: function() {\n\t\tZ.debug(\"ItemInfoPanel render\");\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\tvar item = this.props.item;\n\t\tZ.debug(\"ItemInfoPanel render: items.totalResults: \" + library.items.totalResults);\n\t\tvar itemCountP = (\n\t\t\t<p className='item-count' hidden={!this.props.libraryItemsLoaded}>\n\t\t\t\t{library.items.totalResults + \" items in this view\"}\n\t\t\t</p>\n\t\t);\n\t\t\n\t\tvar edit = this.props.edit;\n\t\t\n\t\tif(item == null){\n\t\t\treturn (\n\t\t\t\t<div id=\"item-info-panel\" role=\"tabpanel\" className=\"item-details-div tab-pane active\">\n\t\t\t\t\t<LoadingSpinner loading={this.props.loading} />\n\t\t\t\t\t{itemCountP}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\t\n\t\tvar itemKey = item.get('key');\n\t\tvar libraryType = item.owningLibrary.libraryType;\n\t\tvar parentUrl = false;\n\t\tif(item.get(\"parentItem\")) {\n\t\t\tparentUrl = library.websiteUrl({itemKey:item.get(\"parentItem\")});\n\t\t}\n\t\t\n\t\tvar parentLink = parentUrl ? <a href={parentUrl} className=\"item-select-link\" data-itemkey={item.get('parentItem')}>Parent Item</a> : null;\n\t\tvar libraryIDSpan;\n\t\tif(libraryType == \"user\") {\n\t\t\tlibraryIDSpan = <span id=\"libraryUserID\" title={item.apiObj.library.id}></span>;\n\t\t} else {\n\t\t\tlibraryIDSpan = <span id=\"libraryGroupID\" title={item.apiObj.library.id}></span>;\n\t\t}\n\t\t\n\t\t//the Zotero user that created the item, if it's a group library item\n\t\tvar zoteroItemCreatorRow = null;\n\t\tif(libraryType == \"group\") {\n\t\t\tzoteroItemCreatorRow = (\n\t\t\t\t<tr>\n\t\t\t\t\t<th>Added by</th>\n\t\t\t\t\t<td className=\"user-creator\"><a href={item.apiObj.meta.createdByUser.links.alternate.href} className=\"user-link\">{item.apiObj.meta.createdByUser.name}</a></td>\n\t\t\t\t</tr>\n\t\t\t);\n\t\t}\n\t\t\n\t\tvar creatorRows = [];\n\t\tvar creators = item.get('creators');\n\t\tif(creators.length == 0){\n\t\t\tcreators.push({\n\t\t\t\tlastName: \"\",\n\t\t\t\tfirstName: \"\"\n\t\t\t});\n\t\t}\n\t\t\n\t\tif(item.isSupplementaryItem()){\n\t\t\tcreatorRows = null;\n\t\t} else {\n\t\t\tcreatorRows = item.get('creators').map(function(creator, ind) {\n\t\t\t\treturn (\n\t\t\t\t\t<CreatorRow key={ind} library={library} creatorIndex={ind} item={item} edit={edit} />\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t\t\n\t\tvar genericFieldRows = [];\n\t\t//filter out fields we don't want to display or don't want to include as generic\n\t\tvar genericDisplayedFields = Zotero.ui.genericDisplayedFields(item);\n\t\tgenericDisplayedFields.forEach(function(key) {\n\t\t\tgenericFieldRows.push(<ItemFieldRow key={key} {...reactInstance.props} field={key} />);\n\t\t});\n\n\t\tvar typeAndTitle = [\"itemType\", \"title\"].map(function(key){\n\t\t\treturn (\n\t\t\t\t<ItemFieldRow key={key} {...reactInstance.props} field={key} />\n\t\t\t);\n\t\t});\n\n\n\t\treturn (\n\t\t\t<div id=\"item-info-panel\" role=\"tabpanel\" className=\"item-details-div tab-pane active\">\n\t\t\t\t<LoadingSpinner loading={this.props.loading} />\n\t\t\t\t{parentLink}\n\t\t\t\t{libraryIDSpan}\n\t\t\t\t<table className=\"item-info-table table\" data-itemkey={itemKey}>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{zoteroItemCreatorRow}\n\t\t\t\t\t\t{typeAndTitle}\n\t\t\t\t\t\t{creatorRows}\n\t\t\t\t\t\t{genericFieldRows}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t);\n\t}\n});\n\nvar TagListRow = React.createClass({\n\tgetDefaultProps: function(){\n\t\treturn {\n\t\t\ttagIndex:0,\n\t\t\ttag:{tag:\"\"},\n\t\t\titem:null,\n\t\t\tlibrary:null,\n\t\t\tedit:null\n\t\t};\n\t},\n\tremoveTag: function(evt) {\n\t\tvar tag = this.props.tag.tag;\n\t\tvar item = this.props.item;\n\t\tvar tagIndex = this.props.tagIndex;\n\n\t\tvar tags = item.get('tags');\n\t\ttags.splice(tagIndex, 1);\n\t\tZotero.ui.saveItem(item);\n\t\tthis.props.parentItemDetailsInstance.setState({item:item});\n\t},\n\trender: function() {\n\t\t//Z.debug(\"TagListRow render\");\n\t\treturn (\n\t\t\t<div className=\"row item-tag-row\">\n\t\t\t\t<div className=\"col-xs-1\">\n\t\t\t\t\t<span className=\"glyphicons fonticon glyphicons-tag\"></span>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"col-xs-9\">\n\t\t\t\t\t<ItemField {... this.props} field=\"tag\" />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"col-xs-2\">\n\t\t\t\t\t<button type=\"button\" className=\"remove-tag-link btn btn-default\" onClick={this.removeTag} >\n\t\t\t\t\t\t<span className=\"glyphicons fonticon glyphicons-minus\"></span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n});\n\nvar ItemTagsPanel = React.createClass({\n\tgetInitialState: function() {\n\t\treturn {\n\t\t\tnewTagString: \"\"\n\t\t};\n\t},\n\tnewTagChange: function(evt) {\n\t\tthis.setState({newTagString: evt.target.value});\n\t},\n\t//add the new tag to the item and save if keydown is ENTER\n\tcheckKey: function(evt) {\n\t\tZ.debug(\"New tag checkKey\");\n\t\tevt.stopPropagation();\n\t\tif (evt.keyCode === Zotero.ui.keyCode.ENTER){\n\t\t\tZ.debug(evt);\n\t\t\tvar item = this.props.item;\n\t\t\tvar tags = item.get('tags');\n\t\t\ttags.push({\n\t\t\t\ttag: evt.target.value\n\t\t\t});\n\t\t\tZotero.ui.saveItem(item);\n\t\t\tthis.setState({newTagString:\"\"});\n\t\t\tthis.props.parentItemDetailsInstance.setState({item:item});\n\t\t}\n\t},\n\trender: function() {\n\t\tZ.debug(\"ItemTagsPanel render\");\n\t\tvar reactInstance = this;\n\t\tvar item = this.props.item;\n\t\tvar library = this.props.library;\n\t\tif(item == null) {\n\t\t\treturn (\n\t\t\t\t<div id=\"item-tags-panel\" role=\"tabpanel\" className=\"item-tags-div tab-pane\">\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\t\n\t\tvar tagRows = item.apiObj.data.tags.map(function(tag, ind){\n\t\t\treturn (\n\t\t\t\t<TagListRow key={tag.tag} {...reactInstance.props} tag={tag} tagIndex={ind} />\n\t\t\t);\n\t\t});\n\t\t\n\t\treturn (\n\t\t\t<div id=\"item-tags-panel\" role=\"tabpanel\" className=\"item-tags-div tab-pane\">\n\t\t\t\t<p><span className=\"tag-count\">{item.get('tags').length}</span> tags</p>\n\t\t\t\t<button className=\"add-tag-button btn btn-default\">Add Tag</button>\n\t\t\t\t\n\t\t\t\t<div className=\"item-tags-list\">\n\t\t\t\t\t{tagRows}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"add-tag-form form-horizontal\">\n\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t<div className=\"col-xs-1\">\n\t\t\t\t\t\t\t<label htmlFor=\"add-tag-input\"><span className=\"glyphicons fonticon glyphicons-tag\"></span></label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"col-xs-11\">\n\t\t\t\t\t\t\t<input type=\"text\" onKeyDown={this.checkKey} onChange={this.newTagChange} value={this.state.newTagString} id=\"add-tag-input\" className=\"add-tag-input form-control\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n});\n\nvar ItemChildrenPanel = React.createClass({\n\tgetDefaultProps: function() {\n\t\treturn {\n\t\t\tchildItems: []\n\t\t};\n\t},\n\ttriggerUpload: function() {\n\t\tthis.props.library.trigger(\"uploadAttachment\");\n\t},\n\trender: function() {\n\t\tZ.debug(\"ItemChildrenPanel render\");\n\t\tvar childListEntries = this.props.childItems.map(function(item){\n\t\t\tvar title = item.get('title');\n\t\t\tvar href = Zotero.url.itemHref(item);\n\t\t\tvar iconClass = item.itemTypeIconClass();\n\t\t\tvar key = item.get('key');\n\t\t\tif(item.itemType == \"note\"){\n\t\t\t\treturn (\n\t\t\t\t\t<li key={key}>\n\t\t\t\t\t\t<span className={'fonticon barefonticon ' + iconClass}></span>\n\t\t\t\t\t\t<a className='item-select-link' data-itemkey={item.get('key')} href={href} title={title}>{title}</a>\n\t\t\t\t\t</li>\n\t\t\t\t);\n\t\t\t} else if(item.attachmentDownloadUrl == false) {\n\t\t\t\treturn (\n\t\t\t\t\t<li key={key}>\n\t\t\t\t\t\t<span className={'fonticon barefonticon ' + iconClass}></span>\n\t\t\t\t\t\t{title}\n\t\t\t\t\t\t(<a className='item-select-link' data-itemkey={item.get('key')} href={href} title={title}>Attachment Details</a>)\n\t\t\t\t\t</li>\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tvar attachmentDownloadUrl = Zotero.url.attachmentDownloadUrl(item);\n\t\t\t\treturn (\n\t\t\t\t\t<li key={key}>\n\t\t\t\t\t\t<span className={'fonticon barefonticon ' + iconClass}></span>\n\t\t\t\t\t\t<a className='itemdownloadlink' href={attachmentDownloadUrl}>{title} {Zotero.url.attachmentFileDetails(item)}</a>\n\t\t\t\t\t\t(<a className='item-select-link' data-itemkey={item.get('key')} href={href} title={title}>Attachment Details</a>)\n\t\t\t\t\t</li>\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t\treturn (\n\t\t\t<div id=\"item-children-panel\" role=\"tabpanel\" className=\"item-children-div tab-pane\">\n\t\t\t\t<ul id=\"notes-and-attachments\">\n\t\t\t\t\t{childListEntries}\n\t\t\t\t</ul>\n\t\t\t\t<button type=\"button\" onClick={this.triggerUpload} id=\"upload-attachment-link\" className=\"btn btn-primary upload-attachment-button\" hidden={!Zotero.config.librarySettings.allowUpload}>Upload File</button>\n\t\t\t</div>\n\t\t);\n\t}\n});\n\nvar ItemDetails = React.createClass({\n\tgetInitialState: function() {\n\t\treturn {\n\t\t\titem: null,\n\t\t\tchildItems: [],\n\t\t\titemLoading:false,\n\t\t\tchildrenLoading:false,\n\t\t\tlibraryItemsLoaded:false,\n\t\t\tedit: null\n\t\t};\n\t},\n\tcomponentWillMount: function() {\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\tlibrary.listen(\"displayedItemChanged\", reactInstance.loadItem, {});\n\t\tlibrary.listen(\"uploadSuccessful\", reactInstance.refreshChildren, {});\n\t\t\n\t\tlibrary.listen(\"tagsChanged\", reactInstance.updateTypeahead, {});\n\n\t\tlibrary.listen(\"showChildren\", reactInstance.refreshChildren, {});\n\t\t\n\t\tlibrary.trigger(\"displayedItemChanged\");\n\t},\n\tcomponentDidMount: function() {\n\t\treturn;\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\t\n\t\t//add typeahead if there is a tag input\n\t\tvar addTagInput = J(\"input.add-tag-input\");\n\t\tvar editTagInput = J(\"input.item-field-control.tag\");\n\t\t\n\t\tvar typeaheadSource = library.tags.plainList;\n\t\tif(!typeaheadSource){\n\t\t\ttypeaheadSource = [];\n\t\t}\n\t\tvar ttEngine = new Bloodhound({\n\t\t\tdatumTokenizer: Bloodhound.tokenizers.obj.whitespace('value'),\n\t\t\tqueryTokenizer: Bloodhound.tokenizers.whitespace,\n\t\t\tlocal: J.map(typeaheadSource, function(typeaheadSource) { return { value: typeaheadSource }; })\n\t\t});\n\t\tttEngine.initialize();\n\t\taddTagInput.typeahead('destroy');\n\t\teditTagInput.typeahead('destroy');\n\n\t\taddTagInput.typeahead(\n\t\t\t{\n\t\t\t\thint: true,\n\t\t\t\thighlight: true,\n\t\t\t\tminLength: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'tags',\n\t\t\t\tdisplayKey: 'value',\n\t\t\t\tsource: ttEngine.ttAdapter()\n\t\t\t\t//local: library.tags.plainList\n\t\t\t}\n\t\t);\n\t\teditTagInput.typeahead(\n\t\t\t{\n\t\t\t\thint: true,\n\t\t\t\thighlight: true,\n\t\t\t\tminLength: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'tags',\n\t\t\t\tdisplayKey: 'value',\n\t\t\t\tsource: ttEngine.ttAdapter()\n\t\t\t\t//local: library.tags.plainList\n\t\t\t}\n\t\t);\n\t},\n\tloadItem: function() {\n\t\tZ.debug('Zotero eventful loadItem', 3);\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\t\n\t\t//clean up RTEs before we end up removing their dom elements out from under them\n\t\t//Zotero.ui.cleanUpRte(widgetEl);\n\t\t\n\t\t//get the key of the item we need to display, or display library stats\n\t\tvar itemKey = Zotero.state.getUrlVar('itemKey');\n\t\tif(!itemKey){\n\t\t\tZ.debug(\"No itemKey - \" + itemKey, 3);\n\t\t\treactInstance.setState({item:null});\n\t\t\treturn Promise.reject(new Error(\"No itemkey - \" + itemKey));\n\t\t}\n\t\t\n\t\t//if we are showing an item, load it from local library of API\n\t\t//then display it\n\t\tvar loadedItem = library.items.getItem(itemKey);\n\t\tvar loadingPromise;\n\t\tif(loadedItem){\n\t\t\tZ.debug(\"have item locally, loading details into ui\", 3);\n\t\t\tloadingPromise = Promise.resolve(loadedItem);\n\t\t} else{\n\t\t\tZ.debug(\"must fetch item from server\", 3);\n\t\t\treactInstance.setState({itemLoading:true});\n\t\t\tloadingPromise = library.loadItem(itemKey);\n\t\t}\n\t\t\n\t\tloadingPromise.then(function(item){\n\t\t\tloadedItem = item;\n\t\t}).then(function(){\n\t\t\treturn loadedItem.getCreatorTypes(loadedItem.get('itemType'));\n\t\t}).then(function(creatorTypes){\n\t\t\tZ.debug(\"done loading necessary data; displaying item\");\n\t\t\treactInstance.setState({item:loadedItem, itemLoading:false});\n\t\t\tlibrary.trigger('showChildren');\n\t\t\t//Zotero.eventful.initTriggers(widgetEl);\n\t\t\ttry{\n\t\t\t\t//trigger event for Zotero translator detection\n\t\t\t\tvar ev = document.createEvent('HTMLEvents');\n\t\t\t\tev.initEvent('ZoteroItemUpdated', true, true);\n\t\t\t\tdocument.dispatchEvent(ev);\n\t\t\t} catch(e){\n\t\t\t\tZotero.error(\"Error triggering ZoteroItemUpdated event\");\n\t\t\t}\n\t\t});\n\t\tloadingPromise.catch(function(err){\n\t\t\tZ.error(\"loadItem promise failed\");\n\t\t\tZ.error(err);\n\t\t}).then(function(){\n\t\t\treactInstance.setState({itemLoading: false});\n\t\t}).catch(Zotero.catchPromiseError);\n\t\t\n\t\treturn loadingPromise;\n\t},\n\trefreshChildren: function() {\n\t\tZ.debug('reactitem.refreshChildren', 3);\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\t\n\t\tvar itemKey = Zotero.state.getUrlVar('itemKey');\n\t\tif(!itemKey){\n\t\t\tZ.debug(\"No itemKey - \" + itemKey, 3);\n\t\t\treturn Promise.reject(new Error(\"No itemkey - \" + itemKey));\n\t\t}\n\t\t\n\t\tvar item = library.items.getItem(itemKey);\n\t\treactInstance.setState({loadingChildren:true});\n\t\tvar p = item.getChildren(library)\n\t\t.then(function(childItems){\n\t\t\treactInstance.setState({childItems: childItems, loadingChildren:false});\n\t\t}).catch(Zotero.catchPromiseError);\n\t\treturn p;\n\t},\n\tupdateTypeahead: function() {\n\t\tZ.debug(\"updateTypeahead\", 3);\n\t\treturn;\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\tif(library){\n\t\t\treactInstance.addTagTypeahead();\n\t\t}\n\t},\n\taddTagTypeahead: function() {\n\t\t//TODO: reactify\n\t\tZ.debug('adding typeahead', 3);\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\n\t\tvar typeaheadSource = library.tags.plainList;\n\t\tif(!typeaheadSource){\n\t\t\ttypeaheadSource = [];\n\t\t}\n\t\tvar ttEngine = new Bloodhound({\n\t\t\tdatumTokenizer: Bloodhound.tokenizers.obj.whitespace('value'),\n\t\t\tqueryTokenizer: Bloodhound.tokenizers.whitespace,\n\t\t\tlocal: J.map(typeaheadSource, function(typeaheadSource) { return { value: typeaheadSource }; })\n\t\t});\n\t\tttEngine.initialize();\n\t\twidgetEl.find(\"input.taginput\").typeahead('destroy');\n\t\twidgetEl.find(\"input.taginput\").typeahead(\n\t\t\t{\n\t\t\t\thint: true,\n\t\t\t\thighlight: true,\n\t\t\t\tminLength: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'tags',\n\t\t\t\tdisplayKey: 'value',\n\t\t\t\tsource: ttEngine.ttAdapter()\n\t\t\t\t//local: library.tags.plainList\n\t\t\t}\n\t\t);\n\n\t},\n\taddTagTypeaheadToInput: function() {\n\t\t//TODO: reactify\n\t\tZ.debug('adding typeahead', 3);\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\tvar typeaheadSource = library.tags.plainList;\n\t\tif(!typeaheadSource){\n\t\t\ttypeaheadSource = [];\n\t\t}\n\t\tvar ttEngine = new Bloodhound({\n\t\t\tdatumTokenizer: Bloodhound.tokenizers.obj.whitespace('value'),\n\t\t\tqueryTokenizer: Bloodhound.tokenizers.whitespace,\n\t\t\tlocal: J.map(typeaheadSource, function(typeaheadSource) { return { value: typeaheadSource }; })\n\t\t});\n\t\tttEngine.initialize();\n\t\tJ(element).typeahead('destroy');\n\t\tJ(element).typeahead(\n\t\t\t{\n\t\t\t\thint: true,\n\t\t\t\thighlight: true,\n\t\t\t\tminLength: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'tags',\n\t\t\t\tdisplayKey: 'value',\n\t\t\t\tsource: ttEngine.ttAdapter()\n\t\t\t\t//local: library.tags.plainList\n\t\t\t}\n\t\t);\n\t},\n\trender: function() {\n\t\tZ.debug(\"ItemDetails render\");\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\tvar item = this.state.item;\n\t\tvar childItems = this.state.childItems;\n\n\t\treturn (\n\t\t\t<div role=\"tabpanel\">\n\t\t\t\t<ItemNavTabs library={library} item={item} />\n\n\t\t\t\t<div className=\"tab-content\">\n\t\t\t\t\t<ItemInfoPanel library={library}\n\t\t\t\t\t\titem={item}\n\t\t\t\t\t\tloading={this.state.itemLoading}\n\t\t\t\t\t\tlibraryItemsLoaded={this.state.libraryItemsLoaded} \n\t\t\t\t\t\tedit={this.state.edit}\n\t\t\t\t\t\tparentItemDetailsInstance={reactInstance}\n\t\t\t\t\t/>\n\t\t\t\t\t<ItemChildrenPanel parentItemDetailsInstance={reactInstance} library={library} childItems={childItems} loading={this.state.childrenLoading} />\n\t\t\t\t\t<ItemTagsPanel parentItemDetailsInstance={reactInstance} library={library} item={item} edit={this.state.edit} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n});\n","Zotero.ui.widgets.reactitems = {};\n\nZotero.ui.widgets.reactitems.init = function(el){\n\tZ.debug(\"widgets.items.init\", 3);\n\tvar library = Zotero.ui.getAssociatedLibrary(el);\n\t\n\tvar reactInstance = ReactDOM.render(\n\t\t<Items library={library} />,\n\t\tdocument.getElementById('library-items-div')\n\t);\n};\n\nZotero.ui.getItemsConfig = function(library){\n\tvar effectiveUrlVars = ['tag', 'collectionKey', 'order', 'sort', 'q', 'qmode'];\n\tvar urlConfigVals = {};\n\tJ.each(effectiveUrlVars, function(index, value){\n\t\tvar t = Zotero.state.getUrlVar(value);\n\t\tif(t){\n\t\t\turlConfigVals[value] = t;\n\t\t}\n\t});\n\t\n\tvar defaultConfig = {\n\t\tlibraryID: library.libraryID,\n\t\tlibraryType: library.libraryType,\n\t\ttarget:'items',\n\t\ttargetModifier: 'top',\n\t\tlimit: library.preferences.getPref('itemsPerPage')\n\t};\n\n\tvar userPreferencesApiArgs = {\n\t\torder: Zotero.preferences.getPref('order'),\n\t\tsort: Zotero.preferences.getPref('sort'),\n\t\tlimit: library.preferences.getPref('itemsPerPage')\n\t};\n\t\n\t//Build config object that should be displayed next and compare to currently displayed\n\tvar newConfig = J.extend({}, defaultConfig, userPreferencesApiArgs, urlConfigVals);\n\t\n\t//don't allow ordering by group only columns if user library\n\tif((library.libraryType == 'user') && (Zotero.Library.prototype.groupOnlyColumns.indexOf(newConfig.order) != -1)) {\n\t\tnewConfig.order = 'title';\n\t}\n\t\n\tif(!newConfig.sort){\n\t\tnewConfig.sort = Zotero.config.sortOrdering[newConfig.order];\n\t}\n\t\n\t//don't pass top if we are searching for tags (or query?)\n\tif(newConfig.tag || newConfig.q){\n\t\tdelete newConfig.targetModifier;\n\t}\n\t\n\treturn newConfig;\n};\n\nvar Items = React.createClass({\n\tcomponentWillMount: function() {\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\n\t\tlibrary.listen(\"changeItemSorting\", reactInstance.resortTriggered);\n\t\tlibrary.listen(\"displayedItemsChanged\", reactInstance.loadItems, {});\n\t\tlibrary.listen(\"displayedItemChanged\", reactInstance.selectDisplayed);\n\t\tZotero.listen(\"selectedItemsChanged\", function(){\n\t\t\treactInstance.setState({selectedItemKeys:Zotero.state.getSelectedItemKeys()});\n\t\t});\n\t\tlibrary.listen(\"selectedItemsChanged\", function(){\n\t\t\treactInstance.setState({selectedItemKeys:Zotero.state.getSelectedItemKeys()});\n\t\t});\n\t\t\n\t\tlibrary.listen(\"selectedCollectionChanged\", function(){\n\t\t\tZotero.state.selectedItemKeys = [];\n\t\t\tlibrary.trigger(\"selectedItemsChanged\", {selectedItemKeys:[]});\n\t\t});\n\t\t\n\t\tlibrary.listen(\"loadMoreItems\", reactInstance.loadMoreItems, {});\n\t\tlibrary.trigger(\"displayedItemsChanged\");\n\t},\n\tgetDefaultProps: function() {\n\t\treturn {\n\t\t\tnarrow: false\n\t\t};\n\t},\n\tgetInitialState: function() {\n\t\treturn {\n\t\t\tmoreloading:false,\n\t\t\tallItemsLoaded:false,\n\t\t\terrorLoading:false,\n\t\t\titems:[],\n\t\t\tselectedItemKeys:[],\n\t\t\tallSelected:false,\n\t\t\tdisplayFields: [\"title\", \"creator\", \"dateModified\"],\n\t\t\torder: \"title\",\n\t\t\tsort: \"asc\",\n\t\t};\n\t},\n\tloadItems: function() {\n\t\tZ.debug('Items.loadItems', 3);\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\tvar newConfig = Zotero.ui.getItemsConfig(library);\n\t\t\n\t\t//clear contents and show spinner while loading\n\t\tthis.setState({items:[], moreloading:true});\n\t\t\n\t\tvar p = library.loadItems(newConfig)\n\t\t.then(function(response){\n\t\t\tif(!response.loadedItems){\n\t\t\t\tZotero.error(\"expected loadedItems on response not present\");\n\t\t\t\tthrow(\"Expected response to have loadedItems\");\n\t\t\t}\n\t\t\tlibrary.items.totalResults = response.totalResults;\n\t\t\tvar allLoaded = (response.totalResults == response.loadedItems.length);\n\t\t\treactInstance.setState({\n\t\t\t\titems:response.loadedItems,\n\t\t\t\tmoreloading:false,\n\t\t\t\tsort:newConfig.sort,\n\t\t\t\torder:newConfig.order,\n\t\t\t\tallItemsLoaded:allLoaded\n\t\t\t});\n\t\t}).catch(function(response){\n\t\t\tZ.error(response);\n\t\t\treactInstance.setState({\n\t\t\t\terrorLoading:true,\n\t\t\t\tmoreloading:false,\n\t\t\t\tsort:newConfig.sort,\n\t\t\t\torder:newConfig.order\n\t\t\t});\n\t\t});\n\t\treturn p;\n\t},\n\tloadMoreItems: function() {\n\t\tZ.debug('Items.loadMoreItems', 3);\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\t\n\t\t//bail out if we're already fetching more items\n\t\tif(reactInstance.state.moreloading){\n\t\t\treturn;\n\t\t}\n\t\t//bail out if we're done loading all items\n\t\tif(reactInstance.state.allItemsLoaded){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\treactInstance.setState({moreloading:true});\n\t\tvar library = reactInstance.props.library;\n\t\tvar newConfig = Zotero.ui.getItemsConfig(library);\n\t\tvar newStart = reactInstance.state.items.length;\n\t\tnewConfig.start = newStart;\n\n\t\tvar p = library.loadItems(newConfig)\n\t\t.then(function(response){\n\t\t\tif(!response.loadedItems){\n\t\t\t\tZotero.error(\"expected loadedItems on response not present\");\n\t\t\t\tthrow(\"Expected response to have loadedItems\");\n\t\t\t}\n\t\t\tvar allitems = reactInstance.state.items.concat(response.loadedItems);\n\t\t\treactInstance.setState({items:allitems, moreloading:false});\n\n\t\t\t//see if we're displaying as many items as there are in results\n\t\t\tvar itemsDisplayed = allitems.length;\n\t\t\tif(response.totalResults == itemsDisplayed) {\n\t\t\t\treactInstance.setState({allItemsLoaded:true});\n\t\t\t}\n\t\t}).catch(function(response){\n\t\t\tZ.error(response);\n\t\t\treactInstance.setState({errorLoading:true, moreloading:false});\n\t\t});\n\t\t\n\t},\n\tresortItems: function(evt) {\n\t\t//handle click on the item table header to re-sort items\n\t\t//if it is the currently sorted field, simply flip the sort order\n\t\t//if it is not the currently sorted field, set it to be the currently sorted\n\t\t//field and set the default ordering for that field\n\t\tZ.debug(\".field-table-header clicked\", 3);\n\t\tevt.preventDefault();\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\tvar currentSortField = this.state.order;\n\t\tvar currentSortOrder = this.state.sort;\n\t\t\n\t\tvar newSortField = J(evt.target).data('columnfield');\n\t\tvar newSortOrder;\n\t\tif(newSortField != currentSortField) {\n\t\t\tnewSortOrder = Zotero.config.sortOrdering[newSortField]; //default for column\n\t\t} else {\n\t\t\t//swap sort order\n\t\t\tif(currentSortOrder == \"asc\"){\n\t\t\t\tnewSortOrder = \"desc\";\n\t\t\t} else {\n\t\t\t\tnewSortOrder = \"asc\";\n\t\t\t}\n\t\t}\n\n\t\t//only allow ordering by the fields we have\n\t\tif(library.sortableColumns.indexOf(newSortField) == (-1)) {\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\t//problem if there was no sort column mapped to the header that got clicked\n\t\tif(!newSortField){\n\t\t\tZotero.ui.jsNotificationMessage(\"no order field mapped to column\");\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\t//update the url with the new values\n\t\tZotero.state.pathVars['order'] = newSortField;\n\t\tZotero.state.pathVars['sort'] = newSortOrder;\n\t\tZotero.state.pushState();\n\t\t\n\t\t//set new order as preference and save it to use www prefs\n\t\tlibrary.preferences.setPref('sortField', newSortField);\n\t\tlibrary.preferences.setPref('sortOrder', newSortOrder);\n\t\tlibrary.preferences.setPref('order', newSortField);\n\t\tlibrary.preferences.setPref('sort', newSortOrder);\n\t\tZotero.preferences.setPref('order', newSortField);\n\t\tZotero.preferences.setPref('sort', newSortOrder);\n\t},\n\tresortTriggered: function(evt) {\n\t\tZ.debug(\"resortTriggered\");\n\t\tZ.debug(evt);\n\t\t//re-sort triggered from another widget\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\tvar currentSortField = this.state.order;\n\t\tvar currentSortOrder = this.state.sort;\n\t\t\n\t\tvar newSortField = evt.data.newSortField;\n\t\tvar newSortOrder = evt.data.newSortOrder;\n\t\t\n\t\t//only allow ordering by the fields we have\n\t\tif(library.sortableColumns.indexOf(newSortField) == (-1)) {\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\t//problem if there was no sort column mapped to the header that got clicked\n\t\tif(!newSortField){\n\t\t\tZotero.ui.jsNotificationMessage(\"no order field mapped to column\");\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\t//update the url with the new values\n\t\tZotero.state.pathVars['order'] = newSortField;\n\t\tZotero.state.pathVars['sort'] = newSortOrder;\n\t\tZotero.state.pushState();\n\t\t\n\t\t//set new order as preference and save it to use www prefs\n\t\tlibrary.preferences.setPref('sortField', newSortField);\n\t\tlibrary.preferences.setPref('sortOrder', newSortOrder);\n\t\tlibrary.preferences.setPref('order', newSortField);\n\t\tlibrary.preferences.setPref('sort', newSortOrder);\n\t\tZotero.preferences.setPref('order', newSortField);\n\t\tZotero.preferences.setPref('sort', newSortOrder);\n\t},\n\t//select and highlight in the itemlist the item  that is displayed\n\t//in the item details widget\n\tselectDisplayed: function() {\n\t\tZ.debug('widgets.items.selectDisplayed', 3);\n\t\tZotero.state.selectedItemKeys = [];\n\t\tthis.setState({selectedItemKeys: Zotero.state.getSelectedItemKeys(), allSelected:false});\n\t},\n\tfixTableHeaders: function() {\n\t\tif(J(\"body\").hasClass('lib-body')) {\n\t\t\tvar tableEl = J(this.refs.itemsTable);\n\t\t\ttableEl.floatThead({\n\t\t\t\ttop: function() {\n\t\t\t\t\tvar searchContainerEl = J('.library-search-box-container:visible');\n\t\t\t\t\tvar primaryNavEl = J('#primarynav');\n\t\t\t\t\treturn searchContainerEl.height() ? primaryNavEl.height() + searchContainerEl.height() + 'px' : 0;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\thandleSelectAllChange: function(evt) {\n\t\tvar library = this.props.library;\n\t\tlet nowselected = [];\n\t\tlet allSelected = false;\n\t\tif(evt.target.checked){\n\t\t\tallSelected = true;\n\t\t\t//select all items\n\t\t\tthis.state.items.forEach(function(item){\n\t\t\t\tnowselected.push(item.get('key'));\n\t\t\t});\n\t\t} else {\n\t\t\tlet selectedItemKey = Zotero.state.getUrlVar('itemKey');\n\t\t\tif(selectedItemKey){\n\t\t\t\tnowselected.push(selectedItemKey);\n\t\t\t}\n\t\t}\n\t\tZotero.state.selectedItemKeys = nowselected;\n\t\tthis.setState({selectedItemKeys:nowselected, allSelected:allSelected});\n\t\tlibrary.trigger(\"selectedItemsChanged\", {selectedItemKeys: nowselected});\n\n\t\t//if deselected all, reselect displayed item row\n\t\tif(nowselected.length === 0){\n\t\t\tlibrary.trigger('displayedItemChanged');\n\t\t}\n\t},\n\topenSortingDialog: function(evt) {\n\t\tvar library = this.props.library;\n\t\tlibrary.trigger(\"chooseSortingDialog\");\n\t},\n\tnonreactBind: function() {\n\t\tthis.fixTableHeaders();\n\t},\n\tcomponentDidMount: function() {\n\t\tvar reactInstance = this;\n\t\treactInstance.nonreactBind();\n\t},\n\tcomponentDidUpdate: function() {\n\t\tthis.nonreactBind();\n\t},\n\trender: function() {\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\tvar narrow = this.props.narrow;\n\t\tvar order = this.state.order;\n\t\tvar sort = this.state.sort;\n\t\tvar selectedItemKeys = this.state.selectedItemKeys;\n\t\tvar selectedItemKeyMap = {};\n\t\tselectedItemKeys.forEach(function(itemKey) {\n\t\t\tselectedItemKeyMap[itemKey] = true;\n\t\t});\n\n\t\tvar sortIcon;\n\t\tif(sort == \"desc\"){\n\t\t\tsortIcon = (<span className=\"glyphicon fonticon glyphicon-chevron-down pull-right\"></span>);\n\t\t} else {\n\t\t\tsortIcon = (<span className=\"glyphicon fonticon glyphicon-chevron-up pull-right\"></span>);\n\t\t}\n\t\t\n\t\tvar headers = [(\n\t\t\t<th key=\"checkbox-header\">\n\t\t\t\t<input type='checkbox'\n\t\t\t\tclassName='itemlist-editmode-checkbox all-checkbox'\n\t\t\t\tname='selectall'\n\t\t\t\tchecked={this.state.allSelected}\n\t\t\t\tonChange={this.handleSelectAllChange} />\n\t\t\t</th>\n\t\t)];\n\t\tif(narrow){\n\t\t\theaders.push(\n\t\t\t\t<th key=\"single-cell-header\" onClick={reactInstance.openSortingDialog} className=\"clickable\">\n\t\t\t\t\t{Zotero.Item.prototype.fieldMap[order]}\n\t\t\t\t\t{sortIcon}\n\t\t\t\t</th>\n\t\t\t);\n\t\t} else {\n\t\t\tvar fieldHeaders = this.state.displayFields.map(function(header, ind){\n\t\t\t\tvar sortable = Zotero.Library.prototype.sortableColumns.indexOf(header) != -1;\n\t\t\t\tvar selectedClass = ((header == order) ? \"selected-order sort-\" + sort + \" \" : \"\");\n\t\t\t\tvar sortspan = null;\n\t\t\t\tif(header == order) {\n\t\t\t\t\tsortspan = sortIcon;\n\t\t\t\t}\n\t\t\t\treturn (<th \n\t\t\t\t\tkey={header}\n\t\t\t\t\tonClick={reactInstance.resortItems}\n\t\t\t\t\tclassName={\"field-table-header \" + selectedClass + (sortable ? \"clickable \" : \"\")}\n\t\t\t\t\tdata-columnfield={header} >\n\t\t\t\t\t\t{Zotero.Item.prototype.fieldMap[header] ? Zotero.Item.prototype.fieldMap[header] : header}\n\t\t\t\t\t\t{sortspan}\n\t\t\t\t\t</th>\n\t\t\t\t);\n\t\t\t});\n\t\t\theaders = headers.concat(fieldHeaders);\n\t\t}\n\n\t\tvar itemRows = this.state.items.map(function(item){\n\t\t\tvar selected = selectedItemKeyMap.hasOwnProperty(item.get('key')) ? true : false;\n\t\t\tvar p = {\n\t\t\t\titemsReactInstance: reactInstance,\n\t\t\t\tlibrary:library,\n\t\t\t\tkey: item.get(\"key\"),\n\t\t\t\titem: item,\n\t\t\t\tselected: selected,\n\t\t\t\tnarrow: narrow\n\t\t\t};\n\t\t\treturn (\n\t\t\t\t<ItemRow {...p} />\n\t\t\t);\n\t\t});\n\t\tif(itemRows.length == 0){\n\t\t\tvar tds = this.state.displayFields.map(function(header){\n\t\t\t\treturn <td key={header}></td>;\n\t\t\t});\n\t\t\ttds = [<td key=\"check\"></td>].concat(tds);\n\t\t\titemRows = (\n\t\t\t\t<tr>\n\t\t\t\t\t{tds}\n\t\t\t\t</tr>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<div id=\"library-items-div\" className=\"library-items-div row\" ref=\"topdiv\">\n\t\t\t\t<form className=\"item-select-form\" method='POST'>\n\t\t\t\t\t<table id='field-table' ref=\"itemsTable\" className='wide-items-table table table-striped'>\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t{headers}\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{itemRows}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t\t<LoadingError errorLoading={this.state.errorLoading} />\n\t\t\t\t\t<LoadingSpinner loading={this.state.moreloading} />\n\t\t\t\t\t<div hidden={this.state.allItemsLoaded} id=\"load-more-items-div\" className=\"row\">\n\t\t\t\t\t\t<button onClick={this.loadMoreItems} type=\"button\" id=\"load-more-items-button\" className=\"btn btn-default\">\n\t\t\t\t\t\t\tLoad More Items\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t);\n\t\t\n\t}\n});\n\nvar ItemRow = React.createClass({\n\tgetDefaultProps: function() {\n\t\treturn {\n\t\t\tdisplayFields: [\"title\", \"creatorSummary\", \"dateModified\"],\n\t\t\tselected: false,\n\t\t\titem: {},\n\t\t\tnarrow: false\n\t\t};\n\t},\n\thandleSelectChange: function(ev) {\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\tvar itemKey = this.props.item.get('key');\n\t\tZotero.state.toggleItemSelected(itemKey);\n\t\tvar selected = Zotero.state.getSelectedItemKeys();\n\t\tlibrary.trigger(\"selectedItemsChanged\", {selectedItemKeys: selected});\n\t},\n\thandleItemLinkClick: function(evt) {\n\t\tevt.preventDefault();\n\t\tvar itemKey = J(evt.target).data('itemkey');\n\t\tZotero.state.pathVars.itemKey = itemKey;\n\t\tZotero.state.pushState();\n\t},\n\trender: function() {\n\t\tvar reactInstance = this;\n\t\tvar item = this.props.item;\n\t\tvar selected = this.props.selected;\n\t\tif(!this.props.narrow){\n\t\t\tvar fields = this.props.displayFields.map(function(field){\n\t\t\t\tvar ctags = null;\n\t\t\t\tif(field == \"title\"){\n\t\t\t\t\tctags = <ColoredTags item={item} />;\n\t\t\t\t}\n\t\t\t\treturn (\n\t\t\t\t\t<td onClick={reactInstance.handleItemLinkClick} key={field} className={field} data-itemkey={item.get(\"key\")}>\n\t\t\t\t\t\t{ctags}\n\t\t\t\t\t\t<a onClick={reactInstance.handleItemLinkClick} className='item-select-link' data-itemkey={item.get(\"key\")} href={Zotero.url.itemHref(item)} title={item.get(field)}>\n\t\t\t\t\t\t\t{Zotero.ui.formatItemField(field, item, true)}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</td>\n\t\t\t\t);\n\t\t\t});\n\t\t\treturn (\n\t\t\t\t<tr className={selected ? \"highlighed\" : \"\"}>\n\t\t\t\t\t<td className=\"edit-checkbox-td\" data-itemkey={item.get(\"key\")}>\n\t\t\t\t\t\t<input type='checkbox' onChange={this.handleSelectChange} checked={selected} className='itemlist-editmode-checkbox itemKey-checkbox' name={\"selectitem-\" + item.get(\"key\")} data-itemkey={item.get(\"key\")} />\n\t\t\t\t\t</td>\n\t\t\t\t\t{fields}\n\t\t\t\t</tr>\n\t\t\t);\n\t\t} else {\n\t\t\treturn (\n\t\t\t\t<tr className={selected ? \"highlighed\" : \"\"} data-itemkey={item.get('key')}>\n\t\t\t\t\t<td className=\"edit-checkbox-td\" data-itemkey={item.get('key')}>\n\t\t\t\t\t\t<input type='checkbox' className='itemlist-editmode-checkbox itemKey-checkbox' name={\"selectitem-\" + item.get('key')} data-itemkey={item.get('key')} />\n\t\t\t\t\t</td>\n\t\t\t\t\t\n\t\t\t\t\t<SingleCellItemField onClick={reactInstance.handleItemLinkClick} item={item} displayFields={this.props.displayFields} />\n\t\t\t\t</tr>\n\t\t\t);\n\t\t}\n\t}\n});\n\nvar SingleCellItemField = React.createClass({\n\trender: function() {\n\t\tvar item = this.props.item;\n\t\tvar field = this.props.field;\n\n\t\tvar pps = [];\n\t\tthis.props.displayFields.forEach(function(field){\n\t\t\tvar fieldDisplayName = Zotero.Item.prototype.fieldMap[field] ? Zotero.Item.prototype.fieldMap[field] + \":\" : \"\";\n\t\t\tif(field == \"title\"){\n\t\t\t\tpps.push(<span key=\"itemTypeIcon\" className={'sprite-icon pull-left sprite-treeitem-' + item.itemTypeImageClass()}></span>);\n\t\t\t\tpps.push(<ColoredTags key=\"coloredTags\" item={item} />);\n\t\t\t\tpps.push(<b key=\"title\">{Zotero.ui.formatItemField(field, item, true)}</b>);\n\t\t\t} else if((field === 'dateAdded') || (field === 'dateModified')) {\n\t\t\t\tpps.push(\n\t\t\t\t\t<p key={field} title={item.get(field)} dangerouslySetInnerHtml={{__html:fieldDisplayName + Zotero.ui.formatItemDateField(field, item, true)}}>\n\t\t\t\t\t\t\n\t\t\t\t\t</p>\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tpps.push(\n\t\t\t\t\t<p key={field} title={item.get(field)}>{fieldDisplayName}{Zotero.ui.formatItemField(field, item, true)}</p>\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t\treturn (\n\t\t\t<td onClick={this.props.onClick} className='single-cell-item' data-itemkey={item.get('key')}>\n\t\t\t\t<a className='item-select-link' data-itemkey={item.get('key')} href={Zotero.url.itemHref(item)}>\n\t\t\t\t\t{pps}\n\t\t\t\t</a>\n\t\t\t</td>\n\t\t);\n\t}\n});\n\nvar ColoredTags = React.createClass({\n\trender: function() {\n\t\tvar item = this.props.item;\n\t\tvar library = item.owningLibrary;\n\n\t\tvar coloredTags = library.matchColoredTags(item.apiObj._supplement.tagstrings);\n\t\tZ.debug(\"coloredTags:\" + JSON.stringify(coloredTags));\n\n\t\tvar ctags = coloredTags.map(function(color){\n\t\t\treturn <ColoredTag key={color} color={color} />;\n\t\t});\n\t\treturn (\n\t\t\t<span className=\"coloredTags\">\n\t\t\t\t{ctags}\n\t\t\t</span>\n\t\t);\n\t}\n});\n\nvar ColoredTag = React.createClass({\n\trender: function() {\n\t\tvar styleObj = {color:this.props.color};\n\t\t//styleObj.color += \" !important\";\n\t\treturn (\n\t\t\t<span style={styleObj}>\n\t\t\t\t<span style={styleObj} className=\"glyphicons fonticon glyphicons-tag\"></span>\n\t\t\t</span>\n\t\t);\n\t}\n});\n","Zotero.ui.widgets.library = {};\n\nZotero.ui.widgets.library.init = function(el){\n\tZ.debug(\"Zotero.ui.widgets.library.init\");\n\tvar library = Zotero.ui.getAssociatedLibrary(el);\n\tvar reactInstance = ReactDOM.render(\n\t\t<ReactZoteroLibrary library={library} />,\n\t\tdocument.getElementById('library-widget')\n\t);\n};\n\nvar ReactZoteroLibrary = React.createClass({\n\tcomponentWillMount: function() {\n\t\t//preload library\n\t\tZ.debug(\"ReactZoteroLibrary componentWillMount\", 3);\n\t\tvar reactInstance = this;\n\t\tZotero.reactLibraryInstance = reactInstance;\n\t\tvar library = this.props.library;\n\t\tlibrary.loadSettings();\n\t\tlibrary.listen(\"deleteIdb\", function(){\n\t\t\tlibrary.idbLibrary.deleteDB();\n\t\t});\n\t\tlibrary.listen(\"indexedDBError\", function(){\n\t\t\tZotero.ui.jsNotificationMessage(\"There was an error initializing your library. Some data may not load properly.\", 'notice');\n\t\t});\n\t\tlibrary.listen(\"cachedDataLoaded\", function() {\n\n\t\t});\n\t\t\n\t\tJ(window).on('resize', function(){\n\t\t\tif(!window.matchMedia(\"(min-width: 768px)\").matches){\n\t\t\t\tif(reactInstance.state.narrow != true){\n\t\t\t\t\treactInstance.setState({narrow:true});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif(reactInstance.state.narrow != false){\n\t\t\t\t\treactInstance.setState({narrow:false});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\tcomponentDidMount: function() {\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\tlibrary.listen(\"displayedItemsChanged\", function() {\n\t\t\tZ.debug(\"ReactZoteroLibrary displayedItemsChanged\");\n\t\t\treactInstance.refs.itemsWidget.loadItems();\n\t\t}, {});\n\t\n\t\tlibrary.listen(\"tagsChanged libraryTagsUpdated selectedTagsChanged\", function(){\n\t\t\tZ.debug(\"setting tags on tagsWidget from Library\");\n\t\t\treactInstance.refs.tagsWidget.setState({tags:library.tags});\n\t\t});\n\n\t\t//trigger loading of more items on scroll reaching bottom\n\t\tJ(reactInstance.refs.itemsPanel).on('scroll', function(){\n\t\t\tvar jel = J(reactInstance.refs.itemsPanel);\n\t\t\tif(jel.scrollTop() + jel.innerHeight() >= jel[0].scrollHeight){\n\t\t\t\treactInstance.refs.itemsWidget.loadMoreItems();\n\t\t\t}\n\t\t});\n\t},\n\tgetInitialState: function() {\n\t\tvar narrow;\n\t\tif(!window.matchMedia(\"(min-width: 768px)\").matches){\n\t\t\tZ.debug(\"Library set to narrow\", 3);\n\t\t\tnarrow = true;\n\t\t} else {\n\t\t\tnarrow = false;\n\t\t}\n\n\t\treturn {\n\t\t\tnarrow: narrow,\n\t\t\tactivePanel: \"items\",\n\t\t\tdeviceSize: \"xs\"\n\t\t};\n\t},\n\tshowFiltersPanel: function(evt) {\n\t\tevt.preventDefault();\n\t\tthis.setState({activePanel: \"filters\"});\n\t},\n\tshowItemsPanel: function(evt) {\n\t\tevt.preventDefault();\n\t\tthis.setState({activePanel: \"items\"});\n\t},\n\treflowPanelContainer: function() {\n\n\t},\n\trender: function(){\n\t\tZ.debug(\"react library render\");\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\tvar user = Zotero.config.loggedInUser;\n\t\tvar userDisplayName = user ? user.displayName : null;\n\t\tvar base = Zotero.config.baseWebsiteUrl;\n\t\tvar settingsUrl = base + \"/settings\";\n\t\tvar inboxUrl = base + \"/messages/inbox\"; //TODO\n\t\tvar downloadUrl = base + \"/download\";\n\t\tvar documentationUrl = base + \"/support\";\n\t\tvar forumsUrl = Zotero.config.baseForumsUrl; //TODO\n\t\tvar logoutUrl = base + \"/user/logout\";\n\t\tvar loginUrl = base + \"/user/login\";\n\t\tvar homeUrl = base;\n\t\tvar staticUrl = function(path){\n\t\t\treturn base + \"/static\" + path;\n\t\t};\n\n\t\tvar inboxText = user.unreadMessages > 0 ? (<strong>Inbox ({user.unreadMessages})</strong>) : \"Inbox\";\n\t\tvar siteActionsMenu;\n\n\t\tif(user) {\n\t\t\tsiteActionsMenu = [\n\t\t\t\t(<button key=\"button\" type=\"button\" href=\"#\" className=\"btn btn-default navbar-btn dropdown-toggle\" data-toggle=\"dropdown\" role=\"button\" aria-expanded=\"false\">\n\t\t\t\t\t{userDisplayName}\n\t\t\t\t\t<span className=\"caret\"></span>\n\t\t\t\t\t<span className=\"sr-only\">Toggle Dropdown</span>\n\t\t\t\t</button>),\n\t\t\t\t(<ul key=\"listEntries\" className=\"dropdown-menu\" role=\"menu\">\n\t\t\t\t\t<li><a href={settingsUrl}>Settings</a></li>\n\t\t\t\t\t<li><a href={inboxUrl}>{inboxText}</a></li>\n\t\t\t\t\t<li><a href={downloadUrl}>Download</a></li>\n\t\t\t\t\t<li className=\"divider\"></li>\n\t\t\t\t\t<li><a href={documentationUrl} className=\"documentation\">Documentation</a></li>\n\t\t\t\t\t<li><a href={forumsUrl} className=\"forums\">Forums</a></li>\n\t\t\t\t\t<li className=\"divider\"></li>\n\t\t\t\t\t<li><a href={logoutUrl}>Log Out</a></li>\n\t\t\t\t</ul>)\n\t\t\t];\n\t\t} else {\n\t\t\tsiteActionsMenu = (\n\t\t\t\t<div className=\"btn-group\">\n\t\t\t\t\t<a href={loginUrl} className=\"btn btn-default navbar-btn\" role=\"button\">\n\t\t\t\t\t\tLog In\n\t\t\t\t\t</a>\n\t\t\t\t\t<button type=\"button\" href=\"#\" className=\"btn btn-default navbar-btn dropdown-toggle\" data-toggle=\"dropdown\" role=\"button\" aria-haspopup=\"true\" aria-expanded=\"false\">\n\t\t\t\t\t\t<span className=\"caret\"></span>\n\t\t\t\t\t\t<span className=\"sr-only\">Toggle Dropdown</span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<ul className=\"dropdown-menu\" role=\"menu\">\n\t\t\t\t\t\t<li><a href={downloadUrl}>Download</a></li>\n\t\t\t\t\t\t<li><a href={documentationUrl} className=\"documentation\">Documentation</a></li>\n\t\t\t\t\t\t<li><a href={forumsUrl} className=\"forums\">Forums</a></li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\t//figure out panel visibility based on state.activePanel\n\t\tvar narrow = reactInstance.state.narrow;\n\t\tvar leftPanelVisible = !narrow;\n\t\tvar rightPanelVisible = !narrow;\n\t\tvar itemsPanelVisible = !narrow;\n\t\tvar itemPanelVisible = !narrow;\n\t\tvar tagsPanelVisible = !narrow;\n\t\tvar collectionsPanelVisible = !narrow;\n\t\tif(narrow){\n\t\t\tswitch(reactInstance.state.activePanel){\n\t\t\t\tcase \"items\":\n\t\t\t\t\trightPanelVisible = true;\n\t\t\t\t\titemsPanelVisible = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"item\":\n\t\t\t\t\trightPanelVisible = true;\n\t\t\t\t\titemPanelVisible = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"tags\":\n\t\t\t\t\tleftPanelVisible = true;\n\t\t\t\t\ttagsPanelVisible = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"collections\":\n\t\t\t\t\tleftPanelVisible = true;\n\t\t\t\t\tcollectionsPanelVisible = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"filters\":\n\t\t\t\t\tleftPanelVisible = true;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t<nav id=\"primarynav\" className=\"navbar navbar-default\" role=\"navigation\">\n\t\t\t\t<div className=\"container-fluid\">\n\t\t\t\t\t<div className=\"navbar-header\">\n\t\t\t\t\t\t<button type=\"button\" className=\"navbar-toggle collapsed\" data-toggle=\"collapse\" data-target=\"#primary-nav-linklist\">\n\t\t\t\t\t\t\t{userDisplayName}\n\t\t\t\t\t\t\t<span className=\"sr-only\">Toggle navigation</span>\n\t\t\t\t\t\t\t<span className=\"glyphicons fonticon glyphicons-menu-hamburger\"></span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<a className=\"navbar-brand hidden-sm hidden-xs\" href={homeUrl}><img src={staticUrl('/images/theme/zotero.png')} alt=\"Zotero\" height=\"20px\" /></a>\n\t\t\t\t\t\t<a className=\"navbar-brand visible-sm-block visible-xs-block\" href={homeUrl}>\n\t\t\t\t\t\t\t<img src={staticUrl('/images/theme/zotero_theme/zotero_48.png')} alt=\"Zotero\" height=\"24px\" />\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"collapse navbar-collapse\" id=\"primary-nav-linklist\">\n\t\t\t\t\t\t<ControlPanel library={library} editable={Zotero.config.librarySettings.allowEdit} ref=\"controlPanel\" />\n\t\t\t\t\t\t\n\t\t\t\t\t\t<ul className=\"nav navbar-nav navbar-right\">\n\t\t\t\t\t\t\t{siteActionsMenu}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div className=\"btn-toolbar hidden-xs navbar-right\">\n\t\t\t\t\t\t\t<LibrarySearchBox library={library} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</nav>\n\n\t\t\t<div id=\"js-message\" >\n\t\t\t\t<ul id=\"js-message-list\">\n\t\t\t\t</ul>\n\t\t\t</div>\n\n\t\t\t{/*<!-- Main Content -->*/}\n\t\t\t<div id=\"library\" className=\"row\">\n\n\t\t\t<div id=\"panel-container\">\n\t\t\t\t<div id=\"left-panel\" hidden={!leftPanelVisible} className=\"panelcontainer-panelcontainer col-xs-12 col-sm-4 col-md-3\">\n\t\t\t\t\t<FilterGuide ref=\"filterGuide\" library={library} />\n\t\t\t\t\t\n\t\t\t\t\t<div role=\"tabpanel\">\n\t\t\t\t\t\t{/*<!-- Nav tabs -->*/}\n\t\t\t\t\t\t<ul className=\"nav nav-tabs\" role=\"tablist\">\n\t\t\t\t\t\t\t<li role=\"presentation\" className=\"active\"><a href=\"#collections-panel\" aria-controls=\"collections-panel\" role=\"tab\" data-toggle=\"tab\">Collections</a></li>\n\t\t\t\t\t\t\t<li role=\"presentation\"><a  href=\"#tags-panel\" aria-controls=\"tags-panel\" role=\"tab\" data-toggle=\"tab\">Tags</a></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t{/*<!-- Tab panes -->*/}\n\t\t\t\t\t\t<div className=\"tab-content\">\n\t\t\t\t\t\t\t<div id=\"collections-panel\" role=\"tabpanel\" className=\"tab-pane active\">\n\t\t\t\t\t\t\t\t<Collections ref=\"collectionsWidget\" library={library} />\n\t\t\t\t\t\t\t</div>{/*<!-- /collections panel -->*/}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<div id=\"tags-panel\" role=\"tabpanel\" className=\"tab-pane\">\n\t\t\t\t\t\t\t\t{/*<!-- tags browser section -->*/}\n\t\t\t\t\t\t\t\t<Tags ref=\"tagsWidget\" library={library} />\n\t\t\t\t\t\t\t\t<FeedLink ref=\"feedLinkWidget\" library={library} />\n\t\t\t\t\t\t\t</div>{/*<!-- /tags panel -->*/}\n\t\t\t\t\t\t</div>{/*<!-- /tabcontent -->*/}\n\t\t\t\t\t</div>{/*<!-- /tab-panel -->*/}\n\t\t\t\t</div>{/*<!-- /left-panel -->*/}\n\t\t\t\t\n\t\t\t\t<div id=\"right-panel\" hidden={!rightPanelVisible} className=\"panelcontainer-panelcontainer col-xs-12 col-sm-8 col-md-9\">\n\t\t\t\t\t<div hidden={!itemsPanelVisible} ref=\"itemsPanel\" id=\"items-panel\" className=\"panelcontainer-panel col-sm-12 col-md-7\">\n\t\t\t\t\t\t<div className=\"visible-xs library-search-box-container\">\n\t\t\t\t\t\t\t<LibrarySearchBox library={library} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Items ref=\"itemsWidget\" library={library} narrow={narrow} />\n\t\t\t\t\t</div>{/*<!-- /items panel -->*/}\n\t\t\t\t\t\n\t\t\t\t\t<div hidden={!itemPanelVisible} id=\"item-panel\" className=\"panelcontainer-panel col-sm-12 col-md-5\">\n\t\t\t\t\t\t<div id=\"item-widget-div\" className=\"item-details-div\">\n\t\t\t\t\t\t\t<ItemDetails ref=\"itemWidget\" library={library} />\n\t\t\t\t\t\t</div>{/*<!-- /item widget -->*/}\n\t\t\t\t\t</div>{/*<!-- /item panel -->*/}\n\t\t\t\t</div>{/*<!-- /right-panel -->*/}\n\t\t\t\t\n\t\t\t\t{/*<!-- panelContainer nav footer -->*/}\n\t\t\t\t<nav id=\"panelcontainer-nav\" className=\"navbar navbar-default navbar-fixed-bottom visible-xs-block\" role=\"navigation\">\n\t\t\t\t\t<div className=\"container-fluid\">\n\t\t\t\t\t\t<ul className=\"nav navbar-nav\">\n\t\t\t\t\t\t\t<li onClick={reactInstance.showFiltersPanel} className=\"filters-nav\"><a href=\"#\">Filters</a></li>\n\t\t\t\t\t\t\t<li onClick={reactInstance.showItemsPanel} className=\"items-nav\"><a href=\"#\">Items</a></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t</nav>\n\t\t\t\t<SendToLibraryDialog ref=\"sendToLibraryDialogWidget\" library={library} />\n\t\t\t\t\n\t\t\t\t<CreateCollectionDialog ref=\"createCollectionDialogWidget\" library={library} />\n\t\t\t\t\n\t\t\t\t<UpdateCollectionDialog library={library} />\n\t\t\t\t\n\t\t\t\t<DeleteCollectionDialog library={library} />\n\t\t\t\t\n\t\t\t\t<AddToCollectionDialog library={library} />\n\t\t\t\t\n\t\t\t\t<CreateItemDialog library={library} />\n\t\t\t\t\n\t\t\t\t<CiteItemDialog library={library} />\n\t\t\t\t\n\t\t\t\t<UploadAttachmentDialog library={library} />\n\t\t\t\t\n\t\t\t\t<ExportItemsDialog library={library} />\n\t\t\t\t\n\t\t\t\t<LibrarySettingsDialog library={library} />\n\t\t\t\t\n\t\t\t\t{/*<ProgressModalDialog library={library} />*/}\n\t\t\t\t\n\t\t\t\t<ChooseSortingDialog library={library} />\n\t\t\t</div>\n\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n});\n","Zotero.ui.widgets.reactlibrarysettingsdialog = {};\n\nZotero.ui.widgets.reactlibrarysettingsdialog.init = function(el){\n\tZ.debug(\"librarysettingsdialog widget init\", 3);\n\tvar library = Zotero.ui.getAssociatedLibrary(el);\n\tvar reactInstance = ReactDOM.render(\n\t\t<LibrarySettingsDialog library={library} />,\n\t\tdocument.getElementById('library-settings-dialog')\n\t);\n};\n\nvar LibrarySettingsDialog = React.createClass({\n\tcomponentWillMount: function() {\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\n\t\tlibrary.listen('settingsLoaded', reactInstance.updateStateFromLibrary, {});\n\t\tlibrary.listen(\"librarySettingsDialog\", reactInstance.openDialog, {});\n\t},\n\tgetInitialState: function() {\n\t\treturn {\n\t\t\tlistDisplayedFields: [],\n\t\t\titemsPerPage: 25,\n\t\t\tshowAutomaticTags: true\n\t\t};\n\t},\n\topenDialog: function() {\n\t\tthis.refs.modal.open();\n\t},\n\tcloseDialog: function(evt) {\n\t\tthis.refs.modal.close();\n\t},\n\tupdateShowFields: function(evt) {\n\t\tZ.debug(\"updateShowFields\");\n\t\tvar library = this.props.library;\n\t\tvar listDisplayedFields = this.state.listDisplayedFields;\n\t\tvar fieldName = evt.target.value;\n\t\tvar display = evt.target.checked;\n\t\t\n\t\tif(display){\n\t\t\tZ.debug(\"adding field \" + fieldName + \" to listDisplayedFields\");\n\t\t\tlistDisplayedFields.push(fieldName);\n\t\t} else {\n\t\t\tZ.debug(\"filtering field \" + fieldName + \" from listDisplayedFields\");\n\t\t\t\n\t\t\tlistDisplayedFields = listDisplayedFields.filter(function(val){\n\t\t\t\tif(val == fieldName){\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t});\n\t\t}\n\n\t\tthis.setState({\n\t\t\tlistDisplayedFields: listDisplayedFields\n\t\t});\n\n\t\tlibrary.preferences.setPref(\"listDisplayedFields\", listDisplayedFields);\n\t\tlibrary.preferences.persist();\n\n\t\tlibrary.trigger(\"displayedItemsChanged\");\n\t},\n\tupdateShowAutomaticTags: function(evt){\n\t\tvar library = this.props.library;\n\t\tvar showAutomaticTags = evt.target.checked;\n\n\t\tthis.setState({\n\t\t\tshowAutomaticTags: showAutomaticTags\n\t\t});\n\t\tlibrary.preferences.setPref(\"showAutomaticTags\", showAutomaticTags);\n\t\tlibrary.preferences.persist();\n\n\t\tlibrary.trigger(\"tagsChanged\");\n\t},/*\n\tupdateItemsPerPage: function(evt) {\n\t\tvar library = this.props.library;\n\t\tvar itemsPerPage = evt.target.value;\n\n\t\tthis.setState({\n\t\t\titemsPerPage: itemsPerPage\n\t\t});\n\t\tlibrary.preferences.setPref('itemsPerPage', itemsPerPage);\n\t\tlibrary.preferences.persist();\n\t\tlibrary.preferences.setPref(\"listDisplayedFields\", listDisplayedFields);\n\t},*/\n\tupdateStateFromLibrary: function(){\n\t\tvar library = this.props.library;\n\t\tthis.setState({\n\t\t\tlistDisplayedFields: library.preferences.getPref('listDisplayedFields'),\n\t\t\titemsPerPage: library.preferences.getPref('itemsPerPage'),\n\t\t\tshowAutomaticTags: library.preferences.getPref('showAutomaticTags')\n\t\t});\n\t},\n\trender: function() {\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\tvar listDisplayedFields = this.state.listDisplayedFields;\n\t\tvar itemsPerPage = this.state.itemsPerPage;\n\t\tvar showAutomaticTags = this.state.showAutomaticTags;\n\t\tvar fieldMap = Zotero.localizations.fieldMap;\n\n\t\tvar displayFieldNodes = Zotero.Library.prototype.displayableColumns.map(function(val, ind){\n\t\t\tvar checked = (listDisplayedFields.indexOf(val) != -1);\n\t\t\treturn (\n\t\t\t\t<div key={val} className=\"checkbox\">\n\t\t\t\t\t<label htmlFor={\"display-column-field-\" + val}><input onChange={reactInstance.updateShowFields} type=\"checkbox\" checked={checked} name=\"display-column-field\" value={val} id={\"display-column-field-\" + val} className=\"display-column-field\" />{fieldMap[val] || val}</label>\n\t\t\t\t</div>\n\t\t\t);\n\t\t});\n\t\t\n\t\treturn (\n\t\t\t<BootstrapModalWrapper ref=\"modal\">\n\t\t\t\t<div id=\"library-settings-dialog\" className=\"library-settings-dialog\" role=\"dialog\" aria-hidden=\"true\" data-keyboard=\"true\">\n\t\t\t\t\t<div  className=\"modal-dialog\">\n\t\t\t\t\t\t<div className=\"modal-content\">\n\t\t\t\t\t\t\t<div className=\"modal-header\">\n\t\t\t\t\t\t\t\t<button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">&times;</button>\n\t\t\t\t\t\t\t\t<h3 className=\"modal-title\">Library Settings</h3>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"modal-body\">\n\t\t\t\t\t\t\t\t<form id=\"library-settings-form\" className=\"library-settings-form\" role=\"form\">\n\t\t\t\t\t\t\t\t<fieldset>\n\t\t\t\t\t\t\t\t\t<legend>Display Columns</legend>\n\t\t\t\t\t\t\t\t\t{displayFieldNodes}\n\t\t\t\t\t\t\t\t</fieldset>\n\t\t\t\t\t\t\t\t{/*\n\t\t\t\t\t\t\t\t<label htmlFor=\"items-per-page\">Items Per Page</label>\n\t\t\t\t\t\t\t\t<select onChange={this.updateItemPerPage} defaultValue={this.state.itemsPerPage} id=\"items-per-page\" name=\"items-per-page\" className=\"form-control\">\n\t\t\t\t\t\t\t\t\t<option value=\"25\">25</option>\n\t\t\t\t\t\t\t\t\t<option value=\"50\">50</option>\n\t\t\t\t\t\t\t\t\t<option value=\"75\">75</option>\n\t\t\t\t\t\t\t\t\t<option value=\"100\">100</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t*/}\n\t\t\t\t\t\t\t\t<div className=\"checkbox\">\n\t\t\t\t\t\t\t\t\t<label htmlFor=\"show-automatic-tags\">\n\t\t\t\t\t\t\t\t\t<input onChange={this.updateShowAutomaticTags} type=\"checkbox\" id=\"show-automatic-tags\" name=\"show-automatic-tags\" />\n\t\t\t\t\t\t\t\t\tShow Automatic Tags\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<p className=\"help-block\">Automatic tags are tags added automatically when a reference was imported, rather than by a user.</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"modal-footer\">\n\t\t\t\t\t\t\t\t<button className=\"btn btn-default\" data-dismiss=\"modal\" aria-hidden=\"true\">Close</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</BootstrapModalWrapper>\n\t\t);\n\t}\n});\n\n","var LoadingError = React.createClass({\n\trender: function() {\n\t\treturn (\n\t\t\t<p hidden={!this.props.errorLoading}>\n\t\t\t\tThere was an error loading your items. Please try again in a few minutes.\n\t\t\t</p>\n\t\t);\n\t}\n});\n","var LoadingSpinner = React.createClass({\n\trender: function() {\n\t\tvar spinnerUrl = Zotero.config.baseWebsiteUrl + '/static/images/theme/broken-circle-spinner.gif';\n\t\treturn (\n\t\t\t<div className=\"items-spinner\" hidden={!this.props.loading}>\n\t\t\t\t<img className='spinner' src={spinnerUrl} />\n\t\t\t</div>\n\t\t);\n\t}\n});\n","Zotero.ui.widgets.profileGroupsList = {};\n\nZotero.ui.widgets.profileGroupsList.init = function(el){\n\tZ.debug(\"Zotero.ui.widgets.profileGroupsList\");\n\t//var library = Zotero.ui.getAssociatedLibrary(el);\n\tvar userID = zoteroData.profileUserID;\n\n\tvar reactInstance = ReactDOM.render(\n\t\t<ProfileGroupsList userID={userID} />,\n\t\tdocument.getElementById('profile-groups-div')\n\t);\n};\n\nvar ProfileGroupsList = React.createClass({\n\tcomponentWillMount: function() {\n\t\tvar reactInstance = this;\n\t\tvar groups = new Zotero.Groups();\n\t\treactInstance.setState({loading:true});\n\t\tgroups.fetchUserGroups(reactInstance.props.userID)\n\t\t.then(function(response){\n\t\t\tvar groups = response.fetchedGroups;\n\t\t\treactInstance.setState({groups:groups, loading:false});\n\t\t}).catch(Zotero.catchPromiseError);\n\t},\n\tgetInitialState: function() {\n\t\treturn {\n\t\t\tgroups: [],\n\t\t\tloading:false\n\t\t};\n\t},\n\trender: function() {\n\t\tvar reactInstance = this;\n\t\tZ.debug(reactInstance.state.groups);\n\t\t\n\t\tvar memberGroups = reactInstance.state.groups.map(function(group){\n\t\t\treturn (\n\t\t\t\t<li key={group.get('id')}>\n\t\t\t\t\t<a href={Zotero.url.groupViewUrl(group)}>{group.get('name')}</a>\n\t\t\t\t</li>\n\t\t\t);\n\t\t});\n\t\t\n\t\treturn (\n\t\t\t<div className=\"profile-groups-list\">\n\t\t\t\t<h2>Groups</h2>\n\t\t\t\t<LoadingSpinner loading={reactInstance.state.loading} />\n\t\t\t\t<ul>\n\t\t\t\t\t{memberGroups}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t);\n\t}\n});\n\n","Zotero.ui.widgets.recentItems = {};\n\nZotero.ui.widgets.recentItems.init = function(el){\n    Z.debug(\"widgets.recentItems.init\");\n    \n    var library = Zotero.ui.getAssociatedLibrary(el);\n    \n    var reactInstance = ReactDOM.render(\n        <RecentItems library={library} />,\n        el\n    );\n};\n\nvar RecentItems = React.createClass({\n    componentWillMount: function() {\n        var reactInstance = this;\n        var library = reactInstance.props.library;\n        reactInstance.setState({loading:true});\n        library.loadItems({\n            'limit': 10,\n            'order': 'dateModified'\n        }).then(function(response){\n            reactInstance.setState({loading:false, items:response.loadedItems});\n        });\n    },\n    getDefaultProps: function() {\n        return {\n            displayFields: [\"title\", \"creatorSummary\", \"dateModified\"],\n            item: {}\n        };\n    },\n    getInitialState: function() {\n        return {\n            loading:false,\n            items:[]\n        };\n    },\n    render: function() {\n        var reactInstance = this;\n        var itemRows = this.state.items.map(function(item){\n            return (\n                <RecentItemRow key={item.get(\"key\")} item={item} />\n            );\n        });\n\n        var headers = this.props.displayFields.map(function(header){\n            return (\n                <th key={header} className=\"field-table-header\">\n                    {Zotero.Item.prototype.fieldMap[header] ? Zotero.Item.prototype.fieldMap[header] : header}\n                </th>\n            );\n        });\n\n        return (\n            <table id='field-table' ref=\"itemsTable\" className='wide-items-table table table-striped'>\n                <thead>\n                    <tr>\n                        {headers}\n                    </tr>\n                </thead>\n                <tbody>\n                    {itemRows}\n                </tbody>\n            </table>\n        );\n    }\n});\n\nvar RecentItemRow = React.createClass({\n    getDefaultProps: function() {\n        return {\n            displayFields: [\"title\", \"creatorSummary\", \"dateModified\"],\n            item: {}\n        };\n    },\n    render: function() {\n        var reactInstance = this;\n        var item = this.props.item;\n        var fields = this.props.displayFields.map(function(field){\n            return (\n                <td key={field} className={field} data-itemkey={item.get(\"key\")}>\n                    <a data-itemkey={item.get(\"key\")} href={Zotero.url.itemHref(item)} title={item.get(field)}>\n                        {Zotero.ui.formatItemField(field, item, true)}\n                    </a>\n                </td>\n            );\n        });\n        return (\n            <tr>\n                {fields}\n            </tr>\n        );\n    }\n});\n","Zotero.ui.widgets.reactsearchbox = {};\n\nZotero.ui.widgets.reactsearchbox.init = function(el){\n\tZ.debug(\"Zotero.eventful.init.searchbox\", 3);\n\tvar library = Zotero.ui.getAssociatedLibrary(el);\n\tvar container = J(el);\n\t\n\tvar reactInstance = ReactDOM.render(\n\t\t<LibrarySearchBox library={library} />,\n\t\tdocument.getElementById('search-box')\n\t);\n};\n\nvar LibrarySearchBox = React.createClass({\n\tgetInitialState: function(){\n\t\treturn {\n\t\t\tsearchType: \"simple\",\n\t\t};\n\t},\n\tsearch: function(evt) {\n\t\tevt.preventDefault();\n\t\tZ.debug(\"library-search form submitted\", 3);\n\t\tZotero.state.clearUrlVars(['collectionKey', 'tag', 'q', 'qmode']);\n\t\tvar container = J(evt.target);\n\t\tvar query = container.find('input.search-query').val();\n\t\tvar searchType = container.find('input.search-query').data('searchtype');\n\t\tif(query !== \"\" || Zotero.state.getUrlVar('q') ){\n\t\t\tZotero.state.pathVars['q'] = query;\n\t\t\tif(searchType != \"simple\"){\n\t\t\t\tZotero.state.pathVars['qmode'] = searchType;\n\t\t\t}\n\t\t\tZotero.state.pushState();\n\t\t}\n\t\treturn false;\n\t},\n\tclearLibraryQuery: function(evt){\n\t\tZotero.state.unsetUrlVar('q');\n\t\tZotero.state.unsetUrlVar('qmode');\n\t\t\n\t\tJ(\".search-query\").val(\"\");\n\t\tZotero.state.pushState();\n\t\treturn;\n\t},\n\tchangeSearchType: function(evt){\n\t\tevt.preventDefault();\n\t\tvar selected = J(evt.target);\n\t\tvar selectedType = selected.data('searchtype');\n\t\tthis.setState({searchType: selectedType});\n\t},\n\trender: function() {\n\t\tvar placeHolder = \"\";\n\t\tif(this.state.searchType == 'simple'){\n\t\t\tplaceHolder = 'Search Title, Creator, Year';\n\t\t} else if(this.state.searchType == 'everything'){\n\t\t\tplaceHolder = 'Search Full Text';\n\t\t}\n\t\tvar defaultValue = Zotero.state.getUrlVar('q');\n\n\t\treturn (\n\t\t\t<div className=\"btn-toolbar row\" id=\"search-box\" style={{maxWidth:\"350px\"}}>\n\t\t\t\t<form action=\"/search/\" onSubmit={this.search} className=\"navbar-form zsearch library-search\" role=\"search\">\n\t\t\t\t\t<div className=\"input-group\">\n\t\t\t\t\t\t<div className=\"input-group-btn\">\n\t\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-default dropdown-toggle\" data-toggle=\"dropdown\"><span className=\"caret\"></span></button>\n\t\t\t\t\t\t\t<ul className=\"dropdown-menu\">\n\t\t\t\t\t\t\t\t<li><a href=\"#\" onClick={this.changeSearchType} data-searchtype=\"simple\">Title, Creator, Year</a></li>\n\t\t\t\t\t\t\t\t<li><a href=\"#\" onClick={this.changeSearchType} data-searchtype=\"everything\">Full Text</a></li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<input defaultValue={defaultValue} type=\"text\" name=\"q\" id=\"header-search-query\" className=\"search-query form-control\" placeholder={placeHolder}/>\n\t\t\t\t\t\t<span className=\"input-group-btn\">\n\t\t\t\t\t\t\t<button onClick={this.clearLibraryQuery} className=\"btn btn-default clear-field-button\" type=\"button\"><span className=\"glyphicons fonticon glyphicons-remove-2\"></span></button>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t);\n\t}\n});\n","Zotero.ui.widgets.reactsendToLibraryDialog = {};\n\nZotero.ui.widgets.reactsendToLibraryDialog.init = function(el){\n\tZ.debug(\"sendToLibraryDialog widget init\", 3);\n\tvar library = Zotero.ui.getAssociatedLibrary(el);\n\tvar reactInstance = ReactDOM.render(\n\t\t<SendToLibraryDialog library={library} />,\n\t\tdocument.getElementById('send-to-library-dialog')\n\t);\n};\n\nvar SendToLibraryDialog = React.createClass({\n\tcomponentWillMount: function() {\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\tlibrary.listen(\"sendToLibraryDialog\", reactInstance.openDialog, {});\n\t},\n\tgetInitialState: function() {\n\t\treturn {\n\t\t\twritableLibraries: [],\n\t\t\tloading:false,\n\t\t\tloaded:false\n\t\t};\n\t},\n\thandleLibraryChange: function(evt) {\n\t\tthis.setState({targetLibrary: evt.target.value});\n\t},\n\topenDialog: function() {\n\t\tthis.refs.modal.open();\n\t\tif(!this.state.loaded){\n\t\t\tthis.loadForeignLibraries();\n\t\t}\n\t},\n\tcloseDialog: function(evt) {\n\t\tthis.refs.modal.close();\n\t},\n\tloadForeignLibraries: function() {\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\tvar userID = Zotero.config.loggedInUserID;\n\t\tvar personalLibraryString = 'u' + userID;\n\t\t\n\t\tthis.setState({loading:true});\n\n\t\tvar memberGroups = library.groups.fetchUserGroups(userID)\n\t\t.then(function(response){\n\t\t\tZ.debug(\"got member groups\", 3);\n\t\t\tvar memberGroups = response.fetchedGroups;\n\t\t\tvar writableLibraries = [{name:'My Library', libraryString:personalLibraryString}];\n\t\t\tfor(var i = 0; i < memberGroups.length; i++){\n\t\t\t\tif(memberGroups[i].isWritable(userID)){\n\t\t\t\t\tvar libraryString = 'g' + memberGroups[i].get('id');\n\t\t\t\t\twritableLibraries.push({\n\t\t\t\t\t\tname: memberGroups[i].get('name'),\n\t\t\t\t\t\tlibraryString: libraryString,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\treactInstance.setState({writableLibraries: writableLibraries, loading:false, loaded:true});\n\t\t}).catch(function(err){\n\t\t\tZotero.ui.jsNotificationMessage(\"There was an error loading group libraries\", \"error\");\n\t\t\tZ.error(err);\n\t\t\tZ.error(err.message);\n\t\t});\n\t},\n\tsendItem: function(evt) {\n\t\tZ.debug(\"sendToLibrary callback\", 3);\n\t\tvar library = this.props.library;\n\t\t//instantiate destination library\n\t\tvar targetLibrary = this.state.targetLibrary;\n\t\tvar destLibConfig = Zotero.utils.parseLibString(targetLibrary);\n\t\tvar destLibrary = new Zotero.Library(destLibConfig.libraryType, destLibConfig.libraryID);\n\t\tZotero.libraries[targetLibrary] = destLibrary;\n\t\t\n\t\t//get items to send\n\t\tvar itemKeys = Zotero.state.getSelectedItemKeys();\n\t\tif(itemKeys.length === 0){\n\t\t\tZotero.ui.jsNotificationMessage(\"No items selected\", 'notice');\n\t\t\tthis.closeDialog();\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tvar sendItems = library.items.getItems(itemKeys);\n\t\tlibrary.sendToLibrary(sendItems, destLibrary)\n\t\t.then(function(foreignItems){\n\t\t\tZotero.ui.jsNotificationMessage(\"Items sent to other library\", 'notice');\n\t\t}).catch(function(response){\n\t\t\tZ.debug(response);\n\t\t\tZotero.ui.jsNotificationMessage(\"Error sending items to other library\", 'notice');\n\t\t});\n\t\tthis.closeDialog();\n\t\treturn false;\n\t},\n\trender: function() {\n\t\tvar destinationLibraries = this.state.writableLibraries;\n\t\tvar libraryOptions = destinationLibraries.map(function(lib) {\n\t\t\treturn (\n\t\t\t\t<option key={lib.libraryString} value={lib.libraryString}>{lib.name}</option>\n\t\t\t);\n\t\t});\n\t\treturn (\n\t\t\t<BootstrapModalWrapper ref=\"modal\">\n\t\t\t\t<div id=\"send-to-library-dialog\" className=\"send-to-library-dialog\" role=\"dialog\" aria-hidden=\"true\" title=\"Send to Library\" data-keyboard=\"true\">\n\t\t\t\t\t<div className=\"modal-dialog\">\n\t\t\t\t\t\t<div className=\"modal-content\">\n\t\t\t\t\t\t\t<div className=\"modal-header\">\n\t\t\t\t\t\t\t\t<button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\"></button>\n\t\t\t\t\t\t\t\t<h3>Send To Library</h3>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"send-to-library-div modal-body\" data-role=\"content\">\n\t\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t\t<div data-role=\"fieldcontain\">\n\t\t\t\t\t\t\t\t\t<label htmlFor=\"destination-library\">Library</label>\n\t\t\t\t\t\t\t\t\t<select onChange={this.handleLibraryChange} className='destination-library-select form-control' name=\"desination-library\">\n\t\t\t\t\t\t\t\t\t\t{libraryOptions}\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"modal-footer\">\n\t\t\t\t\t\t\t\t<button onClick={this.closeDialog} className=\"btn\" data-dismiss=\"modal\" aria-hidden=\"true\">Close</button>\n\t\t\t\t\t\t\t\t<button onClick={this.sendItem} className=\"btn btn-primary sendButton\">Send</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</BootstrapModalWrapper>\n\t\t);\n\t}\n});\n","Zotero.ui.widgets.reacttags = {};\n\nZotero.ui.widgets.reacttags.init = function(el){\n\tZ.debug(\"tags widget init\", 3);\n\tvar library = Zotero.ui.getAssociatedLibrary(el);\n\n\tvar reactInstance = ReactDOM.render(\n\t\t<Tags library={library} />,\n\t\tdocument.getElementById('tags-list-div')\n\t);\n};\n\nvar TagRow = React.createClass({\n\tgetDefaultProps: function(){\n\t\treturn {\n\t\t\tshowAutomatic: false\n\t\t};\n\t},\n\thandleClick: function(evt) {\n\t\tevt.stopPropagation();\n\t\tevt.preventDefault();\n\t\tvar tag = this.props.tag;\n\t\t\n\t\tZ.state.toggleTag(tag.apiObj.tag);\n\t\tZ.state.clearUrlVars(['tag', 'collectionKey']);\n        Z.state.pushState();\n\t},\n\trender: function() {\n\t\tvar tag = this.props.tag;\n\t\tvar title = tag.apiObj.tag;\n\t\tif(tag.apiObj.meta.numItems) {\n\t\t\ttitle += \" (\" + tag.apiObj.meta.numItems + \")\";\n\t\t}\n\t\tvar newUrl = \"\";\n\n\t\tvar tagStyle = {};\n\t\tif(tag.color){\n\t\t\ttagStyle = {\n\t\t\t\tcolor: tag.color,\n\t\t\t\tfontWeight: \"bold\"\n\t\t\t};\n\t\t}\n\t\t\n\t\t//render nothing for automatic tags user doesn't want displayed\n\t\tif((this.props.showAutomatic == false) && (tag.apiObj.meta.type != 0)){\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<li className=\"tag-row\">\n\t\t\t\t<a onClick={this.handleClick} className='tag-link' title={title} style={tagStyle} href={newUrl}>{Zotero.ui.trimString(tag.apiObj.tag, 12)}</a>\n\t\t\t</li>\n\t\t);\n\t}\n});\n\nvar TagList = React.createClass({\n\tgetDefaultProps: function(){\n\t\treturn {\n\t\t\ttags: [],\n\t\t\tshowAutomatic: false,\n\t\t\tid: \"\"\n\t\t};\n\t},\n\trender: function() {\n\t\tvar showAutomatic = this.props.showAutomatic;\n\t\tvar tagRowNodes = this.props.tags.map(function(tag, ind){\n\t\t\treturn (\n\t\t\t\t<TagRow key={tag.apiObj.tag} tag={tag} showAutomatic={showAutomatic} />\n\t\t\t);\n\t\t});\n\n\t\treturn (\n\t\t\t<ul id={this.props.id}>\n\t\t\t\t{tagRowNodes}\n\t\t\t</ul>\n\t\t);\n\t}\n});\n\nvar Tags = React.createClass({\n\tgetDefaultProps: function() {\n\t\treturn {};\n\t},\n\tgetInitialState: function() {\n\t\treturn {\n\t\t\ttags: new Zotero.Tags(),\n\t\t\ttagColors: null,\n\t\t\tselectedTags: [],\n\t\t\ttagFilter: \"\",\n\t\t\tshowAutomatic: false,\n\t\t\tloading:false\n\t\t};\n\t},\n\tcomponentWillMount: function(evt) {\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\tvar tagColors = library.preferences.getPref(\"tagColors\");\n\t\treactInstance.setState({tagColors: tagColors});\n\t\t\n\t\tlibrary.listen(\"tagsDirty\", reactInstance.syncTags, {});\n\t\tlibrary.listen(\"cachedDataLoaded\", reactInstance.syncTags, {});\n\t\t\n\t\tlibrary.listen(\"tagsChanged libraryTagsUpdated selectedTagsChanged\", function(evt){\n\t\t\treactInstance.setState({tags:library.tags});\n\t\t}, {});\n\t\t\n\t},\n\thandleFilterChanged: function(evt) {\n\t\tthis.setState({tagFilter: evt.target.value});\n\t},\n\tgetSelectedTagsArray: function() {\n\t\tvar selectedTags = Zotero.state.getUrlVar('tag');\n        if(!J.isArray(selectedTags)){\n\t\t\tif(selectedTags) {\n\t\t\t\tselectedTags = [selectedTags];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tselectedTags = [];\n\t\t\t}\n\t\t}\n\t\treturn selectedTags;\n\t},\n\tsyncTags: function(evt) {\n\t\tZ.debug(\"Tags.syncTags\");\n\t\tvar reactInstance = this;\n\t\tif(this.state.loading){\n\t\t\treturn;\n\t\t}\n\t\tvar library = this.props.library;\n\n\t\t//clear tags if we're explicitly not using cached tags\n\t\tif(evt.data && (evt.data.checkCached === false)){\n\t\t\tlibrary.tags.clear();\n\t\t}\n\t\t\n\t\treactInstance.setState({tags:library.tags, loading:true});\n\t\t\n\t\t//cached tags are preloaded with library if the cache is enabled\n\t\t//this function shouldn't be triggered until that has already been done\n\t\tvar loadingPromise = library.loadUpdatedTags()\n\t\t.then(function(){\n\t\t\tZ.debug(\"syncTags done. clearing loading div\");\n\t\t\treactInstance.setState({tags:library.tags, loading:false});\n\t\t\treturn;\n\t\t},\n\t\tfunction(error){\n\t\t\tZ.error(\"syncTags failed. showing local data and clearing loading div\");\n\t\t\treactInstance.setState({tags:library.tags, loading:false});\n\t\t\tZotero.ui.jsNotificationMessage(\"There was an error loading tags. Some tags may not have been updated.\", 'notice');\n\t\t});\n\t\t\n\t\treturn;\n\t},\n\trender: function() {\n\t\tvar reactInstance = this;\n\t\tvar tags = this.state.tags;\n\t\tvar selectedTagStrings = reactInstance.getSelectedTagsArray();\n\t\tvar tagColors = this.state.tagColors;\n\t\tif(tagColors === null){\n\t\t\ttagColors = [];\n\t\t}\n\n\t\tvar matchAnyFilter = this.state.tagFilter;\n\t\tvar plainTagsList = tags.plainTagsList(tags.tagsArray);\n\t\tvar matchedTagStrings = Z.utils.matchAnyAutocomplete(matchAnyFilter, plainTagsList);\n\n\t\tvar tagColorStrings = [];\n\t\tvar coloredTags = [];\n\t\ttagColors.forEach(function(tagColor, index){\n\t\t\tZ.debug(\"tagColor processing \" + index);\n\t\t\ttagColorStrings.push(tagColor.name.toLowerCase());\n\t\t\tvar coloredTag = tags.getTag(tagColor.name);\n\t\t\tif(coloredTag){\n\t\t\t\tcoloredTag.color = tagColor.color;\n\t\t\t\tcoloredTags.push(coloredTag);\n\t\t\t}\n\t\t});\n\t\tvar filteredTags = [];\n\t\tvar selectedTags = [];\n\n\t\t//always show selected tags, even if they don't pass the filter\n\t\tselectedTagStrings.forEach(function(tagString){\n\t\t\tvar t = tags.getTag(tagString);\n\t\t\tif(t){\n\t\t\t\tselectedTags.push(t);\n\t\t\t}\n\t\t});\n\t\t//add to filteredTags if passes filter, and is not already selected or colored\n\t\tmatchedTagStrings.forEach(function(matchedString){\n\t\t\tvar t = tags.getTag(matchedString);\n\t\t\tif(t !== null && (t.apiObj.meta.numItems > 0)) {\n\t\t\t\t//we have the actual tag object, and it has items\n\t\t\t\t//add to filteredTags if it is not already in colored or selected lists\n\t\t\t\tif(selectedTagStrings.indexOf(matchedString) == -1 && tagColorStrings.indexOf(matchedString) == -1){\n\t\t\t\t\tfilteredTags.push(t);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn (\n\t\t\t<div id=\"tags-list-div\" className=\"tags-list-div\">\n\t\t\t\t<div>\n\t\t\t\t\t<input type=\"text\" id=\"tag-filter-input\" className=\"tag-filter-input form-control\" placeholder=\"Filter Tags\" onChange={this.handleFilterChanged} />\n\t\t\t\t\t<LoadingSpinner loading={this.state.loading} />\n\t\t\t\t\t<TagList tags={selectedTags} id=\"selected-tags-list\" />\n\t\t\t\t\t<TagList tags={coloredTags} id=\"colored-tags-list\" />\n\t\t\t\t\t<TagList tags={filteredTags} id=\"tags-list\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n});\n","Zotero.ui.widgets.reactupdateCollectionDialog = {};\n\nZotero.ui.widgets.reactupdateCollectionDialog.init = function(el){\n\tZ.debug(\"updatecollectionsdialog widget init\", 3);\n\tvar library = Zotero.ui.getAssociatedLibrary(el);\n\tvar reactInstance = ReactDOM.render(\n\t\t<UpdateCollectionDialog library={library} />,\n\t\tdocument.getElementById('update-collection-dialog')\n\t);\n};\n\nvar UpdateCollectionDialog = React.createClass({\n\tcomponentWillMount: function() {\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\tlibrary.listen(\"updateCollectionDialog\", function(){\n\t\t\tvar currentCollectionKey = Zotero.state.getUrlVar('collectionKey');\n\t\t\tvar currentCollection = library.collections.getCollection(currentCollectionKey);\n\t\t\tvar parent = \"\";\n\t\t\tvar name = \"\";\n\t\t\tif(currentCollection){\n\t\t\t\tparent = currentCollection.get('parentCollection');\n\t\t\t\tname = currentCollection.get('name');\n\t\t\t}\n\t\t\treactInstance.setState({\n\t\t\t\tcollectionName: name,\n\t\t\t\tparentCollection: parent\n\t\t\t});\n\t\t\treactInstance.openDialog();\n\t\t}, {});\n\t},\n\tgetInitialState: function() {\n\t\treturn {\n\t\t\tcollectionName: \"\",\n\t\t\tparentCollection: null,\n\t\t}\n\t},\n\thandleCollectionChange: function(evt) {\n\t\tthis.setState({'parentCollection': evt.target.value});\n\t},\n\thandleNameChange: function(evt) {\n\t\tthis.setState({'collectionName': evt.target.value});\n\t},\n\topenDialog: function() {\n\t\tthis.refs.modal.open();\n\t},\n\tcloseDialog: function(evt) {\n\t\tthis.refs.modal.close();\n\t},\n\tsaveCollection: function(evt) {\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\tvar parentKey = this.state.parentCollection;\n\t\tvar name = this.state.collectionName;\n\t\tif(name == \"\"){\n\t\t\tname = \"Untitled\";\n\t\t}\n\t\t\n\t\tvar currentCollectionKey = Zotero.state.getUrlVar('collectionKey');\n\t\tvar collection = library.collections.getCollection(currentCollectionKey);\n\t\t\n\t\tif(!collection){\n\t\t\tZotero.ui.jsNotificationMessage(\"Selected collection not found\", 'error');\n\t\t\treturn false;\n\t\t}\n\t\tZ.debug(\"updating collection: \" + parentKey + \": \" + name);\n\t\tcollection.update(name, parentKey)\n\t\t.then(function(response){\n\t\t\tZotero.ui.jsNotificationMessage(\"Collection Saved\", 'confirm');\n\t\t\tlibrary.collections.dirty = true;\n\t\t\tlibrary.collections.initSecondaryData();\n\t\t\tlibrary.trigger('libraryCollectionsUpdated');\n\t\t\tZotero.state.pushState(true);\n\t\t\treactInstance.closeDialog();\n\t\t}).catch(Zotero.catchPromiseError);\n\t},\n\trender: function() {\n\t\tvar library = this.props.library;\n\t\tvar ncollections = library.collections.nestedOrderingArray();\n\t\t\n\t\tvar collectionOptions = ncollections.map(function(collection, index){\n\t\t\treturn (\n\t\t\t\t<option key={collection.get('key')} value={collection.get('key')}>{'-'.repeat(collection.nestingDepth)} {collection.get('name')}</option>\n\t\t\t);\n\t\t});\n\t\tcollectionOptions.unshift(\n\t\t\t<option key=\"emptyvalue\" value=''>None</option>\n\t\t);\n\n\t\treturn (\n\t\t\t<BootstrapModalWrapper ref=\"modal\">\n\t\t\t\t<div id=\"update-collection-dialog\" className=\"update-collection-dialog\" role=\"dialog\" title=\"Update Collection\" data-keyboard=\"true\">\n\t\t\t\t\t<div  className=\"modal-dialog\">\n\t\t\t\t\t\t<div className=\"modal-content\">\n\t\t\t\t\t\t\t<div className=\"modal-header\">\n\t\t\t\t\t\t\t\t<button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\"></button>\n\t\t\t\t\t\t\t\t<h3>Update Collection</h3>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"update-collection-div modal-body\">\n\t\t\t\t\t\t\t\t<form method=\"POST\" className=\"zform\">\n\t\t\t\t\t\t\t\t\t<ol>\n\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"updated-collection-title-input\">Rename Collection</label>\n\t\t\t\t\t\t\t\t\t\t\t<input value={this.state.collectionName} onChange={this.handleNameChange} id=\"updated-collection-title-input\" className=\"updated-collection-title-input form-control\" />\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"update-collection-parent-select\">Parent Collection</label>\n\t\t\t\t\t\t\t\t\t\t\t<select value={this.state.parentCollection} onChange={this.handleCollectionChange} className='collectionKey-select update-collection-parent form-control'>\n\t\t\t\t\t\t\t\t\t\t\t\t{collectionOptions}\n\t\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t</ol>\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"modal-footer\">\n\t\t\t\t\t\t\t\t<button className=\"btn\" data-dismiss=\"modal\" aria-hidden=\"true\">Close</button>\n\t\t\t\t\t\t\t\t<button onClick={this.saveCollection} className=\"btn btn-primary updateButton\">Update</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</BootstrapModalWrapper>\n\t\t);\n\t}\n});\n","Zotero.ui.widgets.reactuploadDialog = {};\n\nZotero.ui.widgets.reactuploadDialog.init = function(el){\n\tZ.debug(\"uploaddialog widget init\", 3);\n\tvar library = Zotero.ui.getAssociatedLibrary(el);\n\tvar reactInstance = ReactDOM.render(\n\t\t<UploadAttachmentDialog library={library} />,\n\t\tdocument.getElementById('upload-dialog')\n\t);\n};\n\nvar UploadAttachmentDialog = React.createClass({\n\tcomponentWillMount: function() {\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\t\tlibrary.listen(\"uploadAttachment\", function(){\n\t\t\tZ.debug(\"got uploadAttachment event; opening upload dialog\");\n\t\t\treactInstance.setState({itemKey: Zotero.state.getUrlVar('itemKey')});\n\t\t\treactInstance.openDialog();\n\t\t}, {});\n\t},\n\tgetInitialState: function() {\n\t\treturn {\n\t\t\ttitle: \"\",\n\t\t\tfileInfo: null,\n\t\t\tfilename: \"\",\n\t\t\tfilesize: 0,\n\t\t\tcontentType: null,\n\t\t\tpercentLoaded: 0,\n\t\t\tuploading: false,\n\t\t}\n\t},\n\tupload: function() {\n\t\tZ.debug(\"uploadFunction\", 3);\n\t\tvar reactInstance = this;\n\t\tvar library = this.props.library;\n\n\t\t//callback for when everything in the upload form is filled\n\t\t//grab file blob\n\t\t//grab file data given by user\n\t\t//create or modify attachment item\n\t\t//Item.uploadExistingFile or uploadChildAttachment\n\t\t\n\t\tvar fileInfo = this.state.fileInfo;\n\t\tvar specifiedTitle = this.state.title;\n\t\t\n\t\tvar progressCallback = function(e){\n\t\t\tZ.debug('fullUpload.upload.onprogress', 3);\n\t\t\tvar percentLoaded = Math.round((e.loaded / e.total) * 100);\n\t\t\treactInstance.setState({percentLoaded: percentLoaded});\n\t\t};\n\t\t\n\t\tthis.setState({uploading:true});\n\t\t\n\t\t//upload new copy of file if we're modifying an attachment\n\t\t//create child and upload file if we're modifying a top level item\n\t\tvar itemKey = Zotero.state.getUrlVar('itemKey');\n\t\tvar item = library.items.getItem(itemKey);\n\t\tvar uploadPromise;\n\t\t\n\t\tif(!item.get(\"parentItem\")){\n\t\t\tZ.debug(\"no parentItem\", 3);\n\t\t\t//get template item\n\t\t\tvar childItem = new Zotero.Item();\n\t\t\tchildItem.associateWithLibrary(library);\n\t\t\tuploadPromise = childItem.initEmpty('attachment', 'imported_file')\n\t\t\t.then(function(childItem){\n\t\t\t\tZ.debug(\"templateItemDeferred callback\", 3);\n\t\t\t\tchildItem.set('title', specifiedTitle);\n\t\t\t\t\n\t\t\t\treturn item.uploadChildAttachment(childItem, fileInfo, progressCallback);\n\t\t\t});\n\t\t}\n\t\telse if(item.get('itemType') == 'attachment' && item.get(\"linkMode\") == 'imported_file') {\n\t\t\tZ.debug(\"imported_file attachment\", 3);\n\t\t\tuploadPromise = item.uploadFile(fileInfo, progressCallback);\n\t\t}\n\t\t\n\t\tuploadPromise.then(function(){\n\t\t\tZ.debug(\"uploadSuccess\", 3);\n\t\t\tlibrary.trigger(\"uploadSuccessful\");\n\t\t\treactInstance.closeDialog();\n\t\t}).catch(reactInstance.failureHandler)\n\t\t.then(function(){\n\t\t\treactInstance.closeDialog();\n\t\t});\n\t},\n\thandleUploadFailure: function(failure) {\n\t\tZ.debug(\"Upload failed\", 3);\n\t\tZ.debug(failure, 3);\n\t\tZotero.ui.jsNotificationMessage(\"There was a problem uploading your file.\", 'error');\n\t\tswitch(failure.code){\n\t\t\tcase 400:\n\t\t\t\tZotero.ui.jsNotificationMessage(\"Bad Input. 400\", 'error');\n\t\t\t\tbreak;\n\t\t\tcase 403:\n\t\t\t\tZotero.ui.jsNotificationMessage(\"You do not have permission to edit files\", 'error');\n\t\t\t\tbreak;\n\t\t\tcase 409:\n\t\t\t\tZotero.ui.jsNotificationMessage(\"The library is currently locked. Please try again in a few minutes.\", 'error');\n\t\t\t\tbreak;\n\t\t\tcase 412:\n\t\t\t\tZotero.ui.jsNotificationMessage(\"File conflict. Remote file has changed\", 'error');\n\t\t\t\tbreak;\n\t\t\tcase 413:\n\t\t\t\tZotero.ui.jsNotificationMessage(\"Requested upload would exceed storage quota.\", 'error');\n\t\t\t\tbreak;\n\t\t\tcase 428:\n\t\t\t\tZotero.ui.jsNotificationMessage(\"Precondition required error\", 'error');\n\t\t\t\tbreak;\n\t\t\tcase 429:\n\t\t\t\tZotero.ui.jsNotificationMessage(\"Too many uploads pending. Please try again in a few minutes\", 'error');\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tZotero.ui.jsNotificationMessage(\"Unknown error uploading file. \" + failure.code, 'error');\n\t\t}\n\t},\n\thandleFiles: function(files) {\n\t\tZ.debug(\"attachmentUpload handleFiles\", 3);\n\t\tvar reactInstance = this;\n\t\t\n\t\tif(typeof files == 'undefined' || files.length === 0){\n\t\t\treturn false;\n\t\t}\n\t\tvar file = files[0];\n\t\t\n\t\tZotero.file.getFileInfo(file)\n\t\t.then(function(fileInfo){\n\t\t\tZ.debug(fileInfo);\n\t\t\treactInstance.setState({\n\t\t\t\tfileInfo: fileInfo,\n\t\t\t\tfilename: fileInfo.filename,\n\t\t\t\tfilesize: fileInfo.filesize,\n\t\t\t\tcontentType: fileInfo.contentType\n\t\t\t});\n\t\t});\n\t\treturn;\n\t},\n\thandleDrop: function(evt){\n\t\tZ.debug(\"fileuploaddroptarget drop callback\", 3);\n\t\tevt.stopPropagation();\n\t\tevt.preventDefault();\n\t\t//clear file input so drag/drop and input don't show conflicting information\n\t\tvar e = evt.originalEvent;\n\t\tvar dt = e.dataTransfer;\n\t\tvar files = dt.files;\n\t\tthis.handleFiles(files);\n\t},\n\thandleFileInputChange: function(evt){\n\t\tZ.debug(\"fileuploaddroptarget callback 1\", 3);\n\t\tevt.stopPropagation();\n\t\tevt.preventDefault();\n\t\tvar files = J(this.refs.fileInput).get(0).files;\n\t\tthis.handleFiles(files);\n\t},\n\thandleTitleChange: function(evt) {\n\t\tthis.setState({title:evt.target.value});\n\t},\n\topenDialog: function() {\n\t\tthis.refs.modal.open();\n\t},\n\tcloseDialog: function(evt) {\n\t\tthis.refs.modal.close();\n\t},\n\trender: function() {\n\t\tvar library = this.props.library;\n\t\t\n\t\treturn (\n\t\t\t<BootstrapModalWrapper ref=\"modal\">\n\t\t\t\t<div id=\"upload-attachment-dialog\" className=\"upload-attachment-dialog\" role=\"dialog\" title=\"Upload Attachment\" data-keyboard=\"true\">\n\t\t\t\t\t<div  className=\"modal-dialog\">\n\t\t\t\t\t\t<div className=\"modal-content\">\n\t\t\t\t\t\t\t<div className=\"modal-header\">\n\t\t\t\t\t\t\t\t<button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">&times;</button>\n\t\t\t\t\t\t\t\t<h3 className=\"modal-title\">Upload Attachment</h3>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"upload-attachment-div modal-body\" data-role=\"content\">\n\t\t\t\t\t\t\t\t<form className=\"attachmentuploadForm zform\">\n\t\t\t\t\t\t\t\t<h3>Select a file for upload or drag and drop below</h3>\n\t\t\t\t\t\t\t\t<span className=\"btn btn-primary btn-file\">\n\t\t\t\t\t\t\t\t\tChoose File<input onChange={this.handleFileInputChange} ref=\"fileInput\" type=\"file\" id=\"fileuploadinput\" className=\"fileuploadinput\" multiple />\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<div onDrop={this.handleDrop} id=\"fileuploaddroptarget\" className=\"fileuploaddroptarget\">\n\t\t\t\t\t\t\t\t\t<h3>Drop your file here</h3>\n\t\t\t\t\t\t\t\t\t<h3 id=\"droppedfilename\" className=\"droppedfilename\"></h3>\n\t\t\t\t\t\t\t\t\t<LoadingSpinner loading={this.state.uploading} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div id=\"attachmentuploadfileinfo\" className=\"attachmentuploadfileinfo\">\n\t\t\t\t\t\t\t\t\t<table className=\"table table-striped\">\n\t\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<th>Title</th>\n\t\t\t\t\t\t\t\t\t\t\t<td><input onChange={this.handleTitleChange} id=\"upload-file-title-input\" className=\"upload-file-title-input form-control\" type=\"text\" /></td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<th>Size</th>\n\t\t\t\t\t\t\t\t\t\t\t<td className=\"uploadfilesize\">{this.state.filesize}</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<th>Type</th>\n\t\t\t\t\t\t\t\t\t\t\t<td className=\"uploadfiletype\">{this.state.contentType}</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<th>Upload</th>\n\t\t\t\t\t\t\t\t\t\t\t<td className=\"uploadprogress\"><meter min=\"0\" max=\"100\" id=\"uploadprogressmeter\" value={this.state.percentLoaded}></meter></td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</form>\n\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"modal-footer\">\n\t\t\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-default\" data-dismiss=\"modal\" aria-hidden=\"true\">Close</button>\n\t\t\t\t\t\t\t\t<button onClick={this.upload} type=\"button\" className=\"btn btn-primary uploadButton\">Upload</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</BootstrapModalWrapper>\n\t\t);\n\t}\n});\n","Zotero.ui.widgets.reactGroups = {};\n\nZotero.ui.widgets.reactGroups.init = function(el){\n\tZ.debug(\"Zotero.ui.widgets.reactGroups\");\n\t//var library = Zotero.ui.getAssociatedLibrary(el);\n\tvar reactInstance = ReactDOM.render(\n\t\t<UserGroups />,\n\t\tdocument.getElementById('user-groups-div')\n\t);\n};\n\nvar GroupNugget = React.createClass({\n\trender: function() {\n\t\tvar reactInstance = this;\n\t\tvar group = this.props.group;\n\n\t\tvar userID = Zotero.config.loggedInUserID;\n\t\tvar groupManageable = false;\n\t\tvar memberCount = 1;\n\t\tif(group.apiObj.data.members) {\n\t\t\tmemberCount += group.apiObj.data.members.length;\n\t\t}\n\t\tif(group.apiObj.data.admins){\n\t\t\tmemberCount += group.apiObj.data.admins.length;\n\t\t}\n\t\t\n\t\tif(userID && (userID == group.apiObj.data.owner || (J.inArray(userID, group.apiObj.data.admins) != -1 ))) {\n\t\t\tgroupManageable = true;\n\t\t}\n\t\t\n\t\tvar groupImage = null;\n\t\tif(group.hasImage){\n\t\t\tgroupImage = (\n\t\t\t\t<a href={Zotero.url.groupViewUrl(group)} className=\"group-image\">\n\t\t\t\t\t<img src={Zotero.url.groupImageUrl(group)} alt=\"\" />\n\t\t\t\t</a>\n\t\t\t);\n\t\t}\n\n\t\tvar manageLinks = null;\n\t\tif(groupManageable){\n\t\t\tmanageLinks = (\n\t\t\t\t<nav className=\"action-links\">\n\t\t\t\t\t<li><a href={Zotero.url.groupSettingsUrl(group)}>Manage Profile</a></li>\n\t\t\t\t\t<li><a href={Zotero.url.groupMemberSettingsUrl(group)}>Manage Members</a></li>\n\t\t\t\t\t<li><a href={Zotero.url.groupLibrarySettingsUrl(group)}>Manage Library</a></li>\n\t\t\t\t</nav>\n\t\t\t);\n\t\t}\n\n\t\tvar groupDescription = null;\n\t\tif(group.apiObj.data.description){\n\t\t\tvar markup = {__html: group.apiObj.data.description};\n\t\t\tgroupDescription = (\n\t\t\t\t<tr>\n\t\t\t\t\t<th scope=\"row\">Description</th> \n\t\t\t\t\t<td dangerouslySetInnerHTML={markup}></td>\n\t\t\t\t</tr>\n\t\t\t);\n\t\t}\n\n\t\tvar libAccess = Zotero.Group.prototype.accessMap[group.apiObj.data.libraryReading][group.apiObj.data.libraryEditing];\n\t\tif(group.apiObj.data.type == 'Private' && group.apiObj.data.libraryReading == \"all\"){\n\t\t\tlibAccess = Zotero.Group.prototype.accessMap['members'][group.apiObj.data.libraryEditing];\n\t\t}\n\n\t\treturn (\n\t\t\t<div key={group.groupID} className=\"nugget-group\">\n\t\t\t\t<div className=\"nugget-full\">\n\t\t\t\t\t{groupImage}\n\t\t\t\t\t<div className=\"nugget-name\">\n\t\t\t\t\t\t<a href={Zotero.url.groupViewUrl(group)}>{group.apiObj.data.name}</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<nav id=\"group-library-link-nav\" className=\"action-links\">\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li><a href={Zotero.url.groupLibraryUrl(group)}>Group Library</a></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</nav>\n\t\t\t\t\t{manageLinks}\n\t\t\t\t\t<table className=\"nugget-profile table\">\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th scope=\"row\">Members</th>\n\t\t\t\t\t\t\t<td>{memberCount}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t{groupDescription}\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th scope=\"row\">Group Type</th>\n\t\t\t\t\t\t\t<td>{Zotero.Group.prototype.typeMap[group.apiObj.data.type]}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th scope=\"row\">Group Library</th>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{libAccess}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n});\n\nvar UserGroups = React.createClass({\n\tcomponentWillMount: function() {\n\t\tvar reactInstance = this;\n\t\tvar groups = new Zotero.Groups();\n\t\tif(Zotero.config.loggedIn && Zotero.config.loggedInUserID){\n\t\t\treactInstance.setState({loading:true});\n\t\t\tvar groupsPromise = groups.fetchUserGroups(Zotero.config.loggedInUserID)\n\t\t\t.then(function(response){\n\t\t\t\tvar groups = response.fetchedGroups;\n\t\t\t\treactInstance.setState({groups:groups, loading:false});\n\t\t\t}).catch(Zotero.catchPromiseError);\n\t\t}\n\t},\n\tgetInitialState: function() {\n\t\treturn {\n\t\t\tgroups: [],\n\t\t\tloading:false\n\t\t};\n\t},\n\trender: function() {\n\t\tvar reactInstance = this;\n\t\tvar groups = this.state.groups;\n\n\t\tvar groupNuggets = groups.map(function(group){\n\t\t\treturn (\n\t\t\t\t<GroupNugget key={group.get('id')} group={group} />\n\t\t\t);\n\t\t});\n\n\t\treturn (\n\t\t\t<div id=\"user-groups-div\" className=\"user-groups\">\n\t\t\t\t{groupNuggets}\n\t\t\t\t<LoadingSpinner loading={reactInstance.state.loading} />\n\t\t\t</div>\n\t\t);\n\t}\n});","Zotero.url.requestReadApiKeyUrl = function(libraryType, libraryID, redirect){\n\tvar apiKeyBase = Zotero.config.baseWebsiteUrl + '/settings/keys/new';\n\tapiKeyBase.replace('http', 'https');\n\tvar qparams = {'name': 'Private Feed'};\n\tif(libraryType == 'group'){\n\t\tqparams['library_access'] = 0;\n\t\tqparams['group_' + libraryID] = 'read';\n\t\tqparams['redirect'] = redirect;\n\t}\n\telse if(libraryType == 'user'){\n\t\tqparams['library_access'] = 1;\n\t\tqparams['notes_access'] = 1;\n\t\tqparams['redirect'] = redirect;\n\t}\n\t\n\tvar queryParamsArray = [];\n\tJ.each(qparams, function(index, value){\n\t\tqueryParamsArray.push(encodeURIComponent(index) + '=' + encodeURIComponent(value));\n\t});\n\t\n\t//build query string by concatenating array\n\tvar queryString = '?' + queryParamsArray.join('&');\n\t\n\treturn apiKeyBase + queryString;\n};\n\nZotero.url.groupViewUrl = function(group){\n\tif(group.get(\"type\") == \"Private\"){\n\t\treturn Zotero.config.baseWebsiteUrl + \"/groups/\" + group.get(\"id\");\n\t}\n\telse {\n\t\treturn Zotero.config.baseWebsiteUrl + \"/groups/\" + Zotero.utils.slugify(group.get(\"name\"));\n\t}\n};\n\nZotero.url.groupLibraryUrl = function(group){\n\tif(group.get(\"type\") == \"Private\"){\n\t\treturn Zotero.config.baseWebsiteUrl + \"/groups/\" + group.get(\"id\") + \"/items\";\n\t}\n\telse {\n\t\treturn Zotero.config.baseWebsiteUrl + \"/groups/\" + Zotero.utils.slugify(group.get(\"name\")) + \"/items\";\n\t}\n};\n\nZotero.url.groupSettingsUrl = function(group){\n\treturn Zotero.config.baseWebsiteUrl + \"/groups/\" + group.get(\"id\") + \"/settings\";\n};\n\nZotero.url.groupMemberSettingsUrl = function(group){\n\treturn Zotero.config.baseWebsiteUrl + \"/groups/\" + group.get(\"id\") + \"/settings/members\";\n};\n\nZotero.url.groupLibrarySettingsUrl = function(group){\n\treturn Zotero.config.baseWebsiteUrl + \"/groups/\" + group.get(\"id\") + \"/settings/library\";\n};\n\n","/**\n * Zotero.Pages class containing page specific functions for the website. Loaded based on\n * the value of zoterojsClass\n */\nZotero.pages = {\n\t//base zotero js functions that will be used on every page\n\tbase: {\n\n\t\tinit: function(){\n\t\t\tthis.tagline();\n\t\t\tthis.setupSearch();\n\t\t\tthis.setupNav();\n\t\t\tJ(\"#sitenav .toggle\").click(this.navMenu);\n\t\t\t\n\t\t\t//set up support page expandos\n\t\t\tJ(\".support-menu-expand-section\").hide();\n\t\t\tJ(\".support-menu-section\").on('click', \"h2\", function(){\n\t\t\t\tJ(this).siblings('.support-menu-expand-section').slideToggle();\n\t\t\t});\n\t\t\t\n\t\t},\n\t\t\n\t\t/**\n\t\t * Selects a random tagline for the header\n\t\t *\n\t\t * @return void\n\t\t **/\n\t\ttagline: function(){\n\t\t\tvar taglines = [\n\t\t\t\t'See it. Save it. Sort it. Search it. Cite it.',\n\t\t\t\t'Leveraging the long tail of scholarship.',\n\t\t\t\t'A personal research assistant. Inside your browser.',\n\t\t\t\t'Goodbye 3x5 cards, hello Zotero.',\n\t\t\t\t'Citation management is only the beginning.',\n\t\t\t\t'The next-generation research tool.',\n\t\t\t\t'Research, not re-search',\n\t\t\t\t'The web now has a wrangler.'\n\t\t\t];\n\t\t\tvar pos = Math.floor(Math.random() * taglines.length);\n\t\t\tJ(\"#tagline\").text(taglines[pos]);\n\t\t},\n\n\t\t/**\n\t\t * Send search to the right place\n\t\t *\n\t\t * @return void\n\t\t **/\n\t\tsetupSearch: function() {\n\t\t\t//Z.debug(\"setupSearch\");\n\t\t\tvar context = \"support\";\n\t\t\tvar label   = \"\";\n\t\t\t\n\t\t\t// Look for a context specific search\n\t\t\tif(undefined !== window.zoterojsSearchContext){\n\t\t\t\tcontext = zoterojsSearchContext;\n\t\t\t}\n\t\t\tswitch (context) {\n\t\t\t\tcase \"people\"        : label = \"Search for people\";    break;\n\t\t\t\tcase \"group\"         : label = \"Search for groups\";    break;\n\t\t\t\tcase \"documentation\" : label = \"Search documentation\"; break;\n\t\t\t\tcase \"library\"       : label = \"Search Library\";       break;\n\t\t\t\tcase \"grouplibrary\"  : label = \"Search Library\";       break;\n\t\t\t\tcase \"support\"       : label = \"Search support\";       break;\n\t\t\t\tcase \"forums\"        : label = \"Search forums\";        break;\n\t\t\t\tdefault              : label = \"Search support\";       break;\n\t\t\t}\n\t\t\t\n\t\t\tif(context == \"documentation\" || context == \"support\"){\n\t\t\t\tJ(\"#simple-search\").on('submit', function(e){\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tvar query     = J(this).find(\"input[type='text']\").val();\n\t\t\t\t\tZ.pages.base.supportSearchRedirect(query);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(context == \"people\" || context == \"group\"){\n\t\t\t\tJ(\"#simple-search\").on('submit', function(e){\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tvar searchUrl = Zotero.config.baseZoteroWebsiteUrl + \"/search/#type/\" + context;\n\t\t\t\t\tvar query     = J(this).find(\"input[type='text']\").val();\n\t\t\t\t\tif(query !== \"\" && query != label){\n\t\t\t\t\t\tsearchUrl = searchUrl + \"/q/\" + encodeURIComponent(query);\n\t\t\t\t\t}\n\t\t\t\t\tlocation.href = searchUrl;\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t\n\t\tsupportSearchRedirect: function(query) {\n\t\t\tvar q = encodeURIComponent(query + \" site:www.zotero.org/support\");\n\t\t\tZ.debug(q);return;\n\t\t\tvar url = \"https://duckduckgo.com/?q=\" + q;\n\t\t\t/*var url = \"https://www.google.com/#q=\" + q;*/\n\t\t\twindow.location = url;\n\t\t},\n\n\t\tforumSearchRedirect: function(query) {\n\t\t\tvar q = encodeURIComponent(query + \" site:forums.zotero.org\");\n\t\t\tvar url = \"https://duckduckgo.com/?q=\" + q;\n\t\t\t/*var url = \"https://www.google.com/#q=\" + q;*/\n\t\t\twindow.location = url;\n\t\t},\n\t\t/**\n\t\t * Select the right nav tab\n\t\t *\n\t\t * @return void\n\t\t **/\n\t\tsetupNav: function () {\n\t\t\tvar tab = \"\";\n\t\t\t// Look for a context specific search\n\t\t\tif(undefined !== window.zoterojsSearchContext){\n\t\t\t\ttab = zoterojsSearchContext;\n\t\t\t\tif(tab == \"support\") { tab = \"\"; }\n\t\t\t\t\n\t\t\t}\n\t\t\t// special case for being on the home page\n\t\t\tif(location.pathname == \"/\" && location.href.search(\"forums.\") < 0){\n\t\t\t\ttab = \"home\";\n\t\t\t}\n\t\t\tif(tab !== \"\"){\n\t\t\t\tJ(\".primarynav\").find(\"a.\" + tab).closest('li').addClass(\"active\");\n\t\t\t}\n\t\t}\n\t},\n\tsettings_cv: {\n\t\tinit: function(){\n\t\t\t// Delete the cv section when the delete link is clicked\n\t\t\tJ(\"#cv-sections\").on(\"click\", \".cv-delete\", function(e){\n\t\t\t\tif(confirm (\"Are you sure you want to delete this section?\")){\n\t\t\t\t\t// Clean up RTEs before moving the base DOM elements around\n\t\t\t\t\tZotero.ui.cleanUpRte(J(\"#cv-sections\"));\n\t\t\t\t\t\n\t\t\t\t\tJ(this).closest(\"div.cv-section\").remove();\n\t\t\t\t\t\n\t\t\t\t\tZotero.ui.init.rte('default', false, J(\"#cv-sections\"));\n\t\t\t\t\t\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\t// Add a new cv section when the add button is clicked\n\t\t\tJ(\".cv-insert-freetext\").on(\"click\", function(e){\n\t\t\t\t// Get the number of sections that exist before adding a new one\n\t\t\t\tvar sectionCount  = J(\"#cv-sections div.cv-section\").length;\n\t\t\t\tvar newIndex = sectionCount + 1;\n\t\t\t\tvar newTextareaID = \"cv_\" + newIndex + \"_text\";\n\n\t\t\t\t//render new section template into end of sections\n\t\t\t\tJ(\"#cv-sections\").append( J('#cvsectionTemplate').render({\n\t\t\t\t\tcvSectionIndex: newIndex,\n\t\t\t\t\tcvSectionType: \"text\",\n\t\t\t\t\tcvEntry: {},\n\t\t\t\t}) );\n\n\t\t\t\t//activate RTE\n\t\t\t\tZotero.ui.init.rte('default', false, J(\"div.cv-section\").last());\n\t\t\t\t\n\t\t\t\tJ(\"input.cv-heading\").last().focus();\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\t\n\t\t\t// Add a new cv collection when the add button is clicked\n\t\t\tJ(\".cv-insert-collection\").on(\"click\", function(e){\n\t\t\t\t// Get the number of sections that exist before adding a new one\n\t\t\t\tvar sectionCount  = J(\"#cv-sections div.cv-section\").length;\n\t\t\t\tvar newIndex = sectionCount + 1;\n\t\t\t\t\n\t\t\t\t//render new section template into end of sections\n\t\t\t\tZ.debug(zoteroData.collectionOptions);\n\t\t\t\tJ(\"#cv-sections\").append( J('#cvsectionTemplate').render({\n\t\t\t\t\tcvSectionIndex: newIndex,\n\t\t\t\t\tcvSectionType: \"collection\",\n\t\t\t\t\tcollectionOptions: zoteroData.collectionOptions,\n\t\t\t\t\tcvEntry:{},\n\t\t\t\t}) );\n\n\t\t\t\tJ(\"input.cv-heading\").last().focus();\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\t\n\t\t\t// Move the section down when the down link is clicked\n\t\t\tJ(\"#cv-sections\").on(\"click\", \".cv-move-down\", function(e){\n\t\t\t\tif(J(this).closest('div.cv-section').find(\"textarea\").length > 0){\n\t\t\t\t\t// Clean up RTEs before moving the base DOM elements around\n\t\t\t\t\tZotero.ui.cleanUpRte(J(\"#cv-sections\"));\n\t\t\t\t\t\n\t\t\t\t\t// Move the section and reenable the rte control\n\t\t\t\t\tJ(this).closest(\"div.cv-section\").next().after(J(this).closest(\"div.cv-section\"));\n\t\t\t\t\tZotero.ui.init.rte('default', false);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tJ(this).closest(\"div.cv-section\").next().after(J(this).closest(\"div.cv-section\"));\n\t\t\t\t}\n\n\t\t\t\t//Zotero.pages.settings_cv.hideMoveLinks();\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\t\n\t\t\t// Move the section up when the up link is clicked\n\t\t\tJ(\"#cv-sections\").on(\"click\", \".cv-move-up\", function(e){\n\t\t\t\tif(J(this).closest('div.cv-section').find(\"textarea\").length > 0){\n\t\t\t\t\t// Clean up RTEs before moving the base DOM elements around\n\t\t\t\t\tZotero.ui.cleanUpRte(J(\"#cv-sections\"));\n\t\t\t\t\t\n\t\t\t\t\t// Move the section and reenable the rte control\n\t\t\t\t\tJ(this).closest(\"div.cv-section\").prev().before(J(this).closest(\"div.cv-section\"));\n\t\t\t\t\tZotero.ui.init.rte('default', false);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tJ(this).closest(\"div.cv-section\").prev().before(J(this).closest(\"div.cv-section\"));\n\t\t\t\t}\n\t\t\t\t//Zotero.pages.settings_cv.hideMoveLinks();\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\t\n\t\t\t// reindex the field names before submitting the form\n\t\t\tJ(\"#cv-submit\").click(function(e){\n\t\t\t\tJ(\"#cv-sections div.cv-section\").each(function(i){\n\t\t\t\t\tvar heading;\n\t\t\t\t\tif(J(this).hasClass(\"cv-text\") ){\n\t\t\t\t\t\theading = J(this).find(\".cv-heading\").attr(\"name\", \"cv_\"+(i+1)+\"_heading\");\n\t\t\t\t\t\tif(heading.val() == \"Enter a section name\"){\n\t\t\t\t\t\t\theading.val(\"\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tJ(this).find(\".cv-text\").attr(\"name\", \"cv_\"+(i+1)+\"_text\");\n\t\t\t\t\t}\n\t\t\t\t\telse if(J(this).hasClass(\"cv-collection\") ){\n\t\t\t\t\t\theading = J(this).find(\".cv-heading\").attr(\"name\", \"cv_\"+(i+1)+\"_heading\");\n\t\t\t\t\t\tif(heading.val() == \"Enter a section name\"){\n\t\t\t\t\t\t\theading.val(\"\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tJ(this).find(\"select.cv-collection\").attr(\"name\", \"cv_\"+(i+1)+\"_collection\");\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\t\n\t\t\t//init existing rte on first load\n\t\t\tZotero.ui.init.rte('nolinks', false, J(\"#cv-sections\"));\n\t\t}\n\t},\n\t\n\tsettings_account: {\n\t},\n\t\n\tsettings_profile: {\n\t\tinit: function(){\n\t\t\tZotero.ui.init.rte('nolinks');\n\t\t}\n\t},\n\t\n\tsettings_privacy: {\n\t\t//disable publishNotes checkbox when the library is not set to be public\n\t\tinit: function(){\n\t\t\tif(!J(\"input#privacy_publishLibrary\").prop(\"checked\")){\n\t\t\t\tJ(\"input#privacy_publishNotes\").prop(\"disabled\",true);\n\t\t\t}\n\t\t\tJ(\"input#privacy_publishLibrary\").bind(\"change\", function(){\n\t\t\t\tif(!J(\"input#privacy_publishLibrary\").prop(\"checked\")){\n\t\t\t\t\tJ(\"input#privacy_publishNotes\").prop(\"checked\", false).prop(\"disabled\",true);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tJ(\"input#privacy_publishNotes\").prop(\"disabled\", false);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t},\n\t\n\tsettings_apikeys: {\n\t\tinit: function(){\n\t\t\t\n\t\t}\n\t},\n\t\n\tsettings_newkey: {\n\t\tinit: function(){\n\t\t\tZ.debug(\"zoteroPages settings_newkey\", 3);\n\t\t\tZotero.pages.settings_editkey.init();\n\t\t}\n\t},\n\t\n\tsettings_newoauthkey: {\n\t\tinit: function(){\n\t\t\tZotero.pages.settings_newkey.init();\n\t\t\t\n\t\t\tJ(\"button[name='edit']\").closest('div.form-group').nextAll().hide();\n\t\t\tJ(\"button[name='edit']\").click(function(e){\n\t\t\t\te.preventDefault();\n\t\t\t\tJ(\"button[name='edit']\").closest('div.form-group').nextAll().show();\n\t\t\t});\n\t\t},\n\t\t\n\t\tupdatePermissionsSummary: function(){\n\t\t\tJ(\"#permissions-summary\").empty().append(Z.pages.settings_newoauthkey.permissionsSummary());\n\t\t},\n\t\t\n\t\t//build a human readable summary of currently selected permissions\n\t\tpermissionsSummary: function(){\n\t\t\tvar summary = '';\n\t\t\tvar libraryAccess = J(\"input#library_access\").prop('checked');\n\t\t\tvar notesAccess = J(\"input#notes_access\").prop('checked');\n\t\t\tvar writeAccess = J(\"input#write_access\").prop('checked');\n\t\t\tif(libraryAccess){\n\t\t\t\tsummary += \"Access to read your personal library.<br />\";\n\t\t\t}\n\t\t\tif(notesAccess){\n\t\t\t\tsummary += \"Access to read notes in your personal library.<br />\";\n\t\t\t}\n\t\t\tif(writeAccess){\n\t\t\t\tsummary += \"Access to read and modify your personal library.<br />\";\n\t\t\t}\n\t\t\tvar allGroupAccess = J(\"input[name='groups_all']:checked\").val();\n\t\t\tswitch(allGroupAccess){\n\t\t\t\tcase 'read':\n\t\t\t\t\tsummary += \"Access to read any of your group libraries<br />\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'write':\n\t\t\t\t\tsummary += \"Access to read and modify any of your group libraries<br />\";\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\tvar allowIndividualGroupPermissions = J(\"input#individual_groups\").prop('checked');\n\t\t\tvar individualGroupAccess = [];\n\t\t\tif(allowIndividualGroupPermissions){\n\t\t\t\tJ(\"input.individual_group_permission:checked\").each(function(ind, el){\n\t\t\t\t\tvar groupname = J(el).data('groupname');\n\t\t\t\t\tvar groupID = J(el).data('groupid');\n\t\t\t\t\tvar permission = J(el).val();\n\t\t\t\t\tswitch(permission){\n\t\t\t\t\t\tcase 'read':\n\t\t\t\t\t\t\tsummary += \"Access to read library for group '\" + groupname + \"'<br />\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'write':\n\t\t\t\t\t\t\tsummary += \"Access to read and modify library for group '\" + groupname + \"'<br />\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\treturn summary;\n\t\t},\n\t},\n\t\n\tsettings_editkey: {\n\t\tinit: function(){\n\t\t\tZ.debug(\"zoteroPages settings_editkey\", 3);\n\t\t\tif(!J(\"input[type='checkbox'][name='library_access']\").prop(\"checked\")){\n\t\t\t\tJ(\"input[name='notes_access']\").prop(\"disabled\",\"disabled\");\n\t\t\t}\n\t\t\tJ(\"input#library_access\").bind(\"change\", function(){\n\t\t\t\tif(!J(\"input[type='checkbox'][name='library_access']\").prop(\"checked\")){\n\t\t\t\t\tJ(\"input[name='notes_access']\").prop(\"checked\", false).prop(\"disabled\", true);\n\t\t\t\t\tJ(\"input[name='write_access']\").prop('checked', false).prop('disabled', true);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tJ(\"input[name='notes_access']\").prop(\"disabled\", false);\n\t\t\t\t\tJ(\"input[name='write_access']\").prop('disabled', false);\n\t\t\t\t}\n\t\t\t});\n\t\t\tJ(\"input[name='name']\").focus();\n\t\t\t\n\t\t\tif(!(J(\"input[type='checkbox'][name='individual_groups']\").prop('checked'))) {\n\t\t\t\tJ(\".individual_group_permission\").closest('div.form-group').hide();\n\t\t\t}\n\t\t\tJ(\"input[name='individual_groups']\").bind('change', function(){\n\t\t\t\tZ.debug(\"individual groups checkbox changed\");\n\t\t\t\tif(J(\"input[type='checkbox'][name='individual_groups']\").prop('checked')){\n\t\t\t\t\tJ(\".individual_group_permission\").closest('div.form-group').show();\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tJ(\".individual_group_permission\").closest('div.form-group').hide();\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tJ('input').bind('change', Zotero.pages.settings_newoauthkey.updatePermissionsSummary);\n\t\t\tZotero.pages.settings_newoauthkey.updatePermissionsSummary();\n\t\t}\n\t},\n\t\n\tsettings_storage: {\n\t\tinit: function(){\n\t\t\tvar selectedLevel = J(\"input[name=storageLevel]:checked\").val();\n\t\t\t\n\t\t\tZotero.pages.settings_storage.showSelectedResults(selectedLevel);\n\t\t\t\n\t\t\tJ(\"input[name=storageLevel]\").change(function(){\n\t\t\t\tZotero.pages.settings_storage.showSelectedResults(J(\"input[name=storageLevel]:checked\").val());\n\t\t\t});\n\t\t\t\n\t\t\tJ(\"#purge-button\").click(function(){\n\t\t\t\tif(confirm(\"You are about to remove all uploaded files associated with your personal library.\")){\n\t\t\t\t\tJ(\"#confirm_delete\").val('confirmed');\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t\n\t\tshowSelectedResults: function(selectedLevel){\n\t\t\tif(selectedLevel == 2){\n\t\t\t\tJ(\"#order-result-div\").html(zoteroData.orderResult2);\n\t\t\t}\n\t\t\telse if(selectedLevel == 3){\n\t\t\t\tJ(\"#order-result-div\").html(zoteroData.orderResult3);\n\t\t\t}\n\t\t\telse if(selectedLevel == 4){\n\t\t\t\tJ(\"#order-result-div\").html(zoteroData.orderResult4);\n\t\t\t}\n\t\t\telse if(selectedLevel == 5){\n\t\t\t\tJ(\"#order-result-div\").html(zoteroData.orderResult5);\n\t\t\t}\n\t\t\telse if(selectedLevel == 6){\n\t\t\t\tJ(\"#order-result-div\").html(zoteroData.orderResult6);\n\t\t\t}\n\t\t}\n\t},\n\t\n\tsettings_deleteaccount: {\n\t\tinit: function(){\n\t\t\tJ(\"button#deleteaccount\").click(function(){\n\t\t\t\tif(!confirm(\"Are you sure you want to permanently delete your account? You will not be able to recover the account or the user name.\")){\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\t\n\tgroup_new: {\n\t\tinit: function(){\n\t\t\tvar timeout;\n\t\t\t// When the value of the input box changes,\n\t\t\tJ(\"input#name\").keyup(function(e){\n\t\t\t\tclearTimeout(timeout);\n\t\t\t\ttimeout = setTimeout(Zotero.pages.group_new.nameChange, 300);\n\t\t\t});\n\t\t\t\n\t\t\tJ(\"input[name=group_type]\").change(Zotero.pages.group_new.nameChange);\n\t\t\t\n\t\t\t//insert slug preview label\n\t\t\tJ('input#name').after(\"<label id='slugpreview'>Group URL: \" +\n\t\t\t\t\t\t\t\t\tZotero.config.baseZoteroWebsiteUrl + \"/\" + \"groups/\" +\n\t\t\t\t\t\t\t\t\tZotero.utils.slugify(J(\"input#name\").val()) +\n\t\t\t\t\t\t\t\t\t\"</label>\");\n\t\t\t\n\t\t},\n\t\t\n\t\tnameChange: function(){\n\t\t\t//make sure label is black after each change before checking with server\n\t\t\tJ(\"#slugpreview\").css(\"color\", \"black\");\n\t\t\tvar groupType = J('input[name=group_type]:checked').val();\n\t\t\t// update slug preview text\n\t\t\tif(groupType == 'Private'){\n\t\t\t\tJ(\"#slugpreview\").text(\"Group URL: \" +Zotero.config.baseZoteroWebsiteUrl + \"/\" + \"groups/<number>\");\n\t\t\t}\n\t\t\telse{\n\t\t\t\tJ(\"#slugpreview\").text(\"Group URL: \" +Zotero.config.baseZoteroWebsiteUrl + \"/\" + \"groups/\" +\n\t\t\t\tZotero.utils.slugify(J(\"input#name\").val()) );\n\t\t\t}\n\t\t\t\n\t\t\tif(groupType != 'Private'){\n\t\t\t\t// Get the value of the name input\n\t\t\t\tvar input = J(\"input#name\").val();\n\t\t\t\t// Poll the server with the input value\n\t\t\t\tJ.getJSON(baseURL+\"/group/checkname/\", {\"input\":input}, function(data){\n\t\t\t\t\tJ(\"#namePreview span\").text(data.slug);\n\t\t\t\t\tif(data.valid){\n\t\t\t\t\t\tJ(\"#slugpreview\").css({\"color\":\"green\"});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tJ(\"#slugpreview\").css({\"color\":\"red\"});\n\t\t\t\t\t}\n\t\t\t\t\tJ(\"#namePreview img\").remove();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\t\n\tgroup_settings: {\n\t\tinit: function(){\n\t\t\tZotero.debug(\"initializing group delete form\");\n\t\t\tZotero.ui.init.rte('nolinks');\n\t\t\t\n\t\t\tJ(\"#deleteForm\").submit(function(){\n\t\t\t\tif(confirm(\"This will permanently delete this group, including any items in the group library\")){\n\t\t\t\t\tJ(\"#confirm_delete\").val('confirmed');\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t\tJ(\"#type-PublicOpen\").click(function(){\n\t\t\t\tif(confirm(\"Changing a group to Public Open will remove all files from Zotero Storage\")){\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\t\n\tgroup_library_settings: {\n\t\tinit: function(){\n\t\t\t//initially disable inputs with disallowed values for current group type\n\t\t\tif(J(\"#type-PublicOpen\").prop('checked')){\n\t\t\t\t//disallow file storage options for public open groups\n\t\t\t\tJ(\"#fileEditing-admins\").prop('disabled', '1');\n\t\t\t\tJ(\"#fileEditing-members\").prop('disabled', '1');\n\t\t\t}\n\t\t\tif(J(\"#type-Private\").prop('checked')){\n\t\t\t\t//disallow internet readable on private\n\t\t\t\tJ(\"#libraryReading-all\").prop('disabled', '1');\n\t\t\t}\n\t\t\t\n\t\t\t//confirmation on changing group type to public open\n\t\t\tJ(\"#type-PublicOpen\").click(function(){\n\t\t\t\tif(confirm(\"Changing a group to Public Open will remove all files from Zotero Storage\")){\n\t\t\t\t\t//disallow files\n\t\t\t\t\tJ(\"input[name='fileEditing']\").val(['none']);\n\t\t\t\t\tJ(\"#fileEditing-admins\").prop('disabled', '1');\n\t\t\t\t\tJ(\"#fileEditing-members\").prop('disabled', '1');\n\t\t\t\t\t//allow public library\n\t\t\t\t\tJ(\"#libraryReading-all\").prop('disabled', '');\n\t\t\t\t\t\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tJ(\"#type-Private\").click(function(){\n\t\t\t\t//select members only viewing of private group which is mandatory\n\t\t\t\tJ(\"input[name='libraryReading']\").val(['members']);\n\t\t\t\t//disable public library radio for private group\n\t\t\t\tJ(\"#libraryReading-all\").prop('disabled', '1');\n\t\t\t\t//allow files\n\t\t\t\tJ(\"#fileEditing-admins\").prop('disabled', '');\n\t\t\t\tJ(\"#fileEditing-members\").prop('disabled', '');\n\t\t\t});\n\t\t\t\n\t\t\tJ(\"#type-PublicClosed\").click(function(){\n\t\t\t\t//allow files\n\t\t\t\tJ(\"#fileEditing-admins\").prop('disabled', '');\n\t\t\t\tJ(\"#fileEditing-members\").prop('disabled', '');\n\t\t\t\t//allow public library\n\t\t\t\tJ(\"#libraryReading-all\").prop('disabled', '');\n\t\t\t\t\n\t\t\t});\n\t\t}\n\t},\n\t\n\tgroup_view: {\n\t\tinit: function(){\n\t\t\tJ(\"#join-group-button\").click(Zotero.pages.group_view.joinGroup);\n\t\t\tJ(\"#leave-group-button\").click(Zotero.pages.group_view.leaveGroup);\n\t\t\t\n\t\t\tZotero.ui.init.rte('nolinks');\n\t\t},\n\t\t\n\t\tjoinGroup: function(){\n\t\t\tZotero.ui.showSpinner(J('.join-group-div'));\n\t\t\tJ.post(\"/groups/\" + zoteroData.groupID + \"/join\", {ajax:true}, function(data){\n\t\t\t\tif(data.pending === true){\n\t\t\t\t\tJ(\".join-group-div\").empty().append(\"Membership Pending\");\n\t\t\t\t}\n\t\t\t\telse if(data.success === true){\n\t\t\t\t\tZotero.ui.jsNotificationMessage(\"You are now a member of this group\", 'success');\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tJ(\".join-group-div\").empty();\n\t\t\t\t\tZotero.ui.jsNotificationMessage(\"There was a problem joining this group.\", 'error');\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"json\");\n\t\t},\n\t\t\n\t\tleaveGroup: function(){\n\t\t\tif(confirm(\"Leave group?\")){\n\t\t\t\tZotero.ui.showSpinner(J(\".leave-group-div\"));\n\t\t\t\tJ.post(\"/groups/\" + zoteroData.groupID + \"/leave\", {ajax:true}, function(data){\n\t\t\t\t\tif(data.success === true){\n\t\t\t\t\t\tJ('leave-group-div').empty();\n\t\t\t\t\t\tZotero.ui.jsNotificationMessage(\"You are no longer a member of this group\", 'success');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tJ('leave-group-div').empty();\n\t\t\t\t\t\tZotero.ui.jsNotificationMessage(\"There was a problem leaving this group. Please try again in a few minutes.\", 'error');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"json\");\n\t\t\t}\n\t\t}\n\t},\n\t\n\tgroup_index: {\n\t\tinit: function(){\n\t\t\t//set up screen cast player + box\n\t\t\t//J(\"video\").mediaelementplayer();\n\t\t\t//TODO: lightbox?\n\t\t}\n\t},\n\n\tgroupdiscussion_view: {\n\t\tinit: function(){\n\t\t\t\n\t\t}\n\t},\n\t\n\tuser_register: {\n\t\tinit: function(){\n\t\t\t//insert slug preview label\n\t\t\tJ(\"input[name='username']\").after(\"<label id='slugpreview'>Profile URL: \" +\n\t\t\t\t\t\t\t\t\tZotero.config.baseZoteroWebsiteUrl + \"/\" +\n\t\t\t\t\t\t\t\t\tZotero.utils.slugify(J(\"input[name='username']\").val()) +\n\t\t\t\t\t\t\t\t\t\"</label>\");\n\n\t\t\t// When the value of the input box changes,\n\t\t\tJ(\"input[name='username']\").bind(\"keyup change\", Zotero.pages.user_register.nameChange);\n\t\t},\n\t\t\n\t\tnameChange: function(){\n\t\t\t//make sure label is black after each change before checking with server\n\t\t\tJ(\"#slugpreview\").css(\"color\", \"black\");\n\t\t\t\n\t\t\t//create slug from username\n\t\t\tparent.slug = Zotero.utils.slugify( J(\"input[name='username']\").val() );\n\t\t\tJ(\"#slugpreview\").text( \"Profile URL: \" + Zotero.config.baseZoteroWebsiteUrl + \"/\" + parent.slug );\n\t\t\t\n\t\t\t//check slug with server after half-second\n\t\t\tclearTimeout(parent.checkUserSlugTimeout);\n\t\t\tparent.checkUserSlugTimeout = setTimeout(Zotero.pages.user_register.checkSlug, 500);\n\t\t},\n\t\t\n\t\tcheckSlug: function(){\n\t\t\tJ.getJSON(baseURL + \"/user/checkslug\", {\"slug\":slug}, function(data){\n\t\t\t\tif(data.valid){\n\t\t\t\t\tJ(\"#slugpreview\").css(\"color\", \"green\");\n\t\t\t\t} else {\n\t\t\t\t\tJ(\"#slugpreview\").css(\"color\", \"red\");\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\t\n\tuser_profile: {\n\t\tinit: function(){\n\t\t\tJ('#invite-button').click(function(){\n\t\t\t\tvar groupID = J(\"#invite_group\").val();\n\t\t\t\tJ.post(\"/groups/inviteuser\", {ajax:true, groupID:groupID, userID:zoteroData.profileUserID}, function(data){\n\t\t\t\t\tif(data == 'true'){\n\t\t\t\t\t\tZotero.ui.jsNotificationMessage(\"User has been invited to join your group.\", 'success');\n\t\t\t\t\t\tJ('#invited-user-list').append(\"<li>\" + J(\"#invite_group > option:selected\").html() + \"</li>\");\n\t\t\t\t\t\tJ('#invite_group > option:selected').remove();\n\t\t\t\t\t\tif(J('#invite_group > option').length === 0){\n\t\t\t\t\t\t\tJ('#invite_group').remove();\n\t\t\t\t\t\t\tJ('#invite-button').remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, \"text\");\n\t\t\t});\n\t\t}\n\t},\n\tgroup_compose: {\n\t\tinit: function(){\n\t\t\tZotero.ui.init.rte('nolinks');\n\t\t}\n\t},\n\t\n\tindex_index: {\n\t},\n\t\n\tsearch_index: {\n\t\tinit: function(){\n\t\t}\n\t},\n\t\n\tsearch_items: {\n\t\tinit: function(){\n\t\t\ttry{\n\t\t\t\tvar library = new Zotero.Library();\n\t\t\t}\n\t\t\tcatch(e){\n\t\t\t\tZ.debug(\"Error initializing library\");\n\t\t\t}\n\t\t\t\n\t\t\tJ(\"#item-submit\").bind('click submit', J.proxy(function(e){\n\t\t\t\tZ.debug(\"item search submitted\", 3);\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\tvar q = J(\"#itemQuery\").val();\n\t\t\t\tvar globalSearchD = library.fetchGlobalItems({q:q});\n\t\t\t\tglobalSearchD.then(function(globalItems){\n\t\t\t\t\tZ.debug(\"globalItemSearch callback\", 3);\n\t\t\t\t\tZ.debug(globalItems);\n\t\t\t\t\tJ(\"#search-result-count\").empty().append(globalItems.totalResults);\n\t\t\t\t\tvar jel = J(\"#search-results\");\n\t\t\t\t\tjel.empty();\n\t\t\t\t\tJ.each(globalItems.objects, function(ind, globalItem){\n\t\t\t\t\t\tJ(\"#globalitemdetailsTemplate\").tmpl({globalItem:globalItem}).appendTo(jel);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}, this ) );\n\t\t}\n\t},\n\t\n\tindex_start: {\n\t\tinit: function() {\n\t\t\t// Fit the iFrame to the window\n\t\t\tZotero.pages.index_start.sizeIframe();\n\n\t\t\t// Resize the iframe when the window is resized\n\t\t\tJ(window).resize(Zotero.pages.index_start.sizeIframe);\n\t\t\t\n\t\t\t// Change the iframe src\n\t\t\tJ(\".start-select\").click(function(){\n\t\t\t\tJ(\"iframe\").attr(\"src\", J(this).attr(\"href\"));\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\t\n\t\t\tJ(\".start-show-overlay\").click(function(){\n\t\t\t\tJ(\"#start-overlay\").show();\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\t\n\t\t\tJ(\".start-hide-overlay\").click(function(){\n\t\t\t\tJ(\"#start-overlay\").hide();\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\t\n\t\t\tZotero.pages.user_register.init();\n\t\t},\n\t\t// Resize the height of the iframe to fill the page\n\t\tsizeIframe: function() {\n\t\t\tJ(\"iframe\").css(\"height\", J(window).height() - 144);\n\t\t}\n\t},\n\t\n\tindex_startstandalone: {\n\t\tinit: function() {\n\t\t\tvar browsername = BrowserDetect.browser;\n\t\t\tswitch(browsername){\n\t\t\t\tcase 'Chrome':\n\t\t\t\t\tJ('#chrome-connector-download-button').closest('li').detach().prependTo('#recommended-download > ul');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Safari':\n\t\t\t\t\tJ('#safari-connector-download-button').closest('li').detach().prependTo('#recommended-download > ul');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Firefox':\n\t\t\t\t\tJ('#firefox-connector-message').closest('li').detach().prependTo('#recommended-download > ul');\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tJ('#connector-download-button').closest('li').detach().prependTo('#recommended-download > ul');\n\t\t\t\t\tJ('#other-connectors-p').hide();\n\t\t\t}\n\t\t\tJ('#recommended-download > ul').prepend('<li><p>Zotero Connectors allow you to save to Zotero directly from your web browser.</p></li>');\n\t\t\t\n\t\t\tZotero.pages.user_register.init();\n\t\t}\n\t},\n\t\n\tindex_download: {\n\t\tinit: function() {\n\t\t\tvar browsername = BrowserDetect.browser;\n\t\t\tvar os = BrowserDetect.OS;\n\t\t\tvar arch = (navigator.userAgent.indexOf('x86_64') != -1) ? 'x86_64' : 'x86';\n\t\t\t\n\t\t\tif(os == 'Windows'){\n\t\t\t\tJ('#standalone-windows-download-button').closest('li').clone().prependTo('#recommended-client-download ul');\n\t\t\t}\n\t\t\telse if(os == 'Mac'){\n\t\t\t\tJ('#standalone-mac-download-button').closest('li').clone().prependTo('#recommended-client-download ul');\n\t\t\t}\n\t\t\telse if(os == 'Linux'){\n\t\t\t\tif(arch == 'x86_64'){\n\t\t\t\t\tJ('#standalone-linux64-download-button').closest('li').clone().prependTo('#recommended-client-download ul');\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tJ('#standalone-linux32-download-button').closest('li').clone().prependTo('#recommended-client-download ul');\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tJ(\"#recommended-connector-download\").show();\n\t\t\tswitch(browsername){\n\t\t\t\tcase 'Chrome':\n\t\t\t\t\tJ('#chrome-connector-download-button').addClass('recommended-download').closest('li').detach().prependTo('#recommended-connector-download ul');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Safari':\n\t\t\t\t\tJ('#safari-connector-download-button').addClass('recommended-download').closest('li').detach().prependTo('#recommended-connector-download ul');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Firefox':\n\t\t\t\t\tJ('#firefox-connector-download-button').addClass('recommended-download').closest('li').detach().prependTo('#recommended-connector-download ul');\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tJ('#connector-download-button').closest('li').clone().prependTo('#recommended-connector-download ul');\n\t\t\t\t\tJ('#other-connectors-p').hide();\n\t\t\t}\n\t\t\tJ('#recommended-download ul').prepend('<li><p>Zotero Connectors allow you to save to Zotero directly from your web browser.</p></li>');\n\t\t}\n\t},\n\t\n\tindex_bookmarklet: {\n\t\tinit: function(){\n\t\t\tJ(\".bookmarklet-instructions\").hide();\n\t\t\tvar section = J(\"#bookmarklet-tabs li.selected\").data('section');\n\t\t\tJ(\"#\" + section + '-bookmarklet-div').show();\n\t\t\t\n\t\t\tJ(\"#bookmarklet-tabs li\").on('click', function(e){\n\t\t\t\tZ.debug(\"bookmarklet tab clicked\");\n\t\t\t\tJ(\"#bookmarklet-tabs li.selected\").removeClass('selected');\n\t\t\t\tJ(this).addClass('selected');\n\t\t\t\tvar section = J(this).data('section');\n\t\t\t\tZ.debug(section);\n\t\t\t\tJ(\".bookmarklet-instructions\").hide();\n\t\t\t\tJ(\"#\" + section + '-bookmarklet-div').show();\n\t\t\t});\n\t\t}\n\t}\n}; // end zoterojs\n"],"sourceRoot":"/source/"}